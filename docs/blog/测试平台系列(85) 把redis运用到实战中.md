<section id="nice" data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" style="padding: 0 10px; word-spacing: 0px; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; line-height: 1.6; letter-spacing: .034em; color: rgb(63, 63, 63); font-size: 16px; word-break: all;"><blockquote class="multiquote-1" data-tool="mdniceç¼–è¾‘å™¨" style="border: none; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; padding: 15px 20px; line-height: 27px; background-color: #FBF9FD; border-left: 4px solid #409EFF; display: block;">
<p style="padding-bottom: 8px; padding-top: 1em; margin: 0px; line-height: 26px; padding: 0px; font-size: 15px; color: rgb(89,89,89);">å¤§å®¶å¥½~æˆ‘æ˜¯<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">ç±³æ´›</code>ï¼<br>
æˆ‘æ­£åœ¨ä»0åˆ°1æ‰“é€ ä¸€ä¸ªå¼€æºçš„æ¥å£æµ‹è¯•å¹³å°, ä¹Ÿåœ¨ç¼–å†™ä¸€å¥—ä¸ä¹‹å¯¹åº”çš„å®Œæ•´<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">æ•™ç¨‹</code>ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒã€‚<br>
æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">ç±³æ´›çš„æµ‹å¼€æ—¥è®°</code>ï¼Œè·å–æœ€æ–°æ–‡ç« æ•™ç¨‹!</p>
</blockquote>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span>ğŸ“’ </span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #409EFF;">å›é¡¾</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ä¸Šä¸€èŠ‚æˆ‘ä»¬è®©æ”¯æŒäº†<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">å‰ç½®æ¡ä»¶</code>å¤åˆ¶åŠŸèƒ½ã€‚è¿™ä¸€èŠ‚æœ¬æ¥æ‰“ç®—ç»™å¤§å®¶è®²è®²é‚®ä»¶çš„å‘é€ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘æƒ³äº†ä¸€ä¸ªå¾ˆ<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">ä¸¥é‡</code>çš„é—®é¢˜ã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span>ğŸ“’ </span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #409EFF;">é…ç½®</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æˆ‘ä»¬çš„æµ‹è¯•å¹³å°ï¼Œåç»­ä¼šæ¥å…¥yapiï¼Œæ¥å…¥å…¶ä»–ç³»ç»Ÿã€‚åŠ¿å¿…ä¼šæœ‰ä¸€ä¸ªåœ°æ–¹å»ç»´æŠ¤è¿™äº›æ•°æ®ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">åŒ…æ‹¬å‘ä»¶äººé‚®ç®±ï¼Œå¯†ç ç­‰ç­‰æ•°æ®ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;"><strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">ä½†è¿™äº›æ•°æ®åˆé€šå¸¸æ˜¯å…¨å±€å…±äº«ï¼Œå¦‚æœæ”¾åˆ°dbçš„è¯ï¼Œå¾ˆé¸¡è‚‹ï¼Œå› ä¸ºæ•°æ®åªæœ‰1æ¡ï¼Œå¦‚æœæ”¾åˆ°redisï¼Œæœ‰å¯èƒ½æ•°æ®ä¼šä¸¢ã€‚</strong></p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">åšä¸»ä¹Ÿä¸çŸ¥é“æ”¾å“ªé‡Œæ¯”è¾ƒå¥½ï¼Œæœ€åå†³å®šæ”¾åˆ°ä¸€ä¸ªconfiguration.jsonçš„é…ç½®æ–‡ä»¶é‡Œé¢äº†ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ä½†æ˜¯é¢‘ç¹è¯»å–æ–‡ä»¶ï¼Œæ€»å½’æ˜¯ä¸å¥½çš„ã€‚è€Œä¸”æˆ‘ä»¬çº¿ä¸Šä¼šæœ‰è®¸å¤šä¸ªworkerï¼Œè¿˜å¯èƒ½ä¼šæœ‰<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">å†²çª</code>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æƒ³åˆ°æˆ‘ä»¬ä¹‹å‰æ‹¿æè¿‡çš„redisï¼Œè¿™ä¸æ­£æ˜¯å®ƒçš„ç”¨æ­¦ä¹‹åœ°å—ï¼Ÿ</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span>ğŸ“’ </span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #409EFF;">ç¼–å†™é€šç”¨cacheæ–¹æ³•</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸‹<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">ä¸ºå•¥è¦å†™è¿™æ ·çš„é€šç”¨ç¼“å­˜åŠæ³•</code>:</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æˆ‘ä»¬è·å–æ•°æ®ï¼Œæœ‰2éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸ºgetå’Œsetã€‚ç»“åˆç¼“å­˜æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºè¿™æ ·çš„ä¼ªä»£ç :</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">get_cache</span><span class="hljs-params" style="line-height: 26px;">()</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;redis.get(key)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;data&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">is</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">not</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">None</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;data<br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;get_data()<br>&nbsp;&nbsp;&nbsp;&nbsp;redis.set(key,&nbsp;data)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;data<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å°±æ˜¯è¿™ä¹ˆç®€å•çš„ç”¨æ³•ï¼Œå¦‚æœkeyè·å–åˆ°äº†ï¼Œæˆ‘ä»¬ç›´æ¥returnï¼Œå¦‚æœæ²¡è·å–åˆ°ï¼Œæˆ‘ä»¬æ›´æ–°æ•°æ®ï¼Œå¹¶æŠŠæ•°æ®å†™å…¥redisï¼Œæœ€åè¿”å›dataã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">é‚£æˆ‘ä»¬ä¿®æ”¹æ•°æ®çš„æ—¶å€™æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">update_cache</span><span class="hljs-params" style="line-height: 26px;">()</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;update(data)<br>&nbsp;&nbsp;&nbsp;&nbsp;redis.delete(key)<br></code></pre>
<ol data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">å…ˆæ›´æ–°æ•°æ®æº</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">åˆ é™¤ç¼“å­˜æ•°æ®ï¼Œè¿™æ ·ä¸‹å»è·å–ç¼“å­˜çš„æ—¶å€™å°±ä¼š<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">é‡æ–°è·å–æ•°æ®</code>å¹¶å†™å…¥ç¼“å­˜</section></li></ol>
<hr data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; border-top: 1px solid black; height: 1px; padding: 0; border: none; text-align: center; background-image: linear-gradient(to right,rgba(93, 186, 133,0),rgba(93, 186, 133,0.75),rgba(93, 186, 133,0));">
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ä½†å¤§å®¶æœ‰æ²¡æœ‰è§‰å¾—è¿™ä¸ªè¿‡ç¨‹å¾ˆç¹çï¼Œè€Œä¸”å±äº<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">getå’Œsetä¹‹å¤–</code>çš„æ“ä½œï¼Œæ¯æ¯æœ‰è¿™ç§æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒ<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">è£…é¥°å™¨</code>åŒ–ã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span>ğŸ“’ </span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #409EFF;">ç¼–å†™cacheè£…é¥°å™¨</span><span class="suffix" style="display: none;"></span></h3>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">è¿æ¥æœ¬åœ°redisçš„æ–¹æ³•</p>
<p style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">é¦–å…ˆæˆ‘ä»¬åœ¨config.pyé…ç½®å¥½redisçš„è¿æ¥ä¿¡æ¯ï¼Œæ¥ç€ç¼–å†™clientå®¢æˆ·ç«¯ï¼Œå› ä¸ºå®ƒæœ¬èº«æ˜¯è¿æ¥æ± æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€ç›´ç”¨è¿™ä¸ª<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">å®¢æˆ·ç«¯</code>éƒ½æ²¡é—®é¢˜ã€‚ï¼ˆæ‰€ä»¥æˆ‘è¿™é‡ŒæŠŠå®ƒè®¾ç½®ä¸ºäº†propertyï¼‰</p>
</section></li></ul>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-11-21/1637503968200-image.png" alt style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"></figure>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ç¼–å†™RedisHelper</p>
<p style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">helperç±»å«æœ‰2ä¸ªè£…é¥°å™¨ï¼Œcacheè´Ÿè´£è¯»å–(get)ï¼Œup_cacheè´Ÿè´£æ›´æ–°(set)ã€‚</p>
</section></li></ul>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="color: #e6c07b; line-height: 26px;">RedisHelper</span><span class="hljs-params" style="line-height: 26px;">(object)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;pity_prefix&nbsp;=&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"pity"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;pity_redis_client&nbsp;=&nbsp;PityRedisManager().client<br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">get_key</span><span class="hljs-params" style="line-height: 26px;">(key:&nbsp;str)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">f"<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{RedisHelper.pity_prefix}</span>:<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{key}</span>"</span><br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">cache</span><span class="hljs-params" style="line-height: 26px;">(key:&nbsp;str,&nbsp;expired_time=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">3</span>&nbsp;*&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">60</span>)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"""<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è‡ªåŠ¨ç¼“å­˜è£…é¥°å™¨<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:param&nbsp;key:&nbsp;è¢«ç¼“å­˜çš„key<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:param&nbsp;expired_time:&nbsp;é»˜è®¤keyè¿‡æœŸæ—¶é—´<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:return:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"""</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">decorator</span><span class="hljs-params" style="line-height: 26px;">(func)</span>:</span><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@functools.wraps(func)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">wrapper</span><span class="hljs-params" style="line-height: 26px;">(*args,&nbsp;**kwargs)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redis_key&nbsp;=&nbsp;RedisHelper.get_key(key)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;RedisHelper.pity_redis_client.get(redis_key)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;">#&nbsp;ç¼“å­˜å·²å­˜åœ¨</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;data&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">is</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">not</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">None</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;json.loads(data)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;">#&nbsp;è·å–æœ€æ–°æ•°æ®</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_data&nbsp;=&nbsp;func(*args,&nbsp;**kwargs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;json.dumps(new_data)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RedisHelper.pity_redis_client.set(redis_key,&nbsp;info,&nbsp;ex=expired_time)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;new_data<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;wrapper<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;decorator<br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">up_cache</span><span class="hljs-params" style="line-height: 26px;">(key:&nbsp;str)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"""<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redisç¼“å­˜keyï¼Œå¥—äº†æ­¤æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæ›´æ–°æ•°æ®æ“ä½œååˆ é™¤ç¼“å­˜<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:param&nbsp;key:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:return:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"""</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">decorator</span><span class="hljs-params" style="line-height: 26px;">(func)</span>:</span><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@functools.wraps(func)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">wrapper</span><span class="hljs-params" style="line-height: 26px;">(*args,&nbsp;**kwargs)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redis_key&nbsp;=&nbsp;RedisHelper.get_key(key)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;">#&nbsp;è·å–æœ€æ–°æ•°æ®</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_data&nbsp;=&nbsp;func(*args,&nbsp;**kwargs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;">#&nbsp;æ›´æ–°æ•°æ®ï¼Œåˆ é™¤ç¼“å­˜</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RedisHelper.pity_redis_client.delete(redis_key)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;new_data<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;wrapper<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;decorator<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">è¿™é‡Œæˆ‘ä»¬åŸºæœ¬ä¸ŠæŒ‰ç…§ä¹‹å‰è¯´çš„<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #409EFF;">é€»è¾‘</code>æ¥åšçš„ï¼Œä»¥åæˆ‘ä»¬å–æ•°æ®çš„æ–¹æ³•ï¼Œåªéœ€è¦åœ¨æ–¹æ³•å‰é¢+ä¸Šcacheè£…é¥°å™¨ï¼Œå³å¯è‡ªåŠ¨è·Ÿredisæ‰“é€šã€‚ï¼ˆæœ‰ç¼“å­˜åˆ™å–ç¼“å­˜æ•°æ®ï¼Œæ— åˆ™å–çœŸå®æ•°æ®ï¼‰</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span>ğŸ“’ </span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #409EFF;">ç¼–å†™é…ç½®æ–‡ä»¶è·å–æ–¹æ³•</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æˆ‘ä»¬ç¼–å†™configuration.jsonåˆ°æ ¹ç›®å½•:</p>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-11-21/1637504286869-image.png" alt="è¿™é‡Œæ”¾é‚®ä»¶ä¿¡æ¯ï¼Œè¿˜æœ‰æœªæ¥è¦è§„åˆ’çš„yapiä¿¡æ¯" style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"><figcaption style="margin-top: 5px; text-align: center; color: #888; display: block; font-size: 12px; font-family: PingFangSC-Light;">è¿™é‡Œæ”¾é‚®ä»¶ä¿¡æ¯ï¼Œè¿˜æœ‰æœªæ¥è¦è§„åˆ’çš„yapiä¿¡æ¯</figcaption></figure>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;json<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;os<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;app.middleware.RedisManager&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;RedisHelper<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;config&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;Config<br><br><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="color: #e6c07b; line-height: 26px;">SystemConfiguration</span><span class="hljs-params" style="line-height: 26px;">(object)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"""<br>&nbsp;&nbsp;&nbsp;&nbsp;ç³»ç»Ÿé…ç½®<br>&nbsp;&nbsp;&nbsp;&nbsp;"""</span><br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@RedisHelper.cache("configuration",&nbsp;24&nbsp;*&nbsp;3600)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">get_config</span><span class="hljs-params" style="line-height: 26px;">()</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filepath&nbsp;=&nbsp;os.path.join(Config.ROOT,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"configuration.json"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">not</span>&nbsp;os.path.exists(filepath):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">raise</span>&nbsp;Exception(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"æ²¡æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œè¯·æ£€æŸ¥configurationæ–‡ä»¶æ˜¯å¦å·²ç»è¢«åˆ é™¤"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">with</span>&nbsp;open(filepath,&nbsp;mode=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"r"</span>,&nbsp;encoding=<span class="hljs-string" style="color: #98c379; line-height: 26px;">'utf-8'</span>)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">as</span>&nbsp;f:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;json.load(f)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">raise</span>&nbsp;Exception(<span class="hljs-string" style="color: #98c379; line-height: 26px;">f"è·å–ç³»ç»Ÿè®¾ç½®å¤±è´¥,&nbsp;<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{e}</span>"</span>)<br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@RedisHelper.up_cache("configuration")</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">update_config</span><span class="hljs-params" style="line-height: 26px;">(config)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filepath&nbsp;=&nbsp;os.path.join(Config.ROOT,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"configuration.json"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">not</span>&nbsp;os.path.exists(filepath):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">raise</span>&nbsp;Exception(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"æ²¡æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œè¯·æ£€æŸ¥configurationæ–‡ä»¶æ˜¯å¦å·²ç»è¢«åˆ é™¤"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">with</span>&nbsp;open(filepath,&nbsp;mode=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"r"</span>,&nbsp;encoding=<span class="hljs-string" style="color: #98c379; line-height: 26px;">'utf-8'</span>)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">as</span>&nbsp;f:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.dump(config,&nbsp;f)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">raise</span>&nbsp;Exception(<span class="hljs-string" style="color: #98c379; line-height: 26px;">f"æ›´æ–°ç³»ç»Ÿè®¾ç½®å¤±è´¥,&nbsp;<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{e}</span>"</span>)<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ç”±äºé…ç½®æ–‡ä»¶ä¸€èˆ¬å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠkeyçš„è¿‡æœŸæ—¶é—´è®¾ä¸ºäº†1å¤©ï¼ˆå…¶å®å¯ä»¥æ›´ä¹…ä¸€ç‚¹ï¼‰ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">è¿™æ ·ï¼Œæˆ‘ä»¬è°ƒç”¨get_configå°±å¯ä»¥æ‹¿åˆ°ç³»ç»Ÿè®¾ç½®å•¦ï¼Œé‡Œé¢æœ‰å’±ä»¬å¾ˆé‡è¦çš„å‘ä»¶äººä¿¡æ¯ã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span>ğŸ“’ </span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #409EFF;">æµ‹è¯•ä¸€ä¸‹</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å¯åŠ¨ç¨‹åºä»¥åï¼Œæˆ‘ä»¬å»æŸ¥è¯¢redisä¸­å…³äºconfigurationçš„keyï¼Œå°±ç”¨å’±ä»¬è‡ªå·±å†™çš„å®¢æˆ·ç«¯:</p>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-11-21/1637504661344-image.png" alt style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"></figure>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å†æµ‹è¯•ä¸‹è¿‡æœŸæ—¶é—´:</p>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-11-21/1637504694708-image.png" alt style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"></figure>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ä»Šå¤©çš„å†…å®¹å°±åˆ°è¿™é‡Œï¼Œä¸‹èŠ‚æ­£å¼å¼€å¯å‘é‚®ä»¶(æŠ¥å‘Šé€šçŸ¥)ä¹‹æ—…ã€‚</p>
</section>