<section id="nice" data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" style="padding: 0 10px; word-spacing: 0px; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; line-height: 1.6; letter-spacing: .034em; color: rgb(63, 63, 63); font-size: 16px; word-break: all;"><h2 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; text-align: center; background-image: url(https://files.mdnice.com/koala-2.png); background-position: center center; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-size: 50px; margin-top: 1em; margin-bottom: 10px;"><span class="prefix" style="display: none;"></span><span class="content" style="text-align: center; display: inline-block; height: 38px; line-height: 42px; color: #48b378; background-position: left center; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-size: 63px; margin-top: 38px; font-size: 18px; margin-bottom: 10px;">å°è£…Requestç±»</span><span class="suffix"></span></h2>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span style="background-image: url(https://files.mdnice.com/koala-3.png); background-size: 100% 100%; background-repeat: no-repeat; display: inline-block; width: 16px; height: 15px; line-height: 15px; margin-bottom: -1px;"></span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #48b378;">å›é¡¾</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ä¸Šæ¬¡æˆ‘ä»¬å®Œå–„äº†<strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">ç™»å½•æ³¨å†Œ</strong>ç›¸å…³é¡µé¢ï¼Œè¿˜æœ‰<strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">åç«¯æ¥å£</strong>ï¼Œç®—æ˜¯ä»0åˆ°1å®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½çš„ç¼–ç å·¥ä½œã€‚å¯èƒ½å‰ç«¯éƒ¨åˆ†ä¼šè®²çš„æ¯”è¾ƒç²—ç³™ï¼Œå› ä¸ºç¬¬ä¸€å¯èƒ½æ˜¯ç¬”è€…<strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">é€ è¯£</strong>ä¸å¤Ÿï¼Œç¬¬äºŒä¹Ÿè·Ÿæˆ‘ä»¬ç›´æ¥ä»ç°æœ‰çš„<strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">æ¡†æ¶</strong>è¿›è¡Œæ”¹é€ æœ‰å…³ï¼Œå¾ˆå¤šä¸œè¥¿ä¸æ˜¯ä»<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">0</code>å†™åˆ°<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">1</code>ï¼Œè€Œæ˜¯ä»<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">1</code>åˆ°<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">1.1</code>ï¼Œä½†æ˜¯åé¢ä¸ä¸€æ ·ï¼š</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;"><code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">åé¢çš„é¡µé¢éƒ½æ˜¯å’±ä»¬è‡ªå·±å†™ï¼Œè‡ªå·±ç”¨ï¼Œä»0å†™åˆ°1</code></p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span style="background-image: url(https://files.mdnice.com/koala-3.png); background-size: 100% 100%; background-repeat: no-repeat; display: inline-block; width: 16px; height: 15px; line-height: 15px; margin-bottom: -1px;"></span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #48b378;">å®‰è£…requestsåº“</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">ç»ˆç«¯è¾“å…¥<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">pip3 install requests</code>å¹¶æ‰§è¡Œã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span style="background-image: url(https://files.mdnice.com/koala-3.png); background-size: 100% 100%; background-repeat: no-repeat; display: inline-block; width: 16px; height: 15px; line-height: 15px; margin-bottom: -1px;"></span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #48b378;">æ„æ€åç«¯Requestç›¸å…³æ¥å£</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">è¦çŸ¥é“ï¼Œå’±ä»¬è¿™æ˜¯ä¸€ä¸ªæ¥å£æµ‹è¯•å¹³å°(åç»­å¯èƒ½ä¼šé›†æˆUIè‡ªåŠ¨åŒ–ï¼Œä½†æ˜¯è¿™ä¸ªç¬”è€…ä¹Ÿè¿˜æ²¡æœ‰æƒ³å¥½)ã€‚ä¸€ä¸ªæ¥å£è‡ªåŠ¨åŒ–å¹³å°ï¼Œæœ€æ ¸å¿ƒçš„å½“ç„¶æ˜¯å¯¹apiçš„<strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">è¯·æ±‚æ“ä½œ</strong>ï¼Œæ‰€ä»¥å’±ä»¬åˆ»ä¸å®¹ç¼“ï¼ŒåŠ å¿«è¿›åº¦ï¼Œè¶çƒ­æ‰“é“ï¼Œæ¥ç‚¹å¹²è´§å§ã€‚ç”¨<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">requests</code>æ¥ååŠ©æˆ‘ä»¬å®Œæˆæ¥å£è‡ªåŠ¨åŒ–è¯·æ±‚ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶: <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">middleware/HttpClient.py</code></p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;datetime<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;requests<br><br><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="color: #e6c07b; line-height: 26px;">Request</span><span class="hljs-params" style="line-height: 26px;">(object)</span>:</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">__init__</span><span class="hljs-params" style="line-height: 26px;">(self,&nbsp;url,&nbsp;session=False,&nbsp;**kwargs)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.url&nbsp;=&nbsp;url<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.session&nbsp;=&nbsp;session<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.kwargs&nbsp;=&nbsp;kwargs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;self.session:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.client&nbsp;=&nbsp;requests.session()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.client&nbsp;=&nbsp;requests<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">get</span><span class="hljs-params" style="line-height: 26px;">(self)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;self.request(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"GET"</span>)<br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">get_elapsed</span><span class="hljs-params" style="line-height: 26px;">(timer:&nbsp;datetime.timedelta)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;timer.seconds&nbsp;&gt;&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">0</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">f"<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{timer.seconds}</span>.<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{timer.microseconds&nbsp;//&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">1000</span>}</span>s"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">f"<span class="hljs-subst" style="color: #e06c75; line-height: 26px;">{timer.microseconds&nbsp;//&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">100</span>}</span>ms"</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">request</span><span class="hljs-params" style="line-height: 26px;">(self,&nbsp;method:&nbsp;str)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status_code&nbsp;=&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elapsed&nbsp;=&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"-1ms"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;method.upper()&nbsp;==&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"GET"</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.client.get(self.url,&nbsp;**self.kwargs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">elif</span>&nbsp;method.upper()&nbsp;==&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">'POST'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.client.post(self.url,&nbsp;**self.kwargs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">else</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.client.request(method,&nbsp;self.url,&nbsp;**self.kwargs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status_code&nbsp;=&nbsp;response.status_code<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;status_code&nbsp;!=&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">200</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;Request.response(<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">False</span>,&nbsp;status_code)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elapsed&nbsp;=&nbsp;Request.get_elapsed(response.elapsed)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;response.json()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;Request.response(<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">True</span>,&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">200</span>,&nbsp;data,&nbsp;response.headers,&nbsp;response.request.headers,&nbsp;elapsed=elapsed)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;Request.response(<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">False</span>,&nbsp;status_code,&nbsp;msg=str(e),&nbsp;elapsed=elapsed)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">post</span><span class="hljs-params" style="line-height: 26px;">(self)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;self.request(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"POST"</span>)<br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">response</span><span class="hljs-params" style="line-height: 26px;">(status,&nbsp;status_code=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">200</span>,&nbsp;response=None,&nbsp;response_header=None,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request_header=None,&nbsp;elapsed=None,&nbsp;msg=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"success"</span>)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request_header&nbsp;=&nbsp;{k:&nbsp;v&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">for</span>&nbsp;k,&nbsp;v&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;request_header.items()}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_header&nbsp;=&nbsp;{k:&nbsp;v&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">for</span>&nbsp;k,&nbsp;v&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;response_header.items()}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"status"</span>:&nbsp;status,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"response"</span>:&nbsp;response,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"status_code"</span>:&nbsp;status_code,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"response_header"</span>:&nbsp;response_header,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"request_header"</span>:&nbsp;request_header,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"msg"</span>:&nbsp;msg,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">"elapsed"</span>:&nbsp;elapsed,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å¦‚æœæˆ‘æ˜¯äº§å“ç»ç†çš„è¯ï¼Œé‚£ä¹ˆpostmanå°±æ˜¯æˆ‘çš„åŸå‹å›¾:</p>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-3-10/1615389131499-image.png" alt style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"></figure>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">è®²è§£ä¸€ä¸‹å„ä¸ªæ–¹æ³•ï¼Œé¦–å…ˆè¿™æ˜¯ä¸€ä¸ª<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">Request</code>è¯·æ±‚ç±»ï¼Œä»–æ‹¥æœ‰æ ¸å¿ƒæ–¹æ³•: <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">request</code>ï¼Œç›®å‰å’±ä»¬æš‚æ—¶å…ˆåªåšåˆ°æ”¯æŒjsonç±»çš„è¯·æ±‚ï¼Œåç»­è¡¥å…¨<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">form</code>, <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">file</code>ç­‰ç±»å‹çš„è¯·æ±‚ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å…¶å®è¿™ä¸ªç±»åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠrequestsç›¸å…³çš„æ–¹æ³•å‰¥ç¦»äº†å‡ºæ¥ï¼Œå°è£…äº†ä¸€å±‚ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å…¶ä¸­<strong style="font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);">æ„é€ å‡½æ•°</strong>æä¾›äº†ä¸€äº›é€‰é¡¹ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„ä¿¡æ¯ï¼Œurlï¼Œæ˜¯å¦ä»¥sessionçš„æ–¹å¼è¯·æ±‚ç­‰ç­‰ï¼Œkwargsæ¶µç›–äº†requestsåŸç”Ÿçš„å‚æ•°ï¼Œåªè¦ä½ æƒ³ä¼ ï¼Œä½ éƒ½å¯ä»¥ä¼ è¿›æ¥ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;"><code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">get_elapsed</code>æ˜¯æ ¹æ®postmanä¸ºå‚ç…§ï¼Œå¯¹è¯·æ±‚æ—¶é—´åšçš„ä¸€ä¸ªå¤„ç†ï¼Œå¦‚æœå¤§äº1sçš„è¯·æ±‚å“åº”æ—¶é—´ï¼Œé‚£æˆ‘ä»¬ä»¥<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">ç§’</code>ä¸ºå•ä½æ˜¾ç¤ºï¼Œå¦åˆ™ä»¥<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">æ¯«ç§’</code>ä¸ºå•ä½æ˜¾ç¤ºã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;"><code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">response</code>æ˜¯æ„é€ è¿”å›ç»“æ„å¯¹è±¡ï¼Œå¯¹æœ¬æ¬¡è¯·æ±‚çš„æ•°æ®è¿›è¡Œæ•´ç†ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;"><code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">request</code>å°±å°è£…äº†requestsåº“çš„æ ¸å¿ƒæ“ä½œï¼ŒåŸºæœ¬ä¸Šå±äºåŸç”Ÿå¤„ç†ï¼Œå¹¶ä¸”åˆ¤æ–­äº†httpçŠ¶æ€ç ã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span style="background-image: url(https://files.mdnice.com/koala-3.png); background-size: 100% 100%; background-repeat: no-repeat; display: inline-block; width: 16px; height: 15px; line-height: 15px; margin-bottom: -1px;"></span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #48b378;">ç¼–å†™requestæ¥å£</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æ–°å»ºcontrollers/request/http.py</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;flask&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;Blueprint<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;flask&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;jsonify<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;flask&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;request<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;app.middleware.HttpClient&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;Request<br><br>req&nbsp;=&nbsp;Blueprint(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"request"</span>,&nbsp;__name__,&nbsp;url_prefix=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"/request"</span>)<br><br><br><span class="hljs-meta" style="color: #61aeee; line-height: 26px;">@req.route("/http",&nbsp;methods=['POST'])</span><br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">def</span>&nbsp;<span class="hljs-title" style="color: #61aeee; line-height: 26px;">http_request</span><span class="hljs-params" style="line-height: 26px;">()</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;request.get_json()<br>&nbsp;&nbsp;&nbsp;&nbsp;method&nbsp;=&nbsp;data.get(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"method"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">not</span>&nbsp;method:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;jsonify(dict(code=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">101</span>,&nbsp;msg=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"è¯·æ±‚æ–¹å¼ä¸èƒ½ä¸ºç©º"</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp;data.get(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"url"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">if</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">not</span>&nbsp;url:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;jsonify(dict(code=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">101</span>,&nbsp;msg=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"è¯·æ±‚åœ°å€ä¸èƒ½ä¸ºç©º"</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;body&nbsp;=&nbsp;data.get(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"body"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;headers&nbsp;=&nbsp;data.get(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"headers"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;r&nbsp;=&nbsp;Request(url,&nbsp;data=body,&nbsp;headers=headers)<br>&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;r.request(method)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">return</span>&nbsp;jsonify(dict(code=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">0</span>,&nbsp;data=response,&nbsp;msg=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"æ“ä½œæˆåŠŸ"</span>))<br><br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å…¶å®å’Œç™»å½•/æ³¨å†Œæ¥å£éƒ½å¾ˆç›¸ä¼¼ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åˆ›ç«‹äº†ä¸€ä¸ªblueprintï¼Œå‰ç¼€æ˜¯/requestï¼Œåç»­å°±æ˜¯å¼•å…¥åˆšæ‰çš„requestç±»ï¼Œè¿›è¡Œhttpè¯·æ±‚ï¼Œæœ€åè¿”å›responseã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin-top: 1.2em;"><span style="background-image: url(https://files.mdnice.com/koala-3.png); background-size: 100% 100%; background-repeat: no-repeat; display: inline-block; width: 16px; height: 15px; line-height: 15px; margin-bottom: -1px;"></span><span class="prefix" style="display: none;"></span><span class="content" style="font-size: 17px; font-weight: bold; display: inline-block; margin-left: 8px; color: #48b378;">è°ƒæ•´run.py</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªè“å›¾ï¼Œéœ€è¦å»run.pyè¿›è¡Œæ³¨å†Œ:</p>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-3-10/1615389632547-image.png" alt="2è¡Œä»£ç æå®š" style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"><figcaption style="margin-top: 5px; text-align: center; color: #888; display: block; font-size: 12px; font-family: PingFangSC-Light;">2è¡Œä»£ç æå®š</figcaption></figure>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;app.controllers.request.http&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span>&nbsp;req<br>pity.register_blueprint(req)<br></code></pre>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="http://oss.pity.fun/picture/2021-3-10/1615389670795-image.png" alt="æœ€ç»ˆçš„æ•ˆæœå¦‚å›¾æ‰€ç¤º" style="display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;"><figcaption style="margin-top: 5px; text-align: center; color: #888; display: block; font-size: 12px; font-family: PingFangSC-Light;">æœ€ç»ˆçš„æ•ˆæœå¦‚å›¾æ‰€ç¤º</figcaption></figure>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">æœ¬èŠ‚å†…å®¹å°±åˆ°è¿™é‡Œäº†ï¼Œä¸‹ä¸€èŠ‚å’±ä»¬ç¼–å†™å±äºè‡ªå·±çš„ç¬¬ä¸€ä¸ªç»„ä»¶: <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #28ca71;">postman</code>ã€‚åˆæ˜¯å‰ç«¯å†…å®¹äº†ï¼Œå’±ä»¬åšä¸€ä¸ªæ¥è¿‘postmançš„é¡µé¢å³å¯ï¼Œä¸éœ€è¦å¤šé«˜å¤§ä¸Šï¼Œåšä¸œè¥¿è¦æŠ“ä½ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ã€‚æ¯•ç«Ÿå’±ä»¬ä¸æ˜¯ğŸï¼Œå®ƒçš„ç†å¿µæ˜¯è®©ç”¨æˆ·å»é€‚åº”å®ƒã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">åç«¯ä»£ç åœ°å€: <a href="https://github.com/wuranxu/pity" style="word-wrap: break-word; font-weight: bold; color: #48b378; text-decoration: none; border-bottom: 1px solid #48b378;">https://github.com/wuranxu/pity</a></p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 1em; color: rgb(74,74,74); line-height: 1.75em;">å‰ç«¯ä»£ç åœ°å€: <a href="https://github.com/wuranxu/pityWeb" style="word-wrap: break-word; font-weight: bold; color: #48b378; text-decoration: none; border-bottom: 1px solid #48b378;">https://github.com/wuranxu/pityWeb</a></p>
</section>