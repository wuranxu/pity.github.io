{"config":{"indexing":"full","lang":["ja"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%28%E5%BA%8F%29/","text":"\u6d4b\u8bd5\u5e73\u53f0(\u5e8f) \u8d77\u56e0 \u5176\u5b9e\u4e5f\u6ca1\u6709\u4ec0\u4e48\u80cc\u666f\u53ef\u8a00\uff0c\u7b14\u8005\u5176\u5b9e\u5df2\u7ecf\u5f00\u4e86\u5f88\u591a\u4e2a\u9879\u76ee\uff0c\u4f8b\u5982 Lamb \u548c Eagle \uff0c\u90fd\u662f\u6ca1\u5934\u6ca1\u5c3e\u7684\u9879\u76ee\u3002 \u6700\u8fd1\u4e5f\u662f\u56e0\u4e3a\u9057\u61be\u9519\u5931\u4e86\u67d0\u9e45\u4e91\u7684offer\uff0c\u8ba9\u6211\u611f\u5230\u5f88 \u6cae\u4e27 \u5427\u3002\u60f3\u7740\u7684\u662f\u628a\u81ea\u5df1\u6700\u8fd1\u51e0\u5e74\u7684\u4e00\u4e9b\u5de5\u4f5c\u4e0a\u7684\u5185\u5bb9\u5c55\u793a\u51fa\u6765\uff0c\u5c31\u6253\u7b97\u5148\u5f00\u4e2a\u597d\u5934\u5427\u3002 @\u6211\u53bb\u70ed\u996d \u996d\u4f6c \u575a\u6301\u66f4\u65b0\u7684\u6001\u5ea6\u6fc0\u52b1\u4e86\u6211\uff0c\u867d\u7136\u8fd9\u4e2a\u9879\u76ee\u53ef\u80fd\u53c8\u66f4\u4e0d\u4e0b\u53bb\uff0c\u5df2\u7ecf\u5931\u8d25\u4e862\u6b21\u4e86\uff0c\u6211\u8fd9\u4e2a\u4eba\u8fd8\u662f\u6bd4\u8f83\u61d2\uff0c\u65e5\u66f4\u5bf9\u6211\u6765\u8bf4\u5f88\u96be\uff0c\u53ea\u80fd\u8bf4\u5e0c\u671b \u6709\u751f\u4e4b\u5e74 \u80fd\u591f\u6162\u6162\u5199\u4e0b\u53bb\u5427\u3002 \u5982\u679c\u4ee5\u540e\u5199\u5b8c\u4e86\u4e14\u5e7f\u4e3a\u4eba\u77e5\u4e86\uff0c\u5e0c\u671b\u8fd8\u80fd\u6709\u673a\u4f1a\u53bb\ud83d\udc27\uff01\u54c8\u54c8\uff01 \u8bf4\u660e \u521a\u624d\u5728\u516c\u4ea4\u8f66\u4e0a\uff0c\u5927\u6982\u6784\u601d\u4e86\u4e00\u4e9b\u9879\u76ee\u7684\u60f3\u6cd5\uff0c\u6253\u7b97\u8fd9\u6b21\u91c7\u7528\u591a\u79cd\u8bed\u8a00\u6765\u505a\uff0c\u5927\u6982\u68b3\u7406\u4e00\u4e0b\u662f\u8fd9\u6837\u7684: Python \u65ad\u8a00\u670d\u52a1 \u90ae\u4ef6\u670d\u52a1 Golang Job\u670d\u52a1 Java \u9020\u6570\u670d\u52a1 \u8fd8\u6709\u5f88\u591a\u7ec6\u8282\u6ca1\u6709\u53bb\u7ec6\u5316\uff0c \u4e07\u4e8b\u5f00\u5934\u96be \uff0c\u6253\u7b97\u501f\u7740\u8fd9\u80a1\u52b2\u513f\uff0c\u597d\u597d\u7406\u4e00\u7406\uff0c\u51b2\uff01 \u672c\u6765\u6253\u7b97\u4e0d\u547d\u540d\u7684\uff0c\u4f46\u662f\u53c8\u597d\u50cf\u9700\u8981\u5728github\u5bf9\u4ee3\u7801\u6709\u6240\u5c55\u73b0\u3002\u90a3\u4e48\u5c31\u4ee5 \u9057\u61be \u4e3a\u4e3b\u9898\uff0c\u5c31\u53eb\u505a Pity \u5427\uff01 \u5982\u679c\u5c06\u6765\u4f60\u9700\u8981\u505a\u4e8c\u6b21\u5f00\u53d1\u7684\u8bdd\uff0c\u9700\u8981\u638c\u63e1\u4ee5\u4e0b\u6280\u672f\u6808\uff1a Golang: go\u76f8\u5173\u57fa\u7840\u77e5\u8bc6\u548cgorm, gin web\u6846\u67b6\u7b49 Python: Python\u4f1a\u63d0\u4f9b\u4e00\u7cfb\u5217\u7684\u9020\u6570\u548c\u4fbf\u6377\u7684\u529f\u80fd Java: \u7b14\u8005\u7684Java\u4e5f\u5f88\u5dee, \u4e3a\u4e86\u5e73\u53f0\u80fd\u591f\u63a5\u5165\u7684\u7528\u6237\u66f4\u591a\uff0c\u8ba9Java\u540c\u5b66\u4e5f\u80fd\u591f\u4f7f\u7528 grpc\u76f8\u5173\u77e5\u8bc6 react\u76f8\u5173\u6280\u672f\u6808 \u542bantd umi JavaScript es6\u7b49 \u5982\u679c\u4f60\u53ea\u662f\u4f7f\u7528, \u4e0d\u8fdb\u884c\u4e8c\u6b21\u5f00\u53d1, \u90a3\u4e48\u4f60\u638c\u63e12\u6216\u80053\u5373\u53ef\u3002 \u5168\u90e8\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"\u6d4b\u8bd5\u5e73\u53f0(\u5e8f)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%281%29%20%E6%90%AD%E5%BB%BAFlask%20Web%E6%9C%8D%E5%8A%A1/","text":"\u642d\u5efaFlask\u670d\u52a1 \u9879\u76ee\u5730\u5740 \u70b9\u6211\u8fdb\u5165\u9879\u76ee\u5730\u5740 \u4ee3\u7801\u90fd\u4f1a\u5728\u8fd9\u91cc\u6709\u6240\u5c55\u793a\uff0c\u559c\u6b22\u7684\u8bdd\u53ef\u4ee5\u5e2e\u70b9\u4e2astar\uff0c\u8c22\u8c22\u5927\u5bb6\u4e86\uff01\u5982\u679c\u4f60\u559c\u6b22\u8be5\u6559\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u5206\u4eab\u7ed9\u5176\u4ed6\u4eba\u3002 \u5173\u4e8e\u9009\u578b \u60f3\u4e86\u5f88\u4e45\uff0c\u672c\u6765\u6253\u7b97\u7528 Gin \u505a\u4e3a\u540e\u7aef\u670d\u52a1\uff0c\u6216\u8005\u4f5c\u4e3a\u7f51\u5173\u5c42\uff0c\u540e\u9762\u60f3\u4e86\u4e00\u4e0b\u597d\u50cf\u6ca1\u8fd9\u4e2a\u5fc5\u8981\u3002\u8fd9\u4e2a\u5e73\u53f0\u7684\u7528\u6237\u91cf\u4f1a\u6bd4\u8f83\u6709\u9650\uff0c\u800c\u4e14\u4e5f\u4f1a\u505a\u4e00\u5b9a\u7684 \u670d\u52a1\u62c6\u5206 \u3002\u4e8e\u662f\u8fd8\u662f\u91c7\u7528\u4e86\u66f4\u5927\u4f17\u4e00\u70b9\u7684\u53e3\u5473: Flask \uff0c\u6709\u7684\u540c\u5b66\u53ef\u80fd\u4f1a\u8bf4\uff0c\u90a3\u600e\u4e48\u4e0d\u7528 Django \uff1f \u54c8\u54c8\uff0c\u95ee\u5230\u70b9\u4e86\uff0c Django \u7b14\u8005\u662f\u771f\u4e0d\u4f1a\uff0c\u57fa\u672c\u4e0a\u6ca1\u6709\u63a5\u89e6\u8fc7\uff0c\u4ece\u63a5\u89e6 Python Web\u5f00\u53d1 \u7684\u65f6\u5019\uff0c\u6211\u5c31\u7528\u7684\u662f Flask \u3002\u597d\u5728 Flask \u6bd4\u8f83\u7cbe\u7b80\uff0cdjango\u7528\u6237\u4e5f\u80fd\u6bd4\u8f83\u5feb\u7684\u4e0a\u624b\u3002 \u73af\u5883\u51c6\u5907 \u7b14\u8005\u5176\u5b9e\u6bd4\u8f83\u597d\u5947\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u662f\u8981\u770b\u4e00\u4e2a\u5f88\u5b8c\u6574\u7684\u8fc7\u7a0b\uff0c\u8fd8\u662f\u4e00\u4e2a\u5927\u6982\u7684\uff0c\u6240\u4ee5\u53ef\u80fd\u6bd4\u8f83\u968f\u6027\u54c8\uff0c\u590d\u6742\u7684\u5730\u65b9\u5c3d\u91cf\u5b8c\u6574\uff0c\u6bd5\u7adf\u53c8\u5199\u6587\u7ae0\u53c8\u5199\u4ee3\u7801\u7684\u8bdd\uff0c\u8fd8\u662f\u6bd4\u8f83\u8d39\u4e8b\u7684\u3002\u524d\u671f\u53ef\u80fd\u8bb2\u7684\u6bd4\u8f83\u4ed4\u7ec6\uff0c\u540e\u671f\u53ef\u80fd\u4ee5\u4ee3\u7801\u4e3a\u4e3b\u3002\u6240\u4ee5\u6709\u7684\u5730\u65b9\u5982\u679c\u6709\u7591\u95ee\u7684\u8bdd\uff0c\u53ef\u4ee5\u5728\u6587\u7ae0\u4e0b\u9762\u8bc4\u8bba\u6216\u8005\u8054\u7cfb\u672c\u4eba\u3002 \u9884\u5907\u77e5\u8bc6 \u719f\u6089pip\u7684\u4f7f\u7528\u65b9\u6cd5 \u719f\u6089Python\u8bed\u6cd5 \u719f\u6089Pycharm\u7528\u6cd5 \u5de5\u5177/\u8f6f\u4ef6\u51c6\u5907 IDE: Pycharm Python3.4 \u4ee5\u4e0a \u6700\u597d\u662f3.4\u4ee5\u4e0a\uff0c\u7b14\u8005\u8fd9\u91cc\u6bd4\u8f83\u968f\u610f\uff0c\u7528\u7684\u662f3.7\u7248\u672c\uff0c\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\u3002 \u6700\u7b80\u5355\u7684\u4f8b\u5b50 \u7b14\u8005\u76ee\u524d\u7684\u76ee\u5f55\u5728: J:\\projects\\github.com\\wuranxu \u4ee5\u540e\u7684\u4ee3\u7801\u90fd\u4f1a\u4ee5\u8fd9\u4e2a\u76ee\u5f55\u4e3a\u51c6\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002 \u521b\u5efa\u9879\u76ee\u5e76\u901a\u8fc7Pycharm\u6253\u5f00 \u5b89\u88c5Flask\u5305 \u5728\u5f53\u524d\u76ee\u5f55(pity)\u4e0b\u6253\u5f00\u7ec8\u7aef\u5e76\u8f93\u5165: pip3 install flask \u5982\u679c\u5b89\u88c5\u8fc7\u7a0b\u5f88\u7f13\u6162\uff0c\u53ef\u4ee5\u52a0\u4e0a\u8c46\u74e3\u6e90: pip3 install flask -i https://pypi.douban.com/simple \u7531\u4e8e\u7b14\u8005\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86\uff0c\u6240\u4ee5\u6ca1\u6709\u8be6\u7ec6\u7684\u5b89\u88c5\u8fc7\u7a0b\u3002 \u521d\u59cb\u5316app \u5efa\u7acb pity/app/__init__.py \u7f16\u8f91 __init__.py from flask import Flask pity = Flask(__name__) \u4ee3\u7801\u8bb2\u89e3: \u8fd9\u662fflask\u7684 \u7ea6\u5b9a\u7528\u6cd5 , \u5f15\u5165Flask\u7c7b\u5e76\u5b9e\u4f8b\u5316\u4e86\u4e00\u4e2aFlask\u5bf9\u8c61, \u5176\u4e2d__name__\u4e3a\u901a\u4fd7\u5199\u6cd5\u3002 \u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u8fd9\u6837\u7684\u4e00\u4e2a\u540d\u4e3a\"pity\"\u7684Flask \u5b9e\u4f8b \u3002 \u7f16\u5199Web\u670d\u52a1\u6587\u4ef6 \u7f16\u5199 pity/run.py from app import pity @pity.route('/') def hello_world () : return 'Hello World!' if __name__ == \"__main__\" : pity.run( \"0.0.0.0\" , threaded= True , port= \"7777\" ) \u5176\u4e2d @pity.route(\"/\") \u662f\u4e00\u4e2a \u88c5\u9970\u5668 , \u4ee3\u8868hello_world\u8fd9\u4e2a\u51fd\u6570\u4e0e\u8def\u7531 / \u8fdb\u884c\u7ed1\u5b9a\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u8bbf\u95ee\u5230 / \u8def\u7531\u7684\u65f6\u5019\uff0c\u51fd\u6570hello_world\u4f1a\u81ea\u52a8\u6267\u884c\u3002 pity.run(\"0.0.0.0\", threaded=True, port=\"7777\") \u8fd9\u53e5\u8bdd\u8868\u793a\u542f\u52a8web\u670d\u52a1, \u7b2c\u4e00\u4e2a\u53c2\u65700.0.0.0\u8868\u793a\u63a5\u53d7\u4efb\u4f55ip\u7684\u8bbf\u95ee\uff0cthreaded\u8868\u793a\u5982\u679c\u6709\u591a\u4eba\u540c\u65f6\u8bbf\u95ee\u4e00\u4e2a\u63a5\u53e3\u65f6\u662f\u975e\u963b\u585e\u7684\uff0cport\u4ee3\u8868\u670d\u52a1\u6302\u8f7d\u7684\u7aef\u53e3\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5 clearlove \u4e3a\u7aef\u53e3\u53f7: 7777\u3002 \u5c1d\u8bd5\u4e00\u4e0b\u5427\uff01 \u8fd0\u884crun.py\uff0c\u53ef\u5728pycharm\u8fd0\u884c\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u91cc\u8f93\u5165 python3 run.py \u8fd0\u884c\u3002 \u53ef\u4ee5\u770b\u5230 Running on http://0.0.0.0:7777 , \u8bf4\u660e\u670d\u52a1\u542f\u52a8\u6210\u529f\u4e86\uff01 \u9a8c\u8bc1\u4e00\u4e0b \u54b1\u4eec\u90fd\u77e5\u9053 HTTP \u662f\u6709\u5f88\u591a\u79cd\u65b9\u6cd5\u7684\uff0c\u54b1\u4eec\u8fd9\u79cdpity.route\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u65b9\u6cd5\u7684\u8bdd\uff0c\u9ed8\u8ba4\u5c31\u662f GET \u65b9\u6cd5\u3002 \u6253\u5f00\u6d4f\u89c8\u5668\u8f93\u5165: http://localhost:7777/ \u5982\u679c\u770b\u5230\u8fd9\u4e2ahello world\u8bf4\u660e\u4f60\u6210\u529f\u4e86\uff01 \u4eca\u5929\u7684\u8bfe\u7a0b\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u4e0b\u671f\u89c1\u3002\u8bf4\u5b9e\u8bdd\u5199\u7684\u6709\u70b9\u7d2f\uff0c\u4ee3\u7801\u6ca1\u5199\u51e0\u884c\uff0c\u5c41\u8bdd\u5199\u4e86\u4e00\u5927\u5806\uff0c\u540e\u9762\u53ef\u80fd\u8981\u52a0\u5feb\u901f\u5ea6\u4e86\uff01 \u5168\u90e8\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"1.\u642d\u5efaFlask Web\u670d\u52a1"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2810%29%20%E7%BC%96%E5%86%99%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2/","text":"\u7f16\u5199\u6ce8\u518c\u9875\u9762 \u56de\u987e \u4e0a\u4e00\u8282\u8bfe\u6211\u4eec\u5df2\u7ecf\u7f16\u5199\u597d\u4e86\u767b\u5f55\u9875\u9762\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u6b63\u5e38\u767b\u5f55\u4e86\uff0c\u4e0d\u8fc7\u6211\u4eec\u4e0d\u80fd\u8ba9\u7528\u6237\u4e0d\u80fd\u6ce8\u518c\u5440\uff0c\u800c\u4e14\u6ce8\u518c\u4e5f\u4e0d\u80fd\u5b8c\u5168\u9760\u63a5\u53e3\u53bb\u505a\uff0c\u524d\u7aef\u4e5f\u9700\u8981\u63d0\u4f9b\u9875\u9762\u8fdb\u884c\u64cd\u4f5c\u7684\u3002 \u6ce8\u518c\u9875\u9762\u7f16\u5199 \u6211\u4eec\u7684\u76ee\u7684\u662f\uff0c\u628a\u8fd9\u91cc\u7684 \u624b\u673a\u53f7\u767b\u5f55 \u6539\u4e3a \u6ce8\u518c \uff0c\u5e76\u63d0\u4f9b\u5bf9\u5e94\u7684\u8f93\u5165\u6846\u3002 \u9996\u5148\u8fdb\u884c\u540d\u5b57\u4e0a\u7684\u4fee\u6539: \u5c06tab\u6539\u4e3a\u6ce8\u518c \u524d\u7aef\u5c31\u662f\u8fd9\u4e2a\u597d\uff0c\u6240\u89c1\u5373\u6240\u5f97\uff0c\u54b1\u4eec\u6765\u770b\u770b\u767b\u5f55\u9875\u9762\u7684\u6548\u679c: \u4fee\u6539\u6210\u529f \u6309\u7167\u4e0a\u56fe\u7684\u683c\u5f0f\uff0c\u6dfb\u52a04\u4e2a\u5b57\u6bb5: \u7528\u6237\u540d\u3001\u59d3\u540d\u3001\u90ae\u7bb1\u3001\u5bc6\u7801\u3002 \u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u5c31\u6ca1\u6709\u8bbe\u7f6e\u4e8c\u6b21\u786e\u8ba4\u5bc6\u7801\uff0c\u548c\u90ae\u7bb1\u683c\u5f0f\u6821\u9a8c\uff0c\u8fd9\u4e2a\u5728\u6b63\u5e38\u7684web\u7cfb\u7edf\u90fd\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\uff0c\u4f46\u662f\u6211\u4eec\u662f\u4e00\u4e2a\u5feb\u9910\uff0c\u54c8\u54c8\u54c8\u3002\u80fd\u7701\u5219\u7701\uff0c\u7ecf\u8d39\u6709\u9650 \u3002 \u5b8c\u6574\u4ee3\u7801: {type === 'register' && ( <> < ProFormText fieldProps = {{ size: ' large ', prefix: < UserOutlined className = {styles.prefixIcon} /> , }} name=\"username\" placeholder=\"\u8bf7\u8f93\u5165\u7528\u6237\u540d\" rules={[ { required: true, message: \"\u8bf7\u8f93\u5165\u7528\u6237\u540d\", } ]} /> < ProFormText fieldProps = {{ size: ' large ', prefix: < MobileOutlined className = {styles.prefixIcon} /> , }} name=\"name\" placeholder=\"\u8bf7\u8f93\u5165\u59d3\u540d\" rules={[ { required: true, message: \"\u8bf7\u8f93\u5165\u59d3\u540d\", } ]} /> < ProFormText fieldProps = {{ size: ' large ', prefix: < MobileOutlined className = {styles.prefixIcon} /> , }} name=\"email\" placeholder=\"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1\" rules={[ { required: true, message: \"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1\", } ]} /> < ProFormText.Password fieldProps = {{ size: ' large ', prefix: < LockOutlined className = {styles.prefixIcon} /> , type: 'password' }} name=\"password\" placeholder=\"\u8bf7\u8f93\u5165\u7528\u6237\u5bc6\u7801\" rules={[ { required: true, message: \"\u8bf7\u8f93\u5165\u7528\u6237\u5bc6\u7801\", } ]} /> </> )} \u65b0\u589e\u6ce8\u518c\u65b9\u6cd5 \u56e0\u4e3a\u4e4b\u524d\u63d0\u4ea4\u51fd\u6570\u90fd\u662f\u7528\u6765\u767b\u5f55\u7684\uff0c\u8fd9\u6b21\u6211\u4eec\u9700\u8981type='register'\u7684\u65f6\u5019\u6ce8\u518c\uff0c\u800ctype='account'\u7684\u65f6\u5019\u767b\u5f55\u3002 \u5728model\u4e2d\u65b0\u589eregister\u526f\u4f5c\u7528 \u53c2\u8003*login\u65b9\u6cd5 \u9996\u5148\u662f\u8c03\u7528\u6ce8\u518c\u65b9\u6cd5\uff0c\u5982\u679c\u6210\u529f\u5219\u56de\u5230\u767b\u5f55\u9875\u9762\uff0c\u5931\u8d25\u5219\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u7684setType\u5c31\u662findex.js\u4e2d\u7684setType\u65b9\u6cd5\uff0c\u56e0\u4e3adispatch\u4e0d\u8fd4\u56de\u7ed3\u679c\uff0c\u6240\u4ee5\u6211\u4eec\u628a\u6539\u53d8\u72b6\u6001\u7684\u65b9\u6cd5\u4f20\u5165\uff0c\u5728effects\u4e2d\u8fdb\u884c\u6539\u53d8 \u4fee\u6539submit\uff08\u63d0\u4ea4\uff09\u65b9\u6cd5 \u4e0a\u9762\u8bf4\u5230\uff0c\u6211\u4eec\u63d0\u4ea4\u6709\u65f6\u5019\u662f\u6ce8\u518c \u6709\u65f6\u5019\u662f\u767b\u5f55\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4fee\u6539\u4e00\u4e0b: \u7b2c\u4e00\u5904\u5c31\u662f\u8981\u4fee\u6539\u8fd9\u91cc\u7684values\uff0c\u4e4b\u524d\u662f\u53d6\u51fausername\u548cpassword\uff0c\u800c\u73b0\u5728\u6211\u4eec\u9700\u8981\u5168\u90e8\u5b57\u6bb5\u7684\u503c\uff0c\u6240\u4ee5\u76f4\u63a5\u53d6\u5230 values \u5373\u53ef\u3002 \u6ce8\u91ca: \u8fd9\u91ccvalues\u5176\u5b9e\u662f\u8868\u5355\u7684\u6240\u6709\u503c\uff0c\u662f\u4e00\u4e2amap\uff0c\u6bd4\u5982values\u53ef\u80fd\u662f{username: \"woody\"}\u8fd9\u6837\u7684\u5f62\u5f0f\u3002 \u63a5\u7740\u6539\u9020onFinish\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u63d0\u4ea4\u7684\u5b9e\u9645\u8c03\u7528\u65b9\u6cd5: \u53ef\u4ee5\u770b\u5230\uff0c\u6211\u5bf9type\u8fdb\u884c\u4e86\u5224\u65ad\uff0c\u5982\u679c\u662faccount\u5219\u8c03\u7528login/login\u65b9\u6cd5\uff0c\u5426\u5219\u8c03\u7528login/register\u65b9\u6cd5\u3002\u8fd9\u91cc\u628asetType\u4e5f\u4f20\u9012\u4e86\u8fdb\u53bb\u3002 \u6d4b\u8bd5\u4e00\u4e0b \u6ce8\u518c\u5931\u8d25\u5373\u7528\u6237\u540d\u6216\u5bc6\u7801\u5b58\u5728\u65f6\uff0c\u505c\u7559\u5728\u6ce8\u518c\u9875\u9762 \u6ce8\u518c\u6210\u529f\u65f6\uff0c\u8df3\u56de\u767b\u5f55\u9875\u9762 \u7528\u521a\u624d\u6ce8\u518c\u7684\u8d26\u53f7\u767b\u5f55 \u641e\u5b9a\uff01\u8fd9\u7bc7\u6587\u7ae0\u53ef\u80fd\u4ee5\u56fe\u7247\u7684\u5f62\u5f0f\u5c45\u591a\uff0c\u4f46\u662f\u4e5f\u89e3\u51b3\u4e86\u65e0\u6cd5\u6ce8\u518c\u7684\u6838\u5fc3\u95ee\u9898\u3002\u559c\u6b22\u7684\u670b\u53cb\u53ef\u4ee5\u70b9\u4e2a\u8d5e\u652f\u6301\u4e00\u4e0b\u5440\uff01 ant design\u7684\u6807\u9898\u6709\u70b9\u591a \u6211\u4eec\u901a\u8fc7\u5168\u5c40\u641c\u7d22\u90fd\u66ff\u6362\u6210 Pity \u3002 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb","title":"10.\u7f16\u5199\u6ce8\u518c\u9875\u9762"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2811%29%20%E5%B0%81%E8%A3%85Request%E7%B1%BB/","text":"\u5c01\u88c5Request\u7c7b \u56de\u987e \u4e0a\u6b21\u6211\u4eec\u5b8c\u5584\u4e86 \u767b\u5f55\u6ce8\u518c \u76f8\u5173\u9875\u9762\uff0c\u8fd8\u6709 \u540e\u7aef\u63a5\u53e3 \uff0c\u7b97\u662f\u4ece0\u52301\u5b8c\u6210\u4e86\u4e00\u4e2a\u529f\u80fd\u7684\u7f16\u7801\u5de5\u4f5c\u3002\u53ef\u80fd\u524d\u7aef\u90e8\u5206\u4f1a\u8bb2\u7684\u6bd4\u8f83\u7c97\u7cd9\uff0c\u56e0\u4e3a\u7b2c\u4e00\u53ef\u80fd\u662f\u7b14\u8005 \u9020\u8be3 \u4e0d\u591f\uff0c\u7b2c\u4e8c\u4e5f\u8ddf\u6211\u4eec\u76f4\u63a5\u4ece\u73b0\u6709\u7684 \u6846\u67b6 \u8fdb\u884c\u6539\u9020\u6709\u5173\uff0c\u5f88\u591a\u4e1c\u897f\u4e0d\u662f\u4ece 0 \u5199\u5230 1 \uff0c\u800c\u662f\u4ece 1 \u5230 1.1 \uff0c\u4f46\u662f\u540e\u9762\u4e0d\u4e00\u6837\uff1a \u540e\u9762\u7684\u9875\u9762\u90fd\u662f\u54b1\u4eec\u81ea\u5df1\u5199\uff0c\u81ea\u5df1\u7528\uff0c\u4ece0\u5199\u52301 \u5b89\u88c5requests\u5e93 \u7ec8\u7aef\u8f93\u5165 pip3 install requests \u5e76\u6267\u884c\u3002 \u6784\u601d\u540e\u7aefRequest\u76f8\u5173\u63a5\u53e3 \u8981\u77e5\u9053\uff0c\u54b1\u4eec\u8fd9\u662f\u4e00\u4e2a\u63a5\u53e3\u6d4b\u8bd5\u5e73\u53f0(\u540e\u7eed\u53ef\u80fd\u4f1a\u96c6\u6210UI\u81ea\u52a8\u5316\uff0c\u4f46\u662f\u8fd9\u4e2a\u7b14\u8005\u4e5f\u8fd8\u6ca1\u6709\u60f3\u597d)\u3002\u4e00\u4e2a\u63a5\u53e3\u81ea\u52a8\u5316\u5e73\u53f0\uff0c\u6700\u6838\u5fc3\u7684\u5f53\u7136\u662f\u5bf9api\u7684 \u8bf7\u6c42\u64cd\u4f5c \uff0c\u6240\u4ee5\u54b1\u4eec\u523b\u4e0d\u5bb9\u7f13\uff0c\u52a0\u5feb\u8fdb\u5ea6\uff0c\u8d81\u70ed\u6253\u94c1\uff0c\u6765\u70b9\u5e72\u8d27\u5427\u3002\u7528 requests \u6765\u534f\u52a9\u6211\u4eec\u5b8c\u6210\u63a5\u53e3\u81ea\u52a8\u5316\u8bf7\u6c42\u3002 \u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6: middleware/HttpClient.py import datetime import requests class Request (object) : def __init__ (self, url, session=False, **kwargs) : self.url = url self.session = session self.kwargs = kwargs if self.session: self.client = requests.session() return self.client = requests def get (self) : return self.request( \"GET\" ) @staticmethod def get_elapsed (timer: datetime.timedelta) : if timer.seconds > 0 : return f\" {timer.seconds} . {timer.microseconds // 1000 } s\" return f\" {timer.microseconds // 100 } ms\" def request (self, method: str) : status_code = 0 elapsed = \"-1ms\" try : if method.upper() == \"GET\" : response = self.client.get(self.url, **self.kwargs) elif method.upper() == 'POST' : response = self.client.post(self.url, **self.kwargs) else : response = self.client.request(method, self.url, **self.kwargs) status_code = response.status_code if status_code != 200 : return Request.response( False , status_code) elapsed = Request.get_elapsed(response.elapsed) data = response.json() return Request.response( True , 200 , data, response.headers, response.request.headers, elapsed=elapsed) except Exception as e: return Request.response( False , status_code, msg=str(e), elapsed=elapsed) def post (self) : return self.request( \"POST\" ) @staticmethod def response (status, status_code= 200 , response=None, response_header=None, request_header=None, elapsed=None, msg= \"success\" ) : request_header = {k: v for k, v in request_header.items()} response_header = {k: v for k, v in response_header.items()} return { \"status\" : status, \"response\" : response, \"status_code\" : status_code, \"response_header\" : response_header, \"request_header\" : request_header, \"msg\" : msg, \"elapsed\" : elapsed, } \u5982\u679c\u6211\u662f\u4ea7\u54c1\u7ecf\u7406\u7684\u8bdd\uff0c\u90a3\u4e48postman\u5c31\u662f\u6211\u7684\u539f\u578b\u56fe: \u8bb2\u89e3\u4e00\u4e0b\u5404\u4e2a\u65b9\u6cd5\uff0c\u9996\u5148\u8fd9\u662f\u4e00\u4e2a Request \u8bf7\u6c42\u7c7b\uff0c\u4ed6\u62e5\u6709\u6838\u5fc3\u65b9\u6cd5: request \uff0c\u76ee\u524d\u54b1\u4eec\u6682\u65f6\u5148\u53ea\u505a\u5230\u652f\u6301json\u7c7b\u7684\u8bf7\u6c42\uff0c\u540e\u7eed\u8865\u5168 form , file \u7b49\u7c7b\u578b\u7684\u8bf7\u6c42\u3002 \u5176\u5b9e\u8fd9\u4e2a\u7c7b\u505a\u7684\u4e8b\u60c5\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u628arequests\u76f8\u5173\u7684\u65b9\u6cd5\u5265\u79bb\u4e86\u51fa\u6765\uff0c\u5c01\u88c5\u4e86\u4e00\u5c42\u3002 \u5176\u4e2d \u6784\u9020\u51fd\u6570 \u63d0\u4f9b\u4e86\u4e00\u4e9b\u9009\u9879\uff0c\u5305\u62ec\u8bf7\u6c42\u7684\u4fe1\u606f\uff0curl\uff0c\u662f\u5426\u4ee5session\u7684\u65b9\u5f0f\u8bf7\u6c42\u7b49\u7b49\uff0ckwargs\u6db5\u76d6\u4e86requests\u539f\u751f\u7684\u53c2\u6570\uff0c\u53ea\u8981\u4f60\u60f3\u4f20\uff0c\u4f60\u90fd\u53ef\u4ee5\u4f20\u8fdb\u6765\u3002 get_elapsed \u662f\u6839\u636epostman\u4e3a\u53c2\u7167\uff0c\u5bf9\u8bf7\u6c42\u65f6\u95f4\u505a\u7684\u4e00\u4e2a\u5904\u7406\uff0c\u5982\u679c\u5927\u4e8e1s\u7684\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4\uff0c\u90a3\u6211\u4eec\u4ee5 \u79d2 \u4e3a\u5355\u4f4d\u663e\u793a\uff0c\u5426\u5219\u4ee5 \u6beb\u79d2 \u4e3a\u5355\u4f4d\u663e\u793a\u3002 response \u662f\u6784\u9020\u8fd4\u56de\u7ed3\u6784\u5bf9\u8c61\uff0c\u5bf9\u672c\u6b21\u8bf7\u6c42\u7684\u6570\u636e\u8fdb\u884c\u6574\u7406\u3002 request \u5c31\u5c01\u88c5\u4e86requests\u5e93\u7684\u6838\u5fc3\u64cd\u4f5c\uff0c\u57fa\u672c\u4e0a\u5c5e\u4e8e\u539f\u751f\u5904\u7406\uff0c\u5e76\u4e14\u5224\u65ad\u4e86http\u72b6\u6001\u7801\u3002 \u7f16\u5199request\u63a5\u53e3 \u65b0\u5efacontrollers/request/http.py from flask import Blueprint from flask import jsonify from flask import request from app.middleware.HttpClient import Request req = Blueprint( \"request\" , __name__, url_prefix= \"/request\" ) @req.route(\"/http\", methods=['POST']) def http_request () : data = request.get_json() method = data.get( \"method\" ) if not method: return jsonify(dict(code= 101 , msg= \"\u8bf7\u6c42\u65b9\u5f0f\u4e0d\u80fd\u4e3a\u7a7a\" )) url = data.get( \"url\" ) if not url: return jsonify(dict(code= 101 , msg= \"\u8bf7\u6c42\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a\" )) body = data.get( \"body\" ) headers = data.get( \"headers\" ) r = Request(url, data=body, headers=headers) response = r.request(method) return jsonify(dict(code= 0 , data=response, msg= \"\u64cd\u4f5c\u6210\u529f\" )) \u5176\u5b9e\u548c\u767b\u5f55/\u6ce8\u518c\u63a5\u53e3\u90fd\u5f88\u76f8\u4f3c\uff0c\u57fa\u672c\u4e0a\u5c31\u662f\u521b\u7acb\u4e86\u4e00\u4e2ablueprint\uff0c\u524d\u7f00\u662f/request\uff0c\u540e\u7eed\u5c31\u662f\u5f15\u5165\u521a\u624d\u7684request\u7c7b\uff0c\u8fdb\u884chttp\u8bf7\u6c42\uff0c\u6700\u540e\u8fd4\u56deresponse\u3002 \u8c03\u6574run.py \u6211\u4eec\u65b0\u5efa\u4e86\u4e00\u4e2a\u84dd\u56fe\uff0c\u9700\u8981\u53bbrun.py\u8fdb\u884c\u6ce8\u518c: 2\u884c\u4ee3\u7801\u641e\u5b9a from app.controllers.request.http import req pity.register_blueprint(req) \u6700\u7ec8\u7684\u6548\u679c\u5982\u56fe\u6240\u793a \u672c\u8282\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u4e0b\u4e00\u8282\u54b1\u4eec\u7f16\u5199\u5c5e\u4e8e\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7ec4\u4ef6: postman \u3002\u53c8\u662f\u524d\u7aef\u5185\u5bb9\u4e86\uff0c\u54b1\u4eec\u505a\u4e00\u4e2a\u63a5\u8fd1postman\u7684\u9875\u9762\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u591a\u9ad8\u5927\u4e0a\uff0c\u505a\u4e1c\u897f\u8981\u6293\u4f4f\u7528\u6237\u7684\u4f7f\u7528\u4e60\u60ef\u3002\u6bd5\u7adf\u54b1\u4eec\u4e0d\u662f\ud83c\udf4e\uff0c\u5b83\u7684\u7406\u5ff5\u662f\u8ba9\u7528\u6237\u53bb\u9002\u5e94\u5b83\u3002 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb","title":"11.\u5c01\u88c5Request\u7c7b"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2812%29%20%E7%BC%96%E5%86%99%E7%B1%BBpostman%E9%A1%B5%E9%9D%A2%281%29/","text":"\u7f16\u5199\u7c7bpostman\u9875\u9762(1) \u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u5df2\u7ecf\u7f16\u5199\u597d\u4e86requests\u8bf7\u6c42\u76f8\u5173\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u73b0\u5728\u6211\u4eec\u5c31\u628a\u5b83\u8d4b\u80fd\u5230\u524d\u7aef\u3002 \u8fd8\u8bb0\u5f97\u4e4b\u524d\u8bf4\u8fc7\u5bf9 \u8bf7\u6c42\u53c2\u6570 \u505a\u6821\u9a8c\u7684\u4e8b\u60c5\u5417\uff0c\u6070\u597d\u4eca\u5929\u9762\u8bd5\u67d0\u6f6e\u978bapp\u7684\u65f6\u5019\u9762\u8bd5\u5b98\u95ee\u5230\u4e86\u6211\uff0c\u54c8\u54c8\u6211\u4e5f\u7ed9\u4e0d\u51fa\u7b54\u6848\uff0c\u9762\u8bd5\u5b98\u63a8\u8350\u4e86\u4e00\u6b3e\u53eb pydantic \u7684\u5de5\u5177\uff0c\u540e\u9762\u6709\u7a7a\u6211\u53bb\u8bd5\u8bd5\u770b\u3002 \u5f00\u59cb\u7f16\u5199\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u9875\u9762 ps: \u6709\u6761\u4ef6\u7684\u5efa\u8bae\u5f042\u4e2a\u5c4f\u5e55\uff0c\u8fd9\u6837\u5f00\u53d1\u6548\u7387\u66f4\u9ad8\uff0c\u56e0\u4e3a\u4f60\u5728\u5199\u6837\u5f0f\uff0c\u90a3\u8fb9\u4e5f\u8ddf\u7740\u5728\u66f4\u65b0\u3002 \u8fd9\u91cc\u6211\u8fd8\u6ca1\u6709\u89c4\u5212\u597d\u5177\u4f53\u7684\u9875\u9762\u5185\u5bb9\uff0c\u6240\u4ee5\u5f04\u4e00\u4e2a\u8c03\u8bd5\u9875\u9762\uff0c\u4e13\u95e8\u7528\u6765\u53d1\u9001http\u8bf7\u6c42\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u9690\u85cf\u6389\u3002 \u65b0\u5efa src/pages/Request.jsx import React from 'react' ; export default () => { return ( < div > \u4e34\u65f6\u7528 </ div > ); } \u4fee\u6539 config/routes.js \u76ee\u7684\u662f\u4e3a\u4e86\u628a\u6211\u4eec\u521a\u624d\u7684\u9875\u9762\u663e\u793a\u51fa\u6765 \u8fd9\u6bb5\u4ee3\u7801\u7684\u610f\u601d\u662f\uff0c\u52a0\u4e00\u4e2a\u8def\u5f84\u4e3a/request\u7684\u9875\u9762\uff0c\u5e76\u4e14\u8fd9\u4e2a\u9875\u9762\u6620\u5c04\u7684 \u7ec4\u4ef6 \u662f\u6211\u4eec\u521a\u624d\u7f16\u5199\u7684 Request.jsx \u3002 \u5f00\u59cb\u7f16\u5199\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u7ec4\u4ef6 \u65b0\u5efa src/components/Postman/Postman.jsx \u6587\u4ef6\uff0c\u6ce8\u610f\u8fd9\u91cc\u662f jsx \u540e\u7f00\u3002 \u54b1\u4eec\u5148\u5f15\u5165 antd \u91cc\u9762\u7684 Card \u7ec4\u4ef6\u3002 import {Card} from 'antd' ; \u5148\u628a\u7ec4\u4ef6\u67b6\u5b50\u642d\u597d: import React from 'react' ; import { Card } from 'antd' ; export default () => { return ( < Card > </ Card > ); } \u8fd9\u91cc\u6211\u4eec\u6539\u53d8\u7684\u662fpostman\u7ec4\u4ef6\uff0c\u8fd8\u8bb0\u5f97\u521a\u624d\u6709\u4e2aRequest.jsx\u5417\uff1f\u6211\u4eec\u9700\u8981\u505a\u4e00\u6b21 \u5d4c\u5957\u64cd\u4f5c \uff0c\u56e0\u4e3a react \u662f\u652f\u6301\u7ec4\u4ef6\u4e4b\u95f4\u5d4c\u5957\u7684\u3002 \u8c03\u6574\u521a\u624d\u7684 pages/Request.jsx import React from 'react' ; import Postman from '@/components/Postman/Postman' ; export default () => { return ( < Postman /> ); } \u505a\u7684\u4e8b\u60c5\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u50cf\u6211\u4eec\u5f15\u5165 Card \u4e00\u6837\uff0c\u5f15\u5165postman\uff0c\u6d4f\u89c8\u5668\u8fd9\u65f6\u5019\u5df2\u7ecf\u81ea\u52a8\u6e32\u67d3\u597d\u4e86\uff0c\u6211\u4eec\u6765\u770b\u770b: \u53ef\u4ee5\u770b\u5230\u591a\u4e86\u4e00\u4e9b\u7a7a\u767d\u7684\u767d\u6761 \u6ca1\u9519\uff0c\u4e0a\u9762\u7684\u56fe\u7247\u5c31\u662f\u4e00\u4e2a \u7a7a\u7684\u5361\u7247 \uff0c\u6211\u4eec\u9700\u8981\u5728\u5361\u7247\u91cc\u9762\u63cf\u7ed8\u51fa\u6211\u4eec\u7684postman\u3002 \u7814\u7a76\u4e00\u4e0bpostman\u7684\u6784\u9020 \u5355\u7eaf\u770b\u8fd9\u4e2a\u8bf7\u6c42\u9875\u9762\uff0c\u4ed6\u662f\u91c7\u7528\u7684\u4e0a\u4e0b\u7ed3\u6784\uff0c\u5171\u6709\u56db\u5c42\uff0c\u5206\u522b\u662f: url\u5c42\uff0c\u6807\u7b7e\u680f\uff0c\u6807\u7b7e\u5bf9\u5e94\u5185\u5bb9\u548cresponse\u5c42\u3002 \u5982\u679c\u8ba9\u6211\u53bb\u624b\u52a8\u5199\u7684\u8bdd\u5462\uff0c\u6211\u786e\u5b9e\u5199\u4e0d\u51fa\u6765\uff0c\u4e0d\u8fc7\u6211\u6709 Ant Design \u8fd9\u4e2a\u6cd5\u5b9d\u3002 \u5c1d\u8bd5\u7f16\u5199\u7b2c\u4e00\u5c42 \u6211\u60f3\u8bf4\uff0c\u521a\u624dpostman\u5f39\u51fa\u66f4\u65b0\uff0c\u6211\u7684\u9875\u9762\u53c8\u53d8\u4e86\uff0c\u6ca1\u5173\u7cfb\uff0c\u6309\u65b0\u7684\u6765\u5427: \u65b0\u7248postman \u6211\u4eec\u9996\u5148\u5f15\u5165Row, Col2\u4e2a\u7ec4\u4ef6\uff0c\u8fd92\u4e2a\u7ec4\u4ef6\u7c7b\u4f3c\u4e8ebootstrap\u7684\u6805\u683c\u7cfb\u7edf\uff0cCol\u7684\u8bdd\u4f1a\u628a\u5bbd\u5ea6\u5206\u4e3a24\u4efd\uff0c\u6211\u8fd9\u91cc\u7684\u610f\u601d\u662f\u5de6\u4fa7\u5206\u51fa20\u4efd\u7528\u6765\u5b58\u653e url \uff0c\u53f3\u4fa74\u4efd\u7528\u6765\u5b58\u653e Send \u5176\u4e2d\u4ed6\u4eec\u4e4b\u95f4\u7684\u95f4\u8ddd\u7528 gutter \u53c2\u6570\u5b8c\u6210: \u4e0a\u4e0b\u5de6\u53f3\u95f4\u8ddd8px \u7f16\u5199\u8f93\u5165\u6846 \u6253\u5f00 ant design \u7f51\u7ad9\uff0c\u627e\u5230\u6700\u5408\u9002\u7684\u8f93\u5165\u6846: \u5c31\u662f\u4f60\u4e86\uff0c\u76ae\u5361\u4e18!\u8fdb\u53bb\u67e5\u770b\u4ed6\u7684\u6e90\u4ee3\u7801: \u8fd9\u4e2a\u6309\u94ae: \u590d\u5236\u51fa\u8fd9\u6bb5\u4ee3\u7801: <Input addonBefore={selectBefore} addonAfter={selectAfter} defaultValue= \"mysite\" /> \u53ef\u4ee5\u770b\u5230\uff0c3\u5904\u7ea2\u65d7\u98d8\u98d8\uff01\u90a3\u4e48\u6211\u4eec\u6765\u4e00\u4e2a\u4e2a\u770b\u95ee\u9898\u3002 Input\u7ec4\u4ef6\u6211\u4eec\u6ca1\u6709import selectBefore\u53d8\u91cf\u6211\u4eec\u6ca1\u6709\u5b9a\u4e49 selectAfter\u6211\u4eec\u4e5f\u6ca1\u6709\u5b9a\u4e49\uff0c\u4f46\u662f\u7531\u4e8e\u6211\u4eec\u4e0d\u9700\u8981\u540e\u7f00\uff0c\u6240\u4ee5\u76f4\u63a5\u5220\u9664\u5373\u53ef 1\u548c3\u90fd\u5df2\u7ecf\u89e3\u51b3\uff0c\u63a5\u7740\u6211\u4eec\u7ee7\u7eed\u53bb\u590d\u5236selectBefore const selectBefore = ( < Select defaultValue = \"http://\" className = \"select-before\" > < Option value = \"http://\" > http:// </ Option > < Option value = \"https://\" > https:// </ Option > </ Select > ); \u53ef\u4ee5\u770b\u5230\u8fd92\u5904\u53c8\u98d8\u7ea2\uff0c\u5176\u5b9e\u662f\u6211\u4eec\u6ca1\u6709\u590d\u5236\u5b8c\u5168: \u8865\u5168\u540e \u6211\u4eec\u6765\u770b\u770b\u9875\u9762\u7684\u663e\u793a\u6548\u679c: \u662f\u4e0d\u662f\u611f\u89c9\u9ad8\u5ea6\u5c11\u4e86\uff0c\u5bbd\u5ea6\u53c8\u592a\u5bbd\u4e86\uff1f\u90a3\u6211\u4eec\u7a0d\u4f5c\u8c03\u6574: \u6211\u4eec\u628a\u5360\u7684\u5bbd\u5ea6\u6539\u4e3a18\uff0csize\u6539\u6210large\uff0c\u662f\u4e0d\u662f\u770b\u7740\u4f1a\u597d\u4e00\u4e9b\u4e86\u3002 \u63a5\u7740\u6211\u4eec\u53bb\u7f16\u5199Send\u6309\u94ae \u4e5f\u662f\u7c7b\u4f3c\uff0c\u53bbAnt design\u5b98\u7f51\u627e\u4e00\u4e2a\u6700\u5408\u9002\u7684\u7ec4\u4ef6\uff0c\u8fd9\u91cc\u6211\u5c31\u4e0d\u91cd\u590d\u8fd9\u4e2a\u6b65\u9aa4\u4e86\uff0c\u56e0\u4e3a\u6211\u719f\u8bb0\u4e86\u8fd9\u4e9b\u7ec4\u4ef6\u7684api\uff0c\u6240\u4ee5\u6211\u53ef\u4ee5\u76f4\u63a5\u5199\u51fa\u6765: \u770b\u770b\u5b9e\u9645\u6548\u679c: \u7b2c\u4e00\u5c42\u7684UI\u57fa\u672c\u4e0a\u5c31\u7f16\u5199\u5b8c\u6210\u4e86 \u4f46\u662f\u4e2a\u4eba\u4e0d\u662f\u592a\u559c\u6b22\u8fd9\u79cd\u65b9\u6b63\u7684\u8fb9\u6846\uff0c\u8fd8\u662f\u4e60\u60ef\u4ee5\u524d\u7684antd\uff0c\u6240\u4ee5\u6211\u53bb\u8bbe\u7f6e\u91cc\u9762\u6539\u4e00\u4e0b\u5706\u89d2: \u6700\u540e\u6211\u4eec\u7ed9Send\u52a0\u4e00\u4e2a\u5e05\u6c14\u7684 \u56fe\u6807 : \u8bb0\u5f97\u56fe\u6807\u4e5f\u662f\u9700\u8981\u5bfc\u5165\u7684\u54c8\uff01\u770b\u770b\u6548\u679c: \u597d\u4e86\uff0c\u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u4e86\u3002\u4e3b\u8981\u662f\u8fb9\u622a\u56fe\u8fb9\u5199\u8fd8\u662f\u86ee\u8d39\u65f6\u95f4\u7684\uff0c\u540e\u7eed\u4f1a\u52a0\u5feb\u8fdb\u5ea6\u3002\u5982\u679c\u60f3\u5b66\u7684\u670b\u53cb\uff0c\u53ef\u4ee5\u6309\u7167\u6211\u4e4b\u524d\u7ed9\u7684react\u5b66\u4e60\u6559\u7a0b\u53bb\u770b\u770b\u5bf9\u5e94\u7684\u77e5\u8bc6\uff0c\u8fd8\u9700\u8bfe\u4e0b\u591a\u52aa\u529b\u5440\u3002 \u5e7f\u544a\u65f6\u95f4 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"12.\u7f16\u5199\u7c7bpostman\u9875\u9762(1)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2813%29%20%E7%BC%96%E5%86%99%E7%B1%BBpostman%E9%A1%B5%E9%9D%A2%282%29/","text":"\u7f16\u5199\u7c7bpostman\u9875\u9762(2) \u56de\u987e \u4e0a\u7bc7\u6587\u7ae0\u8bf4\u5230\uff0c\u6211\u4eec\u7f16\u5199\u4e86postman\u7684 url \u680f\uff0c\u7ec6\u5fc3\u7684\u89c2\u4f17\u53ef\u80fd\u53d1\u73b0\u4e86: \u6211\u4eec\u7684url\u680f\u5e76\u6ca1\u6709\u8bf7\u6c42\u65b9\u5f0f\u7684\u9009\u62e9\uff0c\u90a3\u6211\u4eec\u73b0\u5728\u5c31\u6765\u8c03\u6574\u4e00\u4e0b\u5427\u3002 \u66f4\u6539\u8bf7\u6c42\u65b9\u5f0f \u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u5c06selectBefore\u6539\u6210\u5982\u4e0b\u4ee3\u7801\u5373\u53ef\uff0c\u628a\u53ef\u9009\u9879\u53d8\u6210\u6211\u4eec \u5e38\u7528 \u76844\u79cd HTTP \u8bf7\u6c42\u65b9\u5f0f\u3002 \u5728\u5c55\u5f00\u4ee5\u540e\u53d1\u73b0 DELETE \u592a\u957f\u4e86\u4ee5\u81f3\u4e8e\u663e\u793a\u4e0d\u5168\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7ed9 Select \u6807\u7b7e\u589e\u52a0\u5bbd\u5ea6: const selectBefore = ( < Select defaultValue = 'GET' style = {{width: 120 , fontSize: 16 , textAlign: ' left '}}> < Option value = 'GET' > GET </ Option > < Option value = 'POST' > POST </ Option > < Option value = 'PUT' > PUT </ Option > < Option value = 'DELETE' > DELETE </ Option > </ Select > ); \u8fd9\u91cc\u6211\u4eec\u8fd8\u7a0d\u5fae\u53d8\u66f4\u4e86\u4e00\u4e0b\u6837\u5f0f\uff0c\u52a0\u5927\u4e86\u5b57\u4f53\u4e3a16\u53f7\uff0c\u5e76\u4e14\u6587\u5b57\u5de6\u5bf9\u9f50\u3002 \u7f16\u5199\u4e2d\u90e8\u6807\u7b7e\u90e8\u5206 \u9996\u5148\u53ef\u4ee5\u786e\u5b9a\u7684\u662f\u4e2d\u95f4\u662f\u6807\u7b7e\u9875\uff0c\u8fd9\u5757\u6bd4\u8f83\u590d\u6742\u3002\u56e0\u4e3a\u5404\u4e2a\u6807\u7b7e\u9875\u91cc\u9762\u7684\u5185\u5bb9\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u6211\u4eec\u5176\u5b9e\u662f\u9700\u8981\u7f16\u5199\u8bf8\u5982 Params \uff0c Headers \uff0c Body \u7b49\u5177\u4f53\u9875\u9762\u7684\u3002 \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u4e0d\u5b8c\u5168\u4eff\u7167postman\u5462\uff1f\u56e0\u4e3a\u54b1\u4eec\u662f\u501f\u9274\u5b83\uff0c\u4e0d\u662f\u5b9e\u73b0\u5b83\uff01\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u6709\u4e9b\u529f\u80fd\u662f\u9700\u8981\u8fdb\u884c \u53d6\u820d \u7684\u3002 \u6211\u4eec\u8fd8\u662f\u53bbant design\u627etab(\u6807\u7b7e\u9875)\uff0c\u8fd9\u91cc\u5c31\u4e0d\u91cd\u590d\u8fc7\u7a0b\u4e86\u3002 \u6548\u679c\u56fe \u7f16\u5199Body\u90e8\u5206 \u54b1\u4eec\u5148\u6765\u5c1d\u8bd5\u7f16\u5199Body\u90e8\u5206\uff0c\u5148\u770b\u770bpostman\u7684\u9875\u9762: \u8001\u89c4\u77e9\uff0c\u6211\u4eec\u8fd8\u662f\u5148\u8fdb\u884c \u62c6\u89e3 : \u5206\u4e0a\u4e0b2\u5c42\uff0c\u4e0a\u5c42\u75313\u4e2a\u7ec4\u4ef6\u7ec4\u6210\uff0c\u5206\u522b\u662fRadio\u5373\u5355\u9009\u6846\uff0c\u4e0b\u62c9\u9009\u62e9\u548c\u6587\u672c\u6309\u94ae\u3002\u8fd9\u4e2a\u7ed3\u8bba\u5462\uff0c\u662f\u6211\u6bd4\u8f83\u719f\u6089ant design\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u603b\u7ed3\u51fa\u6765\u7684\uff0c\u4f60\u4eec\u4e0d\u719f\u6089\u7684\u8bdd\uff0c\u9700\u8981\u591a\u52a0\u7ec3\u4e60\uff0c\u8fd9\u662f\u4e00\u4e2a\u5faa\u5e8f\u6e10\u8fdb\u7684\u8fc7\u7a0b\u3002 \u4e0b\u5c42\u5462\uff0c\u5c31\u662f\u4e00\u4e2aJSON\u7f16\u8f91\u6587\u672c\u6846\u4e86\uff0c\u7a0d\u5fae\u7b80\u5355\u4e00\u4e9b\u3002 \u6211\u4eec\u8fd8\u662f\u5148\u6765\u7f16\u5199\u4e0a\u5c42\uff0c\u9996\u5148\u6211\u4eec\u7f16\u5199Radio\u90e8\u5206: \u5728Body tab\u4e0b\u9762\u53e6\u8d77\u4e00\u884c\uff0c\u8fd9\u91ccRow\u53ef\u4ee5\u89c6\u4e3adiv \u7136\u540eRadio.Group\u662fantd\u91cc\u9762\u7684\u56fa\u5b9a\u7528\u6cd5\uff0c\u7528\u4e8e\u6309\u94ae\u5206\u7ec4\uff0cRadio\u5c31\u662f\u5355\u9009\u6309\u94ae\u4e86\uff0c\u6211\u4eff\u7167postman\uff0c\u628a\u91cc\u9762\u7684\u6240\u6709\u9009\u9879\u90fd\u4ee3\u5165\u8fdb\u6765\uff0c\u770b\u770b\u6548\u679c: \u63a5\u7740\u6211\u4eec\u53bb\u7f16\u5199raw\u91cc\u9762\u7684JSON\u4e0b\u62c9\u83dc\u5355\u3002 \u6709\u5c0f\u4f19\u4f34\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\uff0c\u53ea\u6709\u5f53\u8fd9\u4e2a\u7c7b\u578b\u4e3a raw \u7684\u65f6\u5019\u624d\u4f1a\u51fa\u73b0JSON\u7684\u9009\u62e9\u6846\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u6309\u94ae\u51fa\u4e0d\u51fa\u73b0\u662f\u8ddf\u6211\u4eec\u7684\u9009\u9879\u6709\u5173\u7cfb\u7684\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u7528\u5230React\u7684\u72b6\u6001\u7ba1\u7406: \u5148\u5f15\u5165 useState \u3002 import React, {useState} from 'react' ; \u7136\u540e\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf\uff0c\u7528\u4e8e\u5b58\u653ebody\u7684\u7c7b\u578b: \u5176\u4e2dbodyType\u662f\u53d8\u91cf\u540d\uff0csetBodyType\u662f\u6539\u53d8bodyType\u7684\u65b9\u6cd5\uff0cnone\u662fbodyType\u7684\u9ed8\u8ba4\u503c\u3002 \u4fee\u6539Radio\u76f8\u5173\u7ec4\u4ef6 \u7531\u4e8e\u4e4b\u524d\u6211\u4eec\u7684\u7ec4\u4ef6\u662f \u975e\u53d7\u63a7\u7ec4\u4ef6 \uff0c\u73b0\u5728\u6211\u4eec\u8ba9\u5b83 \u53d7\u63a7 \u8d77\u6765\u3002\u4ec0\u4e48\u53eb\u975e\u53d7\u63a7\u7ec4\u4ef6\u5462\uff0c\u975e\u53d7\u63a7\u7ec4\u4ef6\u6307\u7684\u662f\uff0c\u5982\u679c\u4f60\u6ca1\u6709\u7ed9\u7ec4\u4ef6\u6307\u5b9a\u76f8\u5173\u7684\u503c\u548c\u6539\u53d8\u65b9\u6cd5\uff0c\u5219\u4ed6\u81ea\u5df1\u5728\u5185\u90e8\u7ef4\u62a4\u4e86\u4e00\u5957\uff0c\u6240\u4ee5\u6211\u4eec\u521a\u624d \u5207\u6362 radio\u7684\u65f6\u5019\u6ca1\u6709\u4ec0\u4e48\u969c\u788d\u3002 \u53d7\u63a7\u7ec4\u4ef6 \u7684\u610f\u601d\u662f\u8fd9\u4e2a\u7ec4\u4ef6\u4f60 \u5b8c\u5168\u53ef\u63a7 \uff0c\u5b83\u600e\u4e48\u52a8\uff0c\u80fd\u4e0d\u80fd\u52a8\uff0c\u90fd\u8be5\u4f60\u638c\u63a7\u3002 \u66f4\u591a\u76f8\u5173\u4fe1\u606f\u53ef\u4ee5\u81ea\u5df1\u53bb\u767e\u5ea6\u67e5\u9605\u3002 <Radio.Group defaultValue= 'none' value={bodyType} onChange={e => setBodyType(e.target.value)}> < Radio value = 'none' > none </ Radio > < Radio value = 'form-data' > form-data </ Radio > < Radio value = 'x-www-form-urlencoded' > x-www-form-urlencoded </ Radio > < Radio value = 'raw' > raw </ Radio > < Radio value = 'binary' > binary </ Radio > < Radio value = 'GraphQL' > GraphQL </ Radio > < /Radio.Group> \u8fd9\u65f6\u5019\u53bb\u9875\u9762\u4e0a\u770b\uff0c\u4e0d\u4f1a\u6709\u4ec0\u4e48\u53d8\u5316\uff0c\u4f46\u662f\u6b64\u65f6\u7ec4\u4ef6\u5df2\u7ecf \u53d8\u5f97\u53ef\u63a7 \uff0c\u4f60\u80fd\u6e05\u695a\u5730\u77e5\u9053\u5b83\u5f53\u524d \u9009\u4e2d\u4e86\u4ec0\u4e48\u503c \u3002 \u7f16\u5199JSON\u4e0b\u62c9\u6846 \u5148\u6765\u8bb2\u89e3\u4e00\u4e0b\uff0c\u8fd9\u53e5\u8bdd\u7684\u610f\u601d\u3002 \u5176\u4e2d\u6700\u5916\u9762\u7684 {} \u4ee3\u8868\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u91cc\u9762\u53ef\u4ee5\u7f16\u5199\u4ee3\u7801\u3002bodyType === 'raw' \uff1f xx: null \u8fd9\u4e2a\u5f88\u7b80\u5355\uff0c\u5927\u5bb6\u90fd\u77e5\u9053\u8fd9\u662f\u4e2a\u4e09\u5143\u8868\u8fbe\u5f0f\u3002 \u90a3\u4e48\u8fd9\u53e5\u8bdd\u7684\u610f\u601d\u662f\u4ec0\u4e48\u5462\uff1f\u610f\u601d\u5c31\u662f \u5982\u679cbodyType\u7b49\u4e8eraw \uff0c\u90a3\u4e48\u5c31\u6e32\u67d3\u4e0b\u62c9\u6846\uff0c\u5426\u5219\u663e\u793a\u4e3a null \uff0c\u610f\u601d\u662f\u4ec0\u4e48\u90fd\u4e0d\u5c55\u793a\u3002 \u6211\u4eec\u6765\u8865\u5145\u4e00\u4e0b\u4e0b\u62c9\u83dc\u5355: \u53ef\u4ee5\u770b\u5230\u6709\u8bb8\u591a\u79cd \u770b\u770b\u663e\u793a\u6548\u679c: \u4f46\u662f\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u8fd9\u8fb9\u7684\u9009\u9879\u6539\u53d8\u4ee5\u540e\u4e0a\u9762\u8fd8\u662f\u663e\u793a JSON \uff0c\u6240\u4ee5\u610f\u601d\u662f\u8fd9\u91cc\u4e5f\u9700\u8981\u53d7\u63a7\uff0c\u6211\u4eec\u8981\u6839\u636e\u4ed6\u9009\u62e9\u7684\u6570\u636e\u6765\u663e\u793a\u5177\u4f53\u7684\u5185\u5bb9\u3002 \u540c\u7406\u6211\u4eec\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2arawType\u53d8\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3aJSON: \u63a5\u7740\u6211\u4eec\u8981\u7ed9\u83dc\u5355\u6dfb\u52a0\u70b9\u51fb\u4e8b\u4ef6\uff0c\u5f53click\u5bf9\u5e94\u7684\u7c7b\u578b\u65f6\uff0c\u628arawType\u6539\u6210\u5bf9\u5e94\u7684\u503c\u3002 \u6838\u5fc3\u65b9\u6cd5\u5982\u56fe\uff0c\u9996\u5148\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u65b9\u6cd5\u53eb onClickMenu \uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7528\u6765\u4fee\u6539rawType\uff0c\u5f53\u70b9\u51fbText\u7684\u65f6\u5019\u4f20\u5165Text\u53c2\u6570\uff0c\u5176\u4ed6\u7684\u540c\u7406\u3002 \u770b\u770b\u6548\u679c: \u672c\u6765\u60f3\u4e00\u6b21\u6027\u5199\u5b8c\u4ee3\u7801\u7b97\u4e86\uff0c\u4f46\u662f\u53c8\u60f3\u5c55\u793a\u6574\u4e2a\u7f16\u5199\u8fc7\u7a0b\uff0c\u611f\u89c9\u8fd9\u6837\u6548\u7387\u6bd4\u8f83\u4f4e\uff0c\u8fd9\u4e00\u8282\u8bf4\u5b8c\u624d\u5199\u4e86\u8fd9\u4e48\u70b9\u4e1c\u897f\uff0c\u5c34\u5c2c\u3002\u4e0d\u7ba1\u600e\u4e48\u8bf4\uff0c\u4eca\u5929\u5148\u5230\u8fd9\u91cc\u5427\u3002 \u5e7f\u544a\u65f6\u95f4 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"13.\u7f16\u5199\u7c7bpostman\u9875\u9762(2)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2814%29%20%E7%BC%96%E5%86%99%E7%B1%BBpostman%E9%A1%B5%E9%9D%A2%283%29/","text":"\u7f16\u5199\u7c7bpostman\u9875\u9762(3) \u56de\u987e \u8bb0\u5f97\u4e0a\u4e00\u8282\u6211\u4eec\u7f16\u5199\u4e86postman\u7684\u4e2d\u95f4\u90e8\u5206\uff0c\u5176\u5b9e\u8fd8\u6709header\u90e8\u5206\u7684\u4e00\u4e9b\u8868\u5355\u6570\u636e\u6ca1\u6709\u7f16\u5199\u5b8c\u6210\uff0c\u4eca\u5929\u6211\u4eec\u5c31\u5c3d\u91cf\u5b8c\u6210\u5b83\u5e76\u4e14\u5c1d\u8bd5\u8dd1\u4e00\u4e2a\u5c0f\u5c0f\u7684demo\u3002 \u5bfb\u627e\u53ef\u7f16\u8f91\u8868\u683c\u7ec4\u4ef6 \u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u6bd4\u8f83\u7b80\u5355\uff0c\u57fa\u672c\u4e0a\u5c31\u662f2\u5757: \u6587\u5b57\u90e8\u5206 \u548c \u53ef\u7f16\u8f91\u8868\u683c \u53ef\u7f16\u8f91\u8868\u683c\u7684\u8bdd\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u5199\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528\u73b0\u6210\u7684\u3002\u6211\u4eec\u4e3a\u4e86\u50bb\u74dc\u4e00\u70b9\uff0c\u5c31\u91c7\u7528ant design pro\u5c01\u88c5\u597d\u7684\u9ad8\u9636\u7ec4\u4ef6(\u610f\u601d\u662f\u529f\u80fd\u9f50\u5168\uff0c\u7b80\u5355\u597d\u7528) \u5177\u4f53\u5730\u5740: ProComponents \u90a3\u4e48\u8fd9\u4e2a\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\uff0c\u7531\u4e8e\u6211\u4eec\u7528\u7684 JavaScript \u800c\u975e TypeScript \uff0c\u6240\u4ee5\u5462\u6211\u4eec\u9700\u8981\u590d\u6742\u4e00\u70b9\u627e\u5230\u5bf9\u5e94\u7684\u6e90\u7801: \u5148\u5c55\u5f00\u4ee3\u7801\u7136\u540e\u70b9\u51fb\u8fd9\u4e2ajs\u56fe\u6807 \u5728\u5f39\u51fa\u7684\u7f51\u7ad9\u5c31\u53ef\u4ee5\u627e\u5230\u5bf9\u5e94\u7684JS\u4ee3\u7801\u4e86\uff01 \u6211\u4eec\u8fd9\u4e2a\u9879\u76ee\u672c\u6765\u5c31\u5e26\u6709\u4e86pro\u7684\u7ec4\u4ef6\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u989d\u5916\u5b89\u88c5\u4e86\u54c8\u3002(\u4eb2\u6d4b\u65b0\u7248\u672c\u8fd8\u6709\u70b9\u95ee\u9898) \u7f16\u5199\u53ef\u7f16\u8f91\u8868\u683c\u96cf\u5f62 \u9996\u5148\u5462\uff0c\u6211\u4eec\u8fd9\u4e2a\u7ec4\u4ef6\u662fpostman\u7ec4\u4ef6\uff0c\u4f46\u662f\u5176\u5b9e\u8fd9\u4e2a\u53ef\u7f16\u8f91\u7ec4\u4ef6\u662f\u53ef\u4ee5\u548c\u540e\u9762\u7684 headers \u6807\u7b7e\u8fdb\u884c \u590d\u7528 \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5355\u72ec\u628a\u8fd9\u4e2a\u7ec4\u4ef6\u62bd\u51fa\u6765\u5c01\u88c5\u3002 \u65b0\u5efa src/components/Table/EditableTable.jsx \u4ee3\u7801\u57fa\u672c\u4e0a\u662f\u590d\u5236\u8fc7\u6765\u7684\uff0c\u4f46\u662f\u6211\u4eec\u62bd\u53d6\u4e86\u51e0\u4e2a\u91cd\u8981\u7684\u53c2\u6570: columns \u7531\u4e8e\u6211\u4eec\u7684\u6bcf\u4e2a\u8868\u683c\u7684\u5b57\u6bb5\u53ef\u80fd\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u8bf4\u6211\u4eec\u4e0d\u80fd\u5199\u6b7b dataSource \u5b9e\u9645\u6570\u636e\uff0c\u672c\u6765\u4e0d\u662f\u8fd9\u6837\u7684\uff0c\u4f46\u662f\u53d1\u73b0\u8fd9\u4e2a\u7ec4\u4ef6\u6709\u70b9bug\uff0c\u8ba9\u6211\u6709\u70b9 \u5c0f\u5c34\u5c2c setDataSource \u6539\u53d8dataSource\u7684\u65b9\u6cd5 title \u6bd4\u5982\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u7684title\u662f Query Params \u6ce8\u610f\u8fd9\u91cc\uff0c\u8fd9\u91cc\u6211\u662f\u4ececolumns\u4e2d\u62ff\u5230 \u771f\u5b9e\u5b57\u6bb5 \uff0c\u56e0\u4e3a\u54b1\u4eec\u8fd8\u6709\u5176\u4ed6\u5b57\u6bb5\u6bd4\u5982\u540e\u9762\u7684 \u5220\u9664 \uff0c\u62ff\u5230\u4e4b\u540e\u5728\u7528\u6237\u70b9\u51fb \u65b0\u589e\u4e00\u884c\u6570\u636e \u7684\u65f6\u5019\u9ed8\u8ba4\u7ed9\u5b57\u6bb5\u52a0\u4e0a\u503c\u3002 \u5f15\u5165\u8868\u683c\u7ec4\u4ef6\u5e76\u7f16\u5199columns columns \u6211\u8bbe\u7f6e\u4e863\u4e2a\u5b57\u6bb5\u5206\u522b\u662f KEY , VALUE , DESCRIPTION \u3002\u4e0epostman\u662f\u4fdd\u6301\u4e00\u81f4\u7684\uff0c\u7136\u540e\u6700\u540e\u4e00\u5217\u6211\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u56fe\u6807(\u5220\u9664)\uff0c\u5220\u9664\u65b9\u6cd5\u81ea\u5df1\u624b\u52a8\u7f16\u5199\u4e86\uff08\u8fd8\u662f\u56e0\u4e3a\u4ed6\u6709bug\uff0c\u65e0\u6cd5\u5220\u9664\uff09\u3002\u56e0\u4e3a\u6211\u5728\u5b98\u7f51\u6ca1\u6539\u6e90\u7801\u7684\u60c5\u51b5\u4e0b\u4e5f\u53d1\u73b0 \u65e0\u6cd5\u5220\u9664 \u3002 \u770b\u770b\u6548\u679c: \u96cf\u5f62\u662f\u6709\u4e86 \u5176\u5b9epostman\u505a\u7684\u66f4\u7cbe\u81f4\uff0c\u4e0b\u9762\u7684\u6570\u636e\u4f1a\u6539\u53d8url\u7684\u5185\u5bb9\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u4e5f\u628a\u8fd9\u5757\u5b9e\u73b0\u4e86\u5427\u3002 \u6539\u9020URL \u73b0\u5728\u6211\u4eec\u6709\u4e86params\u53c2\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u7684url\u5c31\u75312\u90e8\u5206\u6784\u6210\u4e86: url params \u6240\u4ee5\u6211\u4eec\u539f\u5148\u7684url\u6539\u53d8\u7684\u65f6\u5019\u5982\u679c\u6709\u53c2\u6570\u53d8\u52a8\u5219\u9700\u8981\u4fee\u6539\u53c2\u6570\u9879\u76ee\uff0c\u5982\u679c\u53c2\u6570\u9879\u76ee\u6709\u53d8\u52a8\u4e5f\u9700\u8981 \u4fee\u6539url \u3002 \u7531\u4e8e\u8fd9\u4e2aProTable\u6709\u4e00\u70b9\u70b9bug\uff0c\u7b14\u8005\u4e5f\u641e\u4e86\u597d\u4e45\u4eca\u665a\uff0c\u4e0d\u8fc7\u6700\u540e\u987a\u5229\u5b8c\u6210\u4e86\uff0c\u5927\u5bb6pull\u6700\u65b0\u7684\u4ee3\u7801\u5c31\u53ef\u4ee5\u770b\u5230\u6548\u679c\u4e86\u3002\u53ef\u60dc\u7684\u662f\u4eca\u5929\u6d6a\u8d39\u592a\u591a\u65f6\u95f4\u4e86\uff0c\u5c31\u53ea\u7b80\u5355\u5bf9\u4ee3\u7801\u7a0d\u4f5c\u63cf\u8ff0\u4e86\u3002 \u8fd9\u4e2a\u8868\u683c\u7ec4\u4ef6\u6709\u4e9b\u53d8\u5316: \u628a\u6b63\u5728\u7f16\u8f91\u7684key\u548c\u4fee\u6539\u53ef\u7f16\u8f91key\u7684\u65b9\u6cd5\u62bd\u79bb\u51fa\u6765\u4e86 extra\u51fd\u6570\u7528\u6765\u5728\u8868\u683c\u6570\u636e\u53d8\u52a8\u7684\u65f6\u5019\u505a\u4e00\u4e9b\u989d\u5916\u7684\u53d8\u52a8\uff0c\u56e0\u4e3a\u8868\u683c\u53d8\u5316\u6211\u4eec\u5f97\u53bb\u66f4\u65b0url \u62fc\u63a5url\u7684\u65b9\u6cd5 url\u7684\u89c4\u5219\u662f http://www.xxx.com + ?\u53c2\u65701=\u503c&\u53c2\u65702=\u503c2 \u6240\u4ee5\u7b2c\u4e00\u4e2a\u53c2\u6570\u7528?\u9694\u5f00\uff0c\u540e\u9762\u90fd\u662f\u7528&\uff0c\u4ee3\u7801\u5199\u7684\u5f88\u6e05\u695a\u4e86\u3002 \u62c6\u89e3url\u7684\u65b9\u6cd5 \u8fd9\u91cc\u5199\u7684 \u6bd4\u8f83\u590d\u6742 \uff0c\u9996\u5148\u5224\u65adurl\u91cc\u9762\u6709\u65e0\u53c2\u6570\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u628a\u8868\u5355\u6570\u636e\u6e05\u7a7a\u3002\u63a5\u7740\u5c31\u662f\u53d6url\u7684\u6570\u636e\u7ec4\u6210\u65b0\u7684\u8868\u5355\u3002\u4f46\u662f\u8868\u5355\u7684\u6bcf\u4e00\u884c\u662f\u7528\u65f6\u95f4\u533a\u522b\u7684\uff0c\u8fd9\u91ccjs\u6267\u884c\u592a\u5feb\uff0c\u6240\u4ee5\u6211\u4ee5\u6570\u7ec4\u7d22\u5f15+\u65f6\u95f4+10\u7684\u65b9\u5f0f\uff0c\u5c31\u7b97now\u5168\u90fd\u4e00\u6837\uff0c\u4e5f\u6ca1\u5173\u7cfb\uff0c\u56e0\u4e3a\u7d22\u5f15\u80af\u5b9a\u4e0d\u4e00\u6837\uff0c\u907f\u514d\u4e86\u4e00\u4e0b\u5b50 \u6dfb\u52a0\u591a\u884c \u7684\u95ee\u9898\uff08\u5f53\u7136\u4f60\u4eec\u662f\u770b\u4e0d\u5230\u8fd9\u4e2a\u95ee\u9898\u7684\uff09\u3002 \u5220\u9664\u53c2\u6570 \u5220\u9664\u53c2\u6570\u7684\u65f6\u5019\u4e5f\u91cd\u65b0\u62fc\u63a5url\u7ed9url\u8f93\u5165\u6846 \u8f93\u5165\u6846url\u53d8\u5316\u4e5f\u6539\u53d8\u53c2\u6570\u8868\u683c \u65b0\u589e\u4e86\u4e00\u4e9b\u53d8\u91cf\u548cset\u53d8\u91cf\u7684\u65b9\u6cd5 \u6587\u4ef6\u603b\u4f53\u4ee3\u7801\u53ef\u4ee5\u53bbgithub\u770b\uff0c\u8fd9\u91cc\u7bc7\u5e45\u6709\u9650\u5c31\u4e0d\u8d34\u4e86\u3002 \u6700\u7ec8\u6548\u679c \u627e\u4e86\u4e2a\u622a\u56fe\u8f6f\u4ef6\uff0c\u8ba9\u5927\u5bb6\u770b\u770b\u6548\u679c\u5427\uff0c\u665a\u5b89\u3002 \u5e7f\u544a\u65f6\u95f4 \u9884\u89c8\u5730\u5740: http://47.112.32.195/ \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"14.\u7f16\u5199\u7c7bpostman\u9875\u9762(3)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2815%29%20%E7%BC%96%E5%86%99%E7%B1%BBpostman%E9%A1%B5%E9%9D%A2%284%29/","text":"\u7f16\u5199\u7c7bpostman\u9875\u9762(4) \u56de\u987e \u5728\u4e0a\u4e00\u8282\u6211\u4eec\u7ec8\u4e8e\u641e\u5b9a\u4e86 Params \u8fd9\u4e2a\u96be\u5543\u7684\u9aa8\u5934\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u7f16\u5199headers\uff0c\u4e0e\u4e4b\u7c7b\u4f3c\u7684\u7ec4\u4ef6\uff0c\u4e00\u8d77\u6765\u8bd5\u8bd5\u5427~ \u601d\u8003 \u601d\u8003\u4e00\u4e0b\uff0c headers \u548c params \u90fd\u662f\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\uff0c\u4f3c\u4e4e\u4e0d\u9700\u8981\u592a\u5927\u7684\u6539\u52a8\uff0c\u54b1\u4eec\u6709\u73b0\u6210\u7684\u53ef\u7f16\u8f91\u8868\u683c\uff0c\u6240\u4ee5\u505a\u8d77\u6765\u4f1a\u5f88\u65b9\u4fbf\u3002 \u7f16\u5199Header\u6a21\u5757 \u5176\u5b9e\u7167\u7406\u8bf4\u8fd9\u79cd\u6a21\u5757\u6bd4\u5982params\u8fd8\u6709headers\u90fd\u53ef\u4ee5\u62bd\u51fa\u4e3a\u5355\u72ec\u7684\u7ec4\u4ef6\uff0c\u4e0d\u8fc7\u8fd9\u91cc\u6211\u89c9\u5f97\u4f3c\u4e4e\u590d\u7528\u7684\u5730\u65b9\u6bd4\u8f83\u5c11\uff0c\u6240\u4ee5\u8fd9\u4e2a\u770b\u4eba\uff0c\u5176\u5b9e\u4e5f\u662f\u53ef\u4ee5\u62bd\u51fa\u6765\u7684\uff0c\u6bd5\u7adf\u4e00\u4e2a\u7ec4\u4ef6\u5982\u679c\u592a\u5927\u4e86\u80af\u5b9a\u4f1a\u51fa\u73b0\u5f88\u591a\u8026\u5408\u95ee\u9898\u3002 \u89c2\u5bdfpostman\u7684headers\u6784\u9020 \u53ef\u4ee5\u770b\u5230postman\u7684\u529f\u80fd\u975e\u5e38\u591a\uff0cheaders\u53ef\u4ee5\u9690\u85cf\uff0c\u4e5f\u7ed9\u4e86\u9ed8\u8ba4\u7684headers\uff0c\u8fd9\u8fb9\u6211\u4eec\u5c31 \u7b80\u5355\u70b9 \uff0c\u8bf4\u8bdd\u7684\u65b9\u5f0f\u7b80\u5355\u70b9\u3002\u53ea\u4fdd\u7559\u6838\u5fc3\u8868\u683c\u5c31\u884c\u4e86\uff01 \u65b0\u589e\u53d8\u91cf\u5b58\u653eheaders\u4fe1\u606f\u4ee5\u53ca\u6b63\u5728\u7f16\u8f91\u7684key\u4fe1\u606f \u5b57\u6bb5\u65b9\u9762\u6211\u4eec\u53ef\u4ee5\u590d\u7528\u4e00\u90e8\u5206 \u4f46\u662f\u9700\u8981\u7a0d\u7a0d\u6539\u52a8\uff0c\u56e0\u4e3a\u5728\u5220\u9664\u7684\u65f6\u5019\uff0c params \u9664\u4e86\u8981\u66f4\u65b0\u8868\u683c\u4ee5\u5916\uff0c\u8fd8\u9700\u8981 \u4fee\u6539url \u3002 \u601d\u8def\u662f\u628acolumns\u53d8\u6210\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u53c2\u6570\u4e3aparams\u7684\u65f6\u5019\u8fd4\u56deparams\u7684\u5185\u5bb9\uff0c\u4e3aheaders\u65f6\u8fd4\u56deheaders\u7684\u5185\u5bb9\uff0c\u5176\u4ed6\u7684\u6ca1\u6709\u53d8\u5316\u3002 \u6539\u52a8onDelete\u65b9\u6cd5 \u4e0a\u4e00\u6b65\u6539\u52a8\u5c31\u662f\u4e3a\u4e86onDelete\u80fd\u591f\u5bf9\u4e0d\u540c\u7684\u7c7b\u578b\u505a\u51fa\u4e0d\u540c\u7684\u5220\u9664\u64cd\u4f5c\uff0c\u5982\u679c\u4e0d\u662fparams\u5219\u4e0d\u4fee\u6539url\u4e86\u3002 \u6700\u540e\u662f\u518d\u5f15\u5165\u4e00\u4e2a\u53ef\u7f16\u8f91\u8868\u683c title\u662fheaders\uff0c\u6ca1\u6709extra\uff0c\u6570\u636e\u662fheaders\u548csetHeaders\u7b49\u3002 \u8c03\u6574\u4e00\u4e0bEditableTable\u7ec4\u4ef6 \u8fd9\u91cc\u52a0\u4e86\u4e00\u4e2a\u5224\u65ad\uff0c\u56e0\u4e3a\u4e0d\u4f20\u5165\u8fd9\u4e2a\u5b57\u6bb5\u4f1a\u5bfc\u81f4\u9875\u9762\u5d29\u6e83 \u770b\u770b\u6548\u679c \u53ef\u4ee5\u770b\u5230\u6570\u636e\u4e92\u4e0d\u5f71\u54cd \u7f16\u5199Body(\u91cd\u5934\u620f\u6765\u4e86) \u9996\u5148\u9700\u8981\u4e86\u89e3\u4e00\u4e0b\uff0c\u54b1\u4eec\u7684body\u91cc\u9762\u5176\u5b9e\u662f\u4ee3\u7801\u7f16\u8f91\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u5f00\u6e90\u7684 monaco react\u7248\u672c \uff0c\u9700\u8981\u4e86\u89e3\u8be6\u60c5\u7684\u8bdd\u53ef\u4ee5\u53bb\u5b83\u7684\u5b98\u7f51\u770b\u3002 \u6ce8\u610f : \u6211\u4eec\u6682\u65f6\u53ea\u652f\u6301JSON\u7c7b\u578b\u7684\u8bf7\u6c42\u4f53\uff0c\u540e\u9762\u4f1a\u589e\u52a0form\u548cfile\u7b49\u7b49\uff0c\u56e0\u4e3a\u6211\u5df2\u7ecf\u5b9e\u5728\u8981\u770b\u5230\u6210\u679c\u4e86\u3002\u3002\u3002 \u5b89\u88c5@monaco-editor/react npm install @monaco-editor/react --save \u7f16\u5199\u7f16\u8f91\u5668\u7ec4\u4ef6 src/components/Postman/CodeEditor.jsx \u8fd9\u91cc\u5f88\u7b80\u5355\u54c8\uff0c\u57fa\u672c\u4e0a\u662f\u628a\u5b98\u7f51\u7684\u4f8b\u5b50\u62ff\u6765\u6284\u4e86\u4e00\u4e0b \u5bf9\u4e8e\u90a3\u79cd\u53ef\u4f20\u53ef\u4e0d\u4f20\u7684\u53d8\u91cf\uff0c\u5c31\u7ed9\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u6bd4\u5982 height \u548c theme \uff0c\u56e0\u4e3a\u5b83\u652f\u6301\u9ed1\u8272\u4e3b\u9898\u54e6\u3002 \u5f15\u5165\u7ec4\u4ef6 \u5224\u65adbodyType\u662f\u4e0d\u662fraw\uff0c\u5982\u679c\u662fraw\u624d\u663e\u793a\u6b64\u7ec4\u4ef6\uff0c\u5426\u5219\u663e\u793anull\u3002\u4e09\u5143\u8868\u8fbe\u5f0f\u5927\u5bb6\u5e94\u8be5\u90fd\u6e05\u695a\u3002 \u7136\u540e\u5305\u88c5\u4e86\u4e00\u5c42\u5361\u7247\uff0c\u56e0\u4e3a\u539f\u5148\u7684\u4e0d\u5e26\u6709\u8fb9\u6846\uff0c\u6240\u4ee5\u6211\u8fd9\u91cc\u7528Card\u7ec4\u4ef6\u5305\u88c5\u4e86\u4e00\u5c42\uff0c\u7136\u540e\u7ed9\u8fb9\u8ddd\u8bbe\u7f6e\u4e3a0\u3002 \u770b\u770b\u6548\u679c \u53ef\u4ee5\u770b\u5230\u8fd8\u6709\u5177\u4f53\u7684\u9519\u8bef\u63d0\u793a \u603b\u4f53\u8fd8\u662f\u4e0d\u9519\u7684\u5427\uff1f\u81f3\u6b64\uff0c\u6211\u4eec\u4e00\u671f\u7684\u529f\u80fd\u57fa\u672c\u4e0a\u5c31\u5feb\u8981\u641e\u597d\u4e86\uff0c\u8fd8\u5dee\u4e00\u4e2a\u76f8\u5e94\u4fe1\u606f\u680f\u3002\u540e\u9762\u7684\u4e1a\u4e3b\u522b\u6025\uff0c\u6162\u6162\u6765\u3002 \u6765\u4e2a\u52a8\u56fe\u611f\u53d7\u4e0b\u5427 \u8054\u8c03\u63a5\u53e3 \u7f16\u5199\u8bf7\u6c42\u65b9\u6cd5 \u548c\u4ee5\u524d\u4e00\u6837\uff0c\u76f4\u63a5\u63a5\u53d7\u53c2\u6570\u5e76\u8bf7\u6c42\u5373\u53ef import request from '@/utils/request' ; import { CONFIG } from '@/consts/config' ; export async function request ( params ) { return request( ` ${CONFIG.URL} /request/http` , { method : 'POST' , data : params, }); } \u7f16\u5199\u7ec4\u88c5headers\u7684\u65b9\u6cd5 \u56e0\u4e3aheaders\u662f\u4e00\u4e2amap\uff0c\u6240\u4ee5\u54b1\u4eec\u9700\u8981\u628a\u5b83\u4ece\u6570\u7ec4\u53d8\u4e3amap\u3002 \u521b\u5efa\u4e00\u4e9b\u72b6\u6001 loading \u7528\u6765\u5728\u8bf7\u6c42\u7684\u65f6\u5019\u663e\u793a\u4e00\u4e2aloading\u7684\u72b6\u6001 method \u5c06\u8bf7\u6c42\u65b9\u5f0f\u7684select\u7ec4\u4ef6\u6539\u6210\u4e86\u53d7\u63a7\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u62ff\u5230\u5b83\u7684\u503c\u3002 response \u540e\u7eed\u6211\u4eec\u4f1a\u9700\u8981\u663e\u793a\u51fa\u5177\u4f53\u7684\u7ed3\u679c\u3002 \u7f16\u5199\u7ec4\u88c5\u8bf7\u6c42\u6570\u636e\u7684\u65b9\u6cd5 onRequest \u8fd9\u4e2a\u65b9\u6cd5\u662f\u70b9\u51fb\u5230 Send \u6309\u94ae\u540e\u6267\u884c\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u770b\u5230\u9996\u5148\u8ba9Send\u6309\u94ae\u5904\u4e8e\u52a0\u8f7d\u4e2d\uff0c\u9632\u6b62\u91cd\u590d\u70b9\u51fb\u3002\u7136\u540e\u5224\u65ad\u53c2\u6570\u662f\u5426\u5408\u7406\uff0c\u4e0d\u5408\u7406\u76f4\u63a5\u5f39\u51fa\u63d0\u793a(\u5f85\u4f1a\u4f1a\u6709\u52a8\u56fe\u6f14\u793a) \u6700\u540e\u5c31\u662f\u6539\u56de\u539f\u6765\u7684\u72b6\u6001\u5e76\u8bbe\u7f6e\u8fd4\u56de\u7ed3\u679c\u4e86\u3002 \u540e\u7aef\u8c03\u6574 \u7531\u4e8e\u5728\u6211\u8bd5\u7528\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\uff0c\u540e\u7aef\u9047\u5230\u4e86\u51e0\u4e2a\u7684\u95ee\u9898\u3002 \u5982\u679cresponse\u662f\u6587\u672c\u6216\u8005\u975eJSON\uff0c\u90a3\u4e48\u7a0b\u5e8f\u4f1a\u76f4\u63a5\u62a5\u9519 \u5982\u679cheaders\u6ca1\u6709\u4f20\u5165\uff0c\u90a3\u4e48\u7a0b\u5e8f\u4e5f\u4f1a\u62a5\u9519 \u89e3\u51b3\u529e\u6cd5\u5982\u56fe\uff0c\u5982\u679c\u80fd\u8f6c\u4e3aJSON\uff0c\u5c31\u76f4\u63a5\u8f6c\u4e3aJSON\uff0c\u5426\u5219\u8fd4\u56detext\u3002 \u5982\u679c\u6ca1\u6709headers\u5219\u76f4\u63a5\u8fd4\u56de{}\u800c\u4e0d\u53bb\u904d\u5386headers\u4e86\u3002 ps: response_header\u4e5f\u9700\u8981\u5224\u65ad\uff0c\u89c1\u5b8c\u6574\u4ee3\u7801\u3002 \u5b8c\u6574\u4ee3\u7801: import datetime import requests class Request (object) : def __init__ (self, url, session=False, **kwargs) : self.url = url self.session = session self.kwargs = kwargs if self.session: self.client = requests.session() return self.client = requests def get (self) : return self.request( \"GET\" ) @staticmethod def get_elapsed (timer: datetime.timedelta) : if timer.seconds > 0 : return f\" {timer.seconds} . {timer.microseconds // 1000 } s\" return f\" {timer.microseconds // 100 } ms\" def request (self, method: str) : status_code = 0 elapsed = \"-1ms\" try : if method.upper() == \"GET\" : response = self.client.get(self.url, **self.kwargs) elif method.upper() == 'POST' : response = self.client.post(self.url, **self.kwargs) else : response = self.client.request(method, self.url, **self.kwargs) status_code = response.status_code if status_code != 200 : return Request.response( False , status_code) elapsed = Request.get_elapsed(response.elapsed) data = self.get_response(response) return Request.response( True , 200 , data, response.headers, response.request.headers, elapsed=elapsed) except Exception as e: return Request.response( False , status_code, msg=str(e), elapsed=elapsed) def post (self) : return self.request( \"POST\" ) def get_response (self, response) : try : return response.json() except : return response.text @staticmethod def response (status, status_code= 200 , response=None, response_header=None, request_header=None, elapsed=None, msg= \"success\" ) : request_header = {k: v for k, v in request_header.items()} if request_header is not None else {} response_header = {k: v for k, v in response_header.items()} if response_header is not None else {} return { \"status\" : status, \"response\" : response, \"status_code\" : status_code, \"response_header\" : response_header, \"request_header\" : request_header, \"msg\" : msg, \"elapsed\" : elapsed, } \u7b80\u5355\u8f93\u51fa\u4e00\u4e0b\u8fd4\u56de\u7ed3\u679c \u611f\u89c9\u7bc7\u5e45\u5df2\u7ecf\u5f88\u957f\u4e86\uff0c\u6587\u5b57\u7684\u65b9\u5f0f\u592a\u6162\u4e86\uff0c\ud83e\udd14\u8981\u4e0d\u8981\u51fa\u4e2a\u89c6\u9891\u5440\uff1f\u4e0d\u7136\u7684\u8bdd\u6211\u611f\u89c9\u6253\u5b57\u597d\u7d2f\uff0c\u6548\u679c\u8fd8\u4e00\u822c\u3002 \u76f4\u63a5\u6765\u770b\u4e00\u4e2a\u5b8c\u6574\u7684\u4f8b\u5b50\uff0c\u6d4b\u81ea\u5df1\u7684\u63a5\u53e3: \u5e7f\u544a\u65f6\u95f4 \u9884\u89c8\u5730\u5740: http://47.112.32.195/ \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"15.\u7f16\u5199\u7c7bpostman\u9875\u9762(4)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2816%29%20%E7%BC%96%E5%86%99%E7%B1%BBpostman%E9%A1%B5%E9%9D%A2%285%29/","text":"\u7f16\u5199\u7c7bpostman\u9875\u9762(5) \u56de\u987e \u4e0a\u8282\u6211\u4eec\u628a\u6d41\u7a0b\u4e32\u8d77\u6765\u4e86\uff0c\u4f46\u662f\u8fd8\u6ca1\u6765\u5f97\u53ca\u7f16\u5199\u8fd4\u56de\u9875\u9762\u3002\u90a3\u4e48\u6211\u4eec\u4eca\u5929\u5c31\u628a\u8fd4\u56de\u7ed3\u679c\u5c55\u793a\u51fa\u6765\u3002 \u601d\u8003 \u8fd9\u8fb9\u8865\u5145\u4e00\u4e0b\uff0c\u521a\u624d\u6211\u5c1d\u8bd5\u5728\u81ea\u5df1\u7684\u4e91\u670d\u52a1\u5668\u90e8\u7f72pity\u9879\u76ee\uff0c\u4f46\u662f\u53d1\u73b0\u81ea\u5df1\u7ed9\u81ea\u5df1\u6316\u4e86\u4e2a\u5751\u3002 pity\u9879\u76ee\u6ca1\u6709\u914d\u7f6e requirements.txt \uff0c\u5bfc\u81f4\u8bb8\u591a\u8f6f\u4ef6\u7248\u672c\u6ca1\u6709\u5b89\u88c5\uff0c\u670d\u52a1\u8dd1\u4e0d\u8d77\u6765\uff1b \u63a5\u7740\u6211\u4eec\u5c31\u628a\u9700\u8981\u5b89\u88c5\u7684\u8865\u5168\u4e00\u4e0b\uff01 \u65b0\u5efapity/requirements.txt\u6587\u4ef6 flask-cors logbook pyjwt==1.7.1 mysql-connector-python flask-sqlalchemy flask requests \u5b89\u88c5\u5b8c\u6574\u7248\u672c: pip3 install -r requirements.txt \u7f16\u5199\u8fd4\u56de\u7ed3\u679c\u9875\u9762 \u6211\u4eec\u53d1\u73b0\uff0c\u5728\u8bf7\u6c42body\u4e3a none \u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2abody\u4f1a\u538b\u7f29\u5230tab\u9875\u4e0a\uff0c\u5982\u679c\u54b1\u4eec\u8981\u5c55\u793aresponse\u7684\u8bdd\uff0c response \u4e5f\u4f1a\u88ab\u6324\u4e0a\u53bb\uff0c\u8fd9\u6837\u5c31\u975e\u5e38\u96be\u770b\uff0c\u6240\u4ee5\u6211\u4eec\u8fdb\u884c\u4e00\u4e0b\u6539\u9020: \u6211\u4eec\u628abodyType === 'raw'\u6539\u6210'none'\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd9\u8fb9\u6682\u65f6\u53ea\u652f\u6301JSON\u5f62\u5f0f\u7684\u6570\u636e\uff0c\u6240\u4ee5\u6682\u65f6\u53ef\u4ee5\u8fd9\u4e48\u5199\uff0c\u9488\u5bf9none\u7684\u65f6\u5019\u989d\u5916\u5199\u4e00\u4e2adiv\u7ec4\u4ef6\uff0c\u5e76\u7ed9\u5b83\u8bbe\u7f6e\u597d\u9ad8\u5ea6\u548c\u6587\u672c\u5c45\u4e2d\uff0c\u8fd9\u6837\u5c31\u6709\u5185\u5473\u4e86\uff01 \u8fd9\u662f\u6211\u5728mac\u4e0a\u7684\u663e\u793a\u6548\u679c(\u4eca\u5929\u5728\u516c\u53f8\u6478\u9c7c\u5199\u6587\u7ae0) \u7f16\u5199Tabs \u4e0a\u56fe\u5df2\u7ecf\u5feb\u770b\u5230\u5b9e\u9645\u6548\u679c\u4e86\uff0c\u6700\u7ec8\u4ee3\u7801\u8fd8\u5f97\u6da6\u8272\u4e00\u4e0b\u3002 \u6539\u5199\u7f16\u8f91\u5668\u65b9\u6cd5 \u76ee\u524d\u6211\u4eec\u7684\u7f16\u8f91\u5668\uff0c\u521d\u59cb\u503c\u5b57\u6bb5\u662f defaultValue \uff0c\u8fd9\u6837\u7684\u8bdd\u4e00\u65e6\u5237\u65b0\u4e86\u8fd4\u56de\u7ed3\u679c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u503c\u4e0d\u4f1a\u518d\u6b21\u66f4\u65b0\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6539\u5199\uff0c\u5177\u4f53\u7684\u65b9\u6cd5\u5c31\u662f\u8ba9Editor\u53d8\u6210 \u53d7\u63a7\u7ec4\u4ef6 \u3002 \u53bb\u6389defaultValue\u5b57\u6bb5\uff0c\u6539\u4e3avalue \u7f16\u5199Body tab\u4e0b\u7684\u7f16\u8f91\u5668 \u7b80\u5355\u5c01\u88c5\u5e76\u5f15\u7528\u4e86\u4e00\u4e0b\uff0cJSON.stringify\u8fd9\u4e2a\u65b9\u6cd5\u662f\u7528\u6765\u5e8f\u5217\u5316JSON\u7684\uff0c\u540e\u9762\u7684\u53c2\u6570\u662f\u4e3a\u4e86\u8ba9JSON\u66f4\u7f8e\u89c2\u3002 \u53ef\u80fd\u5927\u5bb6\u6709\u6ce8\u610f\u5230\u6709\u4e2atarBarExtra...\u8fd9\u6837\u7684\u5b57\u6bb5\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u5462\uff0c\u662f\u6211\u4eec\u7528\u6765\u663e\u793ahttp\u72b6\u6001\u7801\u548c\u76f8\u5e94\u65f6\u95f4\u7684\uff0c\u5bf9\u6bd4postman\u5c31\u662f: \u56e0\u4e3a\u91cc\u9762\u5185\u5bb9\u5f88\u591a\uff0c\u6240\u4ee5\u6211\u628a\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u7ec4\u4ef6\u62bd\u79bb\u51fa\u6765\u3002 \u7f16\u5199http\u72b6\u6001\u7801\u7ec4\u4ef6 \u6700\u7ec8\u7ed3\u679c\u5c31\u662f\u8fd9\u6837\uff0c\u7b80\u5355\u7684html\u4ee3\u7801\u3002 \u8fd9\u91cc\u80af\u5b9a\u6709\u5c0f\u4f19\u4f34\u6709 \u7591\u60d1 \uff0c\u4e3a\u4ec0\u4e48\u4f60\u628astyle\u8fd9\u79cd\u6587\u4ef6\u653e\u5230css\u91cc\u9762\u53bb\u5462\uff1f\u5176\u5b9e\u4e0d\u662f\u6211\u4e0d\u60f3\uff0c\u662f \u56e0\u4e3a\u6211\u61d2 \uff0c\u800c\u4e14\u9700\u8981\u6211\u624b\u52a8\u5199\u6837\u5f0f\u7684\u5730\u65b9\u5176\u5b9e\u8fd8\u86ee\u5c11\u7684\uff0c\u5982\u679c\u5199\u7684\u4e00\u822c\u662f\u5728\u540c\u7ea7\u76ee\u5f55\u7f16\u5199 \u540c\u540d\u6587\u4ef6.less \uff0c\u91cc\u9762\u7528less\u7684\u8bed\u6cd5\u53bb\u5199\u6837\u5f0f\uff0c\u8fd9\u91cc\u6211\u6c42\u65b9\u4fbf\uff0c\u5c31\u4e00\u9505\u7aef\u4e86\u3002 \u5927\u6982\u6548\u679c: \u7a0d\u5fae\u8c03\u6574\u4e00\u4e0b\u4e4b\u524d\u7684\u4ee3\u7801 \u8bf7\u6c42\u90e8\u5206\u548c\u5168\u5c40\u7684response\u51b2\u7a81\u4e86\uff0c\u8c03\u6574\u4e00\u4e0b: \u9ad8\u5ea6\u4e5f\u7ed9\u964d\u4f4e\u4e00\u70b9\uff0c\u4e0d\u7136\u592a\u9ad8\u4e86\uff0c\u4e00\u70b9\u90fd\u4e0d\u62ff\u7834\u4ed1\uff01 \u6539\u5199Request\u7c7b \u83b7\u53d6cookie \u6211\u4eec\u4e4b\u524d\u7684\u540e\u7aef\u63a5\u53e3\u5e76\u6ca1\u6709\u62ff\u51facookie\u4fe1\u606f\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6539\u9020\u4e00\u4e0b\u3002 \u548cheaders\u7b49\u7c7b\u4f3c \u7f16\u5199\u6700\u540e\u7684\u90e8\u5206 \u7531\u4e8ecookies\u548cheaders\u90fd\u662f\u4ee5\u8868\u5355\u7684\u5f62\u5f0f\u5c55\u793a\u7684\uff0c\u800c\u4e14\u90fd\u662f key-value \u7684\u683c\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c01\u88c5\u6210Table\u7ec4\u4ef6\u3002 \u7f16\u5199columns \u7f16\u5199\u6839\u636e\u4e0d\u540c\u5b57\u6bb5\uff08cookies\u548cresponse_headers\uff09\u6765\u83b7\u53d6\u5bf9\u5e94\u6570\u636e\u7684\u65b9\u6cd5 \u5f15\u51652\u4e2a\u7ec4\u4ef6\u5e76\u4e14\u8bbe\u7f6e\u4e0d\u5206\u9875 \u4e24\u5757\u9664\u4e86\u8fd9\u91cc\u4e0d\u4e00\u6837\uff0c\u5176\u4ed6\u90fd\u662f\u4e00\u6837\u7684\u3002 \u6700\u7ec8\u6548\u679c \u5e7f\u544a\u65f6\u95f4 \u9884\u89c8\u5730\u5740: http://47.112.32.195/ \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"16.\u7f16\u5199\u7c7bpostman\u9875\u9762(5)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2817%29%20%E8%AE%BE%E8%AE%A1%E7%94%A8%E4%BE%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","text":"\u56de\u987e \u5f88\u4e45\u6ca1\u6709\u66f4\u65b0\u6587\u7ae0\u4e86\uff0c\u6b64\u65f6\u5df2\u7ecf\u662f23:23\u4e86\uff0c\u6709\u4e9b\u6127\u759a\uff0c\u56e0\u4e3a\u81ea\u5df1\u6700\u8fd1\u4ea4\u63a5\u7684\u4e8b\u60c5+\u751f\u6d3b\u7684\u4e8b\u60c5\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0c\u6240\u4ee5\u5230\u4e86\u665a\u4e0a\u5c31\u6ca1\u6709\u529b\u6c14\u6765\u66f4\u65b0\u4e86\u3002\u8fd9\u91cc\u5c31\u66f4\u52a0\u4f69\u670dWQRF\u8fd9\u4e2a \u795e\u4e00\u6837\u7684\u7537\u4eba \uff01 \u8bb0\u5f97\u4e0a\u6b21\u8bf4\u5230\uff0c\u6211\u4eec\u5236\u4f5c\u4e86\u4e00\u4e2a\u7b80\u6613\u7684\u652f\u6301 HTTP \u8bf7\u6c42\u7684\u9875\u9762\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u5374 \u6ca1\u6709\u628a\u5b83\u7528\u5230\u7528\u4f8b\u4e4b\u4e2d \u3002 \u7528\u4f8b\u8bbe\u8ba1 \u6211\u8fd9\u4e2a\u4eba\u6709\u4e2a\u5f88\u5927\u7684\u7f3a\u70b9\uff0c\u60f3\u5230\u5565\u5c31\u505a\u5565\uff0c\u7ecf\u5e38\u662f\u4e8b\u5148\u8bbe\u8ba1\u4e00\u4e2a\u7b80\u7248\uff0c\u7136\u540e\u540e\u7eed\u8fdb\u884c \u6253\u78e8 \uff0c\u5176\u5b9e\u8fd9\u6837\u5bf9\u4e00\u4e2a\u6210\u719f\u7684\u7cfb\u7edf\u6765\u8bf4\u592a\u4e0d\u53cb\u597d\u4e86\uff0c\u5f88\u591a\u4e1c\u897f\u53ef\u80fd\u5728\u8bbe\u8ba1\u7684\u65f6\u5019\u5c31\u592a\u8fc7\u4e8e\u5c40\u9650\u4e86\u3002\u8fd9\u91cc\u4e0d\u626f\u5e9f\u8bdd\u4e86\uff0c\u76f4\u63a5\u8fdb\u5165\u4e3b\u9898\u5427\u3002 \u5173\u4e8e\u7528\u4f8b \u601d\u8003\u8fc7\u5f88\u591a\u6b21\uff0c\u76ee\u524d\u5728\u516c\u53f8\u5236\u4f5c\u7684\u6d4b\u8bd5\u5e73\u53f0\u6709\u4e2a\u7279\u70b9\uff0c\u5c31\u662f\u4e0d\u9700\u8981\u5199\u4ee3\u7801\u5c31\u53ef\u4ee5\u5b8c\u6210 \u63a5\u53e3\u6d4b\u8bd5\u7528\u4f8b \u7684\u7f16\u5199\uff0c\u53ea\u4e0d\u8fc7\u788d\u4e8e\u5bf9\u5927\u5bb6\u7684\u6210\u957f\u6ca1\u6709\u592a\u5927\u7684 \u63d0\u5347 \uff0c\u6240\u4ee5\u6211\u8fd9\u6b21\u6253\u7b97\u505a\u5230 \u517c\u5bb9 \uff0c\u5982\u679c\u4f60\u613f\u610f\u5199\u4ee3\u7801\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5 \u5bfc\u5165\u4ee3\u7801 \u6216\u8005\u5728\u7ebf\u7f16\u5199\u4ee3\u7801\uff0c\u5982\u679c\u4e0d\u60f3\u770b\u5230\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528 \u65e0\u7801\u6a21\u5f0f \uff0c\u5e76\u4e14\u8fd8\u8981\u505a\u5230\u968f\u65f6\u8f6c\u6362\u3002 \u7528\u4f8b\u7684\u751f\u547d\u5468\u671f \u4ece\u8bbe\u8ba1\u4e0a\u6765\u8bf4\uff0c\u7528\u4f8b\u4ee5\u94fe\u8def\u7684\u5f62\u5f0f\u6267\u884c\uff0c\u4e00\u4e2a\u7528\u4f8b\u4f1a\u6709\u5f88\u591a\u4e2a \u4e34\u65f6\u53d8\u91cf \uff0c\u901a\u8fc7\u5b83\u4eec\uff0c\u6211\u4eec\u53ef\u4ee5\u89e3\u51b3\u6570\u636e\u4f9d\u8d56\uff0c\u5b8c\u6210\u5bf9\u6574\u4e2a\u6d41\u7a0b\u7684\u6d4b\u8bd5\u3002\u7531\u4e8e\u7b14\u8005 \u753b\u56fe\u80fd\u529b \u6709\u9650\uff0c\u6240\u4ee5\u8fd9\u91cc\u5c31\u4e0d\u4e0a\u56fe\u4e86\u3002\u4e00\u4e2a\u7528\u4f8b\u5206\u4e3a\u51e0\u4e2a\u90e8\u5206: \u524d\u7f6esetUp\u64cd\u4f5c \u7528\u4f8b\u6267\u884c \u540e\u7f6etearDown\u64cd\u4f5c \u5176\u4e2d\u6bcf\u4e2a\u64cd\u4f5c\u91cc\u9762\u90fd\u62e5\u6709\u5f88\u591a\u4e2a\u6b65\u9aa4(step)\uff0c\u6bcf\u4e2astep\u4ea7\u751f\u7684\u6570\u636e\u90fd\u4f1a\u5728\u4e3b\u7528\u4f8b\u7684\u751f\u547d\u5468\u671f\u4e2d\u4fdd\u5b58\uff0c\u8fbe\u5230\u6570\u636e\u4e92\u901a\u7684\u6548\u679c\u3002 \u8fd9\u91cc\u7684\u6b65\u9aa4\u53ef\u4ee5\u662f http\u8bf7\u6c42 \uff0c redis\u64cd\u4f5c \uff0c sql\u8bed\u53e5 \uff0c python\u4ee3\u7801\u7247\u6bb5 \u7b49\u7b49\uff0c\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u53ef\u4ee5\u62e5\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\uff0c\u901a\u8fc7\u8fd4\u56de\u503c\u89e3\u51b3\u6570\u636e\u4f9d\u8d56\u95ee\u9898\u3002 \u4e3e\u4f8b \u5982\u679c\u6211\u4eec\u9700\u8981\u83b7\u53d6\u7528\u6237\u7684 \u4f59\u989d \uff0c\u90a3\u4e48\u6211\u4eec\u7684\u7528\u4f8b\u5c06\u8fd9\u6837\u53bb\u7f16\u5199: \u5148\u8bbe\u8ba1\u4e00\u4e2a\u767b\u5f55\u7684\u6d4b\u8bd5\u7528\u4f8b: \u7528\u4f8b\u540d\u79f0: \u7528\u6237\u767b\u5f55 \u524d\u7f6e\u6761\u4ef6: \u65e0 \u7528\u4f8b\u6267\u884c: \u53d1\u9001http\u8bf7\u6c42\uff0c\u83b7\u53d6token \u540e\u7f6e\u6761\u4ef6: \u65e0 \u65ad\u8a00\u8bed\u53e5: \u6821\u9a8chttp\u72b6\u6001\u7801\u7b49 \u7f16\u5199\u83b7\u53d6\u7528\u6237\u4f59\u989d\u7684\u6d4b\u8bd5\u7528\u4f8b(\u4e3b\u7528\u4f8b): \u7528\u4f8b\u540d\u79f0: \u83b7\u53d6\u7528\u6237\u4f59\u989d \u524d\u7f6e\u6761\u4ef6: step1: \u7528\u6237\u767b\u5f55 \u8bb0\u5f55\u8fd4\u56de\u503c\u4e3astep1\uff0c\u901a\u8fc7step1.token\u83b7\u53d6\u5230\u767b\u5f55\u63a5\u53e3\u4e2d\u7684token\u6570\u636e \u7528\u4f8b\u6267\u884c: \u628abody\u4e2d\u7684${step1.token}\u66ff\u6362\u4e3a\u771f\u5b9e\u7684token\uff0c\u53d1\u9001http\u8bf7\u6c42\u3002 \u540e\u7f6e\u6761\u4ef6:\u65e0 \u65ad\u8a00\u8bed\u53e5: \u6821\u9a8ccode\u548cmsg\u4ee5\u53cadata\u5b57\u6bb5\u4e2d\u7684\u4fe1\u606f \u521d\u671f\u770b\u4e0d\u61c2\u4e0d\u8981\u7d27\uff0c\u5927\u6982\u65b9\u5411\u662f\u8fd9\u4e2a\u6837\u5b50\u3002\u4e3b\u8981\u4e5f\u6ca1\u6709\u56fe\u7247\uff0c\u8fd9\u662f\u4e00\u4e2a\u6d41\u7a0b\u5316\u7684\u4e1c\u897f\u3002 \u8865\u5145\u4e00\u4e0b\u56fe\u7247 \u516c\u7528\u7ec4\u4ef6\u5305pity_basic \u4e3b\u8981\u5185\u5bb9\u6709: \u5b58\u50a8\u7528\u4f8b\u751f\u547d\u5468\u671f\u4ea7\u751f\u7684\u53d8\u91cf \u5bfb\u627e\u8bf7\u6c42\u5b57\u6bb5\u4e2d\u7684\u53d8\u91cf\u5e76\u66ff\u6362\u6210\u771f\u5b9e\u6570\u636e redis\u76f8\u5173\u64cd\u4f5c sql\u76f8\u5173\u64cd\u4f5c http\u76f8\u5173\u64cd\u4f5c python\u4ee3\u7801\u5757\u76f8\u5173\u64cd\u4f5c \u4e0a\u8ff0\u7684\u4ee3\u7801\u76f8\u5173\u7684\u64cd\u4f5c\u90fd\u662f\u4e3a\u4e86\u80fd\u5c06 \u6570\u636e\u548c\u4ee3\u7801 \u8fdb\u884c\u4e92\u76f8\u8f6c\u6362\uff0c\u5177\u4f53\u7684\u6784\u601d\u8fd8\u6ca1\u6709\u5b8c\u5168\u60f3\u597d\u3002\u6211\u559c\u6b22\u8fb9\u5199\u8fb9\u60f3\uff0c\u4e0d\u7136\u6211\u60f3\u5f97\u80af\u5b9a\u4e0d\u5168\uff0c\u53ea\u6709\u5199\u7684\u65f6\u5019\u9047\u5230\u95ee\u9898\u4e86\u624d\u80fd\u60f3\u597d\u8981\u600e\u4e48\u505a\u4e0b\u4e00\u6b65\u3002 \u7ed9\u6211\u601d\u8003\u7684\u65f6\u95f4\u6709\u9650\uff0c\u6211\u53ea\u80fd\u8d70\u4e00\u6b65\u7b97\u4e00\u6b65\u4e86\uff01 \u5176\u5b9e\u8fd9\u91cc\u6211\u4e5f\u89c9\u5f97\u81ea\u5df1\u8bf4\u7684\u4e91\u91cc\u96fe\u91cc\uff0c\u8fd8\u662f\u7b49\u540e\u7eed\u6210\u54c1\u51fa\u6765\u4e86\uff0c\u56de\u8fc7\u5934\u6765\u770b\u6216\u8005\u4fee\u6539\u8fd9\u7bc7\u6587\u7ae0\u5427\uff01 \u76ee\u5f55\u5927\u81f4\u7ed3\u6784 \u7f16\u5199\u53d8\u91cf\u67e5\u627e\u76f8\u5173\u65b9\u6cd5 \u8fd9\u8fb9\u6211\u4eec\u81ea\u5df1\u5185\u5b9a\u4e00\u5957\u89c4\u5219\uff0c\u51e1\u662f ${\u53d8\u91cf} \u8fd9\u79cd\u6570\u636e\uff0c\u90fd\u662f\u9700\u8981\u66ff\u6362\u7684\u53d8\u91cf\uff0c\u53ef\u80fd\u7531\u5176\u4ed6\u524d\u7f6e\u6216\u5e38\u91cf\u4ea7\u751f\uff0c\u9700\u8981\u968f\u65f6\u66ff\u6362\u3002\u8fd9\u4e2a\u89c4\u5219\u8981\u6c42\u53d8\u91cf\u5c3d\u91cf\u7b80\u5355\uff0c\u4e0d\u8981\u641e\u7279\u6b8a\u7b26\u53f7\u3002 import re el_exp = r\"\\$\\{(.+)\\}\" pattern = re.compile(el_exp) def get_el_expression (string: str) : \"\"\" \u83b7\u53d6el\u8868\u8fbe\u5f0f :param string: :return: \"\"\" return re.findall(pattern, string) if __name__ == \"__main__\" : s = \"select * from xxx where name = '${mygod}'\" print(get_el_expression(s)) \u9a8c\u8bc1\u8f93\u51fa\u65e0\u8bef\uff0c\u6210\u529f\u627e\u5230\u53d8\u91cf \u6211\u4eec\u7528\u6b63\u5219\u63d0\u53d6\u53d8\u91cf\uff0c\u8fd9\u6837\u5982\u679c\u6211\u4eec\u7684sql\u8bed\u53e5\u91cc\u9762\u6709\u53d8\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u505a\u5230\u52a8\u6001sql\u8bed\u53e5\uff0c\u5982\u4e0a\u56fe\u3002\u4e0d\u8fc7\u57fa\u4e8e\u8fd9\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u53d8\u91cf\u6c60\uff0c\u7528\u6765\u5b58\u653e\u8fd9\u4e2a\u7528\u4f8b\u7684\u6240\u6709 \u4e34\u65f6\u53d8\u91cf \u3002 \u7f16\u5199\u53d8\u91cf\u6c60\u76f8\u5173\u65b9\u6cd5 \"\"\" pity\u53d8\u91cf\u6c60 \u53d8\u91cf\u6c60\u7684\u751f\u547d\u5468\u671f\u4e0e\u7528\u4f8b\u4fdd\u6301\u4e00\u81f4 \"\"\" __author__ = \"xiaoke\" class VarPool (object) : def __init__ (self, case_id) : \"\"\" :param case_id: \u7528\u6765\u6807\u8bc6\u53d8\u91cf\u6240\u5904\u7684\u4e3b\u751f\u547d\u5468\u671fcase \"\"\" self.cache = dict() self.case_id = case_id def set (self, key, value) : self.cache[key] = value def get (self, key) : return self.cache.get(key) def get_default (self, key, default_value) : return self.cache.get(key, default_value) \u8fd9\u91cc\u521b\u5efa\u4e86\u4e00\u4e2a\u53d8\u91cf\u6c60\u7c7b\uff0c\u5b9e\u9645\u4e0a\u7ef4\u62a4\u4e86\u4e00\u4e2amap\uff0c\u5f53\u7136\u7531\u4e8e\u590d\u6742\u573a\u666f\u4e0b\uff0c\u53ef\u80fd\u4f1a\u6709 \u53d8\u91cf\u51b2\u7a81 \u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u4f1a\u5728web\u9875\u9762\u5c42\u53bb\u63a7\u5236\uff0c\u53bb\u4fdd\u8bc1\u7528\u6237 \u4e0d\u4f7f\u7528\u91cd\u590d\u7684\u53d8\u91cf \u3002 \u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5148\u5230\u8fd9\u91cc\u4e86\uff0c\u4e3b\u8981\u8fd8\u662f\u4e00\u4e2a\u6784\u601d\u7684\u95ee\u9898\u3002\u540e\u9762\u6162\u6162\u8865\u5168\u8fd9\u4e9b\u6982\u5ff5\uff0c\u4f7f\u5b83\u8d8a\u6765\u8d8a\u660e\u6717\u3002\u56e0\u4e3a\u6211\u73b0\u5728\u4e5f\u5f88\u61f5\u903c\uff0c\u5982\u679c\u7591\u60d1\u7684\u8bdd\uff0c\u53ef\u4ee5\u7b49\u6574\u4e2a\u7528\u4f8b\u6d41\u7a0b\u6253\u901a\u4e86\u518d\u6765 \u56de\u987e \u4e00\u4e0b\u3002 \u540e\u7eed\u7684\u8bddpity_basic\u4f1a\u4f5c\u4e3a\u4e00\u4e2a tar\u5305 \uff0c\u53ef\u5728pypi\u4e0b\u8f7d\uff0c\u5355\u72ec\u62bd\u51fa\u8fd9\u4e2a\u5305\u7684\u4e3b\u8981\u539f\u56e0\u8fd8\u662f\u4e3a\u4e86\u652f\u6301 \u4ee3\u7801 \u548c \u65e0\u7801 \u6a21\u5f0f\u7684\u5207\u6362\u3002 pity_basic\u4ee3\u7801\u5730\u5740","title":"17.\u8bbe\u8ba1\u7528\u4f8b\u751f\u547d\u5468\u671f"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2818%29%20%E9%A1%B9%E7%9B%AE%E7%94%A8%E4%BE%8B%E8%A1%A8%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%9D%83%E9%99%90%E6%94%B9%E9%80%A0/","text":"\u56de\u987e \u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u8bf4\u5230\u4e86\u5173\u4e8e\u6574\u4e2a\u7528\u4f8b\u6267\u884c\u7684\u751f\u547d\u5468\u671f\u3002\u6211\u540e\u9762\u7ec6\u60f3\u4e86\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u5f00\u59cb\u5c31\u8981\u5b8c\u5168\u517c\u5bb9 \u4ee3\u7801\u751f\u6210 \u7684\u8bdd\uff0c\u5199\u8d77\u6765\u4f1a\u5f88\u8d39\u65f6\u95f4\u3002\u4e3a\u4e86\u7ed9\u5927\u5bb6\u4e00\u4e9b\u597d\u7684\u4f53\u9a8c\uff0c\u8fd8\u662f\u5f97\u4e00\u53e3\u4e00\u53e3\u5730\u5403\uff0c\u4e0d\u80fd\u4e00\u4e0b\u5403\u80d6\u3002 \u6240\u4ee5\u6211\u4eec\u5c31\u5148\u5b8c\u6210\u65e0\u7801\u6a21\u5f0f\u5427~ \u7c97\u7565\u5730\u8bbe\u8ba1\u51e0\u4e2a\u6838\u5fc3\u8868 \u6211\u4eec\u7684\u7528\u4f8b\u540e\u7eed\u5982\u679c\u8981\u65b9\u4fbf\u7ba1\u7406\uff0c\u80af\u5b9a\u662f\u9700\u8981\u505a\u4e00\u4e9b \u5206\u7c7b \u548c \u6743\u9650 \u7684\u63a7\u5236\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u8bbe\u8ba1\u51e0\u4e2a\u6838\u5fc3\u7684\u8868: \u9879\u76ee\u8868 \u7528\u4f8b\u5206\u6b65\u5728\u5404\u4e2a\u9879\u76ee\uff0c\u7c7b\u4f3c\u4e8e\u76ee\u5f55\u7684\u6982\u5ff5\uff0c\u4e0d\u540c\u7684\u7528\u4f8b\u4f4d\u4e8e\u4e0d\u540c\u7684\u9879\u76ee\u4e4b\u4e2d\uff0c\u65b9\u4fbf\u7528\u4f8b\u8fdb\u884c\u5206\u7c7b\u3002 \u9879\u76ee\u89d2\u8272\u8868 \u6bcf\u4e2a\u9879\u76ee\u90fd\u662f\u9700\u8981\u6709\u81ea\u5df1\u7684 \u6210\u5458 \uff0c\u5bf9\u4e8e\u6210\u5458\u4eec\u6765\u8bf4\uff0c\u4ed6\u4eec\u56e0\u4e3a\u8eab\u4efd\u7684\u4e0d\u540c\uff0c\u8eab\u4e0a\u62c5\u8d1f\u7684\u804c\u8d23\u4e5f\u4e0d\u4e00\u6837\uff0c\u6211\u4eec\u7ed9\u51fa\u51e0\u4e2a\u7b80\u5355\u7684\u8eab\u4efd\u5982: \u7ec4\u957f\u548c\u7ec4\u5458\uff0c\u5176\u4e2d\u7ec4\u957f\u53ef\u4ee5\u5bf9\u7ec4\u5458\u8fdb\u884c\u76f8\u5173\u6743\u9650\u7684\u53d8\u5316\u3002 \u6d4b\u8bd5\u7528\u4f8b\u8868 \u5b58\u653e\u4e86\u5404\u4e2a\u7528\u4f8b\u7684\u4fe1\u606f\uff0c\u662f\u6d4b\u8bd5\u5e73\u53f0\u7684\u4e00\u4e2a\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\u3002 \u9879\u76ee\u8868 models/project.py from app.models import db from datetime import datetime class Project (db.Model) : id = db.Column(db.INT, primary_key= True ) name = db.Column(db.String( 16 ), unique= True , index= True ) owner = db.Column(db.INT) created_at = db.Column(db.DATETIME, nullable= False ) updated_at = db.Column(db.DATETIME, nullable= False ) deleted_at = db.Column(db.DATETIME) create_user = db.Column(db.INT, nullable= True ) update_user = db.Column(db.INT, nullable= True ) private = db.Column(db.BOOLEAN, default= False ) def __init__ (self, name, owner, create_user, private=False) : self.name = name self.owner = owner self.private = private self.created_at = datetime.now() self.updated_at = datetime.now() self.create_user = create_user self.update_user = create_user self.deleted_at = None \u5927\u6982\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u5b57\u6bb5\uff0c\u9664\u4e86\u521b\u5efa/\u66f4\u65b0\u65f6\u95f4/\u7528\u6237\u4ee5\u5916\uff0c\u8fd8\u6709\u4ee5\u4e0b\u5b57\u6bb5: owner\uff08\u7ec4\u957f\uff09 name\uff08\u9879\u76ee\u540d\uff09 private\uff08\u662f\u5426\u79c1\u6709\uff09 \u9879\u76ee\u89d2\u8272\u8868 models/project_role.py from app.models import db from datetime import datetime class ProjectRole (db.Model) : id = db.Column(db.INT, primary_key= True ) project_id = db.Column(db.INT, index= True ) project_role = db.Column(db.INT, index= True ) created_at = db.Column(db.DATETIME, nullable= False ) updated_at = db.Column(db.DATETIME, nullable= False ) deleted_at = db.Column(db.DATETIME) create_user = db.Column(db.INT, nullable= True ) update_user = db.Column(db.INT, nullable= True ) def __init__ (self, project_id, project_role, create_user) : self.project_id = project_id self.project_role = project_role self.created_at = datetime.now() self.updated_at = datetime.now() self.create_user = create_user self.update_user = create_user self.deleted_at = None \u4e0e\u4e0a\u4e2a\u8868\u5355\u7c7b\u4f3c\uff0cproject_id\u662f\u9879\u76eeid\uff0cproject_role\u662f\u9879\u76ee\u89d2\u8272\u3002 \u54b1\u4eec\u89c4\u5b9a: 1: \u7ec4\u957f 2: \u7ec4\u5458 \u6d4b\u8bd5\u7528\u4f8b\u8868 models/test_case.py from app.models import db from datetime import datetime class TestCase (db.Model) : id = db.Column(db.INT, primary_key= True ) name = db.Column(db.String( 32 ), unique= True , index= True ) request_type = db.Column(db.INT, default= 1 , comment= \"\u8bf7\u6c42\u7c7b\u578b 1: http 2: grpc 3: dubbo\" ) url = db.Column(db.TEXT, nullable= False , comment= \"\u8bf7\u6c42url\" ) request_method = db.Column(db.String( 12 ), nullable= True , comment= \"\u8bf7\u6c42\u65b9\u5f0f, \u5982\u679c\u975ehttp\u53ef\u4e3a\u7a7a\" ) request_header = db.Column(db.TEXT, comment= \"\u8bf7\u6c42\u5934\uff0c\u53ef\u4e3a\u7a7a\" ) project_id = db.Column(db.INT, comment= \"\u6240\u5c5e\u9879\u76ee\" ) tag = db.Column(db.String( 64 ), comment= \"\u7528\u4f8b\u6807\u7b7e\" ) status = db.Column(db.INT, comment= \"\u7528\u4f8b\u72b6\u6001: 1: \u5f85\u5b8c\u6210 2: \u6682\u65f6\u5173\u95ed 3: \u6b63\u5e38\u8fd0\u4f5c\" ) expected = db.Column(db.TEXT, comment= \"\u9884\u671f\u7ed3\u679c, \u652f\u6301el\u8868\u8fbe\u5f0f\" , nullable= False ) created_at = db.Column(db.DATETIME, nullable= False ) updated_at = db.Column(db.DATETIME, nullable= False ) deleted_at = db.Column(db.DATETIME) create_user = db.Column(db.INT, nullable= False ) update_user = db.Column(db.INT, nullable= False ) def __init__ (self, name, request_type, url, project_id, tag, status, expected, create_user, request_header=None, request_method=None) : self.name = name self.request_type = request_type self.url = url self.project_id = project_id self.tag = tag self.status = status self.expected = expected self.create_user = create_user self.update_user = create_user self.request_header = request_header self.request_method = request_method self.created_at = datetime.now() self.updated_at = datetime.now() \u57fa\u672c\u4e0a\u5185\u5bb9\u90fd\u5728comment\u6ce8\u91ca\u91cc\u9762\u4e86\uff0c\u5927\u5bb6\u770b\u7740\u5c31\u884c\uff0c\u4e5f\u4e0d\u591a\u8bb2\u89e3\u4e86\u3002\u80af\u5b9a\u73b0\u5728\u8fd8\u6709\u4e00\u4e9b\u7279\u6027\u6ca1\u6709\u8003\u8651\u5230\u7684\uff0c\u540e\u5e8f\u53ef\u4ee5 \u52a0\u5b57\u6bb5 \u89e3\u51b3\u3002 \u7f16\u5199\u68c0\u67e5\u7528\u6237\u6743\u9650\u7684\u88c5\u9970\u5668 \u6211\u4eec\u5728\u4e0a\u9762\u4e09\u5f20\u8868\u91cc\u9762\u5b9a\u4e49\u597d\u4e86 create_user \u548c update_user \uff0c\u5176\u5b9e\u8fd92\u4e2a\u5b57\u6bb5\u63a5\u53d7\u7684\u90fd\u662f\u54b1\u4eec\u7684\u7528\u6237id\uff0c\u800c\u7528\u6237id\u53c8\u662f\u53ef\u4ee5\u901a\u8fc7 token \u8fdb\u884c\u89e3\u6790\u7684\u3002 \u4e4b\u524d\u7f16\u5199\u8fc7\u7684\u89e3\u6790token\u7684\u65b9\u6cd5 \u8fd8\u8bb0\u5f97\u4e4b\u524d\u7f16\u5199\u8fc7\u7684\u89e3\u6790token\u7684\u65b9\u6cd5\u5417\uff1f\u6211\u4eec\u73b0\u5728\u5c31\u6765\u7f16\u5199\u4e00\u4e2a\u88c5\u9970\u5668: \u81ea\u52a8\u5224\u65ad\u7528\u6237token\u662f\u5426\u6709\u6548\u4ee5\u53ca\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002 \u539f\u7406\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u901a\u8fc7headers\u4e2d\u7684token\u5b57\u6bb5\u83b7\u53d6token\uff0c\u7ecf\u8fc7\u89e3\u6790\u540e\u62ff\u5230 \u7528\u6237\u4fe1\u606f \uff0c\u8fd9\u91cc\u66f4\u52a0\u590d\u6742\u4e00\u70b9\uff0c\u5bf9\u4e8e\u90a3\u79cd\u9700\u8981\u6709\u6743\u9650\u63a7\u5236\u7684\u5730\u65b9\uff0c\u6211\u4eec\u505a\u4e86\u4e00\u5c42\u5224\u65ad\uff0c\u5982\u679c\u6743\u9650\u5728\u914d\u7f6e\u8303\u56f4\u4ee5\u4e0b\uff0c\u90a3\u4e48\u666e\u901a\u6210\u5458\u5c31\u4e0d\u80fd\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\u3002 \u5b8c\u6574\u4ee3\u7801: from functools import wraps from flask import request, jsonify from app import pity from app.middleware.Jwt import UserToken FORBIDDEN = \"\u5bf9\u4e0d\u8d77, \u4f60\u6ca1\u6709\u8db3\u591f\u7684\u6743\u9650\" class SingletonDecorator : def __init__ (self, cls) : self.cls = cls self.instance = None def __call__ (self, *args, **kwargs) : if self.instance is None : self.instance = self.cls(*args, **kwargs) return self.instance def permission (role=pity.config.get ( \"GUEST\" ) ) : def login_required (func) : @wraps(func) def wrapper (*args, **kwargs) : try : headers = request.headers token = headers.get( 'token' ) if token is None : return jsonify(dict(code= 401 , msg= \"\u7528\u6237\u4fe1\u606f\u8ba4\u8bc1\u5931\u8d25, \u8bf7\u68c0\u67e5\" )) user_info = UserToken.parse_token(token) # \u8fd9\u91cc\u628auser\u4fe1\u606f\u5199\u5165kwargs kwargs[ \"user_info\" ] = user_info except Exception as e: return jsonify(dict(code= 401 , msg=str(e))) # \u5224\u65ad\u7528\u6237\u6743\u9650\u662f\u5426\u8db3\u591f, \u5982\u679c\u4e0d\u8db3\u591f\u5219\u76f4\u63a5\u8fd4\u56de\uff0c\u4e0d\u7ee7\u7eed if user_info.get( \"role\" , 0 ) < role: return jsonify(dict(code= 400 , msg=FORBIDDEN)) return func(*args, **kwargs) return wrapper return login_required kwargs[\"user_info\"] = user_info \u91cd\u70b9\u6ce8\u610f\u4e00\u4e0b\u8fd9\u53e5\u8bdd\u3002 \u4e3a\u4e4b\u524d\u54b1\u4eec\u7f16\u5199\u7684http/request\u63a5\u53e3\u52a0\u5165\u6743\u9650 \u8fd9\u91cc\u63d2\u5165\u54b1\u4eec\u521a\u624d\u7684permission\u5373\u53ef \u7531\u4e8e\u6211\u4eec\u8fd9\u4e2a\u63a5\u53e3\u6682\u65f6\u652f\u6301\u767b\u5f55\u7528\u6237\u4f7f\u7528\uff0c\u6240\u4ee5\u6743\u9650\u9ed8\u8ba4\u5c31\u884c\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\u7528\u6237role\u4e3a0(\u666e\u901a\u7528\u6237)\u5373\u53ef\uff01 \u6539\u52a8\u5f88\u7b80\u5355\uff0c\u5bfc\u5165permission\u5e76\u4f7f\u7528 \u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u7684http_request\u5fc5\u987b\u5e26\u6709 user_info \u53c2\u6570\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6211\u4eec\u540e\u7eed\u53ef\u80fd\u4f1a\u7528\u5230\u7528\u6237\u4fe1\u606f\u3002 \u6539\u9020\u524d\u7aef\u4ee3\u7801 \u56e0\u4e3a\u6211\u4eec\u4e4b\u524d\u524d\u7aef\u5728\u8bf7\u6c42\u63a5\u53e3\u7684\u65f6\u5019\uff0c\u662f\u4e0d\u4f1a\u5e26\u4e0a\u7528\u6237token\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981 \u6539\u9020 \u524d\u7aef\u8bf7\u6c42\u65b9\u6cd5: \u5728\u53d1\u9001http\u8bf7\u6c42\u7684\u65f6\u5019\u5e26\u4e0atoken\u6570\u636e \u6821\u9a8c\u8fd4\u56decode\uff0c\u5982\u679c\u4e3a401\u5219\u81ea\u52a8\u6ce8\u9500\u7528\u6237\uff0c\u63d0\u793a\u7528\u6237\u672a\u767b\u5f55\uff01 \u521b\u5efasrc/utils/auth.js import { message } from 'antd' ; export default { headers : ( json = true ) => { const token = localStorage.getItem( 'pityToken' ); const headers = { token }; if (json) { headers[ 'Content-Type' ] = 'application/json' ; } return headers; }, response : ( res, info = false ) => { if (res.code === 0 ) { if (info) { message.info(res.msg); } return true ; } if (res.code === 401 ) { // \u8bf4\u660e\u7528\u6237\u672a\u8ba4\u8bc1 message.info(res.msg); localStorage.setItem( 'pityToken' , null ); localStorage.setItem( 'pityUser' , null ); window .location.href = '/user/login' ; } message.error(res.msg); return false ; }, }; \u8fd9\u91cc\u7f16\u5199\u4e86\u83b7\u53d6token\u5e76\u7ec4\u6210headers\u7684\u65b9\u6cd5\uff0c\u4e5f\u7f16\u5199\u4e86\u9488\u5bf9token\u8fc7\u671f\uff0c\u6743\u9650\u4e0d\u591f\u7684code\u7801\u8fdb\u884c\u4e0d\u540c\u7684\u5904\u7406\u3002 \u4fee\u6539src/services/request.js \u4fee\u6539\u8bf7\u6c42\u7ed3\u679c: \u8bf7\u6c42\u7ed3\u675f\u540e\uff0c\u53ea\u6709\u5f53\u8fd4\u56detrue\u72b6\u6001\u65f6\u624d\u8bbe\u7f6eresponse \u5f00\u59cb\u6d4b\u8bd5 \u53d1\u73b0\u6211\u4eec\u7684\u9519\u8bef\u4fe1\u606f\u5e76\u6ca1\u6709\u5b8c\u5168\u5c55\u793a\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u6ca1\u6709\u9488\u5bf9\u8bf7\u6c42\u5931\u8d25\u7684\u60c5\u51b5\u8fdb\u884c\u6821\u9a8c\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u8c03\u6574\u540e\u7aef\u63a5\u53e3: \u5224\u65ad\u91cc\u9762\u7684 status \u662f\u5426\u4e3aTrue\uff0c\u4e0d\u4e3aTrue\u7684\u8bdd\u8fd4\u56de 110\u72b6\u6001\u7801 \u6765\u4e2a\u52a8\u6001\u56fe\u6d4b\u8bd5\u4e00\u4e0b\u5427: \u63a5\u7740\u6d4b\u8bd5\u4e00\u4e0b\u6743\u9650 \u901a\u8fc7\u5f00\u53d1\u8005\u5de5\u5177\u7684application\u53ef\u4ee5\u770b\u5230: \u6211\u4eec\u7684role\u9ed8\u8ba4\u662f0 \u63a5\u7740\u6211\u4eec\u8c03\u6574\u4e00\u4e0b\u6743\u9650\u4e3a: \u53ea\u6709 \u7ba1\u7406\u5458\u53ef\u4ee5\u8bf7\u6c42\u63a5\u53e3 \u6765\u4e2a\u52a8\u56fe\u770b\u770b: \u6253\u5b8c\u6536\u5de5\uff0c\u6700\u8fd1\u6e05\u660e\u53ef\u4ee5\u7a0d\u5fae\u66f4\u65b0\u591a\u4e00\u70b9 \ud83d\ude33 \u665a\u5b89\uff0c\u6211\u768412\u4e2a(\u5305\u62ec\u6211\u81ea\u5df1)\u89c2\u4f17\u4eec\uff01 \u5e7f\u544a\u65f6\u95f4 \u9884\u89c8\u5730\u5740: http://47.112.32.195/ \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"18.\u9879\u76ee\u7528\u4f8b\u8868\u8bbe\u8ba1\u548c\u6743\u9650\u6539\u9020"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2819%29%20%E7%BC%96%E5%86%99%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%A1%B5%E9%9D%A2%281%29/","text":"\u5f00\u7bc7\u95f2\u804a \u6628\u5929\u5728JD\u4e70\u4e86\u4e2a\u8df3\u7ef3\u7684\u73a9\u610f\uff0c\u6253\u7b97\u540e\u9762\u597d\u597d\u953b\u70bc\u4e0b\u8eab\u4f53\u3002\u5e73\u65f6\u4e45\u5750\u53c8\u52a0\u4e0a\u4e0d\u600e\u4e48\u8fd0\u52a8\uff0c\u5bfc\u81f4\u5404\u79cd\u5c0f\u6bdb\u75c5\u8fd8\u662f\u633a\u591a\u7684\uff0c\u5efa\u8bae\u5927\u5bb6\u4e5f\u5728\u5b66\u4e60\u4e4b\u4f59\uff0c\u591a\u653e\u677e\u4e0b\u8eab\u4f53\u3002\u6bd4\u5982\u50cf\u67d0\u699c\u4e00\u5927\u54e5\u5e26\u59b9\u8dd1\u6b65\uff0c\u5e26\u59b9\u7fbd\u6bdb\u7403\uff0c\u90fd\u662f\u5f88\u4e0d\u9519\u7684 \u953b\u70bc\u65b9\u5f0f \u3002\u5bf9\u4e8e\u6211\u8fd9\u79cd\u61d2\u4eba\uff0c\u5c31\u4e70\u6839\u7ef3\u5b50\u8df3\u4e00\u8df3\u5427\uff0c\u4e0d\u7136\u53ef\u80fd\u4e0a\u4e2a6\u697c\u90fd\u5f97\u5598\u6c14\u4e86\uff01 \u56de\u987e \u4e0a\u4e00\u8282\u54b1\u4eec\u5b9a\u5236\u597d\u4e86\u7b80\u5355\u7684\u6743\u9650\u7cfb\u7edf\uff0c\u4e5f\u8bbe\u8ba1\u4e86\u76f8\u5173\u7684\u8868\u6982\u5ff5\u3002\u4f46\u662f\u8868\u53ea\u6709\u5bf9\u5e94\u7684model\uff0c\u5e76\u6ca1\u6709\u7f16\u5199\u5b9e\u9645\u7684\u64cd\u4f5c\u63a5\u53e3\uff0c\u6240\u4ee5\u4eca\u5929\u6211\u4eec\u6765\u5b8c\u5584\u4ed6\u4eec\uff01 \u4e0a\u6b21\u6211\u4eec\u7f16\u5199\u7684 TestCase \u8868\u5b58\u5728\u4e00\u70b9\u95ee\u9898\uff0c\u9996\u5148\u662f\u6ca1\u6709 params \u5b57\u6bb5\uff0c\u4e5f\u6ca1\u6709 body \u5b57\u6bb5\uff0c\u5f53\u7136\u53ef\u80fd\u8fd8\u7f3a\u5c11\u5f88\u591a\u5b57\u6bb5\uff0c\u6211\u4eec\u53ef\u4ee5 \u5728\u540e\u7eed\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9646\u7eed\u8865\u5145 \u3002 \u5728dao/ init .py\u52a0\u5165\u65b0\u521b\u5efa\u7684\u8868 \u4fee\u6539TestCase\u8868 \u52a0\u5165params\u548cbody\u5b57\u6bb5 \u7f16\u5199\u9879\u76ee\u548c\u9879\u76ee\u89d2\u8272\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3 \u9996\u5148\u54b1\u4eec\u660e\u786e\u4e00\u4e2a\u8981\u6c42\uff0c\u56e0\u4e3a\u9879\u76ee\u6709\u516c\u6709\u548c\u79c1\u6709\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\u5bf9\u4e8e\u7528\u6237\u80fd\u770b\u5230\u7684\u9879\u76ee\u5e94\u8be5\u662f\u8fd9\u6837\u7684\u903b\u8f91: \u666e\u901a\u7528\u6237 \u80fd\u770b\u5230 \u516c\u6709\u9879\u76ee \u548c \u79c1\u6709\u9879\u76ee(\u7528\u6237\u5728\u8be5\u6210\u5458\u4e2d\uff0c\u6210\u5458\u6216\u521b\u5efa\u8005) \u7ba1\u7406\u5458 \u80fd\u770b\u5230\u6240\u6709\u9879\u76ee \u7531\u4e8e\u6211\u4eec\u9700\u8981\u901a\u8fc7\u7528\u6237id\u62ff\u5230\u5bf9\u5e94\u6240\u5c5e\u7684project\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u7f16\u5199project_role\u76f8\u5173\u63a5\u53e3 \u8bbe\u8ba1\u8868\u7684\u65f6\u5019\u6f0f\u6389\u4e86\uff0c\u8fd9\u91cc\u8865\u4e0auser_id \u7f16\u5199app/dao/project/ProjectRoleDao.py from app.models import db from app.models.project_role import ProjectRole from app.utils.logger import Log class ProjectRoleDao (object) : log = Log( \"ProjectRoleDao\" ) @staticmethod def list_project_by_user (user_id) : \"\"\" \u901a\u8fc7user_id\u83b7\u53d6\u9879\u76ee\u5217\u8868 :param user_id: :return: \"\"\" try : projects = ProjectRole.query.filter_by(user_id=user_id, deleted_at= None ).all() return [p.id for p in projects], None except Exception as e: ProjectRoleDao.log.error( f\"\u67e5\u8be2\u7528\u6237: {user_id} \u9879\u76ee\u5931\u8d25, {e} \" ) return [], f\"\u67e5\u8be2\u9879\u76ee\u5931\u8d25, {e} \" @staticmethod def add_project_role (user_id, project_id, project_role, user) : \"\"\" \u4e3a\u9879\u76ee\u6dfb\u52a0\u7528\u6237 :param user_id: \u7528\u6237id :param project_id: \u9879\u76eeid :param project_role: \u7528\u6237\u89d2\u8272 :param user: \u521b\u5efa\u4eba :return: \"\"\" try : role = ProjectRole.query.filter_by(user_id=user_id, project_id=project_id, project_role=project_role, deleted_at= None ).first() if role is not None : # \u8bf4\u660e\u89d2\u8272\u5df2\u7ecf\u5b58\u5728\u4e86 return \"\u8be5\u7528\u6237\u5df2\u5b58\u5728\" role = ProjectRole(user_id, project_id, project_role, user) db.session.add(role) db.session.commit() except Exception as e: ProjectRoleDao.log.error( f\"\u6dfb\u52a0\u9879\u76ee\u7528\u6237\u5931\u8d25, {e} \" ) return f\"\u6dfb\u52a0\u9879\u76ee\u7528\u6237\u5931\u8d25, {e} \" return None \u8fd9\u8fb9\u6682\u65f6\u7f16\u5199\u4e862\u4e2a\u63a5\u53e3\uff0c1\u4e2a\u662f\u901a\u8fc7\u7528\u6237\u83b7\u53d6\u5230\u7528\u6237\u7684\u9879\u76ee\uff0c\u53e6\u4e00\u4e2a\u662f\u4e3a\u9879\u76ee\u6dfb\u52a0\u7528\u6237\uff0c\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u4e5f\u5199\u4e86\u4e00\u4e9b\u6ce8\u91ca\u3002\u7531\u4e8e\u6682\u65f6\u6211\u4eec\u9700\u8981\u5feb\u901f\u505a\u4e00\u4e2a\u5c55\u793a\uff0c\u6240\u4ee5 \u6682\u65f6\u63d0\u4f9b\uff0c\u589e\u548c\u67e5\u529f\u80fd\u5373\u53ef \uff0c\u540e\u7eed\u7684\u63a5\u53e3\u518d\u6162\u6162\u8865\u5145\u3002 \u7f16\u5199app/dao/project/ProjectRole.py \u7531\u4e8e\u6211\u4eec\u5df2\u7ecf\u53ef\u4ee5\u901a\u8fc7user_id\u83b7\u53d6\u5230\u4ed6\u6709\u6743\u9650\u7684\u9879\u76ee\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u6211\u4eec\u628a\u5b83\u548c\u5171\u6709\u9879\u76ee\u505a\u4e00\u4e2a\u6574\u5408\u5c31\u53ef\u4ee5\u4e86\u3002\u56e0\u4e3aproject\u4e0d\u53ef\u80fd\u592a\u591a\uff0c\u6240\u4ee5\u8fd9\u8fb9\u6211\u4eec\u76f4\u63a5\u7528 in \u64cd\u4f5c\u7b26\uff0c\u5148\u9884\u60f3\u4e00\u4e0b sql : select * from project where deleted_at is null and (owner = user or project_id in (\u5df2\u7ecf\u67e5\u51fa\u7684\u7528\u6237\u9879\u76ee) or private is false ); \u9996\u5148\u5fc5\u987b\u662f\u672a\u5220\u9664\u7684\uff0c\u5176\u6b21\u662fowner=user\u7684\uff0c\u518d\u5c31\u662f\u975e\u79c1\u6709\u6216\u8005\u7528\u6237\u6709\u6743\u9650\u7684\u3002 \u5982\u679c\u5bf9\u4e8e\u8d85\u7ea7\u7ba1\u7406\u5458\u6765\u8bf4\u7684\u8bdd\uff0c\u90a3\u4e48\u4ed6\u4eec\u5bf9\u4e8e\u6240\u6709\u9879\u76ee\u90fd\u662f\u53ef\u89c1\u7684\u3002 from sqlalchemy import or_ from app import pity from app.dao.project.ProjectRoleDao import ProjectRoleDao from app.models import db from app.models.project import Project from app.utils.logger import Log class ProjectDao (object) : log = Log( \"ProjectDao\" ) @staticmethod def list_project (user, role, page, size, name=None) : \"\"\" \u67e5\u8be2/\u83b7\u53d6\u9879\u76ee\u5217\u8868 :param user: \u5f53\u524d\u7528\u6237 :param role: \u5f53\u524d\u7528\u6237\u89d2\u8272 :param page: \u5f53\u524d\u9875\u7801 :param size: \u5f53\u524dsize :param name: \u9879\u76ee\u540d\u79f0 :return: \"\"\" try : search = [Project.deleted_at == None ] if role != pity.config.get( \"ADMIN\" ): project_list = ProjectRoleDao.list_project_by_user(user) search.append(or_(Project.id in project_list, Project.owner == user, Project.private == False )) if name: search.append(Project.name.ilike( \"%{}%\" .format(name))) data = Project.query.filter(*search) total = data.count() return data.order_by(Project.created_at.desc()).paginate(page, per_page=size).items, total, None except Exception as e: ProjectDao.log.error( f\"\u83b7\u53d6\u7528\u6237: {user} \u9879\u76ee\u5217\u8868\u5931\u8d25, {e} \" ) return 0 , 0 , f\"\u83b7\u53d6\u7528\u6237: {user} \u9879\u76ee\u5217\u8868\u5931\u8d25, {e} \" @staticmethod def add_project (name, owner, user, private) : try : data = Project.query.filter_by(name=name, deleted_at= None ).first() if data is None : return \"\u9879\u76ee\u5df2\u5b58\u5728\" pr = Project(name, owner, user, private) db.session.add(pr) db.session.commit(pr) except Exception as e: ProjectDao.log.error( f\"\u65b0\u589e\u9879\u76ee: {name} \u5931\u8d25, {e} \" ) return 0 , 0 , f\"\u65b0\u589e\u9879\u76ee: {name} \u5931\u8d25, {e} \" \u8fd9\u91cc\u91cd\u70b9\u5173\u6ce8 list_project \uff0c\u91cc\u9762\u5148\u5224\u65ad\u7528\u6237\u662f\u4e0d\u662fADMIN\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u67e5\u8be2\u4e00\u4e0b\u8fd9\u4e2a\u7528\u6237\u62e5\u6709\u7684\u9879\u76ee\uff0c\u7b49\u4e8e\u8bf4\u662f\u8f6c\u6362\u4e86\u6211\u4eec\u521a\u624d\u5199\u7684sql\u3002 \u6700\u540e\u901a\u8fc7\u9879\u76ee\u7684\u521b\u5efa\u65f6\u95f4\u8fdb\u884c\u4e86\u6392\u5e8f\uff0c\u5e76\u8fdb\u884c\u4e86\u5206\u9875\u5e76\u8fd4\u56de\u4e86\u9879\u76ee\u603b\u6570\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662ferror\u4fe1\u606f\u3002 \u7f16\u5199\u5177\u4f53\u7684\u63a5\u53e3 /project/insertProject /project/listProject /project/insertProjectRole \u7f16\u5199\u83b7\u53d6\u5206\u9875\u7684\u76f8\u5173\u65b9\u6cd5app/handler/page.py from flask import request # \u9ed8\u8ba4\u9875\u6570\u548c\u9875\u7801 PAGE = 1 SIZE = 10 class PageHandler (object) : @staticmethod def page () : \"\"\" \u83b7\u53d6page\u548csize :return: \"\"\" page = request.args.get( \"page\" ) if page is None or not page.isdigit(): page = PAGE size = request.args.get( \"size\" ) if size is None or not size.isdigit(): size = SIZE return int(page), int(size) \u5982\u679c\u6ca1\u6709\u83b7\u53d6\u5230page/size\u6216\u8005\u8bf4\u4ed6\u4eec\u4e0d\u662f\u975e\u6570\u5b57\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u7ed9\u4e2a\u9ed8\u8ba4\u503c\u3002 \u7bc7\u5e45\u6709\u9650\uff0c\u8fd9\u7bc7\u5185\u5bb9\u5148\u5230\u8fd9\u91cc\u5427\uff01\u518d\u4e0d\u53bb\u505a\u996d\u8981\u997f\u6b7b\u4e86\uff01","title":"19.\u7f16\u5199\u9879\u76ee\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3 \u548c\u9875\u9762(1)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%282%29%20%E7%BB%99app%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE/","text":"\u7ed9Pity\u6dfb\u52a0\u914d\u7f6e \u56de\u987e \u8fd8\u8bb0\u5f97\u4e0a\u7bc7\u6587\u7ae0\u521b\u7acb\u7684 Flask \u5b9e\u4f8b\u5417\uff1f\u6211\u4eec\u901a\u8fc7\u8fd9\u4e2a\u5b9e\u4f8b\uff0c\u7ed9\u6839\u8def\u7531 / \u7ed1\u5b9a\u4e86\u4e00\u4e2a\u65b9\u6cd5\uff0c\u4ece\u800c\u4f7f\u5f97\u7528\u6237\u8bbf\u95ee\u4e0d\u540c\u8def\u7531\u7684\u65f6\u5019\u53ef\u4ee5\u6267\u884c\u4e0d\u540c\u7684\u65b9\u6cd5\u3002 \u914d\u7f6e \u8981\u77e5\u9053\uff0c\u5728\u4e00\u4e2a Web \u9879\u76ee\u4e2d\uff0c\u6709\u5f88\u591a\u4e1c\u897f\u662f\u53ef\u80fd\u4f1a\u4ea7\u751f\u53d8\u5316\u4ece\u800c\u9700\u8981\u62bd\u51fa\u6765\u4f5c\u4e3a\u914d\u7f6e\u9879\u7684\u3002 \u6240\u4ee5\u6211\u4eec\u63a5\u7740\u6765\u8bb2\u8bb2\u600e\u4e48\u5728 Flask \u5b89\u6392\u54b1\u4eec\u81ea\u5df1\u7684\u914d\u7f6e\u3002 \u79cd\u7c7b Flask \u652f\u6301\u7684\u914d\u7f6e\u79cd\u7c7b\u633a\u591a\uff0c\u5927\u6982\u6709 py\u6587\u4ef6 , Config\u5bf9\u8c61 , JSON \u7b49\u3002 \u6211\u4eec\u8fd9\u91cc\u91c7\u7528 from_object \u7684\u65b9\u5f0f\u3002 \u7f16\u5199pity/config.py\u6587\u4ef6 # \u57fa\u7840\u914d\u7f6e\u7c7b import os class Config (object) : ROOT = os.path.dirname(os.path.abspath(__file__)) LOG_NAME = os.path.join(ROOT, 'logs' , 'pity.log' ) \u76ee\u524d\u52a0\u4e86\u6839\u76ee\u5f55\u914d\u7f6e\u548clog\u6587\u4ef6\u8def\u5f84\u3002 \u4fee\u6539pity/app/ init _.py\u6587\u4ef6\uff0c\u5f15\u5165\u914d\u7f6e\u6587\u4ef6 from flask import Flask from config import Config pity = Flask(__name__) pity.config.from_object(Config) \u6539\u52a8\u5dee\u5f02 \u8fd9\u4e00\u8282\u5c31\u8fd9\u4e48\u7ed3\u675f\u4e86\uff0c\u5982\u679c\u5acc\u5b66\u7684\u4e0d\u591f\u7684\u53ef\u4ee5\u770b\u4e0b\u4e00\u8282\u3002\u81f3\u4e8e\u6709\u7684\u4eba\u95ee\u65e5\u5fd7\u4e3a\u4ec0\u4e48\u4e0d\u7528JSON\u6587\u4ef6\uff0c\u5176\u5b9e\u662f\u53ef\u4ee5\u7684\uff0c\u4e0d\u7528\u592a\u8fc7\u4e8e\u7ea0\u7ed3\u3002 \u5168\u90e8\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"2.\u7ed9app\u6dfb\u52a0\u914d\u7f6e"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2820%29%20%E7%BC%96%E5%86%99%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%A1%B5%E9%9D%A2%282%29/","text":"\u56de\u987e \u4e0a\u56de\u8bf4\u5230\uff0c\u7f16\u5199\u9879\u76ee\u6743\u9650\u76f8\u5173\u63a5\u53e3\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u5b8c\u6210\u4e86\u6838\u5fc3\u65b9\u6cd5\u7684\u7f16\u5199\uff0c\u8fd9\u6b21\u6211\u4eec\u5c31\u6765\u5b9a\u4e49\u76f8\u5173\u7684\u63a5\u53e3\u3002 \u7f16\u5199\u63a5\u53e3 \u5148\u5b9e\u73b0 \u9879\u76ee \u7684\u67e5\u8be2\u548c\u65b0\u589e\u63a5\u53e3\uff0c\u63a5\u7740\u5b9e\u73b0\u9879\u76ee\u89d2\u8272\u7684\u6dfb\u52a0\u63a5\u53e3\u3002 \u7f16\u5199app/controllers/project/project.py from flask import Blueprint, request, jsonify from app import pity from app.dao.project.ProjectDao import ProjectDao from app.handler.fatcory import ResponseFactory from app.handler.page import PageHandler from app.utils.decorator import permission pr = Blueprint( \"project\" , __name__, url_prefix= \"/project\" ) @pr.route(\"/list\") @permission() def list_project (user_info) : \"\"\" \u83b7\u53d6\u9879\u76ee\u5217\u8868 :param user_info: :return: \"\"\" page, size = PageHandler.page() user_role, user_id = user_info[ \"role\" ], user_info[ \"id\" ] name = request.args.get( \"name\" ) result, total, err = ProjectDao.list_project(user_id, user_role, page, size, name) if err is not None : return jsonify(dict(code= 110 , data=result, msg=err)) return jsonify(dict(code= 0 , data=ResponseFactory.model_to_list(result), msg= \"\u64cd\u4f5c\u6210\u529f\" )) @pr.route(\"/insert\", methods=[\"POST\"]) @permission(pity.config.get(\"MANAGER\")) def insert_project (user_info) : try : user_id = user_info[ \"id\" ] data = request.get_json() if not data.get( \"name\" ) or not data.get( \"owner\" ): return jsonify(dict(code= 101 , msg= \"\u9879\u76ee\u540d\u79f0/\u9879\u76ee\u8d1f\u8d23\u4eba\u4e0d\u80fd\u4e3a\u7a7a\" )) private = data.get( \"private\" , False ) err = ProjectDao.add_project(data.get( \"name\" ), data.get( \"owner\" ), user_id, private) if err is not None : return jsonify(dict(code= 110 , msg=err)) return jsonify(dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" )) except Exception as e: return jsonify(dict(code= 111 , msg=str(e))) \u8fd9\u8fb9\u57fa\u672c\u4e0a\u5f88\u7b80\u5355\uff0c\u6d41\u7a0b\u5c31\u662f \u83b7\u53d6\u53c2\u6570->\u6821\u9a8c\u53c2\u6570->\u8c03\u7528\u65b9\u6cd5\uff0c\u83b7\u53d6\u8fd4\u56de\u7ed3\u679c\uff0c\u6210\u529f\u5931\u8d25\u8fd4\u56de\u4e0d\u540c\u7684 response . \u6ce8\u610f\u5230\u4ee3\u7801\u91cc\u9762\u6709\u4e00\u5904bug: \u641c\u7d22\u9879\u76ee\u65f6, \u8fd9\u91cc\u8fd4\u56de\u7684\u5e94\u8be5\u662f\u4e00\u4e2a\u6570\u7ec4\u800c\u4e0d\u662f0 \u628a\u84dd\u56fe\u52a0\u5165run.py \u6d4b\u8bd5\u4e00\u4e0b \u8fd9\u91cc\u6211\u4eec\u5148\u8c03\u7528\u4e86\u767b\u5f55\u63a5\u53e3\u62ff\u5230\u4e86token: \u53d1\u73b0\u62a5\u9519\u4e86 \u4ed4\u7ec6 \u67e5\u770b\u539f\u56e0 \uff0c\u53d1\u73b0\u662f\u8fd9\u91cc\u51fa\u4e86\u95ee\u9898: \u8fd9\u4e2a\u65b9\u6cd5\u5e94\u8be5\u67092\u4e2a\u8fd4\u56de\u503c\uff0c\u662f\u81ea\u5df1\u758f\u5ffd\u4e86 \u53ef\u4ee5\u770b\u5230\u5728\u7528Python\u5199\u591a\u4e2a\u8fd4\u56de\u503c\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u8bb0\u5f97\u8fd4\u56de\u591a\u5c11\u5c31\u7528\u591a\u5c11\uff0c\u4e0d\u7136IDE\u5e76\u4e0d\u4f1a \u7ed9\u51fa\u63d0\u793a \u3002\u8fd9\u4e5f\u662fPython\u7684\u4e00\u4e2a\u5c0f\u7f3a\u70b9\u5427\uff0c\u5f53\u7136\u5b83\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8fd4\u56de\u7c7b\u578b\uff0c\u53ea\u4e0d\u8fc7\u6211\u89c9\u5f97\u590d\u6742\u4e86\u3002 \u505a\u51fa\u8fd9\u6837\u7684\u6539\u52a8\u5c31\u53ef\u4ee5\u4e86 \u7531\u4e8eerr\u662f\u6211\u4eec\u9884\u671f\u7684err\uff0c\u5e76\u4e14\u6211\u4eec\u6709\u505atry/except\u5904\u7406\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5raise\uff0c \u629b\u51fa\u5f02\u5e38 \u5373\u53ef\u3002 \u518d\u6b21\u5c1d\u8bd5 \u6ce8\u610f\u6d4b\u8bd5\u7684\u63a5\u53e3\u662f\u5e26\u6709token\u4fe1\u606f\u7684\u54e6 \u6d4b\u8bd5\u6dfb\u52a0\u9879\u76ee\u63a5\u53e3 \u9664\u4e86token\u4ee5\u5916\u6211\u4eec\u9700\u89813\u4e2a\u6570\u636e: \u9879\u76ee\u540d\u5b57\u3001\u9879\u76ee\u7ba1\u7406\u5458\u3001\u9879\u76ee\u6743\u9650\u3002 \u8fd9\u8fb9\u6211\u76f4\u63a5\u5077\u61d2\uff0c\u53bb\u6570\u636e\u5e93\u67e5\u770b\u6709\u54ea\u4e9b\u7528\u6237: \u53ef\u4ee5\u770b\u5230user_id\u4ece1\u52304\u90fd\u6709\uff0c\u6211\u8fd9\u8fb9\u90094(\u674e\u900d\u9065)\u5f53\u505a\u6211\u8fd9\u4e2a\u6d4b\u8bd5\u9879\u76ee\u7684owner\u3002 \u53ef\u4ee5\u770b\u5230\u6ca1\u6709\u521b\u5efa\u6210\u529f\uff0c\u63d0\u793a\u6211 \u6743\u9650\u4e0d\u8db3 \u3002 \u8fd8\u8bb0\u5f97\u4e4b\u524d\u8bbe\u5b9a\u597d\u7684\u6743\u9650\u7cfb\u7edf\u5417\uff1f\u56e0\u4e3a\u6211\u628a\u8fd9\u4e2a\u63a5\u53e3\u7684\u6743\u9650\u8bbe\u7f6e\u4e3amanager\u4e5f\u5c31\u662f\u7ecf\u7406\u624d\u80fd\u521b\u5efa\u9879\u76ee\u3002\u6240\u4ee5\u5728\u6211\u4eec\u8fd8\u6ca1\u6709\u5b8c\u6210 \u7528\u6237\u7ba1\u7406 \u9875\u9762\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5148\u5728\u6570\u636e\u5e93\u8f6f\u4ef6\u6216\u7528sql\u53bb\u624b\u52a8\u4fee\u6539: \u628arole\u6539\u4e3a2 \u5373\u8d85\u7ea7\u7ba1\u7406\u5458 \u63a5\u7740\u6211\u4eec\u9700\u8981\u91cd\u65b0\u767b\u5f55\uff0c\u83b7\u53d6\u65b0token\u3002 \u53ef\u80fd\u6709\u7684\u8bfb\u8005\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u8fd9\u6837\u5982\u679c\u6539\u52a8\u4e86\u7528\u6237\u7684\u6743\u9650\uff0c\u7528\u6237\u8fd8\u9700\u8981\u91cd\u65b0\u767b\u5f55\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u5728 \u89e3\u6790\u7528\u6237\u4fe1\u606f\u7684\u65f6\u5019\uff0c\u91cd\u65b0\u83b7\u53d6\u4e00\u904d\u7528\u6237\u4fe1\u606f\u5462 \uff1f\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u95ee\u9898\uff0c\u95ee\u5c31\u662f\u4e24\u8005\u90fd\u53ef\u4ee5\u5440\uff0c\u90fd\u6ca1\u6bdb\u75c5\u7684\u3002\u4f60\u751a\u81f3\u53ef\u4ee5\u628a\u7528\u6237\u4fe1\u606f\u7f13\u5b58\u5230redis\uff0c\u4e0d\u7528\u6bcf\u6b21\u90fd\u8bfbdb\u3002 \u91cd\u65b0\u6d4b\u8bd5 role\u53d8\u62102\u4e86 \u73b0\u5728\u63d0\u793a\u9879\u76ee\u5df2\u5b58\u5728 \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u7684\u4ee3\u7801\u5199\u7684\u592a\u968f\u610f\uff0c\u5bfc\u81f4if\u5199\u9519\u4e86\uff0c\u4fee\u6b63\u5982\u4e0b: \u91cd\u542f\u670d\u52a1\u540e\u6d4b\u8bd5 \u53c8\u62a5\u9519\u4e86\uff0ccommit\u662f\u4e00\u4e2a\u4e0d\u63a5\u53d7\u53c2\u6570\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u53bb\u6389\u3002\u800c\u4e14\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u8fd4\u56de\u503c\u6211\u662f\u590d\u5236\u7684\u4e0a\u4e00\u4e2a\u65b9\u6cd5\u7684\uff0c\u5bfc\u81f4\u591a\u4e862\u4e2a0\u3002\u6211\u4eec\u4e00\u5e76\u5904\u7406\u6389: \u518d\u6b21\u6d4b\u8bd5 \u6210\u529f \u901a\u8fc7project/list\u63a5\u53e3\u53bb\u67e5\u770b \u4e5f\u6210\u529f \u6240\u4ee5\u6211\u4eec\u7f16\u5199\u4ee3\u7801\u9700\u8981\u4ed4\u7ec6\u4e00\u70b9\uff0c\u5c31\u7b97\u662f\u590d\u5236/\u7c98\u8d34\u4e5f\u8981\u66f4 \u7ec6\u5fc3 \uff0c\u4e0d\u80fd\u50cf\u7b14\u8005\u4e00\u6837\u9a6c\u864e\uff01 \u540e\u7eed\u6d4b\u8bd5 \u5176\u5b9e\u6211\u4eec\u8fd9\u8fb9\u7684\u63a5\u53e3\u662f\u5206\u4e0d\u540c\u573a\u666f\u7684\uff0c\u4e0d\u540c\u7684\u89d2\u8272\u9700\u8981\u4e0d\u540c\u7684\u6d4b\u8bd5\u573a\u666f\uff0c\u6211\u4eec\u8fd9\u8fb9\u8bbe\u8ba1\u7528\u4f8b\u7684\u65f6\u5019\u8fd8\u9700\u8981\u8003\u8651\u666e\u901a\u7528\u6237\u7684\u9879\u76ee\u6743\u9650\u95ee\u9898\uff0c\u8fd9\u4e9b\u5c31\u7559\u7ed9\u8bfb\u8005\u8bfe\u540e\u53bb\u6d4b\u8bd5\u4e86\u3002 \u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u53ea\u5199\u4e862\u4e2a\u63a5\u53e3\uff0c\u4e0b\u4e00\u7bc7\u5f00\u59cb\u7ee7\u7eed\u56de\u5230\u524d\u7aef\uff0c\u5199 \u76f8\u5173\u7684\u9875\u9762 \uff01\u5982\u679c\u89c9\u5f97\u6bcf\u7bc7\u7bc7\u5e45\u8f83\u77ed\u7684\u8bdd\uff0c\u53ef\u4ee5\u7ed9\u6211\u63d0\u5efa\u8bae\uff0c\u6211\u4e89\u53d6\u6ee1\u8db3\u5927\u5bb6~","title":"20.\u7f16\u5199\u9879\u76ee\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3\u548c\u9875\u9762(2)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2821%29%20%E7%BC%96%E5%86%99%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%A1%B5%E9%9D%A2%283%29/","text":"\u56de\u987e \u4e0a\u56de\u6211\u4eec\u7f16\u5199\u597d\u4e86\u6dfb\u52a0\u9879\u76ee\u548c\u67e5\u8be2\u9879\u76ee2\u4e2a\u63a5\u53e3\uff0c\u90a3\u4eca\u5929\u6211\u4eec\u5c31\u628a\u5b83\u5e94\u7528\u5230\u9879\u76ee\u4e2d\u5427\uff01\u6240\u4ee5\u672c\u8282\u5185\u5bb9\u4f1a\u4ee5 \u524d\u7aef\u90e8\u5206 \u4e3a\u4e3b\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u8054\u8c03\u540e\u7aef\u7f16\u5199\u597d\u7684\u63a5\u53e3\uff0c\u5e76\u5728\u9875\u9762\u4e0a\u80fd\u591f\u7ed9\u7528\u6237\u4f7f\u7528\u3002 \u8c03\u6574\u9879\u76ee\u8868 \u662f\u8fd9\u6837\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u9879\u76ee\u6709\u5bf9\u5e94\u7684\u56fe\u7247\uff0c\u5e76\u4e14\u7f3a\u5c11 \u63cf\u8ff0\u5b57\u6bb5 \uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u628a\u9879\u76ee\u8868\u8fdb\u884c\u4e00\u4e9b\u8c03\u6574\u3002 \u56fe\u7247\u5b57\u6bb5 \u63cf\u8ff0\u5b57\u6bb5 \u63cf\u8ff0\u5b57\u6bb5\u5f88\u597d\u8bf4\uff0c\u81f3\u4e8e\u56fe\u7247\u5b57\u6bb5\u5c31\u6bd4\u8f83\u9ebb\u70e6\u4e86\uff01\u5982\u679c\u5bf9\u4e8e \u5355\u8282\u70b9 \u90e8\u7f72\u7684\u5e94\u7528\uff0c\u56fe\u7247\u53ef\u4ee5\u653e\u5165\u7c7b\u4f3c static \u7684\u76ee\u5f55\u4e2d\uff0c\u4ee5xxx.jpg\u7684\u5f62\u5f0f\u5b58\u5728\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u9700\u8981\u90e8\u7f72\u5230 \u591a\u53f0\u673a\u5668 \u7684\u8bdd\uff0c\u5047\u8bbe\u662f2\u53f0\u673a\u5668\uff0c\u7528\u6237\u4e0a\u4f20\u4e00\u6b21\u56fe\u7247\uff0c\u5176\u4e2d\u53ea\u6709\u4e00\u4e2a\u670d\u52a1\u63a5\u6536\u5230\u4e86\u56fe\u7247\u6587\u4ef6\uff0c\u90a3\u5c31\u4f1a\u5f88 \u9ebb\u70e6 \u3002 \u90a3\u4e48\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f \u5728\u4f01\u4e1a\u4e2d\uff0c\u4e00\u822c\u516c\u53f8\u4f1a\u6709oss(\u4e91\u5b58\u50a8)\u670d\u52a1\uff0c\u6bd4\u5982: \u963f\u91cc\u4e91oss \uff0c \u817e\u8baf\u4e91cos \uff0c\u8fd8\u6709\u4e03\u725b\u4e91\u7b49\u7b49\u3002\u6211\u4e4b\u524d\u592a\u76d1\u7684\u9879\u76ee\u7528\u7684\u5c31\u662f\u4e03\u725b\u4e91+\u81ea\u6709\u57df\u540d\uff0c\u7531\u4e8e\u6ca1\u7eed\u8d39\uff0c\u6240\u4ee5\u6211\u4eec\u6362\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f: \u76f4\u63a5\u5728\u6570\u636e\u5e93\u52a0\u4e00\u4e2a TEXT \u5b57\u6bb5\uff0c\u5b58\u653e\u56fe\u7247\u7684base64\u6570\u636e\uff0c\u4f46\u662f\u6ce8\u610f\u5927\u5c0f\u4e00\u5b9a\u8981\u9650\u5236\uff0c\u7136\u540ehtml\u91cc\u9762\u901a\u8fc7img\u6807\u7b7e\u89e3\u6790\u6570\u636e\u5373\u53ef\u3002 \u7531\u4e8e\u9879\u76ee\u53ef\u80fd\u4e0d\u592a\u9700\u8981\u5934\u50cf\u8fd9\u79cd\u4e1c\u897f\uff0c\u4ee5\u540e\u8fd9\u79cd\u56fe\u7247\u7559\u5230\u4e2a\u4eba\u5934\u50cf\u4f1a\u6bd4\u8f83\u597d\u4e00\u70b9\uff0cantd\u63d0\u4f9b\u4e86\u6587\u5b57\u5934\u50cf\uff0c\u76f8\u4fe1\u5927\u5bb6\u7528\u8fc7\u9489\u9489\u7b49IM\u5de5\u5177\u7684\u90fd\u77e5\u9053\uff0c\u6709\u7684\u4eba\u5982\u679c\u6ca1\u6709\u5934\u50cf\u7684\u8bdd\uff0c\u4f1a\u7528\u540d\u5b57\u5f53\u5934\u50cf\u6bd4\u5982\"\u9e23\u4eba\"\u3002 \u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u5c31\u4e0d\u7528\u90a3\u4e48\u9ebb\u70e6\u4e86\uff0c\u76f4\u63a5\u53ea\u52a0\u4e00\u4e2a\u63cf\u8ff0\u5b57\u6bb5\u5c31\u597d\u4e86\uff01\u5934\u50cf\u7528\u9ed8\u8ba4\u7684\u5c31\u884c\uff01 \u8c03\u6574models/Project.py \u6dfb\u52a0\u63cf\u8ff0\u5b57\u6bb5 \u8c03\u6574ProjectDao.py \u8c03\u6574\u6dfb\u52a0\u9879\u76ee\u63a5\u53e3 \u628a \u63cf\u8ff0\u5b57\u6bb5 \u52a0\u8fdb\u53bb\u5373\u53ef\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5b57\u6bb5\u4e0d\u662f\u5fc5\u586b\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u7ed9\u4ed6\u4e00\u4e2a\u9ed8\u8ba4\u503c: \u7a7a\u5b57\u7b26\u4e32 \u6784\u601d\u9875\u9762 \u56de\u5fc6\u4e00\u4e0b\u6211\u4eec\u5f53\u65f6\u7f16\u5199postman\u9875\u9762\u7684\u65f6\u5019\uff0c\u6211\u4eec\u662f\u628a\u5bf9\u5e94\u7684\u7ec4\u4ef6\u5206\u5c42\u4e86\u3002\u7531\u4e8e\u6211\u4eec\u5f53\u65f6\u505apostman\u9875\u9762\u7684\u65f6\u5019\u662f\u6709\u6210\u54c1\u7ed9\u6211\u4eec\u53c2\u8003\u7684\uff0c\u4f46\u662f\u5173\u4e8e \u9879\u76ee\u7ba1\u7406\u9875\u9762 \uff0c\u6211\u4eec\u7684\u7684\u786e\u786e\u662f\u6ca1\u6709\u4efb\u4f55\u53c2\u8003\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u8981\u5728\u8111\u6d77\u91cc\u6784\u601d\u4e00\u4e0b\u9875\u9762 \u5927\u6982\u957f\u4ec0\u4e48\u6837 \uff01 \u53c2\u8003Ant Design Pro\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6709\u4e2a\u5927\u6982\u7684\u65b9\u5411\u4e86\uff01 \u91c7\u7528\u8fd9\u79cd \u5361\u7247\u5217\u8868 \uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5c55\u793a\u9879\u76ee\u3002 \u5f15\u5165\u6eda\u52a8\u6761 \u8fbe\u5230\u8fd9\u6837\u7684\u6548\u679c\u5c31\u597d\u4e86 \u8fd9\u4e2a\u9875\u9762\u662f\u6211\u4ece\u4e4b\u524d\u4e00\u4e2a \u592a\u76d1 \u4e86\u7684\u9879\u76ee\u91cc\u9762\u62f7\u8d1d\u6765\u7684\uff0c\u4e3a\u4e86\u8282\u7ea6\u65f6\u95f4\u5c31\u7ee7\u7eed\u6cbf\u7528\u4e86\u3002 \u5b89\u88c5\u4f9d\u8d56 cnpm install nprogress --save \u5728src/utils/utils.js\u6dfb\u52a0\u65b9\u6cd5 import NProgress from 'nprogress' ; // \u5f15\u5165\u6837\u5f0f import 'nprogress/nprogress.css' export const process = async func => { NProgress.start(); await func(); NProgress.done(); }; \u8fd9\u6837\u5f53\u6211\u4eec\u9700\u8981\u5728\u67d0\u4e2a\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\u52a0\u8f7d\u8fdb\u5ea6\u6761\u7684\u65f6\u5019\uff0c\u8c03\u7528process\u65b9\u6cd5\u5373\u53ef\u3002 \u9879\u76ee\u5361\u7247\u5217\u8868\u9875\u9762\u4ee3\u7801 \u5176\u5b9e react \u5e76\u4e0d\u662f\u4e00\u4e2a\u5f88\u590d\u6742\u7684\u6846\u67b6\uff0c\u53ef\u80fd\u5bf9\u4e8eJsx\u9700\u8981\u6709\u4e00\u5b9a\u7684\u4e86\u89e3\u3002 \u6211\u4eec\u7684\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u7ec6\u5206\u62104\u4e2a\u90e8\u5206: \u5f15\u7528 \u5373\u5f15\u5165\u5176\u4ed6\u7ec4\u4ef6\u6216\u8005\u5e93 \u72b6\u6001\u7ba1\u7406 \u72b6\u6001\u662f\u4ec0\u4e48\u6982\u5ff5\u5462\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u9875\u9762\u6709\u4e2aloading\u7ec4\u4ef6\uff0c\u4ec0\u4e48\u65f6\u5019\u4ed6loading\uff0c\u4ec0\u4e48\u65f6\u5019\u7ed3\u675floading\uff0c\u4f60\u901a\u8fc7\u4ec0\u4e48\u6765\u5224\u65ad\u5b83\u662f\u5426loading\uff0c\u8fd9\u4e2a\u5224\u65ad\u7684\u53d8\u91cf\uff0c\u5c31\u53eb\u505a\u72b6\u6001\u3002 \u800c\u54b1\u4eec\u7684\u9875\u9762\u4e5f\u6709\u5f88\u591a\u5730\u65b9\u901a\u8fc7 \u72b6\u6001 \u6765\u5c55\u793a\uff0c\u6bd4\u5982\u6211\u4eec\u901a\u8fc7data(\u6570\u7ec4)\u6765\u5b58\u653e\u6211\u4eec\u7684\u9879\u76ee\u5217\u8868\uff0c\u521d\u59cb\u5316\u4e3a\u7a7a\u6570\u7ec4\u3002 \u5f53\u9875\u9762\u5f00\u59cb\u6e32\u67d3 \uff0c\u7ec4\u4ef6\u5f00\u59cb\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53d8\u53bb\u540e\u7aef\u670d\u52a1 \u62c9\u53d6\u6570\u636e \uff0c\u6539\u5199data\u6570\u7ec4\uff0c\u628a\u9879\u76ee\u7684\u4fe1\u606f\u653e\u5165\u5230\u6570\u7ec4\u91cc\u9762\u3002 \u6ce8\u610f\uff0c\u8fd9\u4e2a\u65f6\u5019\u72b6\u6001\u5c31\u53d1\u751f\u4e86\u53d8\u66f4\uff01react\u4f1a\u81ea\u52a8\u5bf9\u6bd4\u53d8\u66f4\u7684\u72b6\u6001\u6765\u6e32\u67d3\u65b0\u7684\u9875\u9762\uff0c\u8fd9\u91cc\u9762\u8fc7\u7a0b\u5f88\u590d\u6742\u3002\u5efa\u8bae\u53bb\u67e5\u9605react\u76f8\u5173\u8d44\u6599\uff0c\u7b14\u8005\u4e5f\u4e0d\u662f\u5f88\u719f\u6089\u91cc\u9762\u7684 \u7ec6\u8282 \uff0c\u60f3\u8981\u4e86\u89e3\u7684\u8bdd\uff0c\u53bb\u641c\u7d22 virtual dom \u3002 \u4ea4\u4e92\u65b9\u6cd5\u7684\u7f16\u5199 \u6211\u4eec\u6709\u5f88\u591a\u7ec4\u4ef6\u90fd\u6709\u6d89\u53ca\u5230\u4e00\u4e9b \u4ea4\u4e92\u65b9\u6cd5 \uff0c\u6bd4\u5982\u8bf4: \u70b9\u51fb\u67d0\u4e2a\u6309\u94ae\uff0c\u89e6\u53d1\u4ec0\u4e48\u4e8b\u4ef6\u3002\u8fd9\u4e9b\u90fd\u662f\u9700\u8981\u7f16\u5199\u65b9\u6cd5\u7684\uff0c\u6bd4\u5982\u4e0a\u56fe\u4e2d \u7528\u6237\u70b9\u51fb \u6dfb\u52a0\u9879\u76ee \uff0c\u6211\u4eec\u9700\u8981\u505a\u4ec0\u4e48\u5462\uff1f \u6211\u4eec\u9700\u8981\u628a\u5bf9\u8bdd\u6846\u663e\u793a\u51fa\u6765\u5bf9\u4e0d\u5bf9\uff1f\u6240\u4ee5\u6211\u4eec\u9700\u8981\u505a\u7684\u5c31\u662f: \u6539\u53d8\u5bf9\u8bdd\u6846\u7684\u72b6\u6001 \uff0c\u628a\u4ed6\u4ece\u9690\u85cf\u6539\u4e3a \u663e\u793a \u3002 \u7c7bHTML\u9875\u9762\u7684\u7f16\u5199 \u8fd9\u4e00\u6b65\u6bd4\u8f83\u7b80\u5355\u4e86\uff0c\u91c7\u7528jsx\u7684\u8bed\u6cd5\u53bb\u7f16\u5199html\u9875\u9762\u3002\u5927\u4f53\u4e0a\u548chtml\u90fd\u5dee\u4e0d\u591a\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u8fb9\u53ef\u4ee5\u5199\u4e00\u4e9bjs\u4ee3\u7801\uff0c\u901a\u8fc7 {} \u5c31\u53ef\u4ee5\u5305\u88f9JS\u4ee3\u7801\uff0c\u76f8\u5bf9\u6765\u8bf4\u8fd8\u662f\u5f88\u65b9\u4fbf\u7684\uff01\u638c\u63e1\u4e86jsx\uff0ces6\uff0c\u57fa\u672c\u4e0areact\u4e0a\u624b\u5c31\u5f88\u5feb\u4e86\uff01 import React, { useEffect, useState } from 'react' ; import { PageContainer } from '@ant-design/pro-layout' ; import { Avatar, Button, Card, Col, Empty, Input, Popover, Row, Select, Spin, Tooltip } from 'antd' ; import { QuestionCircleOutlined } from '@ant-design/icons' ; import FormForModal from '@/components/PityForm/FormForModal' ; import { history } from 'umi' ; import { listProject } from '@/services/project' ; import auth from '@/utils/auth' ; import { process } from '@/utils/utils' ; const {Search} = Input; const {Option} = Select; export default () => { const [data, setData] = useState([]); const [pagination, setPagination] = useState({ current : 1 , pageSize : 10 , total : 0 }); const [visible, setVisible] = useState( false ); const [users, setUsers] = useState([]); const [userMap, setUserMap] = useState({}); useEffect( async () => { await process( async ()=> { const res = await listProject({ page : pagination.current, size : pagination.size}); if (auth.response(res)) { setData(res.data) setPagination({...pagination, total : res.total}) } }); }, []) const onSearchProject = projectName => { // this.props.dispatch({ // type: 'project/fetch', // payload: {page: 1, size: 1000, projectName} // }) } const onHandleModal = status => { setVisible(status); } const onHandleCreate = values => { // this.props.dispatch({ // type: 'project/insert', // payload: values, // }) } const content = ( item ) => { return < div > {/* < p > \u8d1f\u8d23\u4eba: {userMap[item.owner].name} </ p > */} {/* < p > \u7b80\u4ecb: {item.description || '\u65e0'} </ p > */} {/* < p > \u66f4\u65b0\u65f6\u95f4: {item.updateTime} </ p > */} </ div > }; const opt = < Select placeholder = \"\u8bf7\u9009\u62e9\u9879\u76ee\u7ec4\u957f\" > { users.map(item => < Option key = {item.value} value = {item.value} > {item.label} </ Option > ) } </ Select > const fields = [ { name : 'projectName' , label : '\u9879\u76ee\u540d\u79f0' , required : true , message : \"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\" , type : 'input' , placeholder : \"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\" , }, { name : 'owner' , label : '\u9879\u76ee\u8d1f\u8d23\u4eba' , required : true , component : opt, type : 'select' , }, { name : 'description' , label : '\u9879\u76ee\u63cf\u8ff0' , required : false , message : \"\u8bf7\u8f93\u5165\u9879\u76ee\u63cf\u8ff0\" , type : 'textarea' , placeholder : \"\u8bf7\u8f93\u5165\u9879\u76ee\u63cf\u8ff0\" , }, { name : 'private' , label : '\u662f\u5426\u79c1\u6709' , required : true , message : \"\u8bf7\u9009\u62e9\u9879\u76ee\u662f\u5426\u79c1\u6709\" , type : 'switch' , valuePropName : \"checked\" , }, ] return ( < PageContainer title = {false} > < FormForModal width = {600} title = \"\u6dfb\u52a0\u9879\u76ee\" left = {6} right = {18} record = {{}} visible = {visible} onCancel = {() => { onHandleModal(false) }} fields={fields} onFinish={onHandleCreate} /> < Row gutter = {8} style = {{marginBottom: 16 }}> < Col span = {18} > < Button type = \"primary\" onClick = {() => { onHandleModal(true) }}>\u521b\u5efa\u9879\u76ee < Tooltip title = \"\u53ea\u6709\u8d85\u7ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u521b\u5efa\u9879\u76ee\" > < QuestionCircleOutlined /> </ Tooltip > </ Button > </ Col > < Col span = {6} > < Search onSearch = {onSearchProject} style = {{float: ' right '}} placeholder = \"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\" /> </ Col > </ Row > < Spin spinning = {false} > < Row gutter = {16} > { data.length === 0 ? < Col span = {24} style = {{textAlign: ' center ', marginBottom: 12 }}> < Card > < Empty description = \"\u6682\u65e0\u9879\u76ee, \u5feb\u70b9\u51fb\u300e\u521b\u5efa\u9879\u76ee\u300f\u521b\u5efa\u4e00\u4e2a\u5427!\" /> </ Card > </ Col > : data.map(item => < Col span = {4} style = {{marginBottom: 12 }}> < Popover content = {content(item)} placement = \"rightTop\" > < Card hoverable bordered = {false} style = {{borderRadius: 16 , textAlign: ' center '}} bodyStyle = {{padding: 16 }} onClick = {() => { history.push(`/project/${item.id}`); }}> < Avatar style = {{backgroundColor: '# 87d068 '}} size = {64} > {item.name.slice(0, 2)} </ Avatar > < p style = {{ textAlign: ' center ', fontWeight: ' bold ', fontSize: 18 , marginTop: 8 }}> {item.name} </ p > </ Card > </ Popover > </ Col > ) } </ Row > </ Spin > </ PageContainer > ) } \u5148\u5927\u81f4\u7785\u7785\u8fd9\u6bb5\u4ee3\u7801\uff0c\u540e\u7eed\u7b14\u8005\u4f1a\u8ddf\u8fdb\u8bb2\u89e3\u3002\u4eca\u5929\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u5427~\ud83d\ude01","title":"21.\u7f16\u5199\u9879\u76ee\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3\u548c\u9875\u9762(3)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2822%29%20%E7%BC%96%E5%86%99%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%A1%B5%E9%9D%A2%284%29/","text":"\u95f2\u804a \u672c\u6765\u6253\u7b97\u81ea\u5df1\u8bb0\u5f55\u603b\u7ed3\u4e00\u4e0b\u81ea\u5df1\u8fd9\u51e0\u5e74\u7684\u4e00\u4e2a \u5de5\u4f5c\u5185\u5bb9 \uff0c\u4e5f\u6ca1\u60f3\u8fc7\u53bb\u5927\u529b\u5ba3\u4f20\u5565\u7684\uff0c\u56e0\u4e3a\u603b\u89c9\u5f97\u6587\u7ae0\u6570\u91cf\u6709\u9650\uff0c\u4e5f\u6015\u968f\u65f6\u5c31\u4f1a \u65ad\u66f4 \u3002\u4eca\u5929\u88ab \u996d\u54e5 \u7684\u6307\u70b9\u4e86\u4e00\u4e9b\uff0c\u4e5f\u60f3\u901a\u4e86\u3002\u4e5f\u8bb8\u4e4b\u524d\u65ad\u66f4\u90fd\u662f\u6ca1\u6709\u592a\u591a\u52a8\u529b\u5427\uff0c\u5982\u679c\u6709\u4eba\u770b\u7684\u8bdd\uff0c\u4e5f\u4f1a\u88ab\u52a8\u66f4\u65b0\u7684\u3002 \u81ea\u5df1\u4e00\u76f4\u90fd\u4e0d\u662f\u5f88\u81ea\u4fe1\u5427\uff0c\u56e0\u4e3a\u786e\u5b9e\u89c1\u8bc6\u8fc7\u5f88\u591a \u5927\u795e\u7ea7\u522b \u7684\u4eba\u7269\u3002\u6bd4\u5982 \u5927\u5e08\u5144 \uff0c \u996d\u54e5 \uff0c \u9732\u9732\u54e5 \u7b49\u7b49\u3002\u672c\u6765\u4e5f\u89c9\u5f97\u6587\u7ae0\u53ef\u80fd \u53d7\u4f17\u9762 \u662f\u6ca1\u6709\u76f8\u5173\u7ecf\u9a8c\u7684\u8bfb\u8005\uff0c\u5e0c\u671b\u5927\u4f6c\u4eec\u770b\u5230\u6587\u7ae0\u7684\u9519\u8bef\u53ef\u4ee5\u53ca\u65f6\u6307\u51fa\u5440\uff0c\u6211\u5c06\u7ee7\u7eed \u865a\u5fc3\u5b66\u4e60\uff08\u5e26\u5934\u51b2\u950b\uff09 ~ \u996d\u54e5 \u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5e72\u8d27 (\u5206\u4eab\u6d4b\u8bd5\u5f00\u53d1\u7684\u4e00\u5207\u5e72\u8d27\uff0c\u641c\u7d22\u6d4b\u8bd5\u5f00\u53d1\uff0c\u7b2c\u4e00\u6761\u5c31\u662f) \u699c\u4e00\u5927\u54e5\u8d6b\u8d6b \uff08\u4e00\u4e2a\u59cb\u7ec8\u5728\u52aa\u529b\u7684\u4eba\uff09\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u6c34\u8d27 \u770b\u540d\u5b57\u4e5f\u77e5\u9053\u662f\u5206\u4eab\u6210\u957f\u7ecf\u9a8c \u56de\u987e \u4e0a\u4e00\u8282\u5df2\u7ecf\u8d34\u51fa\u4e86 \u9879\u76ee\u5217\u8868 \u9875\u9762\u7684\u5168\u90e8\u524d\u7aef\u4ee3\u7801\uff0c\u7531\u4e8e\u7b14\u8005\u524d\u7aef\u4e5f\u6ca1\u6709\u6df1\u5165\u5b66\u4e60\uff0c\u6240\u4ee5\u53ea\u80fd\u7ed9\u5927\u5bb6\u5927\u6982\u8bb2\u89e3\u4e00\u4e0b\u5427\u3002\u8fd8\u662f\u6309\u7167\u4e4b\u524d\u7684\u51e0\u4e2a\u90e8\u5206\u6765\u8bf4\u5427\uff01 \u72b6\u6001\u7ba1\u7406 \u8bbe\u7f6e\u4e86\u5982\u4e0b\u53d8\u91cf: data \u5b58\u653e\u5f53\u524d\u9879\u76ee\u6570\u7ec4 pagination \u9879\u76ee\u5206\u9875 visible \u521b\u5efa\u9879\u76ee\u8868\u5355\u662f\u5426\u53ef\u89c1\uff0c\u9ed8\u8ba4\u662f\u5426 users \u7531\u4e8e\u6211\u4eec\u9700\u8981\u9009\u62e9 \u9879\u76ee\u7ba1\u7406\u5458 \uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e2auserId => \u7528\u6237\u4fe1\u606f\u7684\u6620\u5c04\u3002\u5f53\u7136\u8fd9\u4e2a\u63a5\u53e3\u6211\u4eec\u6682\u65f6\u8fd8\u6ca1\u6709\u5b9e\u73b0\u3002 \u65b9\u6cd5\u7f16\u5199 const fetchData = async (current=pagination.current, size=pagination.size) => { await process( async ()=> { const res = await listProject({ page : current, size }); if (auth.response(res)) { setData(res.data) setPagination({...pagination, total : res.total}) } }); } \u8fd9\u4e2a\u65b9\u6cd5\u662f\u83b7\u53d6\u9879\u76ee\u5217\u8868\u7684\u65b9\u6cd5\uff0ccurrent\u4ee3\u8868page\uff0csize\u4ee3\u8868\u5206\u9875\u5927\u5c0f\uff0c\u5982\u679c\u4e0d\u4f20\u5165\u5219\u662fpagination\u9ed8\u8ba4\u7684\u503c\u3002 listProject \u5176\u5b9e\u5c31\u662f\u5305\u88c5\u7684request\u65b9\u6cd5\uff0c\u8bf7\u6c42\u540e\u7aef\u670d\u52a1\u3002 useEffect( async () => { await fetchData(); }, []) const onSearchProject = async projectName => { await process( async ()=> { const res = await listProject({ page : 1 , size : pagination.size, name : projectName}); if (auth.response(res)) { setData(res.data) setPagination({...pagination, current : 1 , total : res.total}) } }); } useEffect \u662f react \u65b0\u7248\u672c\u7684\u7279\u6027\uff0c\u5b83\u652f\u63012\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f\u65b9\u6cd5\uff0c\u7b2c\u4e8c\u4e2a\u662f\u53d8\u91cf\u6570\u7ec4\uff0c\u4f20\u5165\u7a7a\u6570\u7ec4\u7684\u8bdd\uff0c\u5219\u6bcf\u6b21\u8fd9\u4e2a\u7ec4\u4ef6\u5f00\u59cb \u6e32\u67d3 \u7684\u65f6\u5019\u4f1a\u8c03\u7528\u4e14\u53ea\u8c03\u7528\u4e00\u6b21\u65b9\u6cd5\u3002 \u6211\u4eec\u5982\u679c\u6b63\u5f0f\u4f7f\u7528\u7684\u8bdd\uff0c\u662f\u4f1a\u6709\u591a\u5957\u6d4b\u8bd5\u73af\u5883\u7684\u3002\u5982\u679c\u6211\u4eec\u5bf9\u9879\u76ee\u505a\u4e86 \u73af\u5883 \u7684\u533a\u5206\uff0c\u90a3\u4e48\u5c31\u5e94\u8be5\u5728\u5207\u6362 \u73af\u5883 \u7684\u65f6\u5019\uff0c\u83b7\u53d6\u4e0d\u540c\u73af\u5883\u7684\u9879\u76ee\u3002 \u5047\u8bbe\u6211\u4eec\u9700\u8981\u5b9e\u73b0\u8fd9\u79cd\u529f\u80fd\uff0c\u90a3\u4e48\u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2a env \u7684\u53d8\u91cf\uff0c\u7136\u540e\u6539\u5199useEffect: useEffect( async () => { await fetchData(); }, [env]) \u8fd9\u6837\u7684\u8bdd\uff0c\u6bcf\u5f53env\u53d1\u751f\u53d8\u5316\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u4e00\u6b21\u3002\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0c\u8fd9\u91cc\u53ea\u662f \u4ecb\u7ecd\u4e00\u4e0buseEffect\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd9\u8fb9\u6682\u65f6\u8fd8\u6ca1\u6709\u6269\u5c55\u5230\u591a\u5957\u73af\u5883\uff0c\u6240\u4ee5\u6b64\u5904\u6211\u4eec\u9009\u62e9[]\u5373\u53ef \u3002 const onHandleCreate = async values => { const res = await insertProject(values); if (auth.response(res, true )) { // \u521b\u5efa\u6210\u529f\u540e\u81ea\u52a8\u83b7\u53d6\u7b2c\u4e00\u9875\u7684\u6570\u636e, \u56e0\u4e3a\u9879\u76ee\u4f1a\u6309\u521b\u5efa\u65f6\u95f4\u6392\u5e8f await fetchData( 1 ); } } \u8fd9\u8fb9\u4e5f\u5982\u51fa\u4e00\u8f99\uff0c\u521b\u5efa\u5b8c\u6bd5\u4e86\u4e4b\u540e\u5982\u679c\u63a5\u53e3\u672a\u8fd4\u56de\u9519\u8bef\uff0c\u5219\u5237\u65b0\u9879\u76ee\u5217\u8868\u9875\u9762\uff0c\u5e76\u4e14\u81ea\u52a8\u53bb \u7b2c\u4e00\u9875 \u3002 const content = ( item ) => { return < div > {/* < p > \u8d1f\u8d23\u4eba: {userMap[item.owner].name} </ p > */} < p > \u7b80\u4ecb: {item.description || '\u65e0'} </ p > < p > \u66f4\u65b0\u65f6\u95f4: {item.updated_at} </ p > </ div > }; const opt = < Select placeholder = \"\u8bf7\u9009\u62e9\u9879\u76ee\u8d1f\u8d23\u4eba\" > { Object.keys(users).map(id => < Option key = {id} value = {id} > {users[id].name} </ Option > ) } </ Select > const fields = [ { name : 'projectName' , label : '\u9879\u76ee\u540d\u79f0' , required : true , message : \"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\" , type : 'input' , placeholder : \"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\" , }, { name : 'owner' , label : '\u9879\u76ee\u8d1f\u8d23\u4eba' , required : true , component : opt, type : 'select' , }, { name : 'description' , label : '\u9879\u76ee\u63cf\u8ff0' , required : false , message : \"\u8bf7\u8f93\u5165\u9879\u76ee\u63cf\u8ff0\" , type : 'textarea' , placeholder : \"\u8bf7\u8f93\u5165\u9879\u76ee\u63cf\u8ff0\" , }, { name : 'private' , label : '\u662f\u5426\u79c1\u6709' , required : true , message : \"\u8bf7\u9009\u62e9\u9879\u76ee\u662f\u5426\u79c1\u6709\" , type : 'switch' , valuePropName : \"checked\" , }, ] \u8fd9\u91cc content \u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2adiv\u7684html\u7ed3\u6784\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u5c55\u793a\u9879\u76ee\u7684\u8be6\u60c5\uff0c\u6bd4\u5982 \u8d1f\u8d23\u4eba \uff0c \u9879\u76ee\u63cf\u8ff0 \u7b49\u3002 fields\u7684\u8bdd\uff0c\u662f\u8868\u5355\u7684\u5b57\u6bb5\uff0c\u56e0\u4e3a\u6211\u9488\u5bf9 antd \u7684form\u8fdb\u884c\u4e86\u4e00\u70b9\u5c01\u88c5\uff0c\u7f16\u5199\u4e86\u4e00\u5957\u9ad8\u9636\u7ec4\u4ef6\u3002\u7b49\u4e8e\u8bf4\u662f \u89c4\u5212\u597d\u4e86\u8868\u5355\u91cc\u9762\u7684\u8868\u5355\u7ec4\u6210\uff0c\u7531input\u548cselect\u4ee5\u53caswitch\u7ec4\u4ef6\u7ec4\u6210 \u3002 \u5f85\u4f1a\u4f1a\u8bb2\u8fd9\u4e2a\u7ec4\u4ef6\uff01 \u6700\u540e\u770breturn\u91cc\u9762\u7684\u7ec4\u4ef6 return ( < PageContainer title = {false} > < FormForModal width = {600} title = \"\u6dfb\u52a0\u9879\u76ee\" left = {6} right = {18} record = {{}} visible = {visible} onCancel = {() => setVisible(false)} fields={fields} onFinish={onHandleCreate} /> < Row gutter = {8} style = {{marginBottom: 16 }}> < Col span = {18} > < Button type = \"primary\" onClick = {() => setVisible(true)}>\u521b\u5efa\u9879\u76ee < Tooltip title = \"\u53ea\u6709\u8d85\u7ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u521b\u5efa\u9879\u76ee\" > < QuestionCircleOutlined /> </ Tooltip > </ Button > </ Col > < Col span = {6} > < Search onSearch = {onSearchProject} style = {{float: ' right '}} placeholder = \"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\" /> </ Col > </ Row > < Spin spinning = {false} > < Row gutter = {16} > { data.length === 0 ? < Col span = {24} style = {{textAlign: ' center ', marginBottom: 12 }}> < Card > < Empty description = \"\u6682\u65e0\u9879\u76ee, \u5feb\u70b9\u51fb\u300e\u521b\u5efa\u9879\u76ee\u300f\u521b\u5efa\u4e00\u4e2a\u5427!\" /> </ Card > </ Col > : data.map(item => < Col key = {item.id} span = {4} style = {{marginBottom: 12 }}> < Popover content = {content(item)} placement = \"rightTop\" > < Card hoverable bordered = {false} style = {{borderRadius: 16 , textAlign: ' center '}} bodyStyle = {{padding: 16 }} onClick = {() => { history.push(`/project/${item.id}`); }}> < Avatar style = {{backgroundColor: '# 87d068 '}} size = {64} > {item.name.slice(0, 2)} </ Avatar > < p style = {{ textAlign: ' center ', fontWeight: ' bold ', fontSize: 18 , marginTop: 8 }}> {item.name} </ p > </ Card > </ Popover > </ Col > ) } </ Row > </ Spin > </ PageContainer > ) } PageContainer \u662f\u6700\u5916\u5c42\uff0c\u4e5f\u5c31\u662f\u54b1\u4eec\u770b\u5230\u7684\u8fd9\u4e00\u5757: FormForModal \u662f\u4e00\u4e2a\u5bf9\u8bdd\u6846\u8868\u5355\uff0c\u9ed8\u8ba4\u662f\u4e0d\u663e\u793a\u7684\uff0c\u53ea\u6709\u70b9\u51fb \u521b\u5efa\u9879\u76ee \u624d\u4f1a\u663e\u793a\u3002 \u7136\u540e\u7528Row\u5206\u4e862\u884c: \u5206\u522b\u662f \u521b\u5efa\u680f/\u641c\u7d22\u680f\u548c\u9879\u76ee\u5c55\u793a\u680f \u8fd9\u8fb9\u9879\u76ee\u5c55\u793a\u680f\u5982\u679c data.length === 0 \u5c31\u5c55\u793a\u4e00\u4e2a\u7a7a\u72b6\u6001\uff0c\u63d0\u793a\u7528\u6237\u53bb\u6dfb\u52a0\u9879\u76ee\uff0c\u5426\u5219\u5c31\u628a\u9879\u76ee\u5c55\u793a\u51fa\u6765\uff0c\u6bcf\u4e2a\u9879\u76ee\u5360\u5c4f\u5e55\u76841/6\uff0c\u56e0\u4e3aCol\u603b\u5171\u670924\u4efd\u3002 tips: \u8fd9\u91cc\u7c7b\u4f3c\u4e8ebootstrap\uff0c\u4e00\u884c\u5171\u670924\u4efd\uff0c\u6240\u4ee5span={4}\u4ee3\u8868\u7684\u662f4/24\uff0c\u53ef\u53c2\u8003: \u5b98\u7f51\u4ecb\u7ecd \u5176\u4ed6\u7684\u5c31\u662f Card \uff08\u5361\u7247\uff09\u7ec4\u4ef6\u548c Avatar \uff08\u5934\u50cf\uff09\u7ec4\u4ef6\u7684\u4e92\u76f8\u5d4c\u5165\uff0c Popover \u662f\u60ac\u6d6e\u7a97\u53e3\uff0c\u5982\u56fe: \u7f16\u5199\u83b7\u53d6\u7528\u6237\u5217\u8868\u7684\u63a5\u53e3 \u4fee\u6539app/dao/auth/UserDao.py \u7b5b\u9009\u51fa\u672a\u88ab\u5220\u9664\u7684\u7528\u6237\u5373\u53ef\u3002 \u4fee\u6539app/controllers/auth/user.py \u8fd9\u91cc\u6ce8\u610f\u5f00\u542f\u4e00\u4e0b\u6743\u9650\uff0c\u4f46\u662f\u4e0d\u80fd\u63a7\u5236\u592a\u6b7b\uff0c\u80fd\u8ba9\u767b\u5f55\u7528\u6237\u8bbf\u95ee\u5373\u53ef\u3002 \u524d\u7aef\u9875\u9762\u7f16\u5199listUsers\u65b9\u6cd5 \u770b\u4e0b\u6548\u679c \u53d1\u73b0\u4e00\u4e2a\u95ee\u9898: \u521b\u5efa\u6210\u529f\u540e\uff0c\u5bf9\u8bdd\u6846\u6ca1\u6709\u5173\u95ed \u6240\u4ee5\u6211\u4eec\u9700\u8981\u5728\u521b\u5efa\u6210\u679c\u540e\uff0c setVisible(false) \u53bb\u5173\u95ed\u5bf9\u8bdd\u6846\u3002 \u8fd8\u6709\u4e00\u4e2a\u5730\u65b9\u5c31\u662f \u4e4b\u524d\u6ce8\u91ca\u6389\u7684\u9879\u76ee\u8d1f\u8d23\u4eba\uff0c\u73b0\u5728\u53ef\u4ee5\u91cd\u65b0\u5f00\u542f\u4e86\u3002 \u770b\u4e0b\u641c\u7d22\u6548\u679c \u8fd9\u5c31\u662f\u672c\u8282\u7684\u5185\u5bb9\u4e86\uff0c\u5927\u90e8\u5206\u662f\u8bb2\u89e3\u4ee3\u7801\u4e3a\u4e3b\uff0c\u56e0\u4e3a \u524d\u7aef\u5185\u5bb9\u5c45\u591a \uff0c\u6240\u4ee5\u53ef\u80fd\u6709\u70b9\u61f5\u903c\u3002\u5982\u679c\u6709\u4e0d\u7406\u89e3\u7684\u5730\u65b9\uff0c\u8fd8\u8bf7\u591a\u591a\u770b\u770b react \u548c es6 \u76f8\u5173\u7684\u6559\u7a0b\u3002\u7bad\u5934\u51fd\u6570\uff0c\u770b\u7740\u522b\u6015\uff0c\u719f\u6089\u4e86\u5c31\u597d\u3002 \u4e0b\u4e00\u8282\u53ef\u80fd\u662f\u5177\u4f53\u9879\u76ee\u7684\u7f16\u8f91\u9875\u9762\u4e86\uff0c\u611f\u89c9\u8fd9\u4e00\u8bb2\u5c31\u8bb2\u4e86\u4e00\u4e2a\u4e16\u7eaa\uff0c\u518d\u540e\u9762\u5c31\u662f\u7528\u4f8b\u90a3\u5757\u4e86\u3002","title":"22.\u7f16\u5199\u9879\u76ee\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3\u548c\u9875\u9762(4)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2823%29%20%E7%BC%96%E5%86%99%E9%A1%B9%E7%9B%AE%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u4ee5\u7f16\u5199 \u9879\u76ee\u5217\u8868 \u4e3a\u4f8b\u5b50\uff0c\u8bb2\u89e3\u4e86\u4e00\u4e2a\u76f8\u5bf9\u5b8c\u6574\u7684demo\uff0c\u5176\u5b9e\u53ea\u5b8c\u6210\u4e86 \u67e5\u8be2 \u548c \u65b0\u589e \u7684\u529f\u80fd\uff0c\u7531\u4e8e\u7bc7\u5e45\u548c\u65f6\u95f4\u7684\u5173\u7cfb\uff0c\u8fd9\u4e9b\u7b14\u8005\u90fd\u4f1a\u8865\u5168\uff0c\u4f46\u662f\u53ef\u80fd\u4e0d\u4f1a\u5b8c\u5168\u8bb2\u89e3\uff0c\u6240\u4ee5\u5927\u5bb6\u53ef\u4ee5\u5bf9\u7167\u4ee3\u7801\u67e5\u770b\u5bf9\u5e94\u7684\u4ee3\u7801\u6a21\u5757\u3002 \u8fd9\u4e00\u8282\u6211\u4eec\u5f00\u59cb\u8bbe\u8ba1\u9879\u76ee\u7684\u8be6\u60c5\u9875\u9762\u3002 \u8bbe\u8ba1\u9879\u76ee\u9875\u9762 \u5728 \u9879\u76ee\u5217\u8868 \u9875\u9762\uff0c\u6211\u4eec\u53ea\u80fd\u770b\u5230\u9879\u76ee\u7684\u7f29\u7565\uff0c\u5982\u679c\u6211\u4eec\u70b9\u8fdb\u53bb\u9879\u76ee\u7684\u8bdd\uff0c\u662f\u9700\u8981\u80fd\u591f\u770b\u5230\u8fd9\u4e2a\u9879\u76ee\u7684\u5177\u4f53\u4fe1\u606f\u7684\u3002\u6240\u4ee5\u6211\u4eec\u8bbe\u8ba1 \u4e09\u4e2a\u677f\u5757 \uff0c\u4ee5tab\u7684\u5f62\u5f0f\u5c55\u793a: \u7528\u4f8b\u6811 \u6210\u5458\u5217\u8868 \u9879\u76ee\u8bbe\u7f6e \u8bbe\u8ba1\u7528\u4f8b\u8def\u7531 \u5728antd pro\u91cc\u9762\u652f\u6301\u53c2\u6570\u8def\u7531\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u9488\u5bf9\u4e0d\u540c\u7684\u9879\u76ee\u8981\u5c55\u793a\u4e0d\u540c\u7684\u5185\u5bb9\uff0c\u8fd9\u91cc\u5c31\u8981\u7528\u5230\u53c2\u6570\u8def\u7531\u4e86\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u9879\u76eeid\u662f1\u7684\u65f6\u5019\uff0c\u6211\u7684\u8def\u7531\u53ef\u80fd\u662f /project/1 \u914d\u7f6econfig/routes.js \u6211\u4eec\u521b\u5efa\u4e86\u8fd9\u6837\u4e00\u4e2a\u53c2\u6570\u8def\u7531\uff0c\u5e76\u628a hideInMenu \u8bbe\u7f6e\u4e3atrue\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u663e\u793a\u4e8e\u5de6\u4fa7\u83dc\u5355\u680f\u3002\u540c\u65f6\uff0c\u8fd9\u4e2a\u8def\u7531\u5bf9\u5e94\u7684\u662f ProjectDetail \u7ec4\u4ef6\u3002 \u7f16\u5199\u540e\u7aef\u63a5\u53e3 \u6211\u4eec\u76ee\u524d\u53ea\u6709\u4e00\u4e2a\u67e5\u8be2 \u9879\u76ee\u5217\u8868 \u7684\u63a5\u53e3\uff0c\u4f46\u662f\u6211\u4eec\u73b0\u5728\u662f\u6ca1\u6709\u7528\u4f8b\u6811\u7684\uff0c\u6240\u4ee5\u6682\u65f6\u8fd9\u4e2a\u9879\u76ee\u53ea\u83b7\u53d6\u5230\u9879\u76ee\u4fe1\u606f\u548c\u9879\u76ee\u89d2\u8272\u3002 ProjectRoleDao.py\u4e2d\u65b0\u589elist_role\u65b9\u6cd5 \u901a\u8fc7project_id\u53bb\u83b7\u53d6 \u8fd9\u4e2a\u9879\u76ee\u7684\u6240\u6709\u89d2\u8272\u5217\u8868 \u3002 ProjectDao.py\u4e2d\u65b0\u589equery_project\u65b9\u6cd5 \u5148\u83b7\u53d6\u5230 \u9879\u76ee\u8be6\u60c5 \uff0c\u7136\u540e\u83b7\u53d6\u9879\u76ee\u89d2\u8272\uff0c\u8fd9\u8fb9\u7684\u8bdd\u7b14\u8005\u662f\u6ca1\u6709\u7528join\u6216\u8005\u5b50\u67e5\u8be2\u7684\uff0c\u56e0\u4e3a\u611f\u89c9sqlalchemy\u7528\u8d77\u6765\u4e0d\u662f\u5f88\u65b9\u4fbf\uff0c\u5927\u5bb6\u4e5f\u53ef\u4ee5 \u81ea\u7531\u53d1\u6325 \u3002 \u6ce8\u610f\uff0c\u7b14\u8005\u4f1a\u8fd4\u56de\u5f88\u591aerr\u6216\u8005None( \u56e0\u4e3a\u53ef\u80fd\u53d7\u5230\u4e86go\u5199\u6cd5\u7684\u5f71\u54cd\uff0c\u8fd9\u91cc\u5927\u5bb6\u53ef\u4ee5\u81ea\u5df1\u6309\u7167\u81ea\u5df1\u7684\u65b9\u5f0f\u53bb\u5199 ) \u7f16\u5199/project/query\u63a5\u53e3 \u8fd9\u90e8\u5f88\u7b80\u5355\uff0c\u8001\u89c4\u77e9\u5148\u6302\u4e0a\u6743\u9650\u548c\u8def\u7531\u7684\u88c5\u9970\u5668\uff0c\u63a5\u7740\u5bf9project_id\u8fdb\u884c \u53c2\u6570\u68c0\u67e5 \uff0c\u7136\u540e\u751f\u6210\u4e00\u4e2a\u7a7a\u7684dict\uff0c\u628arole\u548cproject\u4fe1\u606f\u67e5\u8be2\u51fa\u6765\u4ee5\u540e\u5199\u5165result\u3002 \u7f16\u5199\u9875\u9762\u90e8\u5206 \u5148\u770b\u4e0b\u5927\u81f4\u6548\u679c: \u8fd9\u8fb9\u5206\u4e863\u4e2atab\uff0c\u7b2c\u4e00\u4e2a\u662f\u7528\u4f8b\u5217\u8868\uff0c\u5230\u65f6\u5019\u4f1a\u5448\u73b0\u4e00\u4e2a\u7528\u4f8b\u6811\uff0c\u5de6\u4fa7\u5462\u4f1a\u6839\u636e\u7528\u4f8b\u7684tag/\u7528\u4f8b\u7684\u7ea7\u522b\u53bb \u5c55\u793a\u8be5\u9879\u76ee\u4e0b\u7684\u7528\u4f8b \uff0c\u53f3\u8fb9\u5462\u5219\u662f\u7528\u4f8b\u7684\u5177\u4f53\u4fe1\u606f\u3002 \u6210\u5458\u5217\u8868\u4f1a\u663e\u793a\u8fd9\u4e2a\u9879\u76ee\u4e0b\u7684\u6210\u5458\uff0c\u9875\u9762\u53c2\u8003 Yapi \u3002 \u9879\u76ee\u8bbe\u7f6e\u53ef\u4ee5\u8ba9\u7528\u6237\u5bf9\u9879\u76ee\u7684 \u57fa\u7840\u4fe1\u606f \u8fdb\u884c\u4e00\u4e2a\u66f4\u6539\uff0c\u5927\u6982\u7684\u9875\u9762\u529f\u80fd\u6a21\u5757\u662f\u8fd9\u6837\u3002 \u53ef\u4ee5\u770b\u5230 \u6700\u7ec8\u6548\u679c \u91cc\u9762\u662f\u6ca1\u6709\u5177\u4f53\u7684\u6210\u5458\u5217\u8868\u548c\u9879\u76ee\u8bbe\u7f6e\u7684\uff0c\u6211\u4eec\u5148\u5b8c\u6210\u4e00\u4e2a\u7a7a\u58f3\uff0c\u540e\u7eed\u518d\u8fdb\u884c\u8865\u5145\u3002 \u7f16\u5199ProjectDetail.jsx import React, { useEffect, useState } from 'react' ; import { PageContainer } from '@ant-design/pro-layout' ; import { Avatar, Card, Tabs } from 'antd' ; import { useParams } from 'umi' ; import { process } from '@/utils/utils' ; import { queryProject } from '@/services/project' ; import auth from '@/utils/auth' ; const { TabPane } = Tabs; export default () => { const params = useParams(); const projectId = params.id; const [projectData, setProjectData] = useState({}); const [roles, setRoles] = useState([]); const fetchData = async () => { const res = await queryProject({ projectId }); if (auth.response(res)) { setProjectData(res.data.project); setRoles(res.data.role); } }; useEffect( async () => { await process(fetchData); }, []); return ( < PageContainer title = { < span > < Avatar style = {{ backgroundColor: '# 87d068 ' }}> {projectData.name === undefined ? 'loading...' : projectData.name.slice(0, 2)} </ Avatar > {projectData.name} </ span > }> < Card > < Tabs defaultActiveKey = '1' > < TabPane tab = '\u7528\u4f8b\u5217\u8868' key = '1' > \u8fd9\u91cc\u6ca1\u6709\u7528\u4f8b\uff0c\u6682\u65f6\u66ff\u4ee3\u4e00\u4e0b </ TabPane > < TabPane tab = '\u6210\u5458\u5217\u8868' key = '2' > {/* < ProjectRole /> */} </ TabPane > < TabPane tab = '\u9879\u76ee\u8bbe\u7f6e' key = '3' > {/* < ProjectInfo data = {projectData} /> */} </ TabPane > </ Tabs > </ Card > </ PageContainer > ); }; \u4ee3\u7801\u5f88\u7b80\u77ed\uff0c\u5176\u4e2d\u8bbe\u7f6e\u4e86projectData\u548croles2\u4e2a\u5b57\u6bb5\uff08\u7528\u6765\u5b58\u653e\u9879\u76ee\u4fe1\u606f\u548c\u89d2\u8272\u5217\u8868\uff09\uff0c\u7136\u540e\u7ec4\u4ef6\u52a0\u8f7d\u7684\u65f6\u5019\u4f1a\u53bb\u8bf7\u6c42\u4e00\u4e0b \u67e5\u8be2\u9879\u76ee \u7684\u63a5\u53e3\uff0cprojectId\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 useParams hook \u83b7\u53d6: const params = useParams(); const projectId = params.id; \u5269\u4e0b\u7684\"html\"\u90e8\u5206\u5f88\u7b80\u5355\u4e86\uff0c\u5c31\u662f\u6807\u51c6\u7684PageContainer+\u5361\u7247\u7684\u7ec4\u5408\uff0c\u7136\u540e\u91cc\u9762\u5d4c\u5165\u4e863\u4e2atab\u3002 \u5b8c\u5584\u7f16\u8f91\u9879\u76ee\u529f\u80fd \u53ef\u4ee5\u770b\u5230\u4e0a\u9762\u6709\u88ab\u6ce8\u91ca\u6389\u7684 ProjectInfo \u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u662f\u6211\u4eec\u7528\u6765\u4fee\u6539\u9879\u76ee\u4fe1\u606f\u7684\uff0c\u6211\u4eec\u8fd9\u5c31\u6765\u5b8c\u5584\u5b83\uff01 \u7f16\u5199\u540e\u7aef\u63a5\u53e3 ProjectDap.py\u6dfb\u52a0update_project\u65b9\u6cd5 @staticmethod def update_project (user, role, project_id, name, owner, private, description) : try : data = Project.query.filter_by(id=project_id, deleted_at= None ).first() if data is None : return \"\u9879\u76ee\u4e0d\u5b58\u5728\" data.name = name # \u5982\u679c\u4fee\u6539\u4eba\u4e0d\u662fowner\u6216\u8005\u8d85\u7ba1 if data.owner != owner and (role < pity.config.get( \"ADMIN\" ) or user != data.owner): return \"\u60a8\u6ca1\u6709\u6743\u9650\u4fee\u6539\u9879\u76ee\u8d1f\u8d23\u4eba\" data.owner = owner data.private = private data.description = description data.updated_at = datetime.now() data.update_user = user db.session.commit() except Exception as e: ProjectDao.log.error( f\"\u7f16\u8f91\u9879\u76ee: {name} \u5931\u8d25, {e} \" ) return f\"\u7f16\u8f91\u9879\u76ee: {name} \u5931\u8d25, {e} \" return None \u8fd9\u91cc\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9\u662f\uff0c\u6211\u4eec\u53ea\u6709 \u9879\u76ee\u8d1f\u8d23\u4eba \u548c \u8d85\u7ea7\u7ba1\u7406\u5458 \u53ef\u4ee5\u7f16\u8f91\u9879\u76ee\uff0c\u6240\u4ee5\u4e00\u65e6owner\u53d1\u751f\u53d8\u66f4\uff0c\u5219\u9700\u8981\u5bf9\u6743\u9650\u505a\u4e00\u4e2a\u5224\u65ad\u3002\u6700\u540e\u5c31\u662f\u8bb0\u5f97\u66f4\u6539 \u66f4\u65b0\u65f6\u95f4 \u548c \u66f4\u65b0\u4eba \u3002 \u7f16\u5199/project/update\u63a5\u53e3 @pr.route(\"/update\", methods=[\"POST\"]) @permission() def update_project (user_info) : try : user_id, role = user_info[ \"id\" ], user_info[ \"role\" ] data = request.get_json() if data.get( \"id\" ) is None : return jsonify(dict(code= 101 , msg= \"\u9879\u76eeid\u4e0d\u80fd\u4e3a\u7a7a\" )) if not data.get( \"name\" ) or not data.get( \"owner\" ): return jsonify(dict(code= 101 , msg= \"\u9879\u76ee\u540d\u79f0/\u9879\u76ee\u8d1f\u8d23\u4eba\u4e0d\u80fd\u4e3a\u7a7a\" )) private = data.get( \"private\" , False ) err = ProjectDao.update_project(user_id, role, data.get( \"id\" ), data.get( \"name\" ), data.get( \"owner\" ), private, data.get( \"description\" , \"\" )) if err is not None : return jsonify(dict(code= 110 , msg=err)) return jsonify(dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" )) except Exception as e: return jsonify(dict(code= 111 , msg=str(e))) \u8fd9\u8fb9\u540c\u6837\u4e5f\u5148\u6821\u9a8c\u53c2\u6570\uff0c\u7136\u540e\u8c03\u7528update_project\u65b9\u6cd5\u3002 src/services/project.js\u7f16\u5199\u66f4\u65b0\u9879\u76ee\u7684\u65b9\u6cd5 \u7f16\u5199ProjectInfo.jsx import React, { useEffect, useState } from 'react' ; import { Row, Col, Select, Tooltip } from 'antd' ; import CustomForm from '@/components/PityForm/CustomForm' ; import { listUsers } from '@/services/user' ; import { updateProject } from '@/services/project' ; import auth from '@/utils/auth' ; const { Option } = Select; export default ({ data }) => { const [users, setUsers] = useState([]); const fetchUsers = async () => { const res = await listUsers(); setUsers(res); }; useEffect( async () => { await fetchUsers(); }, []); const onFinish = async (values) => { const project = { ...data, ...values, }; const res = await updateProject(project); auth.response(res, true ); }; const opt = < Select placeholder = '\u8bf7\u9009\u62e9\u9879\u76ee\u7ec4\u957f' > { users.map(item => < Option key = {item.value} value = {item.id} > < Tooltip title = {item.email} > {item.name} </ Tooltip > </ Option > ) } </ Select > ; const fields = [ { name : 'name' , label : '\u9879\u76ee\u540d\u79f0' , required : true , message : '\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0' , type : 'input' , placeholder : '\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0' , component : null , }, { name : 'owner' , label : '\u9879\u76ee\u8d1f\u8d23\u4eba' , required : true , component : opt, type : 'select' , }, { name : 'description' , label : '\u9879\u76ee\u63cf\u8ff0' , required : false , message : '\u8bf7\u8f93\u5165\u9879\u76ee\u63cf\u8ff0' , type : 'textarea' , placeholder : '\u8bf7\u8f93\u5165\u9879\u76ee\u63cf\u8ff0' , }, { name : 'private' , label : '\u662f\u5426\u79c1\u6709' , required : true , message : '\u8bf7\u9009\u62e9\u9879\u76ee\u662f\u5426\u79c1\u6709' , type : 'switch' , valuePropName : 'checked' , }, ]; return ( < Row gutter = {8} > < Col span = {24} > < CustomForm left = {6} right = {18} record = {data} onFinish = {onFinish} fields = {fields} /> </ Col > </ Row > ); } \u5176\u5b9e \u8fd9\u91ccfields\u548c\u4e4b\u524d\u521b\u5efa\u9879\u76ee\u7684fields\u91cd\u590d\u5b9a\u4e49\u4e86\uff0c\u7b49\u4e8e\u5b58\u653e\u4e862\u4efd\uff0c\u4f46\u662f\u8fd9\u91cc\u6211\u56fe\u65b9\u4fbf\u5c31\u6ca1\u6709\u62bd\u51fa\u6765\uff0c\u56e0\u4e3a\u6015\u4ee5\u540e\u8fd9\u91cc\u6709\u4ec0\u4e48\u53d8\u5316\uff08\u8bf4\u767d\u4e86\u5c31\u662f\u61d2\uff0c\u4f46\u662f\u5343\u4e07\u522b\u548c\u6211\u4e00\u6837\uff0c\u80fd\u5c01\u88c5\u7684\u8fd8\u662f\u5c01\u88c5\uff09 \u7136\u540e\u5728\u7ec4\u4ef6\u52a0\u8f7d\u7684\u65f6\u5019\u4f1a\u83b7\u53d6\u6240\u6709\u7528\u6237\uff08\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u4fee\u6539\u7ec4\u5458\uff09\uff0c\u4f46\u662f\u6211\u7a81\u7136\u60f3\u5230\uff0c\u89d2\u8272\u5217\u8868\u4e5f\u4f1a\u83b7\u53d6\u7ec4\u5458\u8eab\u4efd\uff0c\u6240\u4ee5\u6211\u4eec\u628auser\u7684\u83b7\u53d6\u653e\u5230\u6700\u5916\u5c42\uff0c\u4e5f\u5c31\u662fProject\u5c42\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u5c55\u793a\u4e86\uff0c\u8be6\u7ec6\u53ef\u770b\u6e90\u7801\u3002 CustomForm\u662f\u81ea\u5df1\u5c01\u88c5\u7684\u4e00\u5957\u901a\u7528\u8868\u5355\uff0c\u91cc\u9762\u4e5f\u662f\u89e3\u6790fields\u7136\u540e\u5c55\u793a\u8868\u5355: import { Button, Col, Form, Row, Tooltip, Upload } from 'antd' ; import React from 'react' ; import ProjectAvatar from '@/components/Project/ProjectAvatar' ; import { SaveOutlined } from '@ant-design/icons' ; import getComponent from './index' ; const { Item : FormItem} = Form; export default ({left, right, formName, record, onFinish, fields, dispatch}) => { const [form] = Form.useForm(); const layout = { labelCol : { span : left}, wrapperCol : { span : right}, } return ( < Form form = {form} { ...layout } name = {formName} initialValues = {record} onFinish = {onFinish} > < Row > < Col span = {6}/ > < Col span = {12} style = {{textAlign: ' center '}}> < Tooltip title = \"\u70b9\u51fb\u53ef\u4fee\u6539\u5934\u50cf\" placement = \"rightTop\" > < Upload customRequest = {async fileData => { await dispatch({ type: 'project/uploadFile', payload: { file: fileData.file, project_id: record.id, } }) }} fileList={[]}> < Row style = {{textAlign: ' center ', marginBottom: 16 }}> < ProjectAvatar data = {record}/ > </ Row > </ Upload > </ Tooltip > </ Col > < Col span = {6}/ > </ Row > { fields.map(item => < Row > < Col span = {6}/ > < Col span = {12} > < FormItem label = {item.label} colon = {item.colon || true } rules = { [{ required: item.required , message: item.message }] } name = {item.name} valuePropName = {item.valuePropName || ' value '} > {getComponent(item.type, item.placeholder, item.component)} </ FormItem > </ Col > < Col span = {6}/ > </ Row > ) } < Row > < Col span = {6}/ > < Col span = {12} style = {{textAlign: ' center '}}> < FormItem { ... { labelCol: { span: 0 }, wrapperCol: { span: 24 }, }}> < Button htmlType = \"submit\" type = \"primary\" > < SaveOutlined /> \u4fee\u6539 </ Button > </ FormItem > </ Col > < Col span = {6}/ > </ Row > </ Form > ) } \u5927\u81f4\u5c31\u662f\u628afields\u91cc\u9762\u7684json\u6570\u636e\u53d6\u51fa\uff0c\u7136\u540e\u6309\u7167\u987a\u5e8f\u89e3\u6790\u6210\u8868\u5355\uff0c\u6700\u540e\u7559\u4e00\u4e2a\u4fee\u6539\u7684\u6309\u94ae\uff0c\u6267\u884c \u4fdd\u5b58 \u64cd\u4f5c\u3002 \u770b\u4e0b\u6548\u679c\u5427 \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u6700\u4e0a\u65b9\u7684\u9879\u76ee\u540d\u79f0\u8fd8\u6ca1\u6709\u8fdb\u884c\u66f4\u6539\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u91cd\u65b0\u83b7\u53d6\u4e0b\u9879\u76ee\u6570\u636e\u3002 \u8981\u505a\u7684\u5c31\u662f\u4f20\u5165fetchData\u65b9\u6cd5\uff0c\u5e76\u5728\u4fee\u6539\u540e\u6267\u884c\u8fd9\u4e2a\u65b9\u6cd5\u3002 \u66f4\u65b0\u540e \u53ef\u4ee5\u770b\u5230\u53d8\u6210\u4e86QQ\u4e09\u56fd \u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u8fdb\u5ea6\u5f88\u6162\uff0c\u66f4\u65b0\u5f88\u6162\u3002\u5468\u672b\u6109\u5feb\uff0c\u770b RNG VS TES \uff01 \u9879\u76ee\u524d\u7aef\u5730\u5740 \u9879\u76ee\u540e\u7aef\u5730\u5740","title":"23.\u7f16\u5199\u9879\u76ee\u8be6\u60c5\u9875\u9762"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2824%29%20%E7%BC%96%E5%86%99%E6%88%90%E5%91%98%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u7f16\u5199\u4e86 \u9879\u76ee\u8bbe\u7f6e \u76f8\u5173\u529f\u80fd\uff0c\u8fd8\u5269\u4e0b2\u4e2atab\u6ca1\u6709\u7f16\u5199\uff0c\u5206\u522b\u662f: \u7528\u4f8b\u5217\u8868 \u548c \u6210\u5458\u7ba1\u7406 . \u7f16\u5199\u6210\u5458\u5217\u8868\u53ca\u90e8\u5206\u63a5\u53e3 \u6dfb\u52a0\u6210\u5458 \u641c\u7d22\u6210\u5458 \u7f16\u8f91\u6210\u5458 \u5220\u9664\u6210\u5458 \u4eca\u5929\u56e0\u4e3a \u65f6\u95f4\u5173\u7cfb \u5c31\u4e0d\u5c55\u793a\u5220\u9664\u6210\u5458\u4e86\uff0c\u53ea\u7f16\u5199 \u7f16\u8f91/\u65b0\u589e \u6210\u5458\u63a5\u53e3\u548c\u9875\u9762\u3002 \u7f16\u5199\u65b0\u589e/\u7f16\u8f91\u89d2\u8272\u7684\u65b9\u6cd5 \u7531\u4e8e\u4e4b\u524d\u6211\u4eec\u5df2\u7ecf \u7f16\u8f91 \u8fc7 \u65b0\u589e\u89d2\u8272 \u7684\u65b9\u6cd5\u4e86\uff0c\u4f46\u662f\u9700\u8981\u4fee\u6539\u4e00\u70b9: \u8fd9\u91cc\u89d2\u8272\u7684 \u7b5b\u9009\u6761\u4ef6 \u4e0d\u80fd\u52a0\u4e0a\uff0c\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3a\u52a0\u4e0a\u7684\u8bdd\uff0c\u6211\u53ef\u4ee5\u521b\u5efa\u540c\u4e00\u4e2auser_id\u7684\u4e0d\u540c\u89d2\u8272\uff0c\u6bd4\u5982\u4e00\u4e2a\u7ec4\u957f\u4e00\u4e2a\u7ec4\u5458\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u8981user_id\u5728\u6570\u636e\u8868\u91cc\u51fa\u73b0\u8fc7\uff0c\u5c31\u89c6\u4e3a \u91cd\u590d\u6dfb\u52a0 \u3002 \u65b0\u589e\u7f16\u8f91\u65b9\u6cd5 \u7f16\u8f91\u65b9\u6cd5\u6d41\u7a0b\u4f1a\u6bd4\u8f83\u591a\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u5224\u65ad\u7528\u6237\u662f\u5426\u662f\u8d85\u7ba1\uff0c\u5982\u4e0d\u662f\uff0c\u5219\u5224\u65ad\u4ed6\u662f\u4e0d\u662fowner\uff0c\u5982\u679c\u4e5f\u4e0d\u662f\uff0c\u5219\u5224\u65ad\u4ed6\u662f\u4e0d\u662f \u7ec4\u957f \uff0c\u5982\u679c\u662f\u5219\u5224\u65ad\u4ed6\u8981\u4fee\u6539\u7684\u7528\u6237\u662f\u4e0d\u662f\u7ec4\u957f\uff0c\u7528\u6237\u662f\u7ec4\u957f\u5219\u4e0d\u8ba9\u4ed6\u4fee\u6539\uff01 @staticmethod def update_project_role (role_id, project_role, user, user_role) : try : role = ProjectRole.query.filter_by(id=role_id, deleted_at= None ).first() if role is None : return \"\u8be5\u7528\u6237\u89d2\u8272\u4e0d\u5b58\u5728\" if user_role != pity.config.get( \"ADMIN\" ): project = Project.query.filter_by(id=role.project_id).first() if project is None : return \"\u8be5\u9879\u76ee\u4e0d\u5b58\u5728\" if project.owner != user and role.project_role == 1 : # \u8bf4\u660e\u65e2\u4e0d\u662fowner\u4e5f\u4e0d\u662f\u8d85\u7ba1\uff0c\u65e0\u6cd5\u4fee\u6539\u963b\u6b62\u7684\u6743\u9650 return \"\u4e0d\u80fd\u4fee\u6539\u5176\u4ed6\u7ec4\u957f\u7684\u6743\u9650\" updater_role = ProjectRole.query.filter_by(user_id=user, project_id=role.project_id, deleted_at= None ).first() if updater_role is None or updater_role.project_role == 1 : return \"\u5bf9\u4e0d\u8d77\uff0c\u4f60\u6ca1\u6709\u6743\u9650\" role.project_role = project_role role.updated_at = datetime.now() role.update_user = user db.session.commit() except Exception as e: ProjectRoleDao.log.error( f\"\u4fee\u6539\u9879\u76ee\u7528\u6237\u5931\u8d25, {e} \" ) return f\"\u4fee\u6539\u9879\u76ee\u7528\u6237\u5931\u8d25, {e} \" return None \u5224\u65ad\u4ed6\u8981\u4fee\u6539\u7684\u89d2\u8272id\u662f\u5426\u5b58\u5728 \u5224\u65ad\u662f\u5426\u662f\u8d85\u7ba1\u6216\u8005owner \u5224\u65ad\u8981\u4fee\u6539\u7684\u662f\u4e0d\u662f\u7ec4\u957f \u5224\u65ad\u4ed6\u81ea\u8eab\u662f\u5426\u662f\u7ec4\u957f \u8fd9\u4e9b\u6821\u9a8c\u90fd\u901a\u8fc7\u4ee5\u540e\uff0c\u624d \u5141\u8bb8\u4ed6\u4fee\u6539\u7ec4\u5458\u7684\u6743\u9650 \u3002 \u8865\u5168\u5177\u4f53\u7684\u63a5\u53e3\u65b9\u6cd5 @pr.route(\"/role/insert\", methods=[\"POST\"]) @permission() def insert_project_role (user_info) : try : data = request.get_json() if data.get( \"user_id\" ) is None or data.get( \"project_role\" ) is None or data.get( \"project_id\" ) is None : return jsonify(dict(code= 101 , msg= \"\u8bf7\u6c42\u53c2\u6570\u6709\u8bef\" )) err = ProjectRoleDao.add_project_role(data.get( \"user_id\" ), data.get( \"project_id\" ), data.get( \"project_role\" ), user_info[ \"id\" ]) if err is not None : return jsonify(dict(code= 110 , msg=err)) except Exception as e: return jsonify(dict(code= 110 , msg=str(e))) return jsonify(dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" )) @pr.route(\"/role/update\", methods=[\"POST\"]) @permission() def update_project_role (user_info) : try : data = request.get_json() if data.get( \"user_id\" ) is None or data.get( \"project_role\" ) is None or data.get( \"project_id\" ) is None \\ or data.get( \"id\" ) is None : return jsonify(dict(code= 101 , msg= \"\u8bf7\u6c42\u53c2\u6570\u6709\u8bef\" )) err = ProjectRoleDao.update_project_role(data.get( \"id\" ), data.get( \"project_role\" ), user_info[ \"id\" ], user_info[ \"role\" ]) if err is not None : return jsonify(dict(code= 110 , msg=err)) except Exception as e: return jsonify(dict(code= 110 , msg=str(e))) return jsonify(dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" )) 2\u6bb5\u4ee3\u7801\u6bd4\u8f83\u63a5\u8fd1\uff0c\u57fa\u672c\u5c31\u662f\u6821\u9a8c\u53c2\u6570+\u8c03\u7528\u6838\u5fc3\u65b9\u6cd5\u3002 \u7f16\u5199\u524d\u7aef\u90e8\u5206 \u7f16\u5199services\u90e8\u5206: src/services/project.js \u7f16\u5199ProjectRole.jsx\u7ec4\u4ef6 \u9996\u5148\u52a0\u8f7d\u7ec4\u4ef6\u7684\u65f6\u5019\u83b7\u53d6user_id => user\u7684\u6620\u5c04\uff0c\u7ef4\u62a4\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u7528\u6765\u9009\u62e9\u7528\u6237+\u7528\u6237\u89d2\u8272\u3002 onUpdateRole \u5982\u679c\u66f4\u65b0\u6210\u529f\u5219\u91cd\u65b0\u52a0\u8f7d\u6570\u636e\u3002 onFinish \u65b0\u589e\u89d2\u8272\u4fe1\u606f onConfirm \u7528\u6765\u5220\u9664\u89d2\u8272\uff0c\u76ee\u524d\u529f\u80fd\u672a\u5b8c\u6210\u3002 permission \u8fd9\u8fb9\u5176\u5b9e\u662f\u4e00\u4e2a\u5305\u88c5\u7ec4\u4ef6\uff0c\u5f53project_role\u662f'OWNER'\u7684\u65f6\u5019\uff0c\u6211\u4eec\u628a\u5b83\u8fdb\u884c \u7279\u6b8a\u663e\u793a : \u4e0d\u53ef\u7f16\u8f91 \u7279\u6b8a\u8eab\u4efd\u6807\u8bc6 \u5176\u4ed6\u7528\u6237\u5219\u8fd4\u56de\u4e00\u4e2a\u9009\u62e9\u6846\uff0c\u901a\u8fc7\u9009\u62e9\u4ed6\u7684\u89d2\u8272\u800c\u89e6\u53d1update\u65b9\u6cd5\u3002 fields\u662f\u8868\u5355\u76842\u4e2a\u5b57\u6bb5: \u7528\u6237\u548c\u89d2\u8272 \u6ce8\u610f\u8fd9\u91cc: \u6211\u5728roles\u524d\u9762\u5f3a\u884c\u585e\u4e86\u4e00\u4e2a OWNER \u7684\u6570\u636e\uff0c\u4e3a\u7684\u5c31\u662f\u547c\u5e94\u4e4b\u524d\u9488\u5bf9project_role === 'OWNER'\u7684\u60c5\u51b5\u3002 \u8fd9\u8fb9\u5c31\u662f \u6dfb\u52a0\u6210\u5458 \u7684\u6309\u94ae\u548cList\u5217\u8868\u3002 \u6700\u7ec8\u6548\u679c \u4eca\u5929\u66f4\u7684\u5f88\u4ed3\u4fc3\uff0c\u5230\u5bb6\u6bd4\u8f83\u665a\u3002\u5f88\u591a\u4e1c\u897f\u4e5f\u8bf4\u7684\u4e0d\u6e05\u4e0d\u695a\u7684\uff0c \u51d1\u5408\u770b\u5427 \u3002\u4e0b\u6b21\u54ea\u6015\u4e00\u6b21\u6027\u5199\u4e0d\u5b8c\u4e5f\u4e0d\u5f3a\u884c\u66f4\u6587\u4e86\uff0c\u4e0d\u8fc7\u6709\u4e0d\u61c2\u7684\u6216\u8005\u6709\u5efa\u8bae\u7684\u53ef\u4ee5\u968f\u65f6\u8054\u7cfb\u6211\u5440\uff01\u6211\u77e5\u9053\u5f88\u591a\u8bfb\u8005\u4e0d\u592a\u719f\u6089React\uff0c\u6211\u81ea\u5df1\u4e5f\u6ca1\u529e\u6cd5\u4ece\u6700\u57fa\u7840\u7684\u5730\u65b9\u4ea4\uff0c\u6240\u4ee5\u53ef\u80fd\u5728\u540e\u9762\u82b1\u70b9\u65f6\u95f4\u5927\u81f4\u5199\u4e00\u70b9\u70b9 \u7b80\u5355\u7684\u6559\u7a0b \u5427\u3002 \u524d\u7aef\u5730\u5740: https://github.com/wuranxu/pityWeb \u540e\u7aef\u5730\u5740: https://github.com/wuranxu/pity \u624d\u53d1\u73b0\u4e4b\u524d\u5730\u5740\u90fd\u6ca1\u8d34\u4e0a\uff0c\u8fd9\u91cc\u8865\u4e0a\u4e86\u54c8\u3002\u540e\u9762\u5220\u9664\u7b49\u4ee3\u7801\u5c31\u53ef\u80fd\u4e0d\u8d34\u4e86\uff0c\u5927\u5bb6\u6709\u5174\u8da3\u770b\u4ee3\u7801\u5c31\u53ef\u4ee5\u5566\uff01","title":"24.\u7f16\u5199\u6210\u5458\u7ba1\u7406\u529f\u80fd"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2825%29%20%E7%BC%96%E5%86%99%E7%94%A8%E4%BE%8B%E6%A0%91/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u6211\u4eec\u4e3b\u8981\u9488\u5bf9\u7528\u6237\u7684\u89d2\u8272\u8fdb\u884c \u6dfb\u52a0 \u548c \u4fee\u6539 \u529f\u80fd\uff0c\u8fd8\u5269\u4e0b \u67e5\u8be2 \u548c \u5220\u9664 \uff0c\u8fd9\u4e2a\u7b14\u8005\u5df2\u7ecf\u7528\u4ee3\u7801\u5b9e\u73b0\u4e86\u3002\u5c31\u4e0d\u8bb2\u89e3\u601d\u8def\uff0c\u53ea\u662f\u8d34\u4ee3\u7801\u56de\u987e\u4e00\u4e0b\u3002\u5177\u4f53\u7684\u53ef\u4ee5\u53bb\u9879\u76ee\u91cc\u9762\u67e5\u770b\uff01 \u641c\u7d22\u7528\u6237 \u56e0\u4e3a\u4e00\u4e2a\u9879\u76ee\u7684\u6570\u636e\u90fd\u5df2\u7ecf\u5c55\u793a\u7ed9\u524d\u7aef\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u7528\u524d\u7aef\u6765\u8fdb\u884c\u8fc7\u6ee4\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u518d\u8c03\u7528 \u540e\u7aef\u63a5\u53e3 \u3002 \u5728\u6dfb\u52a0\u6210\u5458\u540c\u4e00\u884c\u6dfb\u52a0\u4e86\u4e00\u4e2a\u641c\u7d22\u6846\uff0c\u7528\u6765\u641c\u7d22\u6210\u5458 \u641c\u7d22\u65b9\u6cd5 \u8fd9\u4e2a\u641c\u7d22\u65b9\u6cd5\u7684\u601d\u8def\u662f\uff0c\u5f53\u7528\u6237\u8f93\u5165\u7a7a\u5b57\u7b26\u4e32\u7684\u65f6\u5019\uff0c\u5219\u8fd8\u539f\u4e4b\u524d\u7684\u6570\u636e\u3002\u800c\u7528\u6237\u8f93\u5165\u4e86\u5bf9\u5e94\u7684 name \uff0c\u90a3\u4e48\u5219\u641c\u7d22roles\u6570\u7ec4\u4e2d\u6240\u6709\u90ae\u4ef6/\u59d3\u540d\u5305\u542bname\u7684\u6570\u636e\uff0c\u5e76\u66f4\u65b0data\u6570\u7ec4\u3002\uff08\u6bd5\u7adf data\u6570\u7ec4 \u624d\u662f\u5177\u4f53\u663e\u793a\u6570\u636e\u7684\u5730\u65b9\uff09 \u5220\u9664\u65b9\u6cd5 \u5220\u9664\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u901a\u8fc7id\u5220\u9664\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u5982\u679c\u6210\u529f\u5c31 \u91cd\u65b0\u52a0\u8f7d\u4e0b\u6570\u636e \u3002 \u540e\u7aef\u66f4\u65b0 \u7f16\u5199\u5220\u9664\u7528\u6237\u89d2\u8272\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u4e0a\u8282\u7f16\u5199\u8fc7\u7c7b\u4f3c\u7684 \u6743\u9650\u6821\u9a8c \u65b9\u6cd5\u3002\u4f46\u662f\u6bcf\u6b21\u90fd\u5148\u5224\u65ad\u4ed6\u662f\u4e0d\u662f \u8d85\u7ba1 \uff0c\u518d\u5224\u65ad\u4ed6\u662f\u4e0d\u662f \u9879\u76eeowner \uff0c\u6700\u540e\u518d\u5224\u65ad\u4ed6\u662f\u4e0d\u662f \u7ec4\u957f \uff0c\u8fd9\u6837\u7684\u6b65\u9aa4\u5176\u5b9e\u5728\u589e/\u5220/\u6539\u90fd\u662f\u9700\u8981\u7684\uff0c\u4e3a\u4f55\u4e0d\u62bd\u51fa\u4e00\u4e2a\u516c\u5171\u65b9\u6cd5\u5462\uff1f \u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u62bd\u79bb\u4e86 has_permission \u7684\u65b9\u6cd5 \u903b\u8f91\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u57fa\u672c\u662f\u6309\u7167 \u4e0a\u9762\u8bf4\u7684 \u4e00\u6837\uff0c\u5148\u5224\u65ad \u8d85\u7ba1 \uff0c\u518d\u662f \u9879\u76eeowner \uff0c\u8fd9\u91cc\u6709\u4e2a \u7ec4\u957f \u503c\u5f97\u6ce8\u610f\uff0c\u56e0\u4e3a\u7ec4\u957f\u4e0d\u80fd\u4fee\u6539\u7ec4\u957f\u7684\u6743\u9650\uff0c\u6240\u4ee5\u4e00\u65e6\u4ed6\u4e0d\u662f\u8d85\u7ba1\u4e14\u4e0d\u662fowner\uff0c\u90a3\u4e48\u4ed6\u8981\u4fee\u6539\u7ec4\u957f\u7684\u6743\u9650(\u5220\u9664\u6216\u8005\u6539\u52a8)\uff0c\u90a3\u90fd\u662f\u7981\u6b62\u7684\u3002 \u770b\u770b\u6548\u679c \u90a3\u6211\u4eec\u73b0\u5728\u8fdb\u5165\u6b63\u9898\u5427\uff01 \u6539\u52a8\u6d4b\u8bd5\u7528\u4f8b\u8868 \u5176\u5b9e\u5982\u679c\u505a\u7684\u66f4\u5b8c\u7f8e\u7684\u8bdd\uff0c\u7528\u4f8b\u5e94\u8be5\u662f\u6709\u6a21\u5757\u7684\u5212\u5206\u7684\uff0c\u4f46\u662f\u8fd9\u91cc\u6211\u4eec\u5c31\u4e0d\u5206\u90a3\u4e48\u7ec6\u81f4\u4e86\uff0c\u7528\u4f8b\u7684\u76ee\u5f55\u4e0d\u5355\u72ec\u62bd\u51fa\u6765 \u7ef4\u62a4 \u4e86\uff0c\u5c31\u56fe\u4e00\u4e2a\u5b57\u513f: \u7701\u4e8b \u7528\u4f8b\u7b49\u7ea7 \u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u652f\u6301p0-p3\u6216\u8005\u66f4\u591a\uff0c\u8fd9\u4e2a\u6839\u636e\u5177\u4f53\u7684\u4e1a\u52a1\u9700\u6c42\u5236\u5b9a\u3002 \u7528\u4f8b\u6240\u5c5e\u76ee\u5f55 \u4e3a\u4e86\u66f4\u65b9\u4fbf\u5730\u53bb\u67e5\u770b\u7528\u4f8b\uff0c\u6211\u4eec\u628a\u7528\u4f8b\u6309\u7167 \u76ee\u5f55 \u8fdb\u884c\u5206\u7c7b\uff0c\u8fd9\u6837\u7684\u8bdd\u7528\u4f8b\u5c31\u5f62\u6210\u4e86 3\u7ea7\u7ed3\u6784 : \u9879\u76ee->\u76ee\u5f55->\u7528\u4f8b \u867d\u7136\u8fd9\u8fb9\u6ca1\u6709\u628a \u63a5\u53e3 \u8fd9\u79cd\u5173\u952e\u4fe1\u606f\u5e26\u5165\u8fdb\u6765\uff0c\u4f46\u662f\u540e\u7eed\u53ef\u4ee5\u7cc5\u5408yapi\u76f8\u5173\u7684\u6587\u6863\uff0c\u7528\u4f8b\u901a\u8fc7\u65b0\u589e\u4e00\u4e2a\u5b57\u6bb5: api_id\uff0c\u7528\u6765\u6253\u901a\u6d4b\u8bd5\u7528\u4f8b\u548capi\u4e4b\u95f4\u7684\u8054\u7cfb\u3002\u8fd9\u91cc\u5c31\u5148\u4e0d \u7ea0\u7ed3 \u8fd9\u4e48\u591a\u4e86\uff01 \u5b8c\u5584\u7528\u4f8b\u5217\u8868\u76f8\u5173\u63a5\u53e3 \u65b0\u589e\u83b7\u53d6\u7528\u4f8b\u6811\u7684\u63a5\u53e3 from collections import defaultdict from app.models.test_case import TestCase from app.utils.logger import Log class TestCaseDao (object) : log = Log( \"TestCaseDao\" ) @staticmethod def list_test_case (project_id) : try : case_list = TestCase.query.filter_by(project_id=project_id, deleted_at= None ).order_by( TestCase.name.asc()).all() return TestCaseDao.get_tree(case_list), None except Exception as e: TestCaseDao.log.error( f\"\u83b7\u53d6\u6d4b\u8bd5\u7528\u4f8b\u5931\u8d25: {str(e)} \" ) return [], f\"\u83b7\u53d6\u6d4b\u8bd5\u7528\u4f8b\u5931\u8d25: {str(e)} \" @staticmethod def get_tree (case_list) : result = defaultdict(list) # \u83b7\u53d6\u76ee\u5f55->\u7528\u4f8b\u7684\u6620\u5c04\u5173\u7cfb for cs in case_list: result[cs.catalogue].append(cs) keys = sorted(result.keys()) tree = [dict(key= f\"cat_ {key} \" , children=[{ \"key\" : f\"case_ {child.id} \" , \"title\" : child.name} for child in result[key]], title=key, total=len(result[key])) for key in keys] return tree \u5176\u5b9e\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u67e5\u8be2\u63a5\u53e3: \u6839\u636eproject_id\u83b7\u53d6\u7528\u4f8b\u3002\u56e0\u4e3aantd\u4e2d\u7684\u6811\u9700\u8981\u8fd9\u6837\u7684\u6570\u636e\u7ed3\u6784: \u5982\u4e0b\u56fe\u7684json const treeData = [ { title : 'parent 1' , key : '0-0' , children : [ { title : 'parent 1-0' , key : '0-0-0' , disabled : true , children : [ { title : 'leaf' , key : '0-0-0-0' , disableCheckbox : true , }, { title : 'leaf' , key : '0-0-0-1' , }, ], }, { title : 'parent 1-1' , key : '0-0-1' , children : [{ title : < span style = {{ color: '# 1890ff ' }}> sss </ span > , key : '0-0-1-0' }], }, ], }, key\u662f\u7528\u6765\u786e\u5b9a\u6811\u91cc\u9762\u8282\u70b9\u7684\u552f\u4e00\u6027\uff0ctitle\u5c31\u662f\u540d\u5b57\u4e86\uff0cchildren\u5c31\u662f\u6302\u5728\u8be5\u76ee\u5f55\u4e0b\u7684\u540e\u7eed\u8282\u70b9\u3002 \u5b9e\u9645\u6548\u679c: \u6ce8\u610f\u8fd9\u8fb9\u6211\u4eec\u7ed9key\u52a0\u4e86\u524d\u7f00: case_ \u548c cat_ \uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u533a\u5206 \u7528\u4f8b \u548c \u76ee\u5f55 \uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u6570\u636e\u9700\u8981\u5c55\u793a\u4e0d\u540c\u7684 icon \uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u4f1a\u5c55\u793a\u3002 \u7ee7\u7eed\u6539\u5199/project/query\u63a5\u53e3 \u540e\u7eed\u5982\u679c\u4e00\u4e2a\u9879\u76ee\u6570\u636e\u591a\u7684\u8bdd\uff0c\u53ef\u80fd\u4f1a\u5f15\u5165Redis\u6765\u7f13\u5b58project\u7684\u4fe1\u606f\uff0c\u8fd9\u6837\u4e0d\u5fc5\u6bcf\u6b21\u90fd\u53bb\u6570\u636e\u5e93\u5927\u67e5\u7279\u67e5\u3002 \u7f16\u5199\u7528\u4f8b\u5217\u8868\u9875\u9762 \u9996\u5148\u6211\u4eec\u628a\u9875\u9762\u4e00\u5206\u4e3a\u4e8c\uff0c\u5de6\u4fa7\u5c55\u793a\u6811\uff0c\u53f3\u4fa7\u6839\u636e \u7528\u6237\u9009\u62e9\u7684\u7528\u4f8b \u8fdb\u884c\u5c55\u793a\u3002 \u6548\u679c\u56fe: \u5de6\u4fa77\u4efd\uff0c\u53f3\u4fa717\u4efd\uff0c2\u4e2acard\uff0c\u5982\u679c\u9ad8\u5ea6\u8d85\u51fa\u5219\u81ea\u52a8\u53d8\u4e3a\u6eda\u52a8\u6761\u3002 \u4eca\u5929\u5c31\u4e0d\u8be6\u7ec6\u8bb2 \u524d\u7aef\u7684\u7ec6\u8282 \u4e86\uff0c\u6bd5\u7adf\u672c\u8eab\u6811\u5c31\u590d\u6742\uff0c\u611f\u89c9\u8fd8\u4e0d\u5982\u4e0d\u8bb2\uff0c\u54c8\u54c8\uff01 \u9879\u76ee\u5730\u5740 \u524d\u7aef\u5730\u5740: https://github.com/wuranxu/pityWeb \u540e\u7aef\u5730\u5740: https://github.com/wuranxu/pity \u4e0d\u77e5\u4e0d\u89c9\u5199\u4e86\u8fd9\u4e48\u4e45\u65f6\u95f4\uff0c\u4e0d\u8fc7\u4eca\u5929\u8fd8\u662f\u4ee5\u5199\u4ee3\u7801\u4e3a\u4e3b\uff0c\u7801\u6587\u7684\u65f6\u95f4\u7f29\u6c34\u4e86\uff0c\u5148\u5c3d\u91cf\u52a0\u5feb\u811a\u6b65\u5427\uff01","title":"25.\u7f16\u5199\u7528\u4f8b\u6811"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2826%29%20%E7%BC%96%E5%86%99%E7%94%A8%E4%BE%8B%E8%AF%A6%E6%83%85%E9%A1%B5%281%29/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u5df2\u7ecf\u7f16\u5199\u4e86\u7528\u4f8b\u6811\u7684\u96cf\u5f62\uff0c\u4f46\u662f\u5177\u4f53\u7684\u7528\u4f8b\u9875\u9762\u8fd8\u6ca1\u6709\u53bb\u7f16\u5199\uff0c\u52a0\u4e0a\u7b14\u8005\u505c\u66f4\u4e86\u51e0\u5929\uff0c\u6240\u4ee5\u8fdb\u5ea6\u5c31\u66f4\u7f13\u6162\u4e86\u3002 \u4e0d\u8fc7\u6211\u4eec\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6539\u4e00\u4e0bantd pro\u7684\u5168\u5c40\u914d\u7f6e\uff0c\u90a3\u5c31\u662f: \u5b57\u4f53\u3002 \u4fee\u6539\u5b57\u4f53 \u5728\u5bf9\u5e94\u7684\u76ee\u5f55\u4e0b\uff0c\u65b0\u589e\u8fd9\u6837\u4e00\u4e2a\u53c2\u6570: font-size-base \uff0c\u56e0\u4e3a12px\u4f1a\u663e\u5f97\u592a\u5c0f\uff0c\u800c14px\u800c\u4f1a\u663e\u5f97\u6587\u5b57\u6bd4\u8f83\u5927\uff0c\u867d\u7136\u4e0d\u7b26\u5408\u8bbe\u8ba1\u903b\u8f91(\u5076\u6570\u50cf\u7d20)\uff0c\u4f46\u662f\u611f\u89c913px\u6548\u679c\u4e5f\u633a\u4e0d\u9519\u3002 \u7f16\u5199\u7528\u4f8b\u540e\u7aef\u90e8\u5206 \u7f16\u5199\u53c2\u6570\u6821\u9a8c\u65b9\u6cd5 \u5728\u6b64\u4e4b\u524d\u5462\uff0c\u6211\u4eec\u9700\u8981\u5148\u65b0\u589e\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u7528\u6765 \u6821\u9a8c\u53c2\u6570 \uff0c\u8fd9\u8fb9\u4e0d\u6253\u7b97\u91c7\u7528pydantic\uff0c\u6253\u7b97\u7528jsonschema\u4e86\uff0c\u867d\u7136\u611f\u89c9\u524d\u8005\u66f4\u597d\uff0c\u4f46\u662f\u6211\u53ea\u662f\u8fd9\u4e2a\u63a5\u53e3\u60f3\u7528\u4e86\uff0c\u8bf4\u767d\u4e86\uff0c\u5c31\u662f\u73a9\u513f\uff01 \u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u8fd9\u4e2a \u65b9\u6cd5 \u5462\uff0c\u56e0\u4e3a\u6211\u4eec\u5bf9\u4e8e\u4e00\u4e2a TestCase \u5bf9\u8c61\u6765\u8bf4\uff0c\u5bf9 \u6bcf\u4e2a\u53c2\u6570\u8fdb\u884c\u6821\u9a8c \uff0c\u5b9e\u5728\u662f\u592a\u9ebb\u70e6\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u53d7\u4e0d\u4e86\u4e86\u3002 app/utils/decorator.py \u8fd9\u4e2a\u65b9\u6cd5\u5462\uff0c\u5148\u83b7\u53d6json\u6570\u636e\uff0c\u5982\u679c\u6ca1\u83b7\u53d6\u5230\u5219\u76f4\u63a5\u629b\u51fa\u5f02\u5e38\uff0c\u5426\u5219\u8c03\u7528jsonschema\u5e93\u7684 validate \u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u6821\u9a8c\u53c2\u6570\u3002 \u4e0d\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e00\u4e2a\u5f0a\u7aef\u5c31\u662f\uff0c\u53ea\u80fd\u6821\u9a8cjson\u6570\u636e\uff0c\u8bf4\u7684\u5f88\u5bf9\uff01\u5982\u679c\u6709url\u53c2\u6570\u600e\u4e48\u529e\uff0c\u90a3\u662f\u4e0d\u652f\u6301\u7684\uff0c\u7b97\u4e86\u540e\u7eed\u518d\u8bf4\u5427\uff0c\u6bd5\u7adf\u6211\u73b0\u5728\u4e3b\u8981\u8981\u89e3\u51b3\u7684\u4e0d\u662f\u8fd9\u4e2a\u3002 pip3 install jsonschema \u522b\u5fd8\u4e86\u5b89\u88c5\u8fd9\u4e2a\u65b0\u5e93\u54e6\uff0c\u5982\u679c\u662f\u65b0\u73a9\u5bb6\uff0c\u76f4\u63a5\u6309\u7167requirements.txt\u5b89\u88c5\u5373\u53ef\u3002 \u7f16\u5199\u65b0\u589e\u7528\u4f8b\u7684\u65b9\u6cd5 \u4fee\u6539\u7528\u4f8bmodel \u56e0\u4e3a\u4e4b\u524d\u65b0\u589e\u4e86 \u76ee\u5f55 \u548c \u4f18\u5148\u7ea7 2\u4e2a\u5b57\u6bb5\uff0c\u6240\u4ee5\u9700\u8981\u5728__init__\u65b9\u6cd5\u4e2d\u52a0\u5165\u8fd92\u4e2a\u5b57\u6bb5\u3002 \u65b0\u589einsert\u65b9\u6cd5 TestCaseDao.py \u5982\u679c\u9879\u76eeid\u548c\u540d\u5b57\u90fd\u4e00\u6837\uff0c\u5219\u8ba4\u4e3a\u8fd9\u4e2a\u7528\u4f8b\u5df2\u5b58\u5728\uff0c\u4e0d\u5141\u8bb8\u7528\u6237\u7ee7\u7eed\u6dfb\u52a0\u3002 \u8fd9\u8fb9\u5bf9\u4e8e\u6743\u9650\u9650\u5236\u7684\u4e0d\u662f\u5f88\u6b7b\uff0c\u6ca1\u6709\u518d \u6821\u9a8c\u7528\u6237\u662f\u5426\u80fd\u591f\u4e3a\u9879\u76ee\u6dfb\u52a0\u7528\u4f8b \u3002 \u6dfb\u52a0\u63a5\u53e3 \u7f16\u8f91 app/controllers/testcase/testcase.py \u6ce8\u610f\u8fd9\u91cc\u6211\u4eec\u5f15\u5165\u4e86 json_validate \u88c5\u9970\u5668\uff0c\u662f\u7528\u6765\u6821\u9a8c\u54b1\u4eec\u7684json\u53c2\u6570\u7684\u3002 testcase\u6570\u636e testcase = { \"type\" : \"object\" , \"properties\" : { \"id\" : { \"type\" : \"integer\" , }, \"name\" : { \"type\" : \"string\" , }, \"request_type\" : { \"type\" : \"integer\" , }, \"url\" : { \"type\" : \"string\" , }, \"request_method\" : { \"type\" : \"string\" , }, \"request_header\" : { \"type\" : \"string\" , }, \"params\" : { \"type\" : \"string\" , }, \"body\" : { \"type\" : \"string\" , }, \"project_id\" : { \"type\" : \"integer\" , }, \"tag\" : { \"type\" : \"string\" , }, \"status\" : { \"type\" : \"integer\" , }, \"priority\" : { \"type\" : \"string\" , }, \"catalogue\" : { \"type\" : \"string\" , }, \"expected\" : { \"type\" : \"string\" , }, }, \"required\" : [ \"expected\" , \"catalogue\" , \"priority\" , \"status\" , \"project_id\" , \"request_type\" , \"url\" , \"name\" ] } \u5176\u5b9e json_schema \u5c31\u662f\u4e00\u4e2a\u63cf\u8ff0json\u6570\u636e\u7ed3\u6784\u7684\u4e00\u4e32json\uff0c\u4e5f\u8bb8\u8fd9\u4e2a\u5f88\u7ed5\u53e3\uff0c\u4f46\u662f\u770b\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa: type type\u662fjson\u4e32\u7684\u7c7b\u578b\uff0cobject\u4ee3\u8868\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5176\u5b9eJSON\u4e3a\u4ec0\u4e48\u53ebJSON\uff0c\u56e0\u4e3a\u5979\u7684\u5168\u540d\u662f: JavaScript Object Notation \uff0c\u7b80\u5355\u7684\u8bf4\u5979\u5c31\u662f\u6765\u63cf\u8ff0JSON\u5bf9\u8c61\u7684\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709 integer , string \u7b49\u7b49\u3002 properities \u5c31\u662f\u8fd9\u4e2a\u5bf9\u8c61\u91cc\u9762\u7684\u5c5e\u6027\uff0c\u5373\u5b57\u6bb5\u3002 required \u4e00\u4e2a\u6570\u7ec4\uff0c\u5b58\u653e\u6570\u7ec4\u5fc5\u987b\u7684\u5b57\u6bb5\u3002 \u6d4b\u8bd5\u4e00\u4e0b \u53bb\u6389\u4e00\u4e2a\u5fc5\u987b\u5b57\u6bb5catalogue json schema\u8fd8\u6709\u63a7\u5236\u6570\u5b57\u8303\u56f4\u7b49\u6821\u9a8c\uff0c\u8fd9\u91cc\u6211\u5c31\u4e0d\u591a\u8bb2\u4e86\uff0c\u5927\u5bb6\u6709\u5174\u8da3\u53ef\u4ee5\u81ea\u884c\u67e5\u9605\u3002 \u4eca\u5929\u5185\u5bb9\u4e0d\u591a\uff0c\u591a\u4e86\u6015\u6d88\u5316\u4e0d\u826f\u3002\u6539\u5929\u53ef\u80fd\u7814\u7a76\u4e00\u4e0b httprunner \uff0c\u6bd5\u7adf\u8fd9\u4e2a\u4e5f\u662f\u4e1a\u754c\u4e3b\u6d41\u9879\u76ee\uff0c\u5408\u9002\u7684\u8bdd\u5c31\u7ed9\u517c\u5bb9\u4e86\u5427\uff0c\u8fd9\u6837\u5e73\u53f0\u53d7\u4f17\u9762\u4e5f\u4f1a\u6bd4\u8f83\u5927\u3002","title":"26.\u7f16\u5199\u7528\u4f8b\u8be6\u60c5\u9875(1)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2827%29%20%E7%BC%96%E5%86%99%E7%94%A8%E4%BE%8B%E8%AF%A6%E6%83%85%E9%A1%B5%282%29/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u7f16\u5199\u597d\u4e86 \u6dfb\u52a0\u7528\u4f8b \u7684\u63a5\u53e3\uff0c\u5e76\u4e14\u91c7\u7528\u4e86jsonschema\u8fdb\u884c\u53c2\u6570\u6821\u9a8c\uff0c\u5f53\u7136\u4e0d\u662f\u5f88\u597d\u7684\u65b9\u5f0f\uff0c\u8d77\u7801\u89e3\u51b3\u4e86\u5b57\u6bb5\u6821\u9a8c\u7684\u95ee\u9898\u3002 \u90a3\u8fd9\u4e00\u8282\u6211\u4eec\u5c31\u6765\u505a2\u4e2a\u4e8b\u60c5\uff0c\u4e00\u4e2a\u662f \u5b8c\u6210\u65b0\u589e\u7528\u4f8b\u7684\u9875\u9762 \uff0c\u53e6\u4e00\u4e2a\u5462\uff0c\u662f \u5c55\u793a\u6211\u4eec\u5df2\u7ecf\u6dfb\u52a0\u597d\u7684\u7528\u4f8b \u3002 \u601d\u8003\u65b0\u589e\u7528\u4f8b\u9875\u9762 \u4e0a\u4e00\u8282\u6211\u4eec\u5df2\u7ecf\u63d0\u4f9b\u4e86\u8fd9\u6837\u4e00\u4e2a\u7528\u4f8b\u6811\u7684\u9875\u9762\uff0c\u6ce8\u610f\u8fd9\u91cc\u6709\u4e2a + \u7684\u6309\u94ae\uff0c\u4f46\u662f\u4e4b\u524d\u5462\uff0c\u4ed6\u662f\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u7684\u3002 \u6211\u8fd9\u91cc\u89e3\u91ca\u4e00\u4e0b\uff0c\u4e3a\u4ec0\u4e48\u70b9\u51fb + \u4e0d\u76f4\u63a5\u5f39\u51fa \u65b0\u589e\u7528\u4f8b \u7684\u8868\u5355\u5462\uff0c\u90a3\u662f\u56e0\u4e3a\u540e\u7eed\u6211\u4eec\u53ef\u80fd\u4f1a\u628a\u7528\u4f8b\u7684\u76ee\u5f55\u7ed9\u653e\u5f00\uff0c\u800c\u4e0d\u662f\u50cf\u73b0\u5728\u8fd9\u6837\u53ea\u6709\u76ee\u5f55/\u7528\u4f8b\uff0c\u6240\u4ee5\u540e\u7eed\u53ef\u80fd\u662f \u6dfb\u52a0\u76ee\u5f55 \u7528\u3002 \u597d\u4e86\uff0c\u6211\u4eec\u73b0\u5728\u8981\u7f16\u5199\u7684\u5c31\u662f\u7528\u4f8b\u7684\u8868\u5355\u3002\u6309\u7167\u9119\u4eba\u7684\u8bbe\u8ba1\uff0c\u91cc\u9762\u5c31\u662f\u586b\u5165\u4e00\u4e9b \u6838\u5fc3 \u6570\u636e\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u7528\u4f8b\u7684\u5fc5\u5907\u5b57\u6bb5\u3002 \u8fd9\u91cc\u6211\u628a\u7528\u4f8b\u7684setup+teardown\u4f1a\u62bd\u51fa\u6765\uff0c\u4f5c\u4e3a\u5355\u72ec\u7684\u6a21\u5757\uff0c\u4e00\u4e2a\u6700\u57fa\u7840\u7684\u7528\u4f8b\u4e0d\u5305\u542bsetUp\u548ctearDown\u3002\u53c8\u7531\u4e8e\u6211\u4eec\u6682\u65f6\u53ea\u652f\u6301\u4e86 HTTP \u8bf7\u6c42\uff0c\u6240\u4ee5\u6838\u5fc3\u5b57\u6bb5\u5982\u4e0b: \u7528\u4f8b\u540d\u79f0 \u7528\u4f8b\u76ee\u5f55 \u4f18\u5148\u7ea7 \u72b6\u6001 \u8bf7\u6c42\u7c7b\u578b tag \u8bf7\u6c42\u65b9\u5f0f \u8bf7\u6c42\u5730\u5740 \u5176\u4ed6\u7684\u4f5c\u4e3a\u53ef\u9009\u6027\uff0c\u5982\u679c\u9700\u8981\u7684\u8bdd\u53ef\u4ee5\u81ea\u884c\u6dfb\u52a0\uff0c\u6bd4\u5982headers\u7b49\u7b49\u3002\u7b14\u8005\u8003\u8651\u7684\u662f\u628a\u8fd9\u4e9b\u4fe1\u606f\u653e\u5165Drawer\u7ec4\u4ef6\u91cc\u9762\uff0c\u4f9b\u7528\u6237\u586b\u5199\u5e76\u63d0\u4ea4\u8868\u5355\u7684\u5f62\u5f0f\u3002 \u4e00\u4e9b\u60f3\u6cd5 \u4e4b\u524d\u7b14\u8005\u662f\u8fb9\u505a\u8fb9\u60f3\uff0c\u53ef\u80fd\u6709\u5f88\u591a\u4e1c\u897f\u5728\u505a\u7684\u65f6\u5019 \u5e76\u4e0d\u5408\u7406 \uff0c\u4e0d\u4f1a\u662f\u4e00\u4e2a\u5f88\u5b8c\u5584\u7684\u7248\u672c\u3002\u6240\u4ee5\u7b14\u8005\u73b0\u5728 \u6539\u53d8\u4e86\u6253\u6cd5 \uff0c\u662f\u5148\u505a\u5b8c\u4e00\u90e8\u5206\uff0c\u7136\u540e\u9488\u5bf9\u8fd9\u90e8\u5206\u5185\u5bb9\u8bb2\u89e3\u3002\u6240\u4ee5\u5982\u4e0b\u662f\u7b14\u8005\u7f16\u5199\u7684\u521d\u7248\u9875\u9762: \u5927\u81f4\u7684\u9875\u9762\u5206\u4e3a2\u4e2a\u90e8\u5206\u5427\uff0c\u5206\u522b\u662f \u7528\u4f8b\u4fe1\u606f \u548c \u8bf7\u6c42\u4fe1\u606f \u3002 \u6539\u9020\u4e4b\u524d\u7684postman\u9875\u9762 \u4e4b\u524d\u7684postman.jsx\u662f\u6ca1\u6709\u5305\u88c5\u8868\u5355\u7ec4\u4ef6\u7684\uff0c\u5565\u610f\u601d\u5462\uff1f\u4e5f\u5c31\u662f\u8bf4\uff0c\u6ca1\u6709\u5982\u4e0b\u8fd9\u79cd\u6548\u679c: Form\u7ec4\u4ef6\u662fantd\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u4e00\u79cd\uff0c\u4e13\u95e8\u7528\u4e8e\u8868\u5355\u7684\u6821\u9a8c\u3002 \u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u4e4b\u524d\u7684Postman\u9875\u9762\u9700\u8981\u5f00\u653e\u7ed9\u7528\u6237\u8c03\u8bd5\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7f16\u5199\u4e00\u4e2a \u65b0\u7684 \u7ec4\u4ef6\uff0c\u53ebPostmanForm.jsx\u3002 \u7531\u4e8e\u540e\u9762\u6211\u4eec\u9700\u8981\u83b7\u53d6\u5230headers\u7684\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u628aheaders/body\u548csetHeaders/setBody\u65b9\u6cd5\u62bd\u79bb\u51fa\u6765\u3002 \u5176\u5b9e\u8fd9\u91cc\u6211\u8981\u8865\u5145\u8bf4\u660e\u4e00\u4e0b\uff0c\u56e0\u4e3a\u5bf9\u4e8ereact\u7684hooks\u7b14\u8005\u4e0d\u662f\u5f88\u719f\u6089\uff0c\u53ef\u80fd\u5b58\u5728\u72b6\u6001\u7ba1\u7406\u6df7\u4e71\u7684\u95ee\u9898\uff0c\u4f46\u662f\u8003\u8651\u5230\u4e4b\u524d\u719f\u6089\u7684DVA\u548cReducers\u76f8\u5173\u7684\u77e5\u8bc6\u8f83\u4e3a\u6666\u6da9\uff0c\u6240\u4ee5\u6211\u8fd9\u8fb9\u5c31\u4e0d\u901a\u4fd7\u5730\u8bb2\u4e86\uff0c\u6bd5\u7adf\u6211\u4eec\u4e5f\u4e0d\u662f\u4e13\u4e1a\u7684\u524d\u7aef\uff0c\u6709\u4e9b\u4e1c\u897f\u8981\u5148\u53bb\u89e3\u51b3\uff0c\u518d\u53bb\u4f18\u5316\u624d\u884c\u3002\u5f53\u7136\uff0c\u5982\u679c\u6709\u5927\u4f6c\u6709\u66f4\u597d\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u7b14\u8005\u4e5f\u613f\u610f\u865a\u5fc3\u5b66\u4e60\u3002 \u6ce8\u610f\uff0c\u6211\u5728url\u548c\u8bf7\u6c42\u65b9\u5f0f\u90fd\u5957\u4e0a\u4e86Form.Item\u8fd9\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u5c06\u4e4b\u53d8\u4e3a\u8868\u5355\u7684\u4e00\u9879\uff0c\u6240\u4ee5\u5c31\u51fa\u73b0\u4e86\u4e0a\u9762gif\u7684\u6548\u679c\u3002\u4f46\u662f\u5374\u4e0d\u5f97\u4e0d\u62c6\u5206\u8fd92\u4e2a\u63a7\u4ef6\uff0c\u4e0d\u7136\u663e\u793a\u4f1a\u6709\u95ee\u9898\u3002 headers\u7531\u4e8e\u662f\u5217\u8868\uff0c\u4e0d\u597d\u652f\u6301form\uff0cbody\u53c8\u662f\u7b2c\u4e09\u65b9\u7ec4\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u6b64\u522b\u8fc7\u3002\u5176\u4ed6\u7684\u4ee3\u7801\u57fa\u672c\u4e0a\u5dee\u522b\u4e0d\u5927\uff0c\u4e0epostman.jsx\u7c7b\u4f3c\u3002 \u7f16\u5199\u6dfb\u52a0\u7528\u4f8b\u8868\u5355 \u6548\u679c\u56fe \u4ee3\u7801\u90e8\u5206 onOk \u63d0\u4ea4\u8868\u5355\u89e6\u53d1\u7684\u65b9\u6cd5\uff0c\u8fd9\u8fb9\u65b0\u6dfb\u52a0body\u548cheader2\u4e2a\u53c2\u6570\u3002 translateHeaders \u56e0\u4e3a\u6211\u4eec\u7684headers\u662flist\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u8f6c\u6362\u5b83\u4e3a\u5b57\u7b26\u4e32\u3002 Drawer\u4e5f\u5c31\u662f\u56fe\u4e2d\u7684 \u62bd\u5c49 \u7ec4\u4ef6\uff0c\u5b83\u548cmodal\u5f88\u50cf\u3002\u91cc\u9762\u7684footer\u662f\u5b83\u5e95\u90e8\u7684\"\u63d0\u4ea4\"\u548c\"\u53d6\u6d88\"\u6309\u94ae\uff0c\u5206\u522b\u5bf9\u5e94onOk\u548conCancel\u65b9\u6cd5\u3002 \u63a5\u7740\u5c31\u662fForm\u5d4c\u5957\u76842\u4e2a\u5927\u6a21\u5757: \u7528\u4f8b\u4fe1\u606f\u548c\u8bf7\u6c42\u4fe1\u606f\u3002 \u53ef\u4ee5\u770b\u5230 \u7528\u4f8b\u4fe1\u606f \u548c \u8bf7\u6c42\u4fe1\u606f \u90fd\u662fH3\u6807\u7b7e\uff0c\u5e76\u4e14\u7f16\u5199\u4e86border-left\uff0c\u770b\u7740\u5c31\u6709\u56fe\u4e2d\u7684\u6548\u679c\u4e86\u3002 \u4e2d\u95f4\u7684 fields.map \u5c31\u662f\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u7ec4\u4ef6\u4e86\uff0c\u901a\u8fc7\u89e3\u6790json\u5b8c\u6210\u8868\u5355\u7ec4\u4ef6\u7684\u586b\u5199\u3002 \u5176\u5b9e\u8fd9\u4e48\u8bb2\u8d77\u6765\uff0c\u5982\u679c\u4e0d\u61c2React\u7684\u4eba\uff0c\u597d\u50cf\u767d\u8bb2\u4e86\u3002\u3002\u611f\u89c9\u4e0d\u662f\u5f88\u9002\u5408\u5165\u95e8\uff01\uff01\uff01\u03b5=(\u00b4\u03bf\uff40*)))\u5509 \u603b\u4e4b\u5462\uff0c\u5c31\u662f\u5b9e\u73b0\u4e86gif\u7684\u6548\u679c\uff0c\u540e\u9762\u63a5\u7740\u8bb2\u5c55\u793a\u9875\u9762\u3002\u5982\u679c\u5927\u5bb6\u6709\u5174\u8da3\u7684\u8bdd\uff0c\u53ef\u4ee5\u591a\u591a\u8bfe\u4e0b\u719f\u6089\u719f\u6089React\u548cant design\uff0c\u6d4b\u5f00\u7684\u8bdd\u867d\u7136\u505a\u7684\u662f\u5185\u90e8\u5de5\u5177\uff0c\u4f46\u662f\u5982\u679c\u6d89\u53ca\u5230\u56e2\u961f\u534f\u4f5c\uff0c\u5927\u5bb6\u5f88\u591a\u4eba\u7528\u7c7b\u4f3c\u7684\u6280\u672f\u6808\u5b8c\u6210\u4e0d\u540c\u7684\u529f\u80fd\u6a21\u5757\uff0c\u6211\u4e2a\u4eba\u89c9\u5f97\u6d4b\u5f00\u8fd8\u662f\u8981\u5b66\u4e00\u4e9bvue/react\u7684\uff0c\u4e0d\u7136\u7eaf\u7cb9\u505a\u540e\u7aef\u7684\u8bdd\uff0c\u524d\u7aef\u771f\u7684\u5f88\u96be\u627e\u5230 \u5408\u9002\u7684\u4f19\u4f34 \u5e2e\u4f60\u505a\u3002 \u540e\u7aef\u4e5f\u6709\u6539\u52a8 \u65b0\u7684models/TestCase.py from app.models import db from datetime import datetime class TestCase (db.Model) : id = db.Column(db.INT, primary_key= True ) name = db.Column(db.String( 32 ), unique= True , index= True ) request_type = db.Column(db.INT, default= 1 , comment= \"\u8bf7\u6c42\u7c7b\u578b 1: http 2: grpc 3: dubbo\" ) url = db.Column(db.TEXT, nullable= False , comment= \"\u8bf7\u6c42url\" ) request_method = db.Column(db.String( 12 ), nullable= True , comment= \"\u8bf7\u6c42\u65b9\u5f0f, \u5982\u679c\u975ehttp\u53ef\u4e3a\u7a7a\" ) request_header = db.Column(db.TEXT, comment= \"\u8bf7\u6c42\u5934\uff0c\u53ef\u4e3a\u7a7a\" ) # params = db.Column(db.TEXT, comment=\"\u8bf7\u6c42params\") body = db.Column(db.TEXT, comment= \"\u8bf7\u6c42body\" ) project_id = db.Column(db.INT, comment= \"\u6240\u5c5e\u9879\u76ee\" ) tag = db.Column(db.String( 64 ), comment= \"\u7528\u4f8b\u6807\u7b7e\" ) status = db.Column(db.INT, comment= \"\u7528\u4f8b\u72b6\u6001: 1: \u8c03\u8bd5\u4e2d 2: \u6682\u65f6\u5173\u95ed 3: \u6b63\u5e38\u8fd0\u4f5c\" ) priority = db.Column(db.String( 3 ), comment= \"\u7528\u4f8b\u4f18\u5148\u7ea7: p0-p3\" ) catalogue = db.Column(db.String( 12 ), comment= \"\u7528\u4f8b\u76ee\u5f55\" ) # expected = db.Column(db.TEXT, comment=\"\u9884\u671f\u7ed3\u679c, \u652f\u6301el\u8868\u8fbe\u5f0f\", nullable=False) created_at = db.Column(db.DATETIME, nullable= False ) updated_at = db.Column(db.DATETIME, nullable= False ) deleted_at = db.Column(db.DATETIME) create_user = db.Column(db.INT, nullable= False ) update_user = db.Column(db.INT, nullable= False ) def __init__ (self, name, request_type, url, project_id, status, priority, create_user, catalogue, tag=None, request_header=None, body=None, request_method=None) : self.name = name self.request_type = request_type self.url = url self.priority = priority self.project_id = project_id self.tag = tag self.catalogue = catalogue self.status = status # self.expected = expected self.body = body self.create_user = create_user self.update_user = create_user self.request_header = request_header self.request_method = request_method self.created_at = datetime.now() self.updated_at = datetime.now() \u53bb\u6389\u4e86expected\u548cparams\u5b57\u6bb5\uff0c\u56e0\u4e3aparams\u54b1\u4eec\u76ee\u524d\u4f1a\u5e26\u5165url\uff0c\u6240\u4ee5 \u4e0d\u9700\u8981 \u8fd9\u4e2a\u5b57\u6bb5\u4e86\u3002 \u4eca\u5929\u7684\u5185\u5bb9\uff0c\u4e5f\u53ea\u80fd\u5230\u8fd9\u91cc\u4e86\uff0c\u5570\u55e6\u4e86\u8001\u534a\u5929\u4e86\u3002\u4e0b\u4e00\u8282\u5c55\u793a\u7528\u4f8b\u8be6\u60c5\u9875\u3002","title":"27.\u7f16\u5199\u7528\u4f8b\u8be6\u60c5\u9875(2)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2828%29%20%E7%BC%96%E5%86%99%E7%94%A8%E4%BE%8B%E8%AF%A6%E6%83%85%E9%A1%B5%283%29/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u6211\u4eec\u7f16\u5199\u4e86 \u6dfb\u52a0\u7528\u4f8b \u7684\u8868\u5355\uff0c\u5e76\u4e14\u6210\u529f\u6dfb\u52a0\u4e86\u4e00\u4e9b\u7528\u4f8b\uff0c\u4f46\u662f\u6211\u4eec\u5728 Tree \u91cc\u9762\u70b9\u51fb\u5bf9\u5e94\u7684 \u7528\u4f8b \uff0c\u53f3\u4fa7Card\u8fd8\u662f\u6ca1\u6709\u663e\u793a\u6570\u636e\uff0c\u6240\u4ee5\u4eca\u5929\u6211\u4eec\u5c31\u6765\u628a\u8fd9\u5757\u4fe1\u606f\u8865\u5168\u3002 \u63d2\u66f2 \u5176\u5b9e\u5468\u4e8c\u665a\u4e0a\uff0c\u7b14\u8005\u5c1d\u8bd5\u4e86\u4e00\u4e0b \u5f55\u5236\u89c6\u9891 \u7684\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6211\u89c9\u5f97\u8fd9\u6837\u8282\u7ea6\u65f6\u95f4\uff0c\u8bb2\u5b8c\u4e00\u8282\u8bfe\u5462\uff0c\u6211\u4e5f\u5199\u4e86\u4e00\u90e8\u5206\u4ee3\u7801\u4e86\uff0c\u4e5f\u4e0d\u7528\u53bb\u8f93\u51fa\u5bf9\u5e94\u7684\u6587\u5b57\uff0c\u5341\u5206\u4fbf\u5229\u3002\u4f46\u53d1\u73b0\u6548\u679c\u5f88\u4e00\u822c\uff0c\u6240\u4ee5\u89c6\u9891\u5c31\u592d\u6298\u4e86\u3002\u7b2c\u4e00\u6b21\u8bd5\u8bb2\u5462\uff0c\u603b\u7ed3\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898: \u6ca1\u6709\u80cc\u7a3f\u5b50\uff0c\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u5373\u5174\u53d1\u6325\uff0c\u6307\u54ea\u6253\u54ea\uff0c\u6beb\u65e0\u7ae0\u6cd5\uff01\u6240\u4ee5\u4e2d\u9014\u4f1a\u9047\u5230\u8ff7\u832b\u671f\uff0c\u4e0d\u77e5\u9053\u8be5\u8bf4\u5565\u5b50\u4e86\u3002\u5c31\u4f1a\u6709\u4e00\u90e8\u5206\u5361\u987f\u7684\u60c5\u51b5\u51fa\u73b0\u3002 \u8033\u9ea6\u8d28\u91cf\u3002\u56e0\u4e3a\u8bbe\u5907\u5f88\u5ec9\u4ef7\uff0c\u7528\u7684\u662f\u5934\u6234\u5f0f\u8033\u673a\u7684\u9ea6\u514b\u98ce\uff0c\u6240\u4ee5\u4f1a\u51fa\u73b0\u5f88\u5927\u7684\u7535\u6d41\u58f0\uff0c\u867d\u7136\u5f55\u5236\u4e4b\u524d\u7a0d\u5fae\u8c03\u8bd5\u8fc7\uff0c\u4f46\u662f\u5f55\u5b8c\u4e86\u53d1\u73b0\u89c6\u9891\u5145\u6ee1\u4e86\u7535\u6d41\u58f0\u3002 \u65f6\u95f4\u628a\u63e1\u7684\u4e0d\u592a\u597d\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u8bb2\u4e861\u4e2a\u5c0f\u65f6\u3002\u672c\u6765\u662f\u6253\u7b9740-45\u5206\u949f\u5427\uff0c\u4e00\u96c6\u8fde\u7eed\u5267\u7684\u65f6\u95f4\u3002 \u5f55\u89c6\u9891\u7684\u8bdd\uff0c\u5c31\u6ca1\u6709\u6587\u5b57\u652f\u6491\u4e86\uff0c\u5bf9\u4e8e\u4e0d\u65b9\u4fbf\u770b\u89c6\u9891\u7684\u8bfb\u8005\u5f88\u96be\u53d7\u3002\u5982\u679c\u914d\u4e0a\u6587\u5b57/PPT\uff0c\u90a3\u4e48\u7b14\u8005\u5c31\u66f4\u82b1\u65f6\u95f4\u4e86\u3002 \u6240\u4ee5\u5176\u5b9e\u7ed3\u8bba\u662f \u4eca\u665a\u518d\u6765\u4e00\u96c6 \uff0c\u770b\u770b\u6548\u679c\u5427\uff01 \u6539\u9020project\u63a5\u53e3 \u4e4b\u524d\u6211\u4eec\u8bf4\u8fc7\u4e86\uff0c\u6211\u4eec\u7684\u5b57\u6bb5\u4e0d\u4e00\u5b9a\u5168\uff0c\u5982\u679c\u540e\u7eed\u6211\u4eec\u9700\u8981\u8ddf\u8fdb\u5fae\u670d\u52a1\u9879\u76ee\u7684\u8bdd\uff0c\u90a3\u4e48\u5728\u670d\u52a1\u53d1\u5e03\u7684\u65f6\u5019\u6267\u884c\u5bf9\u5e94\u670d\u52a1\u7684 \u6d4b\u8bd5\u7528\u4f8b \uff0c\u5c31\u662f\u4e00\u4ef6\u5f88\u91cd\u8981\u7684\u4e8b\u60c5\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7ed9 project \u5b9a\u4e49\u4e00\u4e2a app\u5b57\u6bb5 \uff0c\u4e3a\u4e86\u540e\u9762\u7684\u6301\u7eed\u96c6\u6210\u5de5\u4f5c\u7684\u987a\u5229\u5c55\u5f00\u3002 \u5728models/project.py\u6dfb\u52a0app\u5b57\u6bb5 \u4fee\u6539\u65b0\u589e/\u7f16\u8f91project\u65b9\u6cd5 \u65b0\u589e\u9879\u76ee \u7f16\u8f91\u9879\u76ee \u8c03\u6574\u63a5\u53e3 \u5728\u7f16\u8f91\u548c\u65b0\u589e\u9879\u76ee\u63a5\u53e3\u90fd\u6dfb\u52a0\u4e86 app \u5b57\u6bb5\uff0c\u56e0\u4e3a\u4ee3\u7801\u6539\u52a8\u6bd4\u8f83\u5c0f\uff0c\u5c31\u622a\u56fe\u4e86github\u7684\u63d0\u4ea4\u8bb0\u5f55\uff0c\u65b9\u4fbf\u5bf9\u6bd4\u3002 \u7f16\u5199\u67e5\u8be2\u7528\u4f8b\u4fe1\u606f\u76f8\u5173\u529f\u80fd \u7f16\u5199\u6839\u636e\u7528\u4f8bid\u83b7\u53d6\u7528\u4f8b\u4fe1\u606f\u7684\u63a5\u53e3 \u5728\u6587\u4ef6 app/dao/test_case/TestCaseDao.py \u65b0\u589equery_test_case\u65b9\u6cd5\u3002 \u6bd4\u8f83\u7b80\u5355\uff0c\u6839\u636eid\u67e5\u8be2\u5bf9\u5e94\u7684\u7528\u4f8b\u5373\u53ef\u3002 \u7f16\u5199 /testcase/query \u63a5\u53e3 \u5148\u5224\u65adcase_id\u662f\u5426\u6709\u4f20\u5e76\u4e14\u662f\u5426\u662f\u6570\u5b57\uff0c\u518d\u53bb\u67e5\u8be2\u5bf9\u5e94\u7684\u6570\u636e\u3002 \u7f16\u5199\u524d\u7aef\u90e8\u5206 \u524d\u7aef\u90e8\u5206\u7684\u5185\u5bb9\u8fd9\u6b21\u6539\u52a8\u5e76\u4e0d\u591a\uff0c\u6211\u4eec\u9700\u8981\u5c55\u793a \u7528\u4f8b\u4fe1\u606f \uff0c\u6211\u4eec\u53bb ant design\u5b98\u7f51 \u627e\u5230 Description\u7ec4\u4ef6 \u3002 \u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u5c55\u793a\u5217\u8868\uff0c \u57fa\u672c\u4e0a \u7b26\u5408\u6211\u4eec\u7684\u8981\u6c42\u3002\u5148\u770b\u770b\u6210\u54c1: \u867d\u7136\u6837\u5f0f\u4e0d\u662f\u5f88\u597d\u770b\uff0c\u4f46\u662f\u5148\u51d1\u5408\u7528\uff0c\u6bd5\u7adf\u54b1\u4eec\u529f\u80fd\u5148\u884c\u3002 import React, { useEffect, useState } from 'react' ; import { queryTestCase } from '@/services/testcase' ; import auth from '@/utils/auth' ; import { Badge, Col, Descriptions, Row, Tag } from 'antd' ; import { CONFIG } from '@/consts/config' ; export default ({ caseId, userMap }) => { const [data, setData] = useState({ status : 1 , tag : '' }); useEffect( async () => { if (caseId === null ) { return ; } const res = await queryTestCase({ caseId : caseId }); if (auth.response(res)) { setData(res.data); } }, [caseId]); return ( < Row gutter = {[8, 8 ]}> < Col span = {24} > < Descriptions title = '\u7528\u4f8b\u8be6\u60c5' bordered size = 'small' > < Descriptions.Item label = '\u7528\u4f8b\u540d\u79f0' > < a > {data.name} </ a > </ Descriptions.Item > < Descriptions.Item label = '\u7528\u4f8b\u76ee\u5f55' > {data.catalogue} </ Descriptions.Item > < Descriptions.Item label = '\u7528\u4f8b\u4f18\u5148\u7ea7' > { < Tag color = {CONFIG.CASE_TAG[data.priority]} > {data.priority} </ Tag > } </ Descriptions.Item > < Descriptions.Item label = '\u8bf7\u6c42\u7c7b\u578b' > {CONFIG.REQUEST_TYPE[data.request_type]} </ Descriptions.Item > < Descriptions.Item label = '\u8bf7\u6c42\u65b9\u5f0f' > {data.request_method} </ Descriptions.Item > < Descriptions.Item label = '\u7528\u4f8b\u72b6\u6001' > { < Badge { ...CONFIG.CASE_BADGE [ data.status ]} /> } </ Descriptions.Item > < Descriptions.Item label = '\u7528\u4f8b\u6807\u7b7e' span = {2} > { < div style = {{ textAlign: ' center ' }}> {data.tag ? data.tag.split(',').map(v => < Tag style = {{ marginRight: 4 }} color = 'blue' > {v} </ Tag > ): '\u65e0'} </ div > } </ Descriptions.Item > < Descriptions.Item label = '\u521b\u5efa\u4eba' > {userMap[data.create_user] !== undefined ? userMap[data.create_user].name : 'loading...'} </ Descriptions.Item > < Descriptions.Item label = '\u66f4\u65b0\u4eba' > {userMap[data.update_user] !== undefined ? userMap[data.update_user].name : 'loading...'} </ Descriptions.Item > < Descriptions.Item label = '\u521b\u5efa\u65f6\u95f4' > {data.created_at} </ Descriptions.Item > < Descriptions.Item label = '\u66f4\u65b0\u65f6\u95f4' > {data.updated_at} </ Descriptions.Item > < Descriptions.Item label = '\u8bf7\u6c42url' span = {3} > < a href = {data.url} > {data.url} </ a > </ Descriptions.Item > < Descriptions.Item label = '\u8bf7\u6c42Headers' span = {3} > < pre > {data.request_header} </ pre > </ Descriptions.Item > < Descriptions.Item label = '\u8bf7\u6c42body' span = {3} > < pre > {data.body} </ pre > </ Descriptions.Item > </ Descriptions > </ Col > </ Row > ); } \u89e3\u91ca\u4e00\u4e0b\u4ee3\u7801: useEffect caseId \u901a\u8fc7\u7236\u7ec4\u4ef6\u63a7\u5236\uff0c\u5982\u679c\u4e3anull\u5219\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u5982\u679c\u53d1\u751f\u6539\u53d8\uff0c\u4e14 \u4e0d\u4e3anull \u7684\u60c5\u51b5\u4e0b\uff0c\u5219\u8bf4\u660e\u7528\u6237\u5728\u5207\u6362 \u5de6\u4fa7\u7528\u4f8b \uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u91cd\u65b0\u83b7\u53d6\u7528\u4f8b\u4fe1\u606f\u3002\u4e5f\u5c31\u662f\u6839\u636e caseId \u8c03\u7528 /testcase/query \u63a5\u53e3\u3002 Component\u90e8\u5206 \u57fa\u672c\u4e0a\u662f\u628aantd\u5b98\u7f51\u7684demo\u62ff\u8fc7\u6765\u4fee\u6539\u4e86\u4e00\u4e0b\uff0c\u6ca1\u6709\u592a\u5927\u7684\u6539\u52a8\u3002 \u4e0b\u671f\u9884\u544a \u8fd9\u8282\u6ca1\u6709\u592a\u591a\u5185\u5bb9\uff0c\u53ea\u662f\u628a\u7528\u4f8b\u6570\u636e \u6e32\u67d3 \u4e86\u51fa\u6765\uff0c\u7c7b\u4f3c\u4e8ejmeter\u7684\u524d\u7f6e/\u540e\u7f6e\u64cd\u4f5c\uff0c\u540e\u9762\u4e5f\u4f1a \u9646\u7eed\u5c55\u5f00 \u3002\u6211\u4eec\u6682\u4e14\u5148\u5b9e\u73b0\u4e00\u4e2a\u6700\u57fa\u7840\u7684\u5355\u63a5\u53e3\u6d4b\u8bd5\u3002 \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"28.\u7f16\u5199\u7528\u4f8b\u8be6\u60c5\u9875(3)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2829%29%20%E7%BC%96%E5%86%99%E7%94%A8%E4%BE%8B%E6%89%A7%E8%A1%8C%E7%9A%84%E6%96%B9%E6%B3%95/","text":"\u56de\u987e \u4e0a\u671f\u7f16\u5199\u4e86\u7528\u4f8b\u8be6\u60c5\u9875\uff0c\u8fd9\u671f\u6211\u4eec\u5feb\u5200\u65a9\u4e71\u9ebb\uff0c\u6765\u7f16\u5199 \u7528\u4f8b\u6267\u884c\u529f\u80fd \u3002 \u7f16\u5199\u6267\u884c\u7528\u4f8b\u7684\u65b9\u6cd5 \u7531\u4e8e\u4e4b\u524d\u6211\u4eec\u5df2\u7ecf\u7f16\u5199\u8fc7\u4e86 HTTP\u8bf7\u6c42 \u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u8fd9\u6b21\u6211\u4eec\u5199\u8d77\u6765\u4e8b\u534a\u529f\u500d\uff0c\u53ea\u9700\u8981\u5957\u4e2a\u58f3\u513f\u5c31\u53ef\u4ee5\u4e86\uff01 \u7f16\u5199app/utils/executor.py import json from app.dao.test_case.TestCaseDao import TestCaseDao from app.middleware.HttpClient import Request from app.utils.logger import Log class Executor (object) : log = Log( \"executor\" ) @staticmethod def run (case_id: int) : result = dict() try : case_info, err = TestCaseDao.query_test_case(case_id) if err: return result, err # \u8bf4\u660e\u53d6\u5230\u4e86\u7528\u4f8b\u6570\u636e if case_info.request_header != \"\" : headers = json.loads(case_info.request_header) else : headers = dict() if case_info.body != '' : body = case_info.body else : body = None request_obj = Request(case_info.url, headers=headers, data=body) method = case_info.request_method.upper() response_info = request_obj.request(method) return response_info, None except Exception as e: Executor.log.error( f\"\u6267\u884c\u7528\u4f8b\u5931\u8d25: {str(e)} \" ) return result, f\"\u6267\u884c\u7528\u4f8b\u5931\u8d25: {str(e)} \" \u6ce8\u610f\u8fd9\u91cc\u7684http\u8bf7\u6c42\u5176\u5b9e\u5f88 \u5c40\u9650 \uff0c\u6bd4\u5982\u4e0d\u652f\u6301 \u6587\u4ef6\u4e0a\u4f20 \uff0c\u4e0d\u652f\u6301 cookies \u7b49\u7b49\u3002\u4f46\u662f\u540e\u7eed\u54b1\u4eec\u53ef\u4ee5\u6162\u6162\u513f\u6765\u5b8c\u5584\u3002 \u7f16\u5199\u63a5\u53e3 \u8c03\u7528\u4e00\u4e0bExecutor\u7c7b\u7684run\u65b9\u6cd5\u5373\u53ef\u3002 \u7f16\u5199\u524d\u7aef\u90e8\u5206 \u7f16\u5199\u8c03\u7528\u540e\u7aef\u7684\u65b9\u6cd5: /request/run \u65b0\u589eplay icon \u8fd9\u91cc\u53eaconsole.log\u8f93\u51fa\u4e86\u6267\u884c\u7ed3\u679c\uff0c\u56e0\u4e3a\u8003\u8651\u5230\u6267\u884c\u7ed3\u679c\u62a5\u544a\u5316\uff0c\u4ee5\u53ca\u540e\u7eed\u9700\u8981 \u6709\u7ec4\u7ec7\u6709\u7eaa\u5f8b \uff0c\u8fd8\u80fd\u968f\u65f6\u67e5\u8be2\u5230\u5386\u53f2\u62a5\u544a\uff0c\u6240\u4ee5\u540e\u9762 \u6d4b\u8bd5\u62a5\u544a \u9875\u9762\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u8fd9\u8fb9\u6ca1\u6709\u843d\u5e93\u4e5f\u6ca1\u6709\u505a\u4efb\u4f55\u64cd\u4f5c\uff0c\u662f\u56e0\u4e3a\u597d\u4e1c\u897f\u8981\u7559\u5230\u540e\u5934\u3002 \u914d\u5bf9\u89c6\u9891: \u6d4b\u8bd5\u5e73\u53f0\u7cfb\u521702","title":"29.\u7f16\u5199\u7528\u4f8b\u6267\u884c\u7684\u65b9\u6cd5"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%283%29%20%E7%BB%99Hello%20World%E6%B7%BB%E5%8A%A0%E6%97%A5%E5%BF%97/","text":"\u7ed9Hello World\u6dfb\u52a0\u65e5\u5fd7 \u56de\u987e \u901a\u8fc7\u4e0a\u7bc7\u5185\u5bb9\uff0c\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528 Flask \u5b8c\u6210\u4e86\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u63a5\u53e3\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u4f7f\u7528 Flask \u6765\u7f16\u5199\u63a5\u53e3\u662f\u5341\u5206\u7b80\u5355\u7684\u3002\u90a3\u4e48\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4e30\u5bcc\u4e00\u4e0b\u4e0a\u9762\u7684\u4f8b\u5b50\u3002 \u9700\u6c42 \u73b0\u5728\u7684\u9700\u6c42\u6765\u4e86\uff0c\u5728\u6211\u4eec\u5e73\u65f6\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u603b\u4f1a\u9047\u5230\u4e00\u4e9b\u95ee\u9898\u3002\u4f46\u662f\u53c8\u4e0d\u662f\u5fc5\u73b0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u624b\u6bb5\u6765\u5199\u5165\u65e5\u5fd7\uff0c\u53bb\u53d1\u73b0\u95ee\u9898\u3002\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u4f8b\u5b50\u5c31\u662ftry/exception\uff0c\u9047\u5230\u672a\u77e5\u95ee\u9898\u7684\u65f6\u5019\u53ef\u4ee5\u5c06\u95ee\u9898\u8bb0\u5f55\u81f3\u65e5\u5fd7\u5e76\u5728\u4e8b\u540e\u6392\u67e5\u3002 \u65e5\u5fd7\u6a21\u5757\u9009\u7528 logging \u6211\u4eec\u77e5\u9053\uff0c\u5728Python\u4e2d\u6709\u7cfb\u7edf\u81ea\u5e26\u7684\u529f\u80fd\u53ca\u5176\u5f3a\u5927\u7684logging\u6a21\u5757\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u5b83\u7684\u5f3a\u5927\u4e0d\u591a\u505a\u4ecb\u7ecd\u4e86\u3002\u7f51\u4e0a\u7684demo\u5f88\u591a\uff0c\u7a0d\u5faecopy\u4e00\u4e2a\u65e5\u5fd7\u7c7b\u5c31\u80fd\u4f7f\u7528\u3002 logbook \u8fd9\u91cc\u6211\u91c7\u7528\u7684\u662fgithub\u4e0a\u7684 logbook \u5e93\uff0c\u5355\u770bapi\u8c03\u7528\u7684\u8bdd\uff0c\u6bd4logging\u65b9\u4fbf\u8f83\u591a\u3002\u53ef\u80fd\u56e0\u4e3a\u6211\u662f\u4e2a\u559c\u6b22\u5c1d\u9c9c\u7684\u4eba^_^ \u5b89\u88c5logbook \u5728\u7ec8\u7aef\u8f93\u5165 pip3 install logbook \u5e76\u56de\u8f66\u3002 \u5206\u7c7b \u65e5\u5fd7\u6a21\u5757\u5c5e\u4e8epity\u7684\u5de5\u5177\u7c7b\uff0c\u7b14\u8005\u5c06\u4e4b\u5212\u5206\u5230app/utils\u4e0b\u3002 \u7f16\u5199\u65e5\u5fd7\u7c7b import logbook from app import pity class Log (object) : handler = None def __init__ (self, name= 'pity' , filename=pity.config[ 'LOG_NAME' ]) : # Logger\u6807\u8bc6\u9ed8\u8ba4\u4e3aapp \"\"\" :param name: \u4e1a\u52a1\u540d\u79f0 :param filename: \u6587\u4ef6\u540d\u79f0 \"\"\" self.handler = logbook.FileHandler(filename, encoding= 'utf-8' ) self.logger = logbook.Logger(name) self.handler.push_application() def info (self, *args, **kwargs) : return self.logger.info(*args, **kwargs) def error (self, *args, **kwargs) : return self.logger.error(*args, **kwargs) def warning (self, *args, **kwargs) : return self.logger.warning(*args, **kwargs) def debug (self, *args, **kwargs) : return self.logger.debug(*args, **kwargs) \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a Log \u7c7b\uff0c\u8fd9\u4e2a\u7c7b\u63a5\u53d7\u7684name\u662f\u65e5\u5fd7\u7684\u5206\u7c7b\uff0c\u5982\u679c\u4e0d\u4f20\u5165\u5219\u9ed8\u8ba4\u4e3a pity \uff0cfilename(\u65e5\u5fd7\u6587\u4ef6\u540d)\u9ed8\u8ba4\u503c\u4e3a\u5f15\u5165config.py\u4e2d\u914d\u7f6e\u7684 LOG_NAME \u3002 \u7136\u540e\u5c06logbook\u4e2d\u7684handler\u8bbe\u4e3a\u5199\u5165\u7684\u6587\u4ef6\uff0c\u5e76\u5c06info/error/warning/debug\u7b49\u5e38\u7528\u65b9\u6cd5\u5c01\u88c5\u5728Log\u7c7b\u4e2d\u3002 \u4fee\u6539run.py from server.app import app from server.app.utils.logger import Log @app.route('/') def hello_world () : log = Log( \"hello world\u4e13\u7528\" ) log.info( \"\u6709\u4eba\u8bbf\u95ee\u4f60\u7684\u7f51\u7ad9\u4e86\" ) return 'Hello World!' if __name__ == '__main__' : app.run() \u8fd0\u884crun.py \u8fdb\u5165\u6d4f\u89c8\u5668\u8f93\u5165http://localhost:5000 \u62a5\u9519\u622a\u56fe \u53d1\u73b0\u5c45\u7136\u62a5\u9519\u4e86\uff0c\u6211\u4eec\u4ed4\u7ec6\u67e5\u770b\u4e0b\u63a7\u5236\u53f0: \u63a7\u5236\u53f0\u62a5\u9519\u4fe1\u606f \u770b\u63d0\u793a\u662f \u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u6216\u76ee\u5f55 , \u539f\u6765\u6211\u4eec\u7684pity\u76ee\u5f55\u4e0b\u6ca1\u6709 logs \u76ee\u5f55, \u800c\u8fd9\u79cd\u65e5\u5fd7\u5e93\u4e00\u822c\u4e5f\u4e0d\u4f1a\u5e2e\u5fd9\u521b\u5efa\u76ee\u5f55\uff0c\u6240\u4ee5\u6211\u4eec\u6682\u65f6\u624b\u52a8\u5728pity\u76ee\u5f55\u4e0b\u5efa\u7acblogs\u76ee\u5f55\u5373\u53ef\u3002 \u5efa\u7acb\u4ee5\u540e\u91cd\u542f\u670d\u52a1, \u518d\u6b21\u5c1d\u8bd5 \u3002 \u6210\u529f\u622a\u56fe \u67e5\u770blogs/pity.log\u6587\u4ef6 \u53ef\u4ee5\u770b\u5230\uff0c\u65e5\u5fd7\u6587\u4ef6\u914d\u7f6e\u751f\u6548\uff0c\u5988\u5988\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u6211\u610f\u5916\u51fa\u9519\u4e86\u3002 \u5c06\u65e5\u5fd7\u7c7b\u6539\u4e3a\u5355\u4f8b\u6a21\u5f0f(\u9009\u4fee\u8bfe) \u7f16\u8f91utils/decorator.py ''' \u8fd9\u662f\u4e00\u4e2a\u88c5\u9970\u5668\u65b9\u6cd5\u6587\u4ef6 ''' class SingletonDecorator : def __init__ (self, cls) : self.cls = cls self.instance = None def __call__ (self, *args, **kwds) : if self.instance is None : self.instance = self.cls(*args, **kwds) return self.instance \u5982\u56fe\u6240\u793a\uff0c\u8fd9\u662f\u4e00\u4e2a\u5355\u4f8b\u7c7b\u7684\u88c5\u9970\u5668\u3002\u9996\u5148\u5224\u65ad\u8be5\u7c7b\u7684\u5b9e\u4f8b\u662f\u5426\u662fNone\uff0c\u4e3aNone\u7684\u8bdd\u5219\u751f\u6210\u65b0\u5b9e\u4f8b\uff0c\u5426\u5219\u8fd4\u56de\u8be5\u5b9e\u4f8b\u3002\u8fd9\u6837\u5c31\u786e\u4fdd\u4e86\u53ea\u751f\u6210\u4e00\u6b21\u5b9e\u4f8b\u3002 \u5f53\u7136\u8fd9\u53ea\u662f\u4e00\u4e2a\u529e\u6cd5\uff0c\u53ef\u80fd\u5728\u591a\u7ebf\u7a0b\u7684\u60c5\u51b5\u4e0b\u4f1a\u51fa\u95ee\u9898\u3002\u540e\u7eed\u7684\u4f18\u5316\u548c\u4e86\u89e3\uff0c\u5c31\u4ea4\u7ed9\u540c\u5b66\u4eec\u81ea\u5df1\u4e86\u3002 \u7ed9Log\u7c7b\u52a0\u4e0a\u88c5\u9970\u5668 import logbook from app import pity from .decorator import SingletonDecorator # \u6ce8\u610f\u8fd9\u91cc @SingletonDecorator class Log (object) : handler = None def __init__ (self, name= 'pity' , filename=pity.config[ 'LOG_NAME' ]) : # Logger\u6807\u8bc6\u9ed8\u8ba4\u4e3aapp \"\"\" :param name: \u4e1a\u52a1\u540d\u79f0 :param filename: \u6587\u4ef6\u540d\u79f0 \"\"\" self.handler = logbook.FileHandler(filename, encoding= 'utf-8' ) self.logger = logbook.Logger(name) self.handler.push_application() def info (self, *args, **kwargs) : return self.logger.info(*args, **kwargs) def error (self, *args, **kwargs) : return self.logger.error(*args, **kwargs) def warning (self, *args, **kwargs) : return self.logger.warning(*args, **kwargs) def debug (self, *args, **kwargs) : return self.logger.debug(*args, **kwargs) \u4f5c\u4e1a \u53d1\u73b0\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0c\u65e5\u5fd7\u7684\u65f6\u95f4\u4f3c\u4e4e\u4e0d\u5bf9\uff0c\u53ef\u80fd\u662f\u54ea\u91cc\u51fa\u4e86\u95ee\u9898\u5462\uff1f \u5168\u90e8\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"3.\u7ed9Hello World\u6dfb\u52a0\u65e5\u5fd7"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2830%29%20%E5%AE%8C%E5%96%84%E6%96%AD%E8%A8%80%E9%83%A8%E5%88%86/","text":"\u601d\u8003 \u8fd9\u4e2a\u7cfb\u5217\u6ee1\u6253\u6ee1\u7b97\u5df2\u7ecf\u4e00\u4e2a\u6708\u6ca1\u6709\u66f4\u65b0\u4e86\uff0c\u54b1\u867d\u7136\u6c34\u6587\uff0c\u4f46\u662f\u6b63\u4e8b\u8fd8\u662f\u5f97\u5e72\u7684\u3002\u5176\u5b9e\u6709\u65f6\u5019\u6211\u5728\u60f3\uff0c\u7c7b\u4f3c\u7684\u5e73\u53f0\u5df2\u7ecf\u6709\u996d\u4f6c\u8fd9\u5ea7\u9ad8\u5c71\u4e86\uff0c\u6211\u8fd8\u771f\u7684\u6709\u5199\u4e0b\u53bb\u7684\u5fc5\u8981\u5417\uff1f\u4e0d\u7ba1\u600e\u4e48\u8bf4\uff0c \u5199\u70b9\u81ea\u5df1\u559c\u6b22\u7684\u5185\u5bb9\u5427 \uff0c\u54ea\u6015\u662f\u5199\u7ed9\u81ea\u5df1\u770b\u4e5f\u6210\uff0c\u6bd5\u7adf\u81ea\u5df1\u6682\u65f6\u6ca1\u6709\u518d\u505a\u5176\u4ed6\u65b9\u9762\u7684\u5e73\u53f0\u4e86\u3002 \u56de\u987e \u4e0a\u6b21\u5199\u5230\u4e86\u7528\u4f8b\u8be6\u60c5\u9875\u9762\uff0c\u53ef\u4ee5\u6dfb\u52a0\u5bf9\u5e94\u7684\u7528\u4f8b\u4e86\u5e76 \u5728\u7ebf\u6267\u884c \u4e86~ \u7406\u6027\u5206\u6790\u4e00\u4e0b\uff0c\u54b1\u4eec\u8fd8\u7f3a\u5565\uff1f\u5176\u5b9e\u4e0d\u7528\u5206\u6790\uff0c\u7f3a\u7684\u4e1c\u897f\u5f88\u591a\uff0c\u6bd4\u5982: \u8c03\u8bd5\u7ed3\u679c\u600e\u4e48\u5c55\u793a\uff0c\u6d4b\u8bd5\u96c6\u600e\u4e48\u505a\uff0c\u6700\u7ec8\u6d4b\u8bd5\u62a5\u544a\uff0c\u5168\u5c40\u53d8\u91cf\u7b49\u7b49\u3002 \u7531\u4e8e\u6700\u8fd1\u505a\u7684\u90fd\u662f\u4e1a\u52a1\u6d4b\u8bd5\uff0c\u6709\u6d89\u53ca\u5230\u63a5\u53e3\u90e8\u5206\u7684\uff0c\u6240\u4ee5\u6211\u9488\u5bf9\u81ea\u5df1\u7684\u4f7f\u7528\uff0c\u7ed9\u81ea\u5df1\u63d0\u4e86\u4e00\u4e9b\u4f18\u5316\u7684\u5185\u5bb9\u3002 \u56e0\u4e3a\u5e73\u65f6 Yapi \u7528\u7684\u4e5f\u6bd4\u8f83\u591a\uff0c\u6240\u4ee5\u4e2a\u4eba\u8fd8\u662f\u51b3\u5b9a\u4e0eYapi\u8fdb\u884c\u6253\u901a\uff0c\u6839\u636eyapi\u7684\u63a5\u53e3\u6587\u6863\u53bb\u667a\u80fd\u5730\u751f\u6210\u4e00\u4e9b\u57fa\u7840\u7528\u4f8b\u3002 \u5927\u5bb6\u5982\u679c\u6709\u60f3\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u548c\u6211\u8ba8\u8bba\uff0c\u6b22\u8fce\u2795\u6211\u7684\u5fae\u4fe1: wuranxu \u3002\u76ee\u524d\u5462\uff0c\u6709\u4e9b\u5730\u65b9\u6211\u4e5f\u6ca1\u6709\u786e\u5b9a\u6e05\u695a\uff0c\u4ee5\u4e0a\u90fd\u662f\u6211\u5728\u771f\u5b9e\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u4e00\u4e9b\u4e0d\u597d\u7684\u5730\u65b9\u3002 \u81ea\u5df1\u505a\u7684\u4e1c\u897f\uff0c\u81ea\u5df1\u4e00\u5b9a\u8981\u4eb2\u8eab\u53bb\u4f53\u9a8c\uff0c\u8fd9\u6837\u624d\u77e5\u9053\u54ea\u91cc\u4e0d\u987a\u624b\uff0c\u54ea\u91cc\u4e0d\u597d\u7528\u3002\u542c\u53d6\u522b\u4eba\u7684\u5efa\u8bae\u662f\u5173\u952e\uff0c\u81ea\u5df1\u6709\u5207\u8eab\u4f53\u4f1a\u4e5f\u662f\u5173\u952e\u3002 \u4fee\u590dsqlalchemy\u8fde\u63a5\u7684\u95ee\u9898 \u5728\u6211\u81ea\u5df1\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0sqlalchemy\u7684Session\u4f1a\u81ea\u52a8\u8fc7\u671f\u3002\u5565\u610f\u601d\u5462\uff0c\u9ed8\u8ba4\u7684Session\u5efa\u7acb\u7684\u65f6\u5019\uff0c\u8fde\u63a5\u662f \u4e0d\u4f1a\u88ab\u91ca\u653e \u7684\u3002\u4f46\u662f\u5462\uff0cmysql\u7684\u6bcf\u4e2a\u8fde\u63a5\u4f1a\u6709\u4e2a\u9ed8\u8ba4\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u56e0\u4e3a\u4e00\u4e2a\u8fde\u63a5\u5982\u679c\u957f\u65f6\u95f4\u4e0d\u5de5\u4f5c\uff0c\u5c31\u662f \u6d6a\u8d39\u8d44\u6e90 \uff0c\u6240\u4ee5Mysql\u6709\u8fd9\u6837\u7684\u8bbe\u5b9a\u3002 \u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\u8d85\u65f6\u65f6\u95f4\u662f1800\u79d2\u4e5f\u5c31\u662f30\u5206\u949f \u8fd9\u6837\u5c31\u51fa\u73b0\uff0csqlalchemy\u53d6\u51fa\u7684session\u5728mysql\u4e2d\u5df2\u7ecf\u8fc7\u671f\u4e86\uff0c\u901a\u4fd7\u70b9\u6765\u8bb2\u5c31\u662f\uff0c\u4f6030\u5206\u949f\u6ca1\u6709\u7528\u5e73\u53f0\uff0c\u518d\u8c03\u6d89\u53ca\u5230\u6570\u636e\u5e93\u7684\u63a5\u53e3\u7684\u65f6\u5019\uff0c\u5c31\u63d0\u793a\u4f60Mysql Connection not variable\u3002 \u6dfb\u52a0pool_recycle\u53c2\u6570\uff08\u7f29\u77ed\u6211\u4eec\u8fde\u63a5\u56de\u6536\u7684\u65f6\u95f4\uff0c\u5c0f\u4e8ewait_timeout\uff09 \u6269\u5927Mysql\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u8fd9\u4e2a\u9700\u8981\u6539mysql\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684wait_timeout\u53c2\u6570\uff0c\u6709\u7684\u4eba\u4f1a\u8bbe\u7f6e\u4e3a8\u5c0f\u65f6 \u6dfb\u52a0\u7f16\u8f91\u7528\u4f8b\u7684\u529f\u80fd \u540e\u7aef\u63a5\u53e3\u6539\u9020\uff0c\u7f16\u5199update\u529f\u80fd \u8fd9\u8fb9\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff0c\u5148\u901a\u8fc7testcase\u7684id\u548cdeleted_at\u5b57\u6bb5\u53d6\u5230\u6570\u636e\uff0c\u7136\u540e\u8c03\u7528\u4e86 update_model \u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u5565\u5462\uff0c\u5c31\u662f\u901a\u8fc7setattr\u628aForm\u8868\u5355\u7684\u5185\u5bb9\u8d4b\u4e88\u8fd9\u4e2a\u6570\u636e\u5e93\u5bf9\u8c61\u3002 \u4ee5\u5f80\u6211\u4eec\u7684\u624b\u6bb5\u90fd\u5f88 \u62d9\u52a3 \uff0c\u5982\u679c\u8981\u4fee\u6539testcase\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u4f1a\u7528 data.xxx = xxx \uff0c\u8fd9\u6837\u6548\u7387\u8f83\u4f4e\uff0c\u800c\u4e14\u4ee3\u7801\u91cf\u5f88\u591a\u3002\u7531\u4e8e\u6211\u4eec\u548cPydantic\u8fdb\u884c\u4e86\u6253\u901a\uff0c\u91cc\u9762\u63a5\u53d7\u7684\u5b57\u6bb5\u540d\u5b57\u548c\u6211\u4eecdb\u4e2d\u7684\u5b57\u6bb5\u540d\u5b57\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5199\u4e00\u4e2a\u901a\u7528\u7684\u529e\u6cd5\u3002 dist\u53c2\u6570\u662f\u88ab\u4fee\u6539\u7684\u5bf9\u8c61 source\u662fPydantic\u7684BaseModel\uff0c\u4e5f\u5c31\u662f\u54b1\u4eec\u5728web\u9875\u9762\u7684\u8868\u5355\u6570\u636e not_null\u662f\u4e2a\u53ef\u9009\u53c2\u6570\uff0c\u5982\u679c\u662fTrue\u7684\u8bdd\uff0c\u90a3\u4e48\u53ea\u6709\u975e\u7a7a\u5b57\u6bb5\u4f1a\u88ab\u66f4\u65b0\uff0c\u8fd9\u70b9\u501f\u9274\u4e86gorm update_user\uff0c\u7531\u4e8e\u6211\u4eec\u7684\u6bcf\u6761\u6570\u636e\u90fd\u5e26\u6709\u8fd9\u4e2aupdated_at, update_user\u4fe1\u606f\uff0c\u6240\u4ee5\u5728update\u7684\u65f6\u5019\u6211\u4eec\u81ea\u52a8\u8bbe\u7f6e\u4e3a\u5f53\u524d\u65f6\u95f4 \u6ce8\u91ca: setattr\u53ef\u4ee5\u52a8\u6001\u8bbe\u7f6e\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5b57\u6bb5\u540d\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u5177\u4f53\u7684\u503c\uff0c\u4e0e\u4e4b\u5bf9\u5e94\u7684\u8fd8\u6709getattr \u540e\u7aef\u63a5\u53e3\u5c42 \u524d\u7aef\u903b\u8f91\u7684\u6539\u9020 pityWeb\\src\\components\\TestCase\\TestCaseDetail.jsx \u548c\u521b\u5efa\u903b\u8f91\u7c7b\u4f3c\uff0c\u5728\u70b9\u51fb \u4fdd\u5b58 \u6309\u94ae\u7684\u65f6\u5019\uff0c\u8c03\u7528 onFinish \u65b9\u6cd5\uff0c\u5148\u53bb\u641c\u96c6\u8868\u5355\u7684\u6570\u636e\uff0curl\uff0cheaders\u7b49\u7b49\uff0c\u6700\u540e\u8c03\u7528updateTestCase\u63a5\u53e3\u3002\u6700\u540e\u5c31\u662f\u8c03\u7528init()\u65b9\u6cd5\u91cd\u65b0\u83b7\u53d6\u7528\u4f8b\u7684\u6570\u636e\u3002 \u8c03\u6574\u4e00\u4e0b\u7528\u4f8b\u6811 \u653e\u5f03\u4e4b\u524d\u7684\u7a81\u5140\u5730\u8ba9\u7528\u6237\u9009\u62e9\u7528\u4f8b\uff0c\u4ee5\u8bf4\u660e\u4e66\u7684\u65b9\u5f0f\u8ba9\u7528\u6237\u660e\u767d\u9700\u8981\u70b9\u51fb\u5de6\u4fa7\u7684\u6811\u3002\u5de6\u4fa7\u7684\u6811\u540e\u9762\u9700\u8981\u53ef\u4ee5\u9009\u4e2d\uff0c\u4ee5\u4fbf\u4e8e \u6267\u884c\u591a\u6761\u7528\u4f8b \u548c \u6d4b\u8bd5\u96c6\u6dfb\u52a0 \u7b49\u7b49\u3002 \u7528\u4f8b\u8be6\u60c5\u8c03\u6574 \u5148\u8bf4\u660e\u4e00\u4e0b\uff0c\u8fd9\u5757\u6211\u4e00\u76f4\u89c9\u5f97\u4e0d\u662f\u592a\u7f8e\u89c2\uff0c\u6211\u53ea\u80fd\u8bf4\u8fd9\u80af\u5b9a\u4e0d\u662f\u6700\u7ec8\u6548\u679c\u3002\u6211\u628aheaders\u66ff\u6362\u6210\u4e86\u8868\u683c\uff0c\u628abody\u66ff\u6362\u6210\u4e3a\u4e86json\uff0c\u56e0\u4e3a\u6211\u4eec\u6682\u65f6\u53ea\u652f\u6301JSON\u3002 \u9ad8\u4eae\u4ee3\u7801\u5757\uff0c\u9700\u8981\u5b89\u88c5 react-syntax-highlighter npm install react-syntax-highlighter --save \u4f7f\u7528 \u5148\u5bfc\u5165\u5bf9\u5e94\u7684\u5e93\u548c\u6837\u5f0f\uff0c\u6211\u8fd9\u91cc\u9009\u62e9\u7684\u662fvs2015\uff0c\u518d\u628a\u5b57\u7b26\u4e32\u653e\u5165SyntaxHighlighter\u7ec4\u4ef6\u5185\u5373\u53ef\u3002 \u540e\u7eed\u9884\u544a \u7cfb\u7edf\u8bbe\u7f6e \u5305\u62ecyapi\u76f8\u5173\u914d\u7f6e\uff0c\u7528\u4f8b\u4e0eyapi\u7684\u6253\u901a\uff0c\u81ea\u52a8\u751f\u6210\u7528\u4f8b\u3002 \u6d4b\u8bd5\u62a5\u544a \u6d4b\u8bd5\u7528\u4f8b\u6267\u884c\u8be6\u60c5\u5c55\u793a\u7b49\u3002 \u5168\u5c40\u53d8\u91cf \u5305\u62ec\u73af\u5883\u914d\u7f6e\uff0c\u5730\u5740\u7ba1\u7406\u7b49\u7b49\u3002 \u5b9a\u65f6\u4efb\u52a1 \u8fd9\u5757\u53ef\u80fd\u7528go\u53bb\u5199\uff0c\u4e5f\u53ef\u80fd\u7528celery\u3002 \u6d4b\u8bd5\u96c6 \u5f85\u5b9a\u3002 \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"30.\u5b8c\u5584\u65ad\u8a00\u90e8\u5206"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2831%29%20%E7%BC%96%E5%86%99%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2%28%E4%B8%8A%29/","text":"\u5927\u5bb6618\u597d\u5440\uff01 \u8fd9\u4e2a\u7cfb\u5217\u597d\u50cf\u66f4\u65b0\u8fdb\u5ea6\u5f88\u6162\u4e86\uff0c\u6700\u8fd1\u4e3b\u8981\u4ee5\u6c34\u6587\u4e3a\u4e3b\u3002\u4eca\u5929\u5929\u6c14\u6bd4\u8f83\u5dee\uff0c\u6253\u7b97\u6765\u70b9\u5e72\u8d27\u3002\u6070\u5de7\u996d\u54e5\u4e5f\u5728 \u5750\u53f0 (\u5750\u5728\u8bb2\u53f0)\uff0c\u6240\u4ee5\u6211\u5c31\u4e0d\u5ba2\u6c14\u4e86\uff01 \u7f16\u5199\u73af\u5883\u7ba1\u7406\u9875\u9762 \u4e4b\u524d\u7684\u7bc7\u5e45\u91cc\u9762\u8bf4\u8fc7\uff0c\u7528\u4f8b \u6ca1\u6709\u6839\u636e\u73af\u5883 \u53bb\u5212\u5206\u5b83\u7684\u5f52\u5c5e\uff0c\u5176\u5b9e\u8fd9\u6837\u4e5f\u662f\u4e0d\u592a\u5408\u7406\u7684\uff0c\u6bd5\u7adf\u4e0d\u540c\u7684\u73af\u5883\u9700\u8981\u7684\u6570\u636e\u53ef\u80fd\u4e0d\u4e00\u81f4\uff0c\u5e76\u4e0d\u4e00\u5b9a\u80fd\u7f16\u5199\u5b8c\u5168\u901a\u7528\u7684\u7528\u4f8b\u3002\u6240\u4ee5\u4eca\u5929\u6211\u6253\u7b97\u4ece\u8fd9\u4e2a\u9875\u9762\u4e0b\u624b\uff0c \u624b\u628a\u624b \u6559\u5927\u5bb6\u7f16\u5199\u4e00\u4e2a\u5b8c\u6574\u7684CRUD\u529f\u80fd(\u5e26\u524d\u7aef+\u8054\u8c03)\u3002\u540e\u9762\u524d\u7aef\u7684\u90e8\u5206\uff0c\u5982\u679c\u5927\u5bb6\u4e0d\u611f\u5174\u8da3\u7684\u8bdd\uff0c\u53ea\u770b \u540e\u7aef \u5c31\u597d\u4e86\u3002\u56e0\u4e3a\u4f1a\u6709\u4e00\u7cfb\u5217\u7684\u622a\u56fe\uff01\u770b\u5b8c\u4e0d\u8bf4\u534a\u6761\u547d\uff0c\u90a3\u534a\u5c0f\u65f6\u80af\u5b9a\u6ca1\u4e86\u3002 \u6709\u7684\u4eba\u53ef\u80fd\u4e0d\u7406\u89e3\uff0c\u73af\u5883\u4e0d\u5c31\u662f\u90a3\u51e0\u5957\u5417\uff1f\u6d4b\u8bd5/\u9884\u53d1/\u7ebf\u4e0a\u7b49\u7b49\u3002\u662f\u7684\uff0c\u4f46\u662f\u5404\u4e2a\u516c\u53f8\u4f1a\u53eb\u4e0d\u540c\u7684\u540d\u5b57\uff0c\u6240\u4ee5\u6211\u4eec\u4e3a\u4e86\u5236\u4f5c\u4e00\u6b3e\u5927\u4f17\u4e14\u901a\u7528\u7684\u5de5\u5177\uff0c\u6240\u4ee5\u63d0\u4f9b\u4ed6\u4eec\u7ef4\u62a4\u81ea\u5df1\u73af\u5883\u7684\u529f\u80fd\u3002 CRUD/CURD\u662f\u4ec0\u4e48 \u7ecf\u5e38\u901b \u8109\u8109 \u7684\u540c\u5b66\u80af\u5b9a\u90fd\u77e5\u9053\uff0c\u7ecf\u5e38\u80fd\u770b\u5230CURD CRUD CRUD boy\u8fd9\u6837\u7684\u8bcd\u6c47\u3002\u76f4\u767d\u70b9\u8bf4\uff0ccurd\u6307\u7684\u5c31\u662f\u589e\u5220\u6539\u67e5\uff0c\u6211\u4eec\u4eca\u5929\u7684\u5185\u5bb9\u5c31\u662f\u8fd9\u4e2a\uff0c\u4e14\u542c\u6211\u4e00\u4e00\u9053\u6765\u3002 \u589e \u516c\u53f8\u6700\u8fd1\u5f00\u4e86\u4e00\u4e2a\u65b0\u7684\u73af\u5883\uff1afat2\uff0c\u6211\u4eec\u7cfb\u7edf\u5f97\u7ef4\u62a4\u8d77\u6765\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u65b0\u589e\u4e00\u6761 fat2 \u73af\u5883\u7684\u6570\u636e\u3002 \u5220 \u516c\u53f8\u53c8\u4e0d\u7528\u8fd9\u4e2a\u73af\u5883\u4e86\uff0c\u60f3\u53bb\u6389\u8fd9\u4e2a\u73af\u5883\uff0c\u514d\u5f97\u6df7\u6dc6\u89c6\u542c\u3002 \u6539 fat2\u73af\u5883\u516c\u53f8\u89c9\u5f97\u4e0d\u597d\u542c\uff0c\u516c\u53f8\u51b3\u5b9a\u6539\u6210fat-beta\u3002 \u67e5 \u516c\u53f8\u73b0\u5728\u6709100\u591a\u79cd\u73af\u5883\uff0c\u592a\u591a\u4e86\uff0c\u9700\u8981\u67e5\u8be2\u662f\u5426\u6709fat77\u8fd9\u4e2a\u73af\u5883\u3002 \u6ca1\u9519\uff0c\u5176\u5b9e\u5f88\u591a\u5f00\u53d1\u505a\u7684\u529f\u80fd\u90fd\u4e0e\u8fd9\u4e2a\u63a5\u8fd1\u3002\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u662f\u5728\u505a\u4e00\u4e9bcrud\u7684\u5de5\u4f5c\u3002\u4e0a\u8ff0\u662f\u7ec6\u5316\u5230\u6211\u4eec\u8fd9\u4e00\u6b21\u73af\u5883\u7ba1\u7406\u7684\u529f\u80fd\u70b9\uff0c\u5982\u679c\u4f60\u89c9\u5f97\u96be\u7684\u8bdd\uff0c\u8010\u5fc3\u770b\u5b8c\uff08\u6284\u5b8c\uff09\u4f60\u5c31\u4e0d\u4f1a\u89c9\u5f97\u96be\u4e86\u3002 \u660e\u786e\u601d\u8def \u9996\u5148\u6211\u4eec\u5148\u8981\u641e\u6e05\u695a\u672c\u6b21\u9700\u6c42\uff0c\u5176\u5b9e\u9700\u6c42\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u60f3\u7ed9\u7528\u6237\u63d0\u4f9b\u81ea\u5b9a\u4e49\u73af\u5883\u540d\u7684\u529f\u80fd\u3002\u90a3\u4e48\u6211\u4eec\u662f\u4e0d\u662f\u5728\u6570\u636e\u5e93\u9700\u8981\u5b58\u50a8\u8fd9\u4e9b \u73af\u5883 \u7684\u4fe1\u606f\u3002\u6700\u57fa\u672c\u7684\u4fe1\u606f\u9700\u8981\u54ea\u4e9b\u5462\uff1f\u6211\u8fd9\u91cc\u5217\u4e00\u4e0b: \u6570\u636e\u8868\u51c6\u5907 \u6838\u5fc3\u5b57\u6bb5: \u73af\u5883\u540d\u79f0 \u6bd4\u5982fat uat pro (\u662f\u5426\u80fd\u91cd\u590d\uff1f\u90a3\u80af\u5b9a\u662f\u4e0d\u80fd\u91cd\u590d\u7684\u5440\uff01) \u73af\u5883\u5907\u6ce8 \u6bd4\u5982fat\u662f\u6d4b\u8bd5\u73af\u5883\u5565\u7684\u5565\u7684\uff0c\u5176\u5b9e\u4e5f\u53ef\u4ee5\u4e0d\u8981\uff0c\u4f46\u662f\u7ed9\u4f60\u4e00\u4e2a\u9009\u9879\uff0c\u4e07\u4e00\u4f60\u9700\u8981\u6dfb\u52a0\u4e00\u4e9b\u8bf4\u660e\u5462 \u57fa\u672c\u5b57\u6bb5: \u521b\u5efa\u4eba\u662f\u8c01 \u4fee\u6539\u4eba\u662f\u8c01 \u4ec0\u4e48\u65f6\u5019\u521b\u5efa\u7684 \u4ec0\u4e48\u65f6\u5019\u66f4\u65b0\u7684 \u88ab\u5220\u9664\u4e86\u6728\u6709 \u529f\u80fd\u9700\u6c42\u51c6\u5907 \u73af\u5883\u53ef\u4ee5\u901a\u8fc7\u540d\u5b57\u6a21\u7cca\u67e5\u8be2 \u53ef\u4ee5\u7f16\u8f91\uff0c\u7f16\u8f91\u540e\u4f1a\u66f4\u65b0\u7f16\u8f91\u65f6\u95f4 \u53ef\u4ee5\u6dfb\u52a0 \u53ef\u4ee5\u5220\u9664 \u529f\u80fd\u4e00\u62c6\u5206\uff0c\u662f\u4e0d\u662f\u7279\u522b\u7b80\u5355\u4e86\uff0c\u5176\u5b9e\u9700\u6c42\u6ca1\u591a\u5c11\uff0c\u540e\u7aef\u53ef\u80fd1\u5c0f\u65f6\u4e0d\u5230\u5c31\u641e\u5b9a\u4e86\uff0c\u524d\u7aef\u8fd8\u662f\u8d39\u65f6\u95f4\u7684\u3002 \u5f00\u59cb\u884c\u52a8 \u5b9a\u4e49model \u65e2\u7136\u8868\u7684\u5b57\u6bb5\u4e0d\u591a\uff0c\u6570\u636e\u4e5f\u4e0d\u590d\u6742\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5148\u5b9a\u4e49model\u3002 \u5185\u5bb9\u4e0d\u96be\uff0c\u719f\u6089sqlalchemy\u5c31\u66f4\u8f7b\u677e\u4e86\u3002\u76ee\u7684\u662f\u4e3a\u4e86 \u6620\u5c04\u4e00\u4e2a\u6570\u636e\u8868(\u73af\u5883\u8868)\u7684\u7c7b \u3002 tablename \u8868\u793a\u5f53\u524dclass\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8868\u540d\uff0c\u6211\u4eec\u8fd9\u91cc\u4e3a\u4e86\u533a\u5206\uff0c\u7edf\u4e00\u52a0\u4e0a pity_ \u524d\u7f00\u3002 \u540e\u9762\u7684\u5185\u5bb9\u5c31\u662f\u5bf9\u5b57\u6bb5\u7684\u5b9a\u4e49\u4ee5\u53ca\u521d\u59cb\u5316\u7c7b\u3002 \u751f\u6210model \u4e3a\u4e86\u80fd\u81ea\u52a8\u751f\u6210\u6570\u636e\u8868\uff0c\u6211\u4eec\u9700\u8981\u5728dao/ init .py\u91cc\u9762import\u8fd9\u4e2amodel\u7c7b\u3002 \u5b9a\u4e49Pydantic\u7684schema \u8fd9\u4e00\u6b65\u7684\u76ee\u7684\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4e3a\u4e86\u505a\u53c2\u6570\u6821\u9a8c\uff0c\u6bd4\u5982\u6709\u7684\u54e5\u4eec\u5f88\u574f\uff0c\u4ed6\u521b\u5efa\u73af\u5883\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u7ed9\u4f60\u6765\u4e2a\u7a7a\u5b57\u7b26\u4e32\u6216\u8005\u7a7a\u683c\u5b57\u7b26\u4e32\u7684 \u73af\u5883\u540d \uff0c\u6240\u4ee5\u9047\u5230\u8fd9\u6837\u7684\u4eba\uff0c\u6211\u4eec\u8981\u9119\u89c6\u4ed6\uff0c\u5728\u6570\u636e\u63d2\u5165\u6570\u636e\u5e93\u4e4b\u524d\u5c31\u68c0\u6d4b\u5230\uff0c\u5e76\u7ed9\u4ed6\u6c89\u91cd\u6253\u51fb\u3002\u8fd9\u91cc\u719f\u6089pydantic\u7684\u540c\u5b66\uff0c\u90fd\u4e86\u89e3\uff0c\u4e0d\u719f\u6089\u7684\u8bdd\u5efa\u8bae\u53bb\u9605\u8bfb\u4ee5\u4e0bPydantic\u7684\u5b98\u65b9\u6587\u6863\uff0c\u6216\u8005\u7167\u7740\u6284\u5c31\u662f\u4e86\u3002 \u5927\u4f53\u610f\u601d\u5c31\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2aEnvironment\u7684\u8868\u5355\uff0c\u91cc\u9762\u67093\u4e2a\u53c2\u6570: id\u3001name\u3001remarks\uff0c\u5bf9\u5e94\u7684\u5c31\u662fid\uff0c\u73af\u5883\u540d\u548c\u5907\u6ce8\u3002\u5176\u4e2dname\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u5907\u6ce8\u968f\u4fbf\u4f60\uff0c\u5199\u4e0d\u5199\u90fd\u884c\uff0cid\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u4f20\uff0c\u4e0d\u4f20\u5c31\u9ed8\u8ba4\u4e3aNone\u3002 \u7f16\u5199Dao\u5c42\uff08\u4e0edb\u4ea4\u4e92\u7684\u6838\u5fc3\u5185\u5bb9\uff09 \u65b0\u589e\u73af\u5883 \u7531\u4e8e\u73af\u5883\u4e5f\u7b97\u914d\u7f6e\u91cc\u9762\u7684\u4e00\u5957\u5185\u5bb9\uff0c\u540e\u7eed\u8981\u548c\u5168\u5c40\u53d8\u91cf\u653e\u5230\u4e00\u8d77\uff0c\u6240\u4ee5\u6211\u4eec\u7ed9\u4ed6\u5f52\u6863\u5230config\u76ee\u5f55\u4e0b\u3002 \u6765\u770b\u770b\u8fd9\u4e2a \u65b0\u589e\u73af\u5883 \u7684\u529f\u80fd\u90fd\u505a\u4e86\u5565\u3002 \u9996\u5148\u56fa\u5b9a\u642d\u914d\uff0c\u8fd9\u4e2adddd(\u61c2\u7684\u90fd\u61c2)\u3002\u4ece\u6570\u636e\u5e93\u62ff\u5230\u4e00\u4e2asession\uff0c\u7c7b\u4f3c\u4e8edb.cursor()\u4e5f\u7c7b\u4f3c\u4e8ejdbc\u91cc\u9762\u7684getConnection\u3002 with Session() as session: \u63a5\u7740\uff0c\u6839\u636e\u6211\u4eec\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u867d\u7136\u54b1\u4eec\u6570\u636e\u5e93\u8bbe\u7f6ename\u4e3aunique\uff0c\u6211\u4eec\u8fd8\u662f\u5148\u67e5\u8be2\u662f\u5426\u6709\u8fd9\u4e2aname\u5e76\u4e14deleted_at=None\uff08\u5220\u9664\u65f6\u95f4=None \u4ee3\u8868\u672a\u88ab\u5220\u9664\u7684\uff09\u7684\u73af\u5883\u6570\u636e\uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u6211\u4eec\u4e0d\u7ee7\u7eed\u65b0\u589e\u4e86\uff0c\u8fd4\u56de\u4e00\u4e2a \u63d0\u793a\u4fe1\u606f \u5c31\u884c\u3002 \u5426\u5219\u5462\uff0c\u6211\u4eec\u5c31\u628a\u6570\u636e\u63d2\u5230\u6570\u636e\u5e93\u5e76\u7528session\u8fdb\u884c\u63d0\u4ea4\u3002\u5982\u679c\u4e2d\u9014\u53d1\u751f\u5f02\u5e38\uff0c\u6211\u4eec\u5c31\u8be5\u8bb0\u5f55\u65e5\u5fd7\u7684\u8bb0\u5f55\u65e5\u5fd7\uff0c\u8be5\u8fd4\u56de\u9519\u8bef\u7684\u8fd4\u56de\u9519\u8bef\u3002\u5982\u679c\u6ca1\u5565\u95ee\u9898\u5c31\u8fd4\u56deNone\uff0c\u4ee3\u8868 \u5927\u5409\u5927\u5229\uff0c\u76f8\u5b89\u65e0\u4e8b \u3002 \u7f16\u8f91\u73af\u5883 \u5957\u8def\u90fd\u662f\u4e00\u6837\u7684\uff0c\u751a\u81f3\u4ee3\u7801\u4e5f\u5f88\u63a5\u8fd1\u3002\u4f46\u662f\u6ce8\u610f\u5230\u6709\u4e2a\u533a\u522b\uff0c\u8fd9\u91cc\u8c03\u7528\u4e86update_model\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5e72\u5565\u7684\u54e9\uff1f \u6211\u4eec\u77e5\u9053\uff0c\u66f4\u65b0\u4e00\u6761\u6570\u636e\uff0c\u6211\u4eec\u9664\u4e86\u9700\u8981\u66f4\u6539\u7684\u5b57\u6bb5\u4ee5\u5916\uff0c\u8fd8\u5f97\u6709\u66f4\u65b0\u4eba\u548c\u66f4\u65b0\u65f6\u95f4\u8fd92\u4e2a\u5b57\u6bb5\u8ddf\u7740\u4fee\u6539\u3002\u6240\u4ee5\u6211\u4eec\u7f16\u5199\u4e86\u4e00\u5957\u901a\u7528\u7684\u65b9\u6cd5\uff0c\u628a\u4f60\u4f20\u5165\u7684data\u6570\u636e\uff0c\u6539\u5230query\u91cc\u9762\uff0c\u987a\u4fbf\u6539\u5199\u4e00\u4e0b\u66f4\u65b0\u65f6\u95f4\u548c\u66f4\u65b0\u4eba\u3002 not_null\u6307\u7684\u662f\uff0c\u53ea\u66f4\u65b0\u975e\u7a7a\u5b57\u6bb5\uff0c\u6bd4\u5982\u6211\u672c\u6765\u6709\u4e2a\u6570\u636e\u662fabc\uff0c\u4f60\u4f20None\u8fdb\u6765\uff0c\u6211\u7ed9\u4ed6\u6539\u6210None\u4e86\uff0c\u8fd9\u6837\u53ef\u80fd\u4f1a\u6709\u8bef\u4f1a\u3002\u8fd9\u91cc\u501f\u9274\u4e86gorm\uff0c\u53ea\u66f4\u65b0\u975enull\u7684\u5b57\u6bb5\u3002dist\u4ee3\u8868\u76ee\u6807\uff0csource\u4ee3\u8868\u6570\u636e\u6e90\u3002 \u5220\u9664\u73af\u5883 \u5176\u5b9e\u5220\u9664\u73af\u5883\uff0c\u6211\u4eec\u8fd9\u91cc\u505a\u7684\u662f \u8f6f\u5220\u9664 \uff0c\u6240\u4ee5\u5176\u5b9e\u5b83\u8fd8\u662f\u4e00\u4e2aupdate\u7684\u64cd\u4f5c\u3002\u6211\u4eec\u901a\u8fc7id\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u628a\u5b83\u7684deleted_at\u6539\u6210\u5f53\u524d\u65f6\u95f4\u5373\u53ef\uff0c\u987a\u4fbf\u6539\u4e00\u4e0b\u66f4\u65b0\u4eba\uff08\u7559\u4e0b\u7f6a\u8bc1\uff09\u3002 \u67e5\u8be2\u73af\u5883 \u6ce8\u610f\uff0c\u6211\u8fd9\u513f\u7528\u7684\u662flist_env\u540d\u79f0\uff0c\u4e3a\u5565\u4e0d\u662fsearch\u5462\uff1f\u8fd9\u91cc\u968f\u4f60\u7684\u4fbf\uff0c\u6211\u5176\u5b9e\u662f\u628alist\u548csearch\u5408\u4f53\u4e86\u4e00\u4e0b\u3002\u53ef\u4ee5\u770b\u5230\u6211\u7684name\u53c2\u6570\uff0c\u5982\u679c\u4e0d\u662fNone\u7684\u65f6\u5019\uff0c\u5b83\u5c31\u662f\u4e2asearch\u52a8\u4f5c\uff0c\u5426\u5219\u5b83\u662f\u4e00\u4e2alist\u64cd\u4f5c\u3002 search\u7684\u6839\u672c\u6761\u4ef6\u662f\uff0cdeleted_at == None\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u7ba1\u600e\u4e48\u6837\uff0c\u54b1\u4eec\u90fd\u5f97\u4fdd\u8bc1\u6570\u636e\u6ca1\u88ab\u5220\u9664\u3002 if name: search.append(Environment.name.ilike( \"%{}%\" .format(name))) \u5982\u679cname\u6709\u4f20\uff0c\u6216\u8005\u4e0d\u4e3a\"\"\u4e5f\u4e0d\u4e3aNone\uff0c\u90a3\u4e48\u6211\u4eec\u52a0\u4e0a\u5bf9name\u7684\u6a21\u7cca\u67e5\u8be2\uff0c\u7b49\u4ef7\u4e8e where name ilike xxxxx \u3002 \u6700\u540e\u5c31\u662f\u81ea\u52a8\u5206\u9875\u4e86\uff0c\u6211\u4eec\u67e5\u51fa\u6765\u7684\u6570\u636e\u5f88\u591a\u7684\u8bdd\uff0c\u4e0d\u53ef\u80fd\u5168\u90e8\u505a\u5c55\u793a\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u8fdb\u884c\u5206\u9875\u3002page\u548csize\u6307\u7684\u5c31\u662f \u5f53\u524d\u9875\u7801 \u548c \u4e00\u9875\u591a\u5c11\u6761\u6570\u636e \u3002 \u6700\u540e\u54b1\u4eec\u901a\u8fc7created_at\u8fdb\u884c\u5012\u5e8f\u6392\u5217\uff0c\u4e5f\u5c31\u662f\u8bf4 \u6700\u65b0\u521b\u5efa\u7684\u5728\u6700\u524d\u9762 \u3002\u8fd4\u56de\u4e00\u4e2atotal\uff0c\u5c31\u662f\u672c\u6b21\u67e5\u8be2\u67e5\u5230\u4e86\u591a\u5c11\u6761\u6570\u636e\uff0c\u4ee5\u4fbf\u4e8e\u524d\u7aef\u8fdb\u884c\u5c55\u793a\u3002 \u7f16\u5199router router\u5c42\u5f88\u7b80\u5355\uff0c\u901a\u8fc7ApiRouter\u65b0\u5efa\u8def\u7531\uff0c\u5e76\u628alist/insert/update/delete\u65b9\u6cd5\u6ce8\u518c\u5230\u8def\u7531\u3002\u53ef\u4ee5\u770b\u5230\u57fa\u672c\u4e0a\u4ee3\u7801\u91cf\u5f88\u5c11\uff0c\u5c5e\u4e8e\u8c03\u7528dao\u5c42\u7684\u6838\u5fc3\u65b9\u6cd5\uff0c\u6839\u636e\u8fd4\u56de\u7ed3\u679c\u6765\u8fd4\u56dehttp response\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u6ca1\u6709\u7528restful api\u53bb\u5199\u63a5\u53e3\uff0c\u6240\u4ee5udpate/insert\u90fd\u662fpost\u8bf7\u6c42\uff0c\u5176\u4ed6\u662fget\u8bf7\u6c42\u3002\uff08\u672a\u51fa\u73b0put delete\uff09 \u6ce8\u518crouter \u6700\u540e\u628a\u521a\u624d\u7f16\u5199\u7684router\u6ce8\u518c\u5230app(pity)\u5c31\u53ef\u4ee5\u4e86\u3002 \u5267\u900f\u4e0b\u6548\u679c: \u672c\u671f\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u4e0d\u6c34\u6587\u867d\u7136\u5c11\u70b9\u4e50\u8da3\uff0c\u4f46\u662fhin\u5145\u5b9e\u5440\uff01\u4e0b\u4e00\u671f\u4ee5\u524d\u7aef\u600e\u4e48curd\u4e3a\u4e3b\uff0c\u5404\u4f4d\u89c2\u4f17\u59e5\u7237\uff0c\u62dc\u4e86\u4e2a\u62dc\uff01","title":"31.\u7f16\u5199\u73af\u5883\u914d\u7f6e\u9875\u9762(\u4e0a)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2832%29%20%E7%BC%96%E5%86%99%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2%28%E4%B8%AD%29/","text":"\u56de\u987e \u5927\u5bb6\u597d\u5440\uff0c\u53c8\u89c1\u9762\u4e86\uff01\u4e0a\u671f\u6211\u4eec\u5df2\u7ecf\u5b8c\u6574\u5730\u7f16\u5199\u4e86\u73af\u5883\u7ba1\u7406CRUD\u7684\u63a5\u53e3\uff0c\u4f46\u662f\u5149\u6709\u63a5\u53e3\u662f\u4e0d\u884c\u7684\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u4e4b\u7f16\u5199\u4e00\u4e2aweb\u9875\u9762\uff0c\u4f7f\u7528\u6237\u80fd\u591f\u5728\u9875\u9762\u4e0a\u7ba1\u7406\u73af\u5883\u6570\u636e\u3002 \u8fd9\u662f\u524d\u7aef\u7cfb\u5217\u6587\u7ae0\u7684 \u7b2c\u4e00\u7bc7 \uff0c\u5305\u542b\u4e86\u90e8\u5206\u6559\u7a0b\u5728\u91cc\u9762\uff0c\u6240\u4ee5\u672c\u6765\u662f\u4e0b\u7bc7\u7684\u5b83\uff0c\u53d8\u6210\u4e86\u4e2d\u7bc7\u3002 \u539f\u578b\u8bbe\u8ba1 \u6211\u4eec\u5728\u5b9e\u73b0\u67d0\u4e2a\u529f\u80fd\u7684\u65f6\u5019\uff0c\u5c31\u7b97\u4e0d\u753b\u51fa\u539f\u578b\uff0c\u5fc3\u4e2d\u4e5f\u4e00\u5b9a\u8bbe\u8ba1\u597d\u5927\u6982\u7684\u7ed3\u6784\u3002\u4ee5\u6211\u4eec\u7684\u73af\u5883\u7ba1\u7406\u4e3a\u4f8b\u5b50\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7table\u67e5\u770b\u5f53\u524d\u5df2\u6709\u7684\u73af\u5883\uff0c\u4e5f\u63d0\u4f9binput\u8f93\u5165\u6846\u53bb\u641c\u7d22\u5bf9\u5e94\u7684\u73af\u5883\uff0ctable\u7684\u6570\u636e\u968f\u7740\u641c\u7d22\u7684\u7ed3\u679c\u8fdb\u884c\u5207\u6362\u3002\u529f\u80fd\u70b9\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e00\u4e0b\u5177\u4f53\u7684\u9875\u9762\u3002 \u7531\u4e8e\u6211\u4e0d\u662f\u4e13\u4e1a\u7684\u8bbe\u8ba1\uff0c\u6240\u4ee5\u6211\u6253\u7b97\u91c7\u7528\u624b\u7ed8\u7684\u65b9\u5f0f\u6765\u7ed9\u5927\u5bb6\u63cf\u8ff0\u4e00\u4e0b\u8981\u505a\u4e2a\u5565\u73a9\u610f\u513f\u3002\u4e0b\u9762\u662f\u6211\u7528\u624b\u5199\u677f\u753b\u7684\u4e00\u4e2a\u8349\u56fe(\u7f8e\u672f\u529f\u5e95\u8f83\u5dee): \u8fd9\u91cc\u53ea\u753b\u51fa\u4e86\u5177\u4f53\u9875\u9762\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u9875\u9762\u62c6\u62103\u4e2a\u90e8\u5206\u3002 \u65b0\u589e/\u641c\u7d22 \u65b0\u589e\u4ee3\u8868\u65b0\u589e\u4e00\u4e2a\u73af\u5883\uff0c\u8fd9\u6837\u4f1a\u5f39\u51fa\u4e00\u4e2a\u73af\u5883\u5bf9\u8bdd\u6846\u3002\u6700\u53f3\u4fa7\u662f\u641c\u7d22\u6846\uff0c\u6839\u636e\u73af\u5883\u540d\u53bb\u641c\u7d22\u5bf9\u5e94\u7684\u73af\u5883\u3002 \u8868\u683c \u8868\u683c\u662f\u4e3a\u4e86\u5c55\u793a\u76ee\u524d\u5df2\u6709\u7684\u73af\u5883\u6570\u636e\uff0c\u6ce8\u610f\u8fd9\u91cc\u6211\u6f0f\u753b\u4e86\uff0c\u8868\u683c\u6700\u540e\u4e00\u5217\u8fd8\u9700\u8981\u4e00\u4e2a\u64cd\u4f5c\u5217\uff0c\u5305\u542b\"\u4fee\u6539\"\u548c\"\u5220\u9664\"2\u4e2a\u529f\u80fd\u3002 \u5206\u9875 \u5f53\u6570\u636e\u8f83\u591a\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u5206\u9875\u3002 \u5927\u6982\u7684\u4e00\u4e2a\u9875\u9762\u5c31\u7ed8\u5236\u597d\u4e86\uff0c\u63a5\u7740\u5c31\u662f\u628a\u5b83\u53d8\u73b0\uff01 \u7f16\u5199\u4f20\u7edf\u7684HTML \u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u4e00\u4e2a\u5927\u76d2\u5b50\u4e0b\u9762\u5d4c\u51653\u4e2a\u5c0f\u76d2\u5b50\uff0c\u7b2c\u4e00\u4e2a\u76d2\u5b50\u91cc\u9762\u5305\u542b\u4e00\u4e2abutton\u548c\u4e00\u4e2ainput\uff0c\u7b2c\u4e8c\u4e2a\u76d2\u5b50\u672c\u5e94\u8be5\u662f\u4e2a \u8868\u683c \uff0c\u4f46\u662f\u7531\u4e8e\u6211\u5bf9html\u7684\u8868\u683c\u4e0d\u592a\u719f\u6089\uff0c\u6240\u4ee5\u6211\u653e\u4e86\u4e2a\u7a7a\u6c14\u5728\u90a3\u3002\u7b2c\u4e09\u4e2a\u5c31\u662f\u5206\u9875\uff0c\u4e3a\u4e86\u5077\u61d2\uff0c\u6211\u4e5f\u53ea\u662f\u5199\u4e2a\u540d\u5b57\u3002\u5927\u4f53\u7684\u6548\u679c\u5982\u4e0b: \u8fd9\u4e00\u6b65\u4e3b\u8981\u662f\u4e3a\u4e86\u8ba9\u5927\u5bb6\u80fd\u591f\u660e\u767d\u9875\u9762\u7684\u5e03\u5c40\uff0c\u76f8\u4fe1\u6709html\u57fa\u7840\u7684\u540c\u5b66\u90fd\u80fd\u591f\u770b\u61c2\u3002 \u8bd5\u8bd5React\u7684\u5199\u6cd5 \u4e5f\u8bb8\u7528\u7c7b\u7684\u65b9\u5f0f\u5927\u5bb6\u4f1a\u6bd4\u8f83\u719f\u6089\uff0c\u6211\u4eec\u4eca\u5929\u5c31\u7528\u7c7b\u6765\u7f16\u5199\u4e00\u4e2a\u73af\u5883\u7ba1\u7406\u7684\u7ec4\u4ef6\u3002 \u5148\u6765\u8bb2\u89e3\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u5b9a\u4e49\u4e00\u4e2aEnvironment\u7c7b\uff0c\u96c6\u6210\u81eaReact\u7684Component\u7c7b\uff0c\u91cd\u5199\u91cc\u9762\u7684render\u65b9\u6cd5\u3002 \u8bb2\u4e00\u4e0b\u8fd9\u4e2arender\u65b9\u6cd5\uff0crender\u91cc\u9762\u6211\u4eec\u4e00\u822c\u76f4\u63a5return\u4e86\uff0crender()\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u7684\u5404\u4e2a\u751f\u547d\u5468\u671f\u90fd\u8c03\u7528\u5230\uff0c\u6211\u4eec\u8fd9\u91cc\u4e0d\u7ec6\u7a76\u3002 \u7b80\u5355\u7684\u8bf4\uff0crender\u5c31\u662f\u4e3a\u4e86\u628a\u4f60\u7684\u9875\u9762\u7ed9\u6e32\u67d3\u51fa\u6765\u800c\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u6e32\u67d3\u4ec0\u4e48\u9875\u9762\u5462\uff1f \u4f60\u9700\u8981\u7ed9\u5b83return\u4e00\u4e2ahtml\u7684\u7ec4\u4ef6\uff0c\u6211\u4eec\u5148\u770b\u770b\u6548\u679c: \u6700\u540e\u7684export default\uff0c\u5c31\u662f\u5bfc\u51fa\u8fd9\u4e2a\u7c7b\uff0c\u4e3a\u4e86\u7ed9\u522b\u4ebaimport\u7684\u65f6\u5019\u4f7f\u7528\u3002\u4e0d\u7136\u522b\u4eba\u5e76\u4e0d\u77e5\u9053\u5f15\u5165\u6587\u4ef6\u91cc\u7684\u4ec0\u4e48\u7c7b\uff0c\u56e0\u4e3a\u4e00\u4e2a\u6587\u4ef6\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u7c7b\u3002 \u6709\u6ca1\u6709\u89c9\u5f97\u8fd9\u4e2areturn\u91cc\u9762\u7684\u5185\u5bb9\u5f88\u719f\u6089\uff0c\u6ca1\u9519\uff0c\u91cc\u9762\u5176\u5b9e\u662fhtml\u7684\u5199\u6cd5\uff0c\u548chtml\u5dee\u4e0d\u591a, \u4f46\u662f\u6709\u4e9b\u8bb8\u5dee\u522b\u3002 \u7f16\u5199html\u7ed3\u6784 \u6211\u4eec\u590d\u5236\u521a\u624d\u7684html\u4ee3\u7801\u5230\u6b64\u5904: \u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u62a5\u9519\u4e86\uff0c\u56e0\u4e3a\u8fd9\u91cc\u5199\u6cd5\u548chtml\u6709\u4e9b\u8bb8\u4e0d\u4e00\u81f4\u3002\u4e3b\u8981\u4f53\u73b0\u5728style\u91cc\u9762\uff0c\u6211\u4eec\u5bf9\u5b83\u8fdb\u884c\u8c03\u6574: \u6548\u679c: \u89e3\u91ca: \u8fd9\u5e76\u4e0d\u662f\u7eaf\u7cb9\u7684html\uff0c\u800c\u662fReact\u5b9a\u4e49\u7684\u4e00\u5957jsx\u7684\u8bed\u6cd5\u3002\u60f3\u5fc5\u5927\u5bb6\u6709\u6ce8\u610f\u5230\u51e0\u4e2a\u533a\u522b: style\u7684\u5199\u6cd5\u4e0d\u4e00\u6837 \u662f\u7684\uff0c\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\uff0creact\u4e2d\u7684style\u662f\u7531{{}}\u7ec4\u6210\u7684\uff0c\u5b9e\u9645\u4e0a\uff0c\u4ed6\u662f\u7531{}\u5d4c\u5957\u4e00\u5c42\u5b57\u5178{}\u5b9e\u73b0\u7684\u3002\u6bd4\u5982{{name: \"\u699c\u4e00\u5927\u54e5\"}}\uff0c\u6240\u4ee5\u5f53\u6211\u4eec\u5199 style={{color: \"#ffffff\"}} \u5c31\u7b49\u4ef7\u4e8ehtml\u91cc\u9762\u7684 style=\"color:#ffffff\" \u6709\u90e8\u5206\u5b57\u6bb5\u88ab\u6539\u540d\u4e86 react\u4f30\u8ba1\u662f\u4e3a\u4e86\u7edf\u4e00\u89c4\u8303\uff0c\u91c7\u7528\u7684\u90fd\u662f\u9a7c\u5cf0\u5f0f\u5b57\u6bb5\u3002\u6bd4\u5982\u4e0a\u6587\u4e2d\u6709\u7684marginTop\uff0c\u5176\u5b9e\u5728html\u91cc\u9762\u662fmargin-top\u3002\u8fd9\u4e2a\u5176\u5b9e\u5927\u5bb6\u4e0d\u7528\u592a\u5728\u610f\uff0cide\u4f1a\u7ed9\u4f60\u63d0\u793a: \u5f53\u7136\uff0c\u5982\u679c\u4f60\u5355\u72ec\u7f16\u5199css\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u662f\u6ca1\u6709\u533a\u522b\u7684\u54c8\uff0c\u8fd9\u662f\u884c\u5185\u6837\u5f0f\u7684\u533a\u522b\u3002 \u9664\u6b64\u4e4b\u5916\uff0c\u597d\u50cf \u5dee\u522b\u5e76\u4e0d\u592a\u5927 \uff1f\u6240\u4ee5\u5176\u5b9e\u5b66\u4e60\u6210\u672c\u5e76\u4e0d\u7b97\u592a\u9ad8\u3002 \u4f7f\u7528antd\u6539\u9020\u7ed3\u6784 \u4e3a\u5565\u8981\u7528antd\uff0c\u4f60\u6ca1\u770b\u5230\u8fd9\u4e2a\u9875\u9762\u5947\u4e11\u65e0\u6bd4\u5417\uff1fantd\u5c31\u662f\u4f60\u7684\u7f8e\u56fe\u79c0\u79c0\uff0c\u4e00\u952e\u7f8e\u989c\uff0c\u4f60\u7231\u4e0d\u7231\uff1f \u6539\u9020\u6700\u5916\u5c42div \u9996\u5148\uff0c\u6211\u4eec\u7528Card\u7ec4\u4ef6\uff0c\u5305\u88f9\u6211\u4eec\u7684\u5185\u5bb9\uff0cCard\u9ed8\u8ba4\u5e26\u4e86\u4e00\u4e2a\u5361\u7247\u7684\u6837\u5f0f\uff0c\u6211\u4eec\u6765\u8bd5\u8bd5\u770b: \u4ee3\u7801\u6539\u52a8\u5982\u4e0a\uff0c\u5b9e\u9645\u6548\u679c\uff1a \u52a0\u5165PageContainer\u8c6a\u534e\u5957\u9910 \u6211\u4eec\u4e4b\u524d\u7684\u9875\u9762\u90fd\u4f1a\u6709\u4e2aPageContainer\u7684\u7ec4\u4ef6\u5305\u88f9\uff0c\u8fd9\u6837\u7684\u8bdd\u4f1a\u80fd\u591f\u663e\u793a\u5f53\u524d\u9875\u9762\u7684\u540d\u5b57\u7b49\u4fe1\u606f\uff0c\u4f8b\u5982: \u6211\u4eec\u5728Card\u6700\u5916\u5c42\u4e5f\u5957\u4e0aPageContainer: \u6548\u679c: \u5982\u679ctitle\u4f20\u5165false\u7684\u8bdd\uff0c\u5c31\u4f1a\u663e\u793a\u6210\u9879\u76ee\u5217\u8868\u7684\u9875\u9762\u4e86\u3002 ps: \u6709\u6ca1\u6709\u89c9\u5f97\u9875\u9762\u6e10\u6e10\u7f8e\u5316\u4e86\u4e00\u70b9\uff1f\uff1f \u6539\u9020\u65b0\u589e\u73af\u5883\u6309\u94ae\u548c\u8f93\u5165\u6846 \u5b66\u8fc7bootstrap\u7684\u90fd\u660e\u767d\u6805\u683c\u7cfb\u7edf\u5427\uff1f\u5927\u4f53\u662f\u8bf4\uff0c\u628a\u4e00\u4e2a\u9875\u9762\u5206\u4e3a12\u4efd\uff0c\u4f60\u4e00\u4e2a\u76d2\u5b50\u53606\u4efd\u5c31\u662f6/12 = \u4e00\u534a\u513f\u5bbd\uff0c\u5176\u5b9eantd\u4e5f\u6709\u7c7b\u4f3c\u7684\u5b9e\u73b0\uff0c\u53ea\u4e0d\u8fc7\u5b83\u662f\u6309\u716724\u4efd\u5207\u5272\u5bbd\u5ea6\u7684\u3002 \u6211\u73b0\u5728\u6307\u5b9a \u65b0\u589e\u6309\u94ae \u53606\u4efd\uff0c\u4e2d\u95f4\u7559\u767d12\u4efd\uff0c \u641c\u7d22\u6846 \u5360\u636e6\u4efd\u3002\u90a3\u4e48\u600e\u4e48\u5199\u5462\uff1f \u6548\u679c\u56fe \u6c42\u6c42\u4e86\uff0c\u6362\u4e2a\u6309\u94ae\u548c\u8f93\u5165\u6846\u5427 \u6211\u4eec\u7528\u4e0aantd\u7684\u6309\u94ae\u548c\u8f93\u5165\u6846\u3002\u56e0\u4e3abutton\u548cinput\u662fhtml\u9ed8\u8ba4\u81ea\u5e26\u7684\u7ec4\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u4e3a\u4e86\u533a\u522b\uff0c\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6\u90fd\u7528\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u54e6\uff0c\u6bd4\u5982Button\u548cInput\u3002 type=primary\u6307\u7684\u662f\u786e\u5b9a\u7c7b\u6309\u94ae\uff0c\u4e00\u822c\u662f\u9ad8\u8d35\u7684\u84dd\u8272\u3002\u5176\u4ed6\u7684\u4e0e\u666e\u901a\u7684html\u5e76\u65e0\u533a\u522b\u5427\uff0cInput.Search\u4ee3\u8868\u6211\u4eec\u7528antd\u5c01\u88c5\u597d\u7684\u641c\u7d22\u7ec4\u4ef6\uff0c\u800c\u4e0d\u662f\u666e\u901a\u7684\u8f93\u5165\u6846\u3002 \u6548\u679c\u56fe\uff0c\u5c31\u95ee\u4f60\u662f\u4e0d\u662f\u7f8e\u56fe\u79c0\u79c0 \u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u513f\u4e86\uff0c\u5176\u5b9e\u54b1\u4eec\u6d4b\u8bd5\u80fd\u5199\u8fd9\u79cd\u9875\u9762\u5c31\u5df2\u7ecf\u5f88\u4e0d\u9519\u4e86\uff0c\u867d\u7136\u6bd4\u4e0d\u4e0a\u4e13\u4e1a\u7684\u524d\u7aef\uff0c\u4f46\u662f\u4e5f\u80fd\u591f\u72ec\u5f53\u4e00\u9762\u4e86\uff01 \u4e0b\u4e00\u7bc7\u4e5f\u4f1a\u662f\u6559\u7a0b\u7c7b\u7684\u6587\u7ae0\uff0c\u8fd92\u7bc7\u8fc7\u540e\uff0c\u524d\u7aef\u7684\u7ec6\u8282\u90e8\u5206\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002","title":"32.\u7f16\u5199\u73af\u5883\u914d\u7f6e\u9875\u9762(\u4e2d)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2833%29%20%E7%BC%96%E5%86%99%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2%28%E4%B8%8B%29/","text":"\u9605\u8bfb\u672c\u6587\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\uff0c\u5efa\u8bae\u901a\u52e4/\u8e72\u5751\u7684\u65f6\u5019\u89c2\u770b\u3002 \u56de\u987e \u4e0a\u7bc7\u7f16\u5199\u4e86\u4e00\u90e8\u5206\u7ed3\u6784\uff0c\u8fd8\u5269\u4e0b \u8868\u683c \u6ca1\u6709\u7f16\u5199\u3002\u4ee5\u53ca\u548c\u540e\u7aef\u63a5\u53e3\u7684\u8054\u8c03\uff0c\u4e5f\u4f1a\u5728\u672c\u6587\u8865\u5145\u3002 \u8865\u5145Table\u5185\u5bb9 \u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u7ed9 \u65b0\u589e\u73af\u5883 \u8fd9\u4e2a\u6309\u94ae\u52a0\u4e00\u4e2aicon\uff0c\u8fd9\u6837\u4f1a\u66f4\u76f4\u89c2\u3002 icon\u5730\u5740: https://ant.design/components/icon-cn/ \u70b9\u51fb\u590d\u5236 \u5176\u5b9eicon\u4e5f\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u6211\u4eec\u628a\u5b83\u5d4c\u5165\u5230Button \u8865\u5145Table\u7ec4\u4ef6 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u548chtml\u6709\u5927\u4e0d\u4e00\u6837\u7684\u5730\u65b9\u4e86\u3002\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u7528\u5230antd\u7684Table\u7ec4\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u6309\u7167\u89c4\u77e9\u884c\u4e8b\uff0c\u6839\u636e\u5b83\u9700\u8981\u7684\u53c2\u6570\u4f20\u5165\u5bf9\u5e94\u7684\u6570\u636e\u5c31\u884c\u3002 \u5148\u7406\u89e3\u4e00\u4e0b\u5b98\u7f51\u7684\u6700\u57fa\u672c\u7684\u8868\u683c\u4f8b\u5b50 dataSource \u4e00\u4e2ajson\u6570\u7ec4\uff0c\u91cc\u9762\u5462\uff0c\u5b58\u653e\u7684\u662f\u6570\u636e\u4fe1\u606f\uff0c\u8fd9\u4e2a\u6570\u636e\u6211\u4eec\u4ece\u54ea\u513f\u6765\u5462\uff1f\u4ece\u540e\u7aef\u63a5\u53e3 /config/environment/list \u83b7\u53d6\u3002 columns \u8fd9\u4e2a\u662f\u8868\u683c\u7684\u5217\u914d\u7f6e\u4fe1\u606f\uff0c\u4e5f\u662f\u4e2ajson\u6570\u7ec4\uff0ckey\u4ee3\u8868\u5217\u7684key\uff0ctitle\u4ee3\u8868\u8868\u5934\u7684\u540d\u5b57\uff0cdataIndex\u4ee3\u8868\u4ecedataSource\u7684\u6570\u636e\u91cc\u9762\u53d6\u4ec0\u4e48\u5b57\u6bb5\uff0c\u6bd4\u5982\u4e0a\u56fe\u7684address\uff0c\u4ee3\u8868\u8fd9\u4e00\u5217\u7684\u5185\u5bb9\u662f\u4eceaddress\u91cc\u9762\u53d6\u7684\u3002 \u6211\u4eec\u5148copy\u5b98\u7f51\u7684\u4ee3\u7801\uff0c\u770b\u770b\u6548\u679c \u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u60f3\u8981\u7684\u6548\u679c \u4f46\u662f\u8fd9\u6837\u8fd8\u4e0d\u591f\uff0c\u6570\u636e\u548c\u5185\u5bb9\u90fd\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u6539\u9020\u3002 \u6539\u5199columns \u6211\u4eec\u6709\u81ea\u5df1\u9700\u8981\u5c55\u793a\u7684\u5217\u548c\u5b57\u6bb5: \u5176\u5b9e\u6211\u4eec\u9700\u8981\u5c55\u793aid\uff0c\u73af\u5883\u540d\uff0c\u5907\u6ce8\uff0c\u521b\u5efa\u4eba\u548c\u66f4\u65b0\u65f6\u95f4\u5c31\u53ef\u4ee5\u4e86\u3002\u6240\u4ee5\u5217\u5c31\u8fd9\u51e0\u9879\uff0c\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u8fd8\u9700\u8981\u7f16\u8f91\u67d0\u4e00\u884c\u548c\u5220\u9664\u67d0\u4e00\u884c\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u518d\u5b9a\u4e49\u4e00\u5217\u3002 \u5b9a\u4e49\u4e00\u5217\u64cd\u4f5c\u5217 \u64cd\u4f5c\u5217\u63d0\u4f9b\u4e862\u4e2a\u94fe\u63a5 a \uff0c\u5206\u522b\u662f\u7f16\u8f91\u548c\u5220\u9664\uff0c\u7528Divider\u9694\u5f00\uff0c\u8fd9\u4e2a\u662f\u5206\u5272\u7ebf\u3002 \u6682\u65f6\u6539\u53d8dataSource\u7684\u503c \u56e0\u4e3a\u8fd9\u91cc\u7684\u6570\u636e\u90fd\u662f\u5199\u597d\u4e86\u7684\uff0c\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u63a5\u53e3\u8fd4\u56de\uff0c\u53ef\u4ee5\u8bf4\u662f\u5047\u6570\u636e\u3002\u6211\u4eec\u4e3a\u4e86\u6d4b\u8bd5\u5217\u540d\u663e\u793a\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u81ea\u5df1\u7ed9\u4ed6\u8fdb\u884c\u4e00\u4e9b\u8c03\u6574\u3002 \u5bf9\u5e94\u4e0acolumns\u91cc\u9762\u7684remarks\uff0cname,create_user\u7b49\u7b49 \u663e\u793a\u6548\u679c\u5982\u4e0b \u5927\u4f53\u4e0a\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86html\u7ed3\u6784\u7684\u7f16\u5199\uff0c\u63a5\u7740\u6211\u4eec\u9700\u8981\u8865\u5168\u529f\u80fd\u3002\u5176\u5b9e\u8def\u8fd8\u5f88\u957f\uff0c\u6211\u4eec\u9700\u8981\u6539\u52a8\u7684\u5730\u65b9\u8fd8\u5f88\u591a\uff0c\u5efa\u8bae\u5927\u5bb6\u8010\u5fc3\u770b\u3002 \u62ff\u5230\u771f\u5b9e\u6570\u636e \u4e0a\u8ff0\u6211\u4eec\u662f\u9020\u4e86\u4e00\u4e2a\u5047\u6570\u636e\uff0c\u90a3\u6211\u4eec\u600e\u4e48\u62ff\u5230\u771f\u5b9e\u6570\u636e\u5462\uff1f\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u53d8\u91cf\uff0c\u4e3e\u4e2a\u4f8b\u5b50\u53eb: data \uff0c\u5b83\u9ed8\u8ba4\u662f\u7a7a\u6570\u7ec4\uff0c\u4e5f\u5c31\u662f\u6ca1\u6570\u636e\u3002\u5f53\u6211\u4eec\u8bf7\u6c42\u4e86/config/environment/list\u63a5\u53e3\u4ee5\u540e\uff0c\u66f4\u65b0data\u53d8\u91cf\uff0c\u7531\u4e8ereact\u4f1a\u81ea\u52a8\u5224\u65ad\u53d8\u91cf\u7684\u66f4\u65b0\u5e76update\u9875\u9762\u5185\u5bb9\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u53d8\u5f97\u5f88\u7b80\u5355\u4e86\u3002 \u7ef4\u62a4data\u53d8\u91cf state \u5927\u5bb6\u6ce8\u610f\uff0c\u8fd9\u4e2a\u662f\u4e00\u4e2a\u56fa\u5b9a\u7684\u5199\u6cd5\uff0c\u522b\u6362\u6210\u522b\u7684\uff0creact\u4f1a\u81ea\u52a8\u76d1\u542cEnvironment\u7ec4\u4ef6\u7684state\u53d8\u91cf\u91cc\u7684\u6570\u636e\u5185\u5bb9\u3002\u8fd9\u4e48\u7406\u89e3\uff0cstate\u7b49\u4e8e\u662f\u4e00\u4e2a\u52a8\u6001\u53d8\u91cf\u6c60\uff0c\u4f60\u5728\u91cc\u9762\u653e\u5165\u4e00\u4e2adata\uff0c\u5f53state\u91cc\u9762\u7684data\u53d1\u751f\u53d8\u5316\uff0creact\u4f1a\u81ea\u52a8\u68c0\u6d4bdata\u662f\u5426\u5728dom\u4e0a\u6709\u663e\u793a\uff0c\u6709\u7684\u8bdd\u5c31 \u81ea\u52a8\u66f4\u65b0 \u3002 \u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u8981\u628a\u539f\u6765\u7684dataSource\u53bb\u6389\uff0c\u6362\u6210data\u3002 \u7f16\u5199\u83b7\u53d6\u540e\u7aef\u7684\u63a5\u53e3 \u8fd9\u8fb9\u6211\u4eec\u4e00\u6b21\u6027\u628a\u589e\u5220\u6539\u67e5\u7684\u63a5\u53e3\u90fd\u7f16\u5199\u597d\uff0c\u4ee5\u4fbf\u4e4b\u540e\u53bb\u4f7f\u7528\u3002\u5176\u5b9e\u5c31\u662frequest\u8bf7\u6c42\uff0c\u7136\u540e\u4f20\u5165\u5bf9\u5e94\u7684\u8bf7\u6c42\u65b9\u5f0f\u548curl\u5730\u5740+\u53c2\u6570\u7b49\u3002\u6ce8\u610f\u4ee5\u4e0b\u56fe\u4e2dpost\u548cget\u7684\u533a\u522b\u3002 \u6709\u540c\u5b66\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\uff0c\u7b2c\u4e00\u4e2alistEnvironment\u63a5\u53e3method\u4e0b\u9762\u4e00\u884c\u7684 params \uff0c\u600e\u4e48\u4e0d\u662fkey-value\u7684\u5f62\u5f0f\uff1f\u6709\u540c\u5b66\u77e5\u9053\u7684\u5417\uff1f \u5176\u5b9e\u8fd9\u91cc\u662f\u4e00\u4e2a\u7701\u7565\u7684\u5199\u6cd5\uff0c\u5f53key\u7684\u540d\u5b57\u548cvalue\u53d8\u91cf\u540d\u4e00\u6837\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7701\u6389key\u3002\u4e5f\u5c31\u662f\u8bf4: {key: key}\u53ef\u4ee5\u7b80\u5199\u4e3a{key}\uff0c\u6ce8\u610f\uff1a\u524d\u9762\u7684key\u662f\u5b57\u7b26\u4e32\uff0c\u540e\u9762\u7684key\u662f\u53d8\u91cf\u3002\u8fd9\u4e2a\u5927\u5bb6\u8981\u641e\u660e\u767d\u624d\u80fd\u73a9\u5f97\u8f6c\uff01 \u9700\u8981\u7ef4\u62a4\u7684\u53d8\u91cf \u7531\u4e8e\u6211\u4eec\u7684\u73af\u5883\u5217\u8868\u83b7\u53d6\u9875\u652f\u6301\u5206\u9875\uff0c\u6240\u4ee5\u5728\u83b7\u53d6\u5217\u8868\u7684\u65f6\u5019\uff0c\u9700\u8981\u52a0\u4e0a\u5f53\u524dpage\u548csize2\u4e2a\u53c2\u6570\u3002\u8fd9\u8fb9\u6211\u4eec\u8fd8\u5f97\u7ef4\u62a4\u4e00\u4e2a\u53d8\u91cf: pagination\uff0c\u8fd9\u6837\u5f53\u6211\u4eec\u7528\u6237\u5207\u6362\u9875\u7801\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u53bb\u8bf7\u6c42\u5bf9\u5e94page\u7684\u73af\u5883\u5217\u8868\u3002 \u9ed8\u8ba4current\u4e3a\u7b2c1\u9875\uff0cpageSize\u4e3a8\uff0c\u6570\u636e\u603b\u6570\u4e3a0 \u7531\u4e8e\u6211\u4eec\u7684list\u63a5\u53e3\u8fd8\u9700\u8981\u4e00\u4e2aname\u53c2\u6570\uff0c\u800c\u8fd9\u4e2aname\u4e5f\u4f1a\u8fdb\u884c\u66f4\u6362\uff0c\u6240\u4ee5\u6211\u4eec\u4e5f\u8981\u7ef4\u62a4\u4e00\u4e2aname\u7684\u53d8\u91cf\u3002 \u7f16\u5199\u83b7\u53d6\u73af\u5883\u5217\u8868\u7684\u65b9\u6cd5 \u8fd9\u4e2a\u65b9\u6cd5\u63a5\u53d7page, size\u548cname3\u4e2a\u53c2\u6570\uff0c\u5982\u679c\u4e0d\u4f20\u5165\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3astate\u91cc\u9762\u7684\u503c\u3002\u4e3a\u5565\u8981\u8bbe\u5b9a\u53c2\u6570\uff0c\u8fd9\u4e2a\u8bf4\u6765\u8bdd\u957f\uff0c\u56e0\u4e3areact\u7684\u4fee\u6539\u72b6\u6001\u4e0d\u662f\u7acb\u9a6c\u751f\u6548\u7684\uff0c\u662f\u5f02\u6b65\u7684\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u5728 \u7ffb\u9875 \u7684\u65f6\u5019\uff0c\u60f3\u7684\u662f\u66f4\u65b0\u4e86\u9875\u7801\u7684\u5f53\u524d\u9875\u4ece1->2\uff0c\u7136\u540e\u91cd\u65b0\u8c03\u7528fetchEnvironmentList\u65b9\u6cd5\uff0c\u53ef\u80fd\u8fd8\u662f\u53d6\u7684\u7b2c\u4e00\u9875\u6570\u636e\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u652f\u6301\u53c2\u6570\u5316\uff0c\u8fd9\u6837 \u66f4\u53ef\u63a7 \u3002 \u5982\u679c\u8bf7\u6c42\u6210\u529f\uff0c\u6211\u4eec\u5c31\u66f4\u65b0data\u7684\u6570\u636e\u4e3aresponse.data\uff0c pagination\u7684total\u5b57\u6bb5\u4e3ares.total\u3002 \u8fd9\u91cc\u6709\u4e2a\u7ec6\u8282\u8981\u503c\u5f97\u6ce8\u610f: \u6211\u4eec\u66f4\u65b0\u72b6\u6001\uff0c\u5fc5\u987b\u7528this.setState\uff0c\u4e0d\u80fd\u76f4\u63a5\u53bb\u4fee\u6539\u5b83\u7684\u503c\u3002\u6bd4\u5982: this.state.data = xxx\uff0c\u8fd9\u6837\u662f\u4e0d\u5bf9\u7684\u3002 \u601d\u8003\u4ec0\u4e48\u65f6\u5019\u4f1a\u53d1\u751f\u83b7\u53d6\u73af\u5883\u5217\u8868\u7684\u8c03\u7528 \u5176\u5b9e\u67092\u4e2a\u5730\u65b9\uff0c\u7b2c\u4e00\u4e2a\u662f\u6211\u521a\u8fdb\u6765\uff0c\u4f60\u8981\u7ed9\u6211\u5c55\u793a\u7b2c\u4e00\u9875\u7684\u6570\u636e\u3002\u7b2c\u4e8c\u4e2a\u662f\u6211\u641c\u7d22\u7684\u65f6\u5019\uff0c\u4f60\u4e5f\u8981\u7ed9\u6211\u5c55\u793a\u65b0\u7684\u6570\u636e\u3002 \u6211\u4eec\u52a0\u4e0a\u4e00\u4e2a\u8fd9\u6837\u7684\u65b9\u6cd5\uff0c componentDidMount \u662freact\u7684\u4e00\u4e2a\u56fa\u5b9a\u7684\u5199\u6cd5\uff0c\u4e5f\u662f\u7ee7\u627f\u81eaComponent\u7684\u65b9\u6cd5\uff0c\u4ee3\u8868\u8fd9\u4e2a\u7ec4\u4ef6\u52a0\u8f7d\u540e\u6267\u884c\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4ec5\u4ec5\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\uff0c\u6ee1\u8db3\u4e86\u6211\u4eec\u7684\u9700\u6c42\uff08\u4e00\u8fdb\u6765\u5c31\u83b7\u53d6\u73af\u5883\u4fe1\u606f\uff09\u3002 \u770b\u770b\u6548\u679c \u90a3\u4e2a\u521b\u5efa\u4eba\u4e3a1\u7684\u5730\u65b9\uff0c\u5927\u5bb6\u5148\u5ffd\u7565\u6389\uff0c\u56e0\u4e3a\u6211\u5b58\u7684\u662f\u7528\u6237id\u3002 \u7f16\u5199\u67e5\u627e\u7684\u65b9\u6cd5 \u9996\u5148\u6211\u4eec\u9700\u8981\u6539\u5199\u641c\u7d22\u6846\uff0c\u5f53\u641c\u7d22\u6846\u7684\u6587\u672c\u6709\u53d8\u5316\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u53bb\u66f4\u65b0 name \uff0c\u5176\u6b21\u662f \u7528\u6237\u70b9\u51fb\u641c\u7d22\u6309\u94ae\u6216\u56de\u8f66\u7684\u65f6\u5019 \uff0c\u6211\u4eec\u8981\u53bb\u6839\u636e\u8f93\u5165\u7684\u5185\u5bb9\u641c\u7d22\u5bf9\u5e94\u7684\u73af\u5883\u3002 \u6539\u5199\u641c\u7d22\u6846 \u6ce8\u610f\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u8f93\u5165\u6846\u7684\u5185\u5bb9\u7684value\u662fthis.state.name\uff0c\u7136\u540eonChange\u662fantd\u4e3aInput\u8f93\u5165\u6846\u63d0\u4f9b\u7684\u65b9\u6cd5\uff0ce.target.value\u53ef\u4ee5\u62ff\u5230\u7528\u6237\u8f93\u5165\u7684\u65b0\u503c\uff0c\u63a5\u7740\u6211\u4eec\u6839\u636e\u65b0\u7684\u503c\u6539\u5199name\u5373\u53ef\u3002 onSearch\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u8c03\u7528\u4e86fetchEnvironmentList\u65b9\u6cd5\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4f20\u5165\u4e86\u5f53\u524d\u7528\u6237\u8f93\u5165\u7684name\u3002 \u7f16\u5199\u65b0\u589e/\u4fee\u6539\u529f\u80fd \u5176\u5b9e\u65b0\u589e\u548c\u4fee\u6539\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u60f3\u8c61\u6709\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u91cc\u9762\u53ef\u4ee5\u586b\u5199\u73af\u5883\u540d\u548c\u5907\u6ce8\uff0c\u90a3\u4e0d\u5c31o\u4e86\u5417\uff1f\u96c0\u6c0f\u5982\u6b64\uff01 \u590d\u6742\u7684\u8868\u5355\uff0cantd\u90fd\u7ed9\u6211\u4eec\u5c01\u88c5\u597d\u4e86\uff0c\u535a\u4e3b\u8fd9\u91cc\u53c8\u8fdb\u4e00\u6b65\u5c01\u88c5\u4e86\u4e00\u5c42\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u53bb\u770b\u5177\u4f53\u7684\u6e90\u7801\u3002 \u6211\u4eec\u60f3\u505a\u7684\u5c31\u662f\uff0c\u70b9\u51fb \u65b0\u589e\u73af\u5883 \u6309\u94ae\uff0c\u7ed9\u54b1\u5bb6\u5f39\u51fa\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u90a3\u5bf9\u8bdd\u6846\u5565\u65f6\u5019\u663e\u793a\uff0c\u662f\u4e0d\u662f\u5f88\u660e\u4e86\u4e86\u5462\uff1f\u4f60\u70b9\u7684\u65f6\u5019\u5c31\u663e\u793a\uff0cX\u6389\u5c31\u4e0d\u663e\u793a\u4e86\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2avisible\u7684\u53d8\u91cf(\u9ed8\u8ba4\u4e3afalse)\uff0c\u53bb\u7ba1\u7406\u6211\u4eec\u5bf9\u8bdd\u6846\u662f\u5426\u51fa\u73b0\u3002\u8fd8\u9700\u8981\u4e00\u6761\u8bb0\u5f55record\uff0c\u7528\u4e8e\u521d\u59cb\u5316\u8868\u5355\u7684\u6570\u636e\u3002 Modal(\u4e5f\u5c31\u662f\u5bf9\u8bdd\u6846)\u6211\u4eec\u5df2\u7ecf\u7f16\u5199\u597d\u4e86\uff0conFinish\u4ee3\u8868\u7684\u662f\u8868\u5355\u7684\u63d0\u4ea4\u52a8\u4f5c\uff0c\u5728\u8fd9\u91cc\u67092\u79cd\uff1a \u65b0\u589e\u73af\u5883 \u7f16\u8f91\u73af\u5883 \u600e\u4e48\u533a\u5206\u5b83\u4eec\u5462\uff1f\u6211\u4eec\u6839\u636erecord\u91cc\u9762\u7684id\u662f\u4e0d\u662f0\u6765\u533a\u5206\uff0c\u5982\u679c\u4e0d\u662f0\u8bf4\u660e\u662f\u7f16\u8f91\u52a8\u4f5c\uff0c\u5426\u5219\u5219\u662f\u65b0\u589e\u52a8\u4f5c\u3002\u6240\u4ee5\u6211\u4eec\u5728\u70b9\u51fb \u65b0\u589e\u73af\u5883 \u6309\u94ae\u7684\u65f6\u5019\uff0c\u9700\u8981\u628arecord\u4e5f\u8fdb\u884c\u4e0b\u4fee\u6539\u3002 \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u83b7\u53d6\u5230\u8868\u5355\u7684\u6570\u636e \u63a5\u7740\u6211\u4eec\u6765\u7f16\u5199onFinish\u65b9\u6cd5: \u5982\u679c\u6210\u529f\u63d0\u4ea4\uff0c\u6211\u4eec\u9700\u8981\u5173\u95ed\u5bf9\u8bdd\u6846\uff01\u6700\u7ec8\u6211\u4eec\u91cd\u65b0\u83b7\u53d6\u4e00\u904d\u6570\u636e\uff0c\u563f\u563f\u3002 \u6700\u540e\uff0c\u6211\u4eec\u9700\u8981\u4e3a \u7f16\u8f91 \u6309\u94ae\u6dfb\u52a0\u4e00\u4e2a\u70b9\u51fb\u4e8b\u4ef6: \u663e\u793a\u51fa\u5bf9\u8bdd\u6846\u5e76\u628a\u8868\u5355\u521d\u59cb\u5316\u4e3a\u8fd9\u884c\u6570\u636e\u3002 \u7f16\u5199\u5220\u9664\u65b9\u6cd5 \u5220\u9664\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u4f20\u5165record.id\u7ed9onDelete\u65b9\u6cd5\uff0c\u5e76\u8c03\u7528\u5230\u540e\u7aef\u63a5\u53e3\u5373\u53ef\u3002 \u4f60\u4ee5\u4e3a\uff0c\u8fd9\u5c31\u7ed3\u675f\u4e86\uff1f\u5176\u5b9e\u8fd8\u67092\u4e2a\u5730\u65b9\uff01\u6709\u6ca1\u6709\u60f3\u8fc7\uff0c\u6211\u4eec\u6ca1\u6709\u5904\u7406table\u7ffb\u9875\u7684\u60c5\u51b5\uff0c\u8fd8\u6709\u4e2a\u5c31\u662f\u4e0a\u9762\u7684\u521b\u5efa\u4eba\u662f\u6570\u5b57\u7684\u60c5\u51b5\u3002 \u7f16\u5199\u7ffb\u9875\u529f\u80fd \u53ea\u9700\u8981\u5728table\u7684onChange\u4e8b\u4ef6\u91cc\u9762\u8c03\u7528\u83b7\u53d6\u73af\u5883\u5217\u8868\u7684\u65b9\u6cd5\u5373\u53ef\u3002\u6ce8\u610f\uff0cpagination\u53c2\u6570\u662f\u5f53\u524d\u4f60\u8981\u7ffb\u7684\u9875\u9762\uff0c\u6bd4\u5982\u4f60\u4ece\u7b2c\u4e00\u9875\u5230\u7b2c\u4e8c\u9875\uff0c\u90a3\u4e48pagination\u7684\u6570\u636e\u662f{current: 2, pageSize: 8}\uff0c\u8fd9\u4e2a\u5927\u5bb6\u53ef\u4ee5\u81ea\u5df1console.log\u8f93\u51fa\u8bd5\u8bd5\u3002\u8fd8\u5f97\u6307\u5b9a pagination \u53c2\u6570\u4e3athis.state.pagination\u3002 \u7b80\u5355\u5730\u66ff\u5927\u5bb6\u5c1d\u8bd5\u4e00\u4e0b \u5176\u5b9e\u62c6\u5206\u4e0d\u592a\u5408\u7406\uff0c\u4e0b\u7bc7\u82b1\u4e86\u592a\u591a\u65f6\u95f4\u3002\u4f46\u662f\u4e5f\u4e0d\u60f3\u82b1\u8d39\u592a\u591a\u7bc7\u7ae0\u4e86\u3002\u8f9b\u82e6\u5927\u5bb6\u8010\u5fc3\u770b\u5b8c\u4e86\uff01\u4e0d\u592a\u5b8c\u6574\u7684\u524d\u7aef\u6559\u7a0b\u5c31\u5230\u8fd9\u91cc\u4e86~ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"33.\u7f16\u5199\u73af\u5883\u914d\u7f6e\u9875\u9762(\u4e0b)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2834%29%20%E7%BC%96%E5%86%99%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E6%8E%A5%E5%8F%A3/","text":"\u56de\u987e \u4e0a\u4e00\u8282\u54b1\u4eec\u7f16\u5199\u597d\u4e86\u73af\u5883\u7ba1\u7406\u529f\u80fd\uff0c\u8fd9\u4e00\u7ae0\u8282\u6211\u4eec\u6765\u7ee7\u7eed\u5b8c\u5584 \u5168\u5c40\u53d8\u91cf \u529f\u80fd\u3002 \u5168\u5c40\u53d8\u91cf? \u5168\u5c40\u53d8\u91cf\uff0c\u5176\u5b9e\u6211\u89c9\u5f97\u53eb\u5b83\u5168\u5c40\u914d\u7f6e\u66f4\u52a0\u8d34\u5207\u3002\u6211\u7406\u89e3\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5176\u5b9e\u662f\u6211\u4eec\u5e38\u7528\u7684\u4e00\u4e9b\u4e0d\u592a\u53d8\u5316\u7684\u6570\u636e\uff0c\u800c\u7528\u4f8b\u4e2d\u51fa\u73b0\u7684\u53d8\u91cf\uff0c\u6211\u8ba4\u4e3a\u5b83\u662f\u4e00\u4e2a\u4e34\u65f6\u7684\u6570\u636e\uff0c\u4e0d\u4f1a\u8fdb\u884c \u6c38\u4e45\u5b58\u50a8 \u3002 \u90a3\u4ec0\u4e48\u65f6\u5019\u4f1a\u7528\u5230\u8fd9\u4e9b\u53d8\u91cf\u5462\uff1f\u6bd4\u5982\u54b1\u4eec\u7684\u4e00\u4e9b\u5e38\u7528\u7684\u6d4b\u8bd5\u5730\u5740\uff0cip\u4e5f\u597durl\u4e5f\u597d\uff0c\u5982\u679c\u7528\u4f8b\u4e0d\u628a\u8fd9\u5757\u5185\u5bb9\u62bd\u79bb\u51fa\u6765\uff0c\u4e00\u65e6\u5730\u5740\u53d1\u751f\u53d8\u5316\uff0c\u4f1a\u51fa\u73b02\u4e2a\u95ee\u9898\u3002 \u6211\u4eec\u9700\u8981\u5bf9\u7528\u4f8b\u8fdb\u884c\u4fee\u6539 \u4fee\u6539\u7684\u6210\u672c\u8f83\u5927 \u6709\u540c\u5b66\u53ef\u80fd\u4f1a\u8bf4\uff0c\u90a3\u6211\u53bb \u6570\u636e\u5e93 \u91cc\u9762\u76f4\u63a5update\u4e00\u4e0b\u4e0d\u5c31\u597d\u4e86\uff1f\u662f\u7684\uff0c\u4f60\u53ef\u4ee5\u8fd9\u4e48\u505a\u3002\u4f46\u662f\u8c01\u80fd\u4fdd\u8bc1update\u7684\u65f6\u5019\u4e0d\u4f1a\u51fa\u9519\uff0c\u8c01\u53c8\u80fd\u4fdd\u8bc1\u6bcf\u4e00\u6b21\u90fd\u80fd\u53ca\u65f6update\u4e86\u5462\uff1f\u6240\u4ee5\uff0c\u5982\u679c\u6211\u80fd\u5728 \u5168\u5c40\u53d8\u91cf \u9875\u9762\u8fdb\u884c\u7edf\u4e00\u4fee\u6539\uff0c\u90a3\u4e0d\u662f\u4e8b\u534a\u529f\u500d\u5417\uff1f\u8fd9\u4e5f\u5c31\u662f\u6211\u6240\u8bf4\u7684\uff0c\u5b83\u5176\u5b9e\u66f4\u50cf\u4e00\u4e2a \u5168\u5c40\u914d\u7f6e \u3002 \u8bbe\u8ba1\u601d\u8def \u5176\u5b9e\u6211\u4eec\u63d0\u4f9b\u7684\u5168\u5c40\u914d\u7f6e\uff0c\u7c7b\u4f3c\u4e8eRedis\uff0c\u662f\u4e00\u4e2akey-value\u7684\u5f62\u5f0f\u3002\u7528\u6237\u5982\u679c\u4f7f\u7528\u7684\u8bdd\uff0c\u53ea\u9700\u8981\u8f93\u5165key\uff0c\u5c31\u80fd\u591f\u6620\u5c04\u5230\u5bf9\u5e94\u7684value\u3002 \u60f3\u8c61\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u4e2avalue\u80fd\u591f\u5b58\u653eint\uff0cstr, float\u7b49\u591a\u79cd\u5bf9\u8c61\uff0c\u90a3\u4e48Mysql\u91cc\u9762\u8fd9\u4e2a\u5b57\u6bb5\u8be5\u5982\u4f55\u8bbe\u8ba1\uff1f\u6240\u4ee5\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u8981\u52a0\u4ee5\u8f85\u4f50\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a key_type \u5b57\u6bb5\uff0c\u914d\u5408value\u5b9e\u73b0\u4e00\u4e2a\u5b57\u6bb5\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u529f\u80fd\u3002 \u4f46\u6211\u8fd9\u8fb9\u53c8\u4e0d\u60f3\u592a\u590d\u6742\uff0c\u56e0\u4e3a\u54b1\u90fd\u662f\u61d2\u4eba\u3002\u5176\u5b9e\u6211\u4eec\u5b9a\u4e49\u51e0\u79cd\u7c7b\u578b\u5c31\u591f\u4e86: string json yaml \u4e3a\u4ec0\u4e48\u53ea\u67093\u79cd\u7c7b\u578b\uff1f\u56e0\u4e3a\u5df2\u7ecf\u591f\u4e86\uff0c\u5982\u679c\u662fstring\u7c7b\u578b\uff0c\u5219\u4e0d\u9700\u8981\u8fdb\u884cjson.loads()\u53bb\u83b7\u53d6\u6570\u636e\uff0c\u5982\u679c\u662fjson\uff0c\u6211\u4eec\u9ed8\u8ba4\u901a\u8fc7json.loads()\u53bb\u8f6c\u6362\u4e00\u4e0b\u6570\u636e\u3002\u81f3\u4e8eyaml\uff0c\u7eaf\u7cb9\u662f\u4e3a\u4e86 \u65b0\u9c9c \u3002 \u4e3a\u4ec0\u4e48\u8bf4\u6211\u4eec\u7528json\u5c31\u53ef\u4ee5\u62ff\u5230float,int,bool\u7b49\u7b49\u503c\u5462\uff1f\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50: \u8bc1\u660e\u4e00\u4e0b \u90a3\u4e48\u6211\u4eec\u5b58\u5728\u6570\u636e\u5e93\u7684\u503c\u662fvarchar\u7c7b\u578b\u7684 0.618 \uff0c\u90a3\u6211\u4eec\u653e\u5165Python\u53ef\u4ee5\u8868\u73b0\u4e3a\u8fd9\u6837: a = \"0.618\" \u90a3\u600e\u4e48\u5f97\u5230float\u5462\uff1f a = \"0.618\" import json a = json.loads(a) print(type(a), a) image.png \u540c\u7406\u8bd5\u4e00\u4e0bbool: image.png \u81f3\u4e8estring\u4e3a\u4ec0\u4e48\u548cjson\u533a\u5206\u5f00\uff0c\u5176\u5b9ejson\u5c31\u662f\u4e2astring\uff0c\u6240\u4ee5\u6211\u4eec\u5982\u679c\u9047\u5230string\u7c7b\u578b\u5c31\u4e0d\u505a\u4efb\u4f55json.loads\u7684\u5904\u7406\uff0c\u5373\u53ef\u4fdd\u7559 \u539f\u6ecb\u539f\u5473 \u3002 \u8bbe\u8ba1\u8868 image.png env: \u53d8\u91cf\u5bf9\u5e94\u7684\u73af\u5883\uff0c\u5982\u679cenv\u4e3a0\u7684\u8bdd\uff0c\u8bf4\u660e\u8fd9\u4e2a\u53d8\u91cf\u5c5e\u4e8e\u5168\u90e8\u73af\u5883\u3002 enable: \u53d8\u91cf\u662f\u5426\u53ef\u7528\uff0c\u662f\u4e00\u4e2a\u5f00\u5173\u5b57\u6bb5\uff0c\u53ef\u4e34\u65f6\u5173\u95ed\u8be5\u53d8\u91cf \u6ce8\u610f\u8fd9\u91cc\u6709\u4e00\u4e2a\u8054\u5408\u552f\u4e00\u7d22\u5f15\uff0c\u6839\u636eenv,key\u548cdeleted_at\u751f\u6210\uff0c\u53ea\u6709\u5f53env,key,deleted_at\u90fd\u76f8\u7b49\u7684\u65f6\u5019\uff0c\u6570\u636e\u5e93\u624d\u4e0d\u8ba9\u63d2\u5165\u6570\u636e\u3002\u8fd9\u6837\u89e3\u51b3\u4e86\u4e00\u4e2a\u5728environment\u8868\u91cc\u9762\u51fa\u73b0\u7684\u95ee\u9898: \u5f53\u73af\u5883abc\u88ab\u5220\u9664\u4ee5\u540e\uff0c\u65e0\u6cd5\u518d\u5efa\u7acb\u540d\u4e3aabc\u7684\u73af\u5883 image.png \u6ce8\u518cmodel image.png \u7f16\u5199schema image.png \u7f16\u5199crud\u529f\u80fd from datetime import datetime from sqlalchemy import desc from app.models import Session, update_model from app.models.gconfig import GConfig from app.models.schema.gconfig import GConfigForm from app.utils.logger import Log class GConfigDao (object) : log = Log( \"GConfigDao\" ) @staticmethod def insert_gconfig (data: GConfigForm, user) : try : with Session() as session: query = session.query(GConfig).filter_by(env=data.env, key=data.key, deleted_at= None ).first() if query is not None : return f\"\u53d8\u91cf: {data.key} \u5df2\u5b58\u5728\" config = GConfig(**data.dict(), user=user) session.add(config) session.commit() except Exception as e: GConfigDao.log.error( f\"\u65b0\u589e\u53d8\u91cf: {data.key} \u5931\u8d25, {e} \" ) return f\"\u65b0\u589e\u53d8\u91cf: {data.key} \u5931\u8d25, {str(e)} \" return None @staticmethod def update_gconfig (data: GConfigForm, user) : try : with Session() as session: query = session.query(GConfig).filter_by(id=data.id, deleted_at= None ).first() if query is None : return f\"\u53d8\u91cf {data.key} \u4e0d\u5b58\u5728\" update_model(query, data, user) session.commit() except Exception as e: GConfigDao.log.error( f\"\u7f16\u8f91\u53d8\u91cf\u5931\u8d25: {str(e)} \" ) return f\"\u7f16\u8f91\u53d8\u91cf\u5931\u8d25: {str(e)} \" return None @staticmethod def list_gconfig (page, size, env=None, key=None) : try : search = [GConfig.deleted_at == None ] with Session() as session: if env: search.append(GConfig.env == env) if key: search.append(GConfig.name.ilike( \"%{}%\" .format(key))) data = session.query(GConfig).filter(*search) total = data.count() return data.order_by(desc(GConfig.created_at)).offset((page - 1 ) * size).limit( size).all(), total, None except Exception as e: GConfigDao.log.error( f\"\u83b7\u53d6\u53d8\u91cf\u5217\u8868\u5931\u8d25, {str(e)} \" ) return [], 0 , f\"\u83b7\u53d6\u53d8\u91cf\u5217\u8868\u5931\u8d25, {str(e)} \" @staticmethod def delete_gconfig (id, user) : try : with Session() as session: query = session.query(GConfig).filter_by(id=id).first() if query is None : return f\"\u53d8\u91cf {id} \u4e0d\u5b58\u5728\" query.deleted_at = datetime.now() query.update_user = user session.commit() except Exception as e: GConfigDao.log.error( f\"\u5220\u9664\u53d8\u91cf\u5931\u8d25: {str(e)} \" ) return f\"\u5220\u9664\u53d8\u91cf\u5931\u8d25: {str(e)} \" return None \u770b\u8fc7\u4e0a\u4e00\u7bc7\u6587\u7ae0\u7684\u90fd\u77e5\u9053\u7ec6\u8282\uff0c\u5176\u5b9e\u6211\u5199\u4ee3\u7801\u7684\u65f6\u5019\u4e5f\u662fcopy\u7684\u3002 \u5927\u5bb6\u6709\u6ca1\u6709\u53d1\u73b0: \u7f16\u5199\u4e00\u4e2acrud\u7684\u529f\u80fd\u662f\u771f\u7684\u4e0d\u96be\uff01 \u57fa\u672c\u53ef\u4ee5\u6309\u7167\u56fa\u5b9a\u7684\u5957\u8def\u6765\uff0c\u50cf\u6211\u90fd\u662fcopy\u7684\u4e0a\u4e00\u4e2a\u529f\u80fd\u70b9\u7684\u4ee3\u7801\uff0c\u7136\u540e\u7a0d\u4f5c\u6539\u52a8\u3002 \u7f16\u5199\u6838\u5fc3\u63a5\u53e3 from fastapi import Depends from app.dao.config.GConfigDao import GConfigDao from app.handler.fatcory import ResponseFactory from app.models.schema.gconfig import GConfigForm from app.routers import Permission from app.routers.config.environment import router from config import Config @router.get(\"/gconfig/list\") async def list_gconfig (page: int = 1 , size: int = 8 , env: int = None, key: str = \"\" , user_info=Depends (Permission () ) ) : data, total, err = GConfigDao.list_gconfig(page, size, env, key) if err: return dict(code= 110 , msg=err) return dict(code= 0 , data=ResponseFactory.model_to_list(data), total=total, msg= \"\u64cd\u4f5c\u6210\u529f\" ) @router.post(\"/gconfig/insert\") async def insert_gconfig (data: GConfigForm, user_info=Depends (Permission (Config.ADMIN) ) ) : err = GConfigDao.insert_gconfig(data, user_info[ 'id' ]) if err: return dict(code= 110 , msg=err) return dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" ) @router.post(\"/gconfig/update\") async def update_gconfig (data: GConfigForm, user_info=Depends (Permission (Config.ADMIN) ) ) : err = GConfigDao.update_gconfig(data, user_info[ 'id' ]) if err: return dict(code= 110 , msg=err) return dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" ) @router.get(\"/gconfig/delete\") async def delete_gconfig (id: int, user_info=Depends (Permission (Config.ADMIN) ) ) : err = GConfigDao.delete_gconfig(id, user_info[ 'id' ]) if err: return dict(code= 110 , msg=err) return dict(code= 0 , msg= \"\u64cd\u4f5c\u6210\u529f\" ) \u5176\u5b9e\u5927\u4f53\u4e0a\u8fd8\u662f\u548c\u4e4b\u524d\u7684 router \u5dee\u4e0d\u591a\uff0c\u4f46\u662f\u8fd9\u91cc\u591a\u4e86\u4e00\u4e2a\u7ec6\u8282: \u5f53config router\u4e0b\u9762\u6709\u4e2a\u6587\u4ef6\u7684\u65f6\u5019\u4f1a\u600e\u4e48\u6837\uff1f image.png \u6211\u4eec\u8fd9\u91cc\u6709\u4e00\u4e2agconfig\u548c\u4e00\u4e2aenvrionment\uff0c\u91cc\u9762\u5927\u69828\u4e2a\u63a5\u53e3\u3002 envrionment\u5b9a\u4e49\u4e86ApiRouter\u7684router\u5bf9\u8c61\uff0cgconfig\u5f15\u5165\u4e86router\u5bf9\u8c61\u3002\u90a3\u4e48\u6211\u4eec\u7684\u63a5\u53e3\u4f1a\u88ab\u6210\u529f\u6ce8\u518c\u5417\uff1f \u7b54\u6848\u662f\u4e0d\u4f1a\u7684\uff0c\u5927\u5bb6\u53ef\u4ee5\u8bd5\u4e00\u8bd5\u3002 \u56e0\u4e3a\u987a\u5e8f\u662f\u8fd9\u6837\u7684: router = ApiRouter() # environment\u4e2d\u53d1\u751f pity.include_router(config.router) router\u6ce8\u518cgconfig\u7684\u63a5\u53e3 \u56e0\u4e3a\u54b1\u4eec\u8fd0\u884c\u7684\u662fmain.py\u6587\u4ef6\uff0cmain.py\u5728import router\u7684\u65f6\u5019\u80af\u5b9a\u662f\u6700\u5148\u53d1\u751f\u7684\u3002\u5176\u5b9eflask\u4e5f\u4f1a\u9047\u5230\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6cd5\u67092\u4e2a\u3002 \u5feb\u901f\u6cd5 main.py\u6ce8\u518crouter\u7684\u65f6\u5019\uff0c\u9009\u7528\u6700\u540e\u4e00\u4e2a\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0cenvrionment\u521b\u5efa\u4e86router\uff0cgconfig\u5f15\u5165\u4e86router\uff0c\u6211\u4eec\u4ecegconfig import router\u5c31\u884c\u3002\u4f46\u8fd9\u6837\u4e0d\u4f1a\u592a\u4fdd\u9669\uff0c\u56e0\u4e3a\u8fd8\u662f\u53ef\u80fd\u4f1a\u9057\u6f0f\u6216\u8005\u641e\u9519\u3002 \u5229\u7528__init__.py image.png \u6700\u540e\u5728\u6ce8\u518c\u7684\u65f6\u5019import init .py\u91cc\u9762\u7684router\u5373\u53ef\u3002\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u641e\u4e00\u4e2a\u4e13\u95e8\u6536\u96c6router\u7684\u6587\u4ef6\uff0c\u6700\u540e\u96c6\u4e2d\u6ce8\u518c\u3002 image.png \u603b\u7ed3 \u672c\u671f\u9664\u4e86\u5199\u4e86\u5168\u5c40\u53d8\u91cf\u529f\u80fd\u4ee5\u5916\uff0c\u8fd8\u89e3\u51b3\u4e862\u4e2a\u95ee\u9898: \u8054\u5408\u7d22\u5f15\u95ee\u9898 router\u6ce8\u518c\u95ee\u9898 \u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u5e2e\u52a9~ \u540e\u7aef\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u5730\u5740: https://github.com/wuranxu/pity \u5173\u6ce8\u6211\u7684\u4e2a\u4eba\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \uff0c\u50ac\u66f4\u4e0d\u8ff7\u8def\u3002","title":"34.\u7f16\u5199\u5168\u5c40\u53d8\u91cf\u63a5\u53e3"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2835%29%20%E7%BC%96%E5%86%99%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2/","text":"\u6d4b\u8bd5\u5e73\u53f0\u7cfb\u5217(35) \u7f16\u5199\u5168\u5c40\u53d8\u91cf\u7ba1\u7406\u9875\u9762 \u5927\u5bb6\u597d\uff0c\u8fd9\u91cc\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a\u60f3\u548c\u5927\u5bb6\u4e00\u8d77\u5206\u4eab\u6d4b\u8bd5\u5f00\u53d1\u76f8\u5173\u7684\u6280\u672f\uff0c\u9762\u8bd5\u7ecf\u9a8c\u548c\u6210\u957f\u7ecf\u5386\u7684\u535a\u4e3b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u56de\u987e \u4e4b\u524d\u54b1\u4eec\u7f16\u5199\u4e86\u76f8\u5173\u7684\u540e\u7aef\u63a5\u53e3\uff0c\u73b0\u5728\u7ee7\u7eed\u6765\u5199 \u524d\u7aef \u7684\u9875\u9762\u3002\u6211\u6362\u4e86\u4e2a4k\u663e\u793a\u5668\uff0c\u622a\u56fe\u53ef\u80fd\u8fc7\u4e8e\u9ad8\u6e05\uff0c\u6d41\u91cf\u515a\u4e0d\u5efa\u8bae\u7acb\u5373\u89c2\u770b\u3002 \u8fd9\u53e5\u8bdd\u662f\u5199\u5b8c\u4e86\u518d\u5199\u7684\uff0c\u672c\u7bc7\u5185\u5bb9\u5b66\u4e60\u6307\u65700\u9897\u661f\uff0c\u4ee3\u7801\u6bd4\u8f83\u6666\u6da9\uff0c\u8bb2\u89e3\u4e5f\u4e0d\u591f\u5145\u5206\uff0c\u9002\u5408\u56de\u770b\u3002 \u5e03\u5c40 \u5148\u601d\u8003\u6211\u4eec\u9700\u8981\u7684\u7ec4\u4ef6: \u9700\u8981\u4e00\u4e2a \u73af\u5883\u9009\u62e9 \u6846\uff0c\u7ed9\u7528\u6237\u9009\u62e9\u5f53\u524d\u6240\u5728\u7684\u73af\u5883 \u9700\u8981\u4e00\u4e2a \u641c\u7d22\u6846 \uff0c\u901a\u8fc7key\u53bb\u641c\u7d22\u5bf9\u5e94\u7684\u53d8\u91cf \u9700\u8981\u4e00\u4e2a \u6dfb\u52a0\u53d8\u91cf \u7684\u6309\u94ae \u9700\u8981\u4e00\u4e2a\u8868\u683c\uff0c\u5c55\u793a\u5f53\u524d\u7684\u6570\u636e\u5185\u5bb9 \u5bf9\u6bd4\u524d\u9762\u7684\u7c7b\u4f3c\u9875\u9762\uff0c\u6211\u4eec\u65b0\u589e\u7684\u53ea\u6709 \u73af\u5883\u9009\u62e9\u6846 \uff0c\u6240\u4ee5\u57fa\u672c\u9875\u9762\u7684\u6837\u5f0f\u8fd8\u662f\u4e0d\u53d8\uff0c\u5148\u6765\u4e00\u5f20\u6548\u679c\u56fe\u3002 \u53ef\u4ee5\u770b\u5230\u8fd8\u662f\u52062\u680f\uff0c\u5728 \u6dfb\u52a0\u53d8\u91cf \u6309\u94ae\u4e4b\u524d\u591a\u4e86\u4e2a\u73af\u5883\u9009\u62e9\u6846\u548clabel\u3002 \u5f00\u59cb\u7f16\u5199\u57fa\u672c\u7684React\u6837\u5f0f\u7ec4\u4ef6(\u7c7bHTML) \u9ec4\u8272\u6846\u548c\u84dd\u8272\u6846\u5206\u522b\u662f2\u4e2a Row \uff0c\u5c06\u9875\u9762\u5206\u5272\u4e3a\u4e0a\u4e0b2\u4e2a\u90e8\u5206\u3002\u4e0a\u9762\u90e8\u5206\u5305\u542b3\u4e2a\u6a21\u5757\uff0c\u5bf9\u5e943\u5217: \u5360\u4e8c\u5206\u4e4b\u4e00\u5c4f\u5e55\u5bbd\u5ea6label + select \u5448\u73b0\u73af\u5883\u9009\u9879\u6846 \u5360\u56db\u5206\u4e4b\u4e00\u5c4f\u5e55\u5bbd\u5ea6\u7684\u7a7a\u5217 \u5360\u56db\u5206\u4e4b\u4e00\u5c4f\u5e55\u5bbd\u5ea6\u7684\u5217\uff0c\u5e26\u4e00\u4e2aInput\u8f93\u5165\u6846 \u5176\u5b9e\u5927\u5bb6\u9605\u8bfb\u4ee3\u7801\u7684\u8bdd\uff0c\u53ef\u4ee5\u628aRow\u770b\u505a \uff0cSelect\u8fd9\u79cd\u770b\u4f5c\u5c0f\u5199\u7684 <select> \uff0cInput\u4e5f\u662f\u5982\u6b64\u3002\u81f3\u4e8eCol\uff0c\u5b83\u4e5f\u662f\u4e2adiv\uff0c\u4f46\u662f\u4ed6\u4e0d\u662f\u5360\u5168\u90e8\u5bbd\u5ea6\u7684\uff0c\u4f60\u8bbe\u7f6espan\u5c5e\u6027\u4e3a6\uff0c\u90a3\u5c31\u53606/24\u4e5f\u5c31\u662f\u56db\u5206\u4e4b\u4e00\u7684\u5bbd\u5ea6\u3002 \u81f3\u4e8e\u4e0b\u9762\u7684Table\u5c31\u66f4\u7b80\u5355\u4e86\uff0c\u4ed6\u4e00\u4e2a\u8868\u683c\u5360\u636e\u4e8624\u7684\u5bbd\u5ea6\uff0c\u4e5f\u5c31\u662f100%\u7684\u5bbd\u5ea6\uff0c\u7b2c\u4e8c\u4e2adiv\u8981\u548c\u7b2c\u4e00\u4e2adiv\u6709\u4e00\u5b9a\u9ad8\u5ea6\u5dee\u8ddd\uff0c\u6240\u4ee5\u9700\u8981 margin-top: 8px \u3002 \u6700\u540e\u90a3\u4e2a\u591a\u51fa\u6765\u7684\u6ca1\u6709\u63d0\u53ca\u7684FormForModal\u7ec4\u4ef6\uff0c\u662f\u4e00\u4e2a\u8868\u5355\u7ec4\u4ef6\uff0c\u7528\u6765\u586b\u5199\u53d8\u91cf\u4fe1\u606f\uff0c\u9ed8\u8ba4\u662f\u9690\u85cf\u7684\u3002 \u7f16\u5199\u4ea4\u4e92\u90e8\u5206 \u8fd9\u6b21\u6211\u91c7\u53d6\u4e86 dva \u7ba1\u7406\u5168\u5c40\u72b6\u6001\uff0c\u8fd9\u5757\u5185\u5bb9\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u6df1\u5965\uff0c\u5bf9\u5927\u5bb6\u6765\u8bf4\u6709\u70b9\u96be\u5ea6\u3002\u4f46\u662f\u5982\u679c\u7167\u7740\u5199\uff0c\u5c31\u5927\u6982\u80fd\u5b66\u7740\u5199\u4e86\u3002 dva\u52062\u4e2a\u6a21\u5757\u53bb\u7ba1\u7406\u6570\u636e: models service service\u76ee\u5f55\u5b58\u653e\u6240\u6709\u548c\u670d\u52a1\u7aef\u6253\u4ea4\u9053\u7684\u65b9\u6cd5\uff0cmodels\u4ee5\u547d\u540d\u7a7a\u95f4\u533a\u5206\u7ec4\u4ef6\u7684\u53d8\u91cf\uff0c\u6700\u7ec8\u5b9e\u73b0\u628a\u7ec4\u4ef6\u6240\u6709\u53d8\u91cf\u641c\u96c6\u5230\u4e00\u4e2a\u5927\u6c60\u5b50\u91cc\u9762\u8fdb\u884c\u7cbe\u7ec6\u5316\u7ba1\u7406\u3002\u8bf4\u7684\u53ef\u80fd\u5927\u5bb6\u4e91\u91cc\u96fe\u91cc\uff0c\u6ca1\u5173\u7cfb\uff0c\u5927\u6982\u610f\u601d\u5c31\u662f\u8bf4\uff0c\u4ee5\u524d\u6211\u4eec\u7ec4\u4ef6\u7684\u72b6\u6001\u90fd\u662f\u5728\u7ec4\u4ef6\u91cc\u9762\u53bb \u5b9a\u4e49\u7684\u53d8\u91cf \uff0c\u4f46\u73b0\u5728\u6211\u4eec\u628a\u5b83\u6258\u7ba1\u7ed9dva\uff0c\u6211\u4eec\u8c03\u7528dva\u63d0\u4f9b\u7684\u65b9\u6cd5\u53bb\u4fee\u6539/\u83b7\u53d6\u8fd9\u4e9b\u503c\uff0c\u8fd9\u6837\u4e0d\u7ba1\u6211\u7684\u7ec4\u4ef6\u5d4c\u5957\u591a\u6df1\uff0c\u90fd\u6ca1\u5173\u7cfb\uff0c\u6211\u53ef\u4ee5\u968f\u65f6\u62ff\u5230\u8fd9\u4e2a\u547d\u540d\u7a7a\u95f4\u4e0b\u9762\u7684\u503c\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u5148\u7f16\u5199models\u91cc\u9762\u7684\u5185\u5bb9: \u9996\u5148\u5bfc\u51fa\u4e00\u4e2a\u5b57\u5178\uff0c\u91cc\u9762namespace\u5b9a\u4e49\u4e3a gconfig \uff0c\u63a5\u7740\u5b9a\u4e49state\u53d8\u91cf\uff0c\u628a\u53d8\u91cf\u90fd\u7ef4\u62a4\u5728\u91cc\u9762\u3002 key_type \u6307\u7684\u662f\u6570\u503c\u548c\u53d8\u91cf\u7c7b\u578b\u7684\u5173\u7cfb\u3002 reducers \u8fd9\u4e2a\u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u57fa\u672c\u4e0a\u8fd9\u91cc\u9762\u5199\u7684\u65b9\u6cd5\u90fd\u662f\u7528\u6765\u66f4\u65b0\u72b6\u6001\u7684\uff0c\u4e5f\u5c31\u662f\u66f4\u65b0state\u91cc\u9762\u7684\u5185\u5bb9\u3002 effects \u8fd9\u4e2a\u662f\u7528\u6765\u7f16\u5199\u548c\u540e\u7aef\u4ea4\u4e92\u7684\u65b9\u6cd5\uff0c\u4e5f\u662f\u5f88\u56fa\u5b9a\u7684\u5199\u6cd5\u3002select\u53ef\u4ee5\u4ece\u5f53\u524d\u7684\u72b6\u6001\u91cc\u9762\u62ff\u5230gconfig\u91cc\u9762\u7684state\uff0ccall\u8c03\u7528\u4e86\u540e\u7aef\u65b9\u6cd5\uff0c\u6700\u540e\u6211\u4eec\u7528put\u53bb\u8c03\u7528 reducers \u91cc\u9762\u5199\u7684save\u65b9\u6cd5\uff0c\u5c06\u72b6\u6001\u66f4\u65b0\uff0c\u4e5f\u5c31\u662f\u66f4\u65b0data\uff0cpagination\u7b49\u6570\u636e\u3002 \u8fd9\u4e9b\u5927\u5bb6\u6682\u65f6\u4e0d\u660e\u767d\u6ca1\u5173\u7cfb\uff0cdva\u662f\u4e00\u79cd\u53ef\u9009\u62e9\u7684\u5199\u6cd5\uff0c\u4e5f\u662f\u4e00\u79cd\u72b6\u6001\u7ba1\u7406\u7684\u89e3\u51b3\u65b9\u6848\u3002\u770b\u4e0d\u660e\u767d\u662f\u5f88\u6b63\u5e38\u7684\uff0c\u6211\u5f53\u65f6\u4e5f\u662f\u5b66\u7740\u5199\uff0c\u5199\u4e86\u5f88\u4e45\u6211\u624d\u80fd\u4e0d\u6284\u4ee3\u7801\u5199\u51fa\u4e00\u4e2ademo\u3002 \u540c\u6837\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u5199\u51fa\u5176\u4ed6\u7684\u51e0\u4e2a\u65b9\u6cd5: \u8c03\u7528\u65b0\u589e\u63a5\u53e3\u540e\uff0c\u91cd\u65b0\u83b7\u53d6\u6700\u65b0\u7684Gconfig\uff08\u6839\u636e\u5f53\u524d\u7684page\u548c\u641c\u7d22\u9009\u9879\uff09 update\u63a5\u53e3\u4e5f\u662f\u5982\u6b64\u3002 \u5b8c\u5584\u4ea4\u4e92\u90e8\u5206 \u4e3a\u4ee3\u7801\u7f16\u8f91\u5668\u51c6\u5907\u8bed\u8a00\uff0c\u4e0d\u540c\u7684\u8bed\u8a00\u5982JSON\u548cString\u6709\u4e0d\u540c\u7684\u6548\u679c \u7f16\u5199\u73af\u5883\u7684\u8868\u683ccolumns \u73af\u5883\u5217\u5982\u679c\u662f0\u4ee3\u8868\u5168\u90e8\u73af\u5883\uff0c\u5426\u5219envMap\u91cc\u9762\u6ca1\u6709\u7684\u8bdd\uff0c\u4ee3\u8868\u73af\u5883\u53ef\u80fd\u88ab\u5220\u9664\u4e86\uff0c\u7ed9\u4e2a \u7ea2\u8272\u672a\u77e5 \u7684Tag\u5c55\u793a\u3002 \u64cd\u4f5c\u680f\u8fd8\u662f\u4e00\u5982\u65e2\u5f80\uff0c\u5220\u9664\u548c\u7f16\u8f912\u4e2a\u6309\u94ae\u3002 fields\u662f\u8868\u5355\u7684\u5b57\u6bb5 \u83b7\u53d6\u73af\u5883\u5217\u8868\u65b9\u6cd5\u548c\u83b7\u53d6\u53d8\u91cf\u65b9\u6cd5 dispatch\u4ee3\u8868\u8c03\u7528models\u91cc\u9762\u7684\u65b9\u6cd5\uff0c\u6211\u73b0\u5728\u8c03\u7528namespace: gconfig\u4e0b\u7684fetchEnvList\u65b9\u6cd5\uff0c\u62c9\u53d6\u6240\u6709\u7684\u73af\u5883\u3002 getConfig\u901a\u8fc7page\uff0csize\uff0cenv\uff0ckey\u8fd94\u4e2a\u53c2\u6570\uff0c\u5b9e\u73b0\u67e5\u8be2\u53d8\u91cf\u7684\u529f\u80fd\u3002 \u521d\u59cb\u5316\u64cd\u4f5c \u4e00\u5f00\u59cb\uff0c\u6211\u4eec\u9700\u8981\u83b7\u53d6\u6240\u6709\u73af\u5883\u548c\u83b7\u53d6\u5f53\u524d\u53d8\u91cf\uff0c\u4e0b\u9762\u7684useEffect\uff0c\u6211\u4eec\u63a5\u53d7\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4e00\u4e2a\u6570\u7ec4: \u610f\u601d\u662f \u5f53\u5206\u9875\u91cc\u9762\u7684current\uff0cname\uff0c\u5f53\u524d\u73af\u5883\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u91cd\u65b0\u83b7\u53d6\u5168\u5c40\u53d8\u91cf \uff0c\u8fd9\u4e2a\u529f\u80fd\u5f88\u597d\u7528\u3002 onFinish\u662f\u8868\u5355\u63d0\u4ea4\u7684\u65b9\u6cd5\uff0c\u8001\u5ba2\u6237\u4e86\u3002 save\u662f\u4fee\u6539state\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a\u7528\u7684\u6bd4\u8f83\u591a\uff0c\u6211\u628a\u5b83\u62bd\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u65b9\u6cd5\u3002 \u6f14\u793a\u4e00\u4e0buseEffect\u7684\u5f3a\u5927: \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u7684\u9009\u62e9\u6846\u5728\u53d8\u5316\u7684\u65f6\u5019\uff0c\u53ea\u8c03\u7528\u4e86\u4fee\u6539currentEnv\u7684\u65b9\u6cd5\uff0c \u5e76\u6ca1\u6709\u91cd\u65b0\u53bb\u83b7\u53d6\u5168\u5c40\u53d8\u91cf \u3002\u4f46\u56e0\u4e3a\u6211\u4eec\u8bbe\u7f6e\u4e86useEffect\uff0c\u6240\u4ee5\u5f53\u73af\u5883\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f9d\u7136\u4f1a\u8c03\u7528getConfig\u7684\u65b9\u6cd5\u3002 \u6700\u540e\u7684\u6700\u540e\uff0c\u6211\u4eec\u628a\u7f16\u5199\u7684Gconfig\u7ec4\u4ef6\u7ed9connect\u8d77\u6765\uff0c\u8fd9\u6b65\u5f88\u96be\u7406\u89e3\uff0c\u4e0d\u7406\u89e3\u4e5f\u6ca1\u5173\u7cfb\uff0c\u53cd\u6b63\u4f1a\u6284\u5c31\u884c\uff0c \u6284\u4e0b\u6765\u6539\u6539\u5c31\u53ef\u4ee5\u7528 \u3002 \u5176\u5b9eloading\u4e5f\u7ecf\u8fc7dva\u505a\u4e86\u4e00\u5c42\u5904\u7406\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u53d1\u73b0\u4e86\u6ca1\u6709\u5462\uff1f \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"35.\u7f16\u5199\u5168\u5c40\u53d8\u91cf\u7ba1\u7406\u9875\u9762"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2836%29%20%E4%BD%BF%E7%94%A8%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/","text":"\u6d4b\u8bd5\u5e73\u53f0\u7cfb\u5217(36) \u4f7f\u7528\u5168\u5c40\u53d8\u91cf \u5927\u5bb6\u597d\uff0c\u8fd9\u91cc\u662f\u8001\u514b\uff0c\u4e00\u4e2a\u60f3\u548c\u5927\u5bb6\u4e00\u8d77\u5206\u4eab\u6d4b\u8bd5\u5f00\u53d1\u76f8\u5173\u7684\u6280\u672f\uff0c\u9762\u8bd5\u7ecf\u9a8c\u548c\u6210\u957f\u7ecf\u5386\u7684\u535a\u4e3b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u56de\u987e \u4e0a\u7bc7\u6211\u4eec\u5df2\u7ecf\u7f16\u5199\u597d\u4e86\u5168\u5c40\u53d8\u91cf\u7684\u9875\u9762\uff0c\u4eca\u5929\u6211\u4eec\u5c31\u6765\u5b66\u4e60\u600e\u4e48\u4f7f\u7528\u4ed6\u3002 Windows\u4e0b\u7684\u73af\u5883\u53d8\u91cf \u5176\u5b9e\u8bf4\u767d\u4e86\uff0c\u5168\u5c40\u53d8\u91cf\u4e5f\u5c31\u662f\u4e00\u4e2a\u53c2\u6570\u7684\u8bfb\u53d6->\u66ff\u6362\u7684\u8fc7\u7a0b\u3002\u6240\u4ee5\u6211\u4eec\u5f97\u5148\u8865\u4e60\u4e00\u4e0bel\u8868\u8fbe\u5f0f\u7684\u77e5\u8bc6\u3002\uff08\u5173\u4e8ejsonpath\uff0c\u8fd9\u4e2a\u6211\u4e0d\u592a\u719f\u6089\uff0c\u6211\u4e0d\u592a\u7b97Java\u6280\u672f\u6808\u7684\uff09 \u6211\u4eec\u90fd\u77e5\u9053\uff0c\u5728Windows\u7b49\u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762\u4f1a\u6709 \u73af\u5883\u53d8\u91cf \u7684\u6982\u5ff5\uff0c\u6bd4\u5982: \u5f53\u6211\u4eececho %JAVA_HOME% \u7684\u65f6\u5019\uff0c\u4e3a\u4ec0\u4e48\u8f93\u51fa\u7684\u4e0d\u662f\"%JAVA_HOME%\"\u5462\uff1f\u56e0\u4e3awindows\u6709\u76f8\u5173\u7684\u7ea6\u5b9a\uff0c\u5f53\u5b57\u7b26\u4e32\u88ab%%\u5305\u88f9\u7684\u8bdd\uff0c\u610f\u5473\u7740\u53d6\u503c\u4f1a\u4ece\u73af\u5883\u53d8\u91cf\u91cc\u9762\u5bfb\u627e\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u5c31\u4e0d\u8fdb\u884c\u66ff\u6362: \u8fd9\u4e2a\u53d8\u91cf\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5\u4e0d\u8fdb\u884c\u4efb\u4f55\u66ff\u6362\u64cd\u4f5c EL\u8868\u8fbe\u5f0f \u8fd9\u662f\u6211\u5f53\u65f6\u5728\u4e0a\u4e0a\u5bb6\u516c\u53f8\u8bbe\u8ba1\u7684\u4e00\u5957\u53d8\u91cf\u8868\u793a\u8bed\u6cd5\uff0c\u4f46\u662f\u610f\u5916\u649e\u4e86EL\u8868\u8fbe\u5f0f\u3002\u6211\u7ea6\u5b9a\u7684\u662f\u7528 ${} \u5305\u88f9\u8d77\u6765\u7684\u5185\u5bb9\u90fd\u7b97\u4f5c\u53d8\u91cf\uff0c\u8fd9\u6837\u5728\u63a5\u53e3\u6d4b\u8bd5\u4e2d\u5982\u679c\u6709\u9700\u8981\u4f20\u9012\u53d8\u91cf\u7684\u60c5\u51b5\uff0c\u5c31\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u5f0f\u6765\u89e3\u51b3\u3002 EL\u8868\u8fbe\u5f0f\u6e90\u81ea\u6211\u73b0\u5728\u6b63\u5728\u7ef4\u62a4\u7684\u4e00\u4e2aJSP\u7684\u9879\u76ee\uff0c\u4e5f\u7b97\u662f\u4e00\u79cd\u733f\u7caa\u5427\uff01 \u601d\u8def \u6211\u4eec\u73b0\u5728\u652f\u63013\u79cd\u53d8\u91cf\u7c7b\u578b: JSON/YAML/STRING\u3002\u6211\u4eec\u7684\u6b65\u9aa4\u4e5f\u5f88\u7b80\u5355: \u62ff\u5230\u53d8\u91cf\u7684\u503c\uff08\u53d6\u503c\uff09 \u66ff\u6362\u53d8\u91cf\u4e3a\u5bf9\u5e94\u7684\u771f\u5b9e\u503c(\u66ff\u6362) \u7f16\u5199\u53d8\u91cf\u89e3\u6790\u5668 \u7f16\u5199\u89e3\u6790\u5668\u57fa\u7c7b \u57fa\u7c7b\u67092\u4e2a\u65b9\u6cd5: \u89e3\u6790 \u53d6\u503c \u89e3\u6790\u662f\u4e00\u4e2a\u5f85\u5b9e\u73b0\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\u89e3\u6790\u5668\u4e0d\u4e00\u6837\uff0c\u672a\u6765\u5982\u679c\u9700\u8981\u652f\u6301XML\u7c7b\u578b\uff0c\u90a3\u4e5f\u8981\u91cd\u5199\u8fd9\u4e2a\u65b9\u6cd5\u3002 \u53d6\u503c\u6bd4\u8f83\u901a\u7528\uff0c\u76ee\u524d\u6765\u8bb2\uff0c\u6211\u4eec\u89e3\u6790\u5b8cyaml\u4ee5\u540e\u4e5f\u662f\u4e00\u4e2ajson\u5bf9\u8c61\uff0c\u6240\u4ee5\u53ef\u4ee5\u5199\u5728\u57fa\u7c7b\u4e2d\u3002 \u6211\u4eec\u6765\u4ed4\u7ec6\u770b\u770b\u8fd9\u6bb5\u4ee3\u7801: \u53c2\u6570\u90e8\u5206 parse\u63a5\u53d72\u4e2a\u53c2\u6570\uff0cdata\u662f\u89e3\u6790\u540e\u7684\u6570\u636e\uff08\u4e00\u822c\u662fJSON\u5bf9\u8c61\uff09\uff0ckey\u662fel\u8868\u8fbe\u5f0f\u7684\u8def\u5f84\u5982: JAVA_HOME \u3002\u4f46\u662f\u6211\u4eec\u4e0d\u80fd\u53ea\u505a\u6700\u7b80\u5355\u7684\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u83b7\u53d6\u6df1\u5c42\u6b21\u8def\u5f84\u7684\u503c\u3002 \u4e3e\u4e2a\u4f8b\u5b50: \u5168\u5c40\u53d8\u91cf INFO \u7684\u503c\u662f\u4e2aJSON\u7c7b\u578b: { \"name\" : \"wc\" , \"age\" : 19 , \"hobby\" : \"play game\" } \u6211\u4eec\u5982\u679c\u53ea\u901a\u8fc7INFO\u53d6\u5230JSON\u5bf9\u8c61\uff0c\u90a3\u662f\u8fdc\u8fdc\u4e0d\u884c\u7684\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u80fd\u591f\u901a\u8fc7INFO.age\u53d6\u5230\u5bf9\u5e94\u7684\u5e74\u9f84\u3002\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u7f16\u5199\u4e86get\u65b9\u6cd5\u3002 \u5b9e\u73b0\u8fc7\u7a0b \u5176\u5b9e\u9053\u7406\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u5148\u901a\u8fc7 . \u53bb\u5206\u5272\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662fINFO.age\uff0c\u90a3\u4e48\u5b57\u7b26\u4e32\u5c31\u4f1a\u6210\u4e3a: [\"INFO\", \"age\"] \u6570\u7ec4\u3002\u63a5\u7740\u6211\u4eec\u4ece\u6570\u7ec4\u7684 \u7b2c2\u4e2a \u5143\u7d20\u53bb\u904d\u5386\uff0c\u5982\u679c\u53d6\u5230\u7684\u662f\u6570\u5b57\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u6309\u7167\u6570\u7ec4\u7d22\u5f15\u53bb\u53d6\u503c\uff0c\u5982\u679c\u662f\u666e\u901a\u7684key\uff0c\u5c31\u6309\u7167map\u6765\u53d6\u503c\u3002 \u6700\u540e\u505a\u4e00\u4e2a \u5f02\u5e38\u6355\u83b7 \uff0c\u9632\u6b62\u90a3\u79cd\u4e71\u5199\u53d8\u91cf\u7684\u60c5\u51b5\u51fa\u73b0\u3002\u5982\u679cresult\u662f\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u76f4\u63a5\u8fd4\u56de\u3002\u5982\u679c\u662f\u6570\u5b57\u7c7b\u578b\uff0c\u90a3\u6211\u4eec\u5c31\u5c06\u5b83\u8f6c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 \u601d\u8003 \u56e0\u4e3a\u6211\u4eec\u73b0\u5728\u662f\u53d6\u503c\uff0c\u540e\u671f\u66ff\u6362\u7684\u65f6\u5019\u662f\u7528replace\u628a ${INFO.age} \u66ff\u6362\u4e3a\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679c\u4f60\u7684age\u662f19\u8fd9\u4e2a\u6570\u5b57\u7684\u8bdd\uff0c\u60f3\u4e00\u4e0breplace\u4f1a\u51fa\u9519\u5417\uff1f \u5206\u522b\u5b9e\u73b03\u79cd\u89e3\u6790\u5668 \u5148\u770bstring\u7c7b\u578b\uff0c\u56e0\u4e3a\u4ed6\u81ea\u5df1\u4e0d\u53ef\u80fd\u518d\u53bb\u6df1\u5c42\u6b21\u53d6\u503c\u4e86\u3002 \u8bf4\u5230\u8fd9\u91cc\uff0c\u6211\u7a81\u7136\u60f3\u5230\u5b83\u53ef\u4ee5\u76f4\u63a5\u7d22\u5f15\u53bb\u53d6\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\u5b50\u4e32\uff0c\u4f46\u662f\u6211\u4e0d\u592a\u5efa\u8bae\u652f\u6301\u8fd9\u6837\u7684\u529f\u80fd\u3002\u56e0\u4e3a\u7d22\u5f15\u9700\u89812\u4e2a\u503c\uff0c1\u4e2a\u7684\u8bdd\u6bd4\u8f83\u9e21\u808b\u3002\u8fd9\u6837\u5bf9\u4e8e\u6211\u4eec\u7684el\u8868\u8fbe\u5f0f\u6765\u8bf4\u4e0d\u662f\u592a\u7edf\u4e00\u3002 \u6240\u4ee5\u6211\u4eec\u76f4\u63a5return value\uff0c\u4e5f\u5c31\u662f\u4e0d\u9700\u8981\u8fdb\u884c\u66f4\u6df1\u5c42\u6b21\u53d6\u503c\u4e86\u3002 \u518d\u770bJSON\u548cyaml\u7c7b\u578b\uff0c\u5176\u5b9e\u5c31\u662fload\u4e86\u4e00\u4e0b\u6570\u636e\uff08\u5c06\u5b57\u7b26\u4e32\u6570\u636e\u8f6c\u4e3aJSON\u5bf9\u8c61\uff09\u3002 \u7f16\u5199GConfigDao\u83b7\u53d6key\u7684\u65b9\u6cd5 \u4e4b\u524d\u6211\u4eec\u7684\u67e5\u8be2\u53d8\u91cf\u7684\u65b9\u6cd5\uff0c\u90fd\u662f\u6279\u91cf\u7684\uff0c\u6216\u8005\u8bf4\u662f\u67e5\u8be2\u4e00\u4e2a\u5217\u8868\u3002\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u66f4\u7cbe\u786e\u7684\u641c\u7d22\uff0c\u53ea\u8981\u4e00\u6761\u53d8\u91cf\u7684\u6570\u636e\u3002 \u63a5\u53d7key\u7684\u540d\u5b57\u548c\u5bf9\u5e94\u7684\u73af\u5883\uff0c\u5982\u679c\u73af\u5883\u4e0d\u4f20\u7684\u8bdd\uff0c\u5219\u4e0d\u6839\u636e\u73af\u5883\u53bb\u67e5\u8be2\u3002\u56e0\u4e3a\u76ee\u524d\u6211\u4eec\u7528\u4f8b\u6267\u884c\u7684\u65f6\u5019\u6ca1\u6709\u8ddf\u73af\u5883\u7ed1\u5b9a\uff0c\u6240\u4ee5\u6682\u65f6\u5148\u4e0d\u4f20\u5165env\uff0c\u540e\u7eed\u5907\u7528\u7684\u5b57\u6bb5\u3002 \u8fd9\u91cc\u60f3\u5230\u4e86\u5c0f\u65b9\u7684\u7591\u60d1\uff0c\u4e4b\u524d\u53ef\u80fdgo\u5199\u591a\u4e86\uff0c\u4e0b\u610f\u8bc6\u4f1a\u628aerr return\u56de\u53bb\uff0c\u73b0\u5728\u6539\u6210Python\u7684\u5199\u6cd5\u4e86\u3002 \u6539\u5199\u7528\u4f8b\u7684\u6267\u884c\u90e8\u5206 \u5728\u6211\u7684\u7406\u89e3\u91cc\u9762\uff0c\u7528\u4f8b\u7684\u53d8\u91cf\u66ff\u6362\u662f\u5728 \u7528\u4f8b\u6267\u884c\u7684\u7b2c\u4e00\u6b65 \uff0c\u5e76\u4e14\u66ff\u6362\u7684\u5730\u65b9\u53ea\u6709\u90a3\u51e0\u5904: url request_header body \u56e0\u4e3a\u76ee\u524d\u8fd8\u6ca1\u6709\u524d\u540e\u7f6e\u6761\u4ef6\uff0c\u6240\u4ee5\u540e\u7eed\u518d\u8865\u5145\uff0c\u65ad\u8a00\u91cc\u7684\u5185\u5bb9\u4e5f\u5982\u6b64\uff0c\u5b83\u4eec\u72ec\u7acb\u4e8e\u7528\u4f8b\u4e4b\u5916\u4e86\u3002 \u6539\u9020Executor\u7c7b \u65b0\u589efields\u5b57\u6bb5\uff0c\u5b58\u653e\u9700\u8981\u66ff\u6362\u53d8\u91cf\u7684\u5b57\u6bb5\u3002 \u7f16\u5199parse_gconfig\u65b9\u6cd5 \u4f9d\u6b21\u53bb\u4fee\u6539\u5404\u4e2a\u5b57\u6bb5\u4e2d\u7684\u53d8\u91cf\u3002 \u7f16\u5199get_parser \u8fd9\u4e2a\u662f\u6839\u636egconfig\u7c7b\u578b\u6765\u83b7\u53d6\u5bf9\u5e94\u7684\u89e3\u6790\u5668\uff0c\u5982\u679c0\u5219\u4e3aString\u89e3\u6790\u5668\uff0c1\u5219\u662fJSON\u89e3\u6790\u5668\uff0c2\u5219\u662fYaml\u89e3\u6790\u5668\u3002 parse_field \u8fd9\u4e2a\u65b9\u6cd5\u662f\u5148\u83b7\u53d6\u539f\u59cb\u5b57\u6bb5\u91cc\u9762\u7684el\u8868\u8fbe\u5f0f\uff0c\u7136\u540e\u4f9d\u6b21\u53bb\u89e3\u6790\u5230\u771f\u5b9e\u6570\u636e\uff0c\u6700\u540e\u518d\u4fee\u6539TestCase\u7684\u5b57\u6bb5\uff08\u6ce8\u610f\u53ea\u662f\u4e34\u65f6\u4fee\u6539\uff0c\u4e0d\u4fee\u6539\u6570\u636e\u8868\uff09\u3002 \u76ee\u524d\u4ee3\u7801\u4f18\u5316\u70b9### \u5728run\u65b9\u6cd5\u52a0\u4e0a\u67092\u5904: \u901a\u8fc7key\u83b7\u53d6\u914d\u7f6e\u7684\u65f6\u5019\uff0c\u4e00\u65e6\u4e00\u4e2a\u5b57\u6bb5\u91cc\u9762\u51fa\u73b02\u4e2a\u53c2\u6570\u7684\u65f6\u5019\uff0c\u4f1a\u83b7\u53d62\u6b21key\uff0c\u4e5f\u5c31\u662f\u67e5\u8be2db2\u6b21\uff0c\u8fd9\u6837\u5f00\u9500\u5f88\u5927 \u6bcf\u6b21\u8dd1\u90fd\u4f1a\u6267\u884cdb\uff0c\u5f00\u9500\u5de8\u5927\uff0c\u53ef\u4ee5\u8003\u8651\u672c\u5730\u7f13\u5b58\u6216\u8005redis\u7f13\u5b58\u3002 \u4fee\u6539run\u65b9\u6cd5 -- \u770b\u4e0b\u6548\u679c \u53ef\u4ee5\u770b\u5230\u53c2\u6570\u90fd\u5df2\u7ecf\u8fdb\u884c\u4e86\u66ff\u6362\uff0c\u6211\u4eec\u518d\u6765\u770b\u770b\u53d8\u91cf BASIC_CONFIG \u7684\u5185\u5bb9: -- \u90a3\u4e48\uff0c\u672c\u671f\u5185\u5bb9\u5230\u8fd9\u91cc\u5c31\u7ed3\u675f\u4e86\u3002 \u5728\u7ebf\u6f14\u793a\u5730\u5740: http://47.112.32.195/ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"36.\u4f7f\u7528\u5168\u5c40\u53d8\u91cf"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2837%29%20%E8%BF%90%E7%94%A8%E8%A3%85%E9%A5%B0%E5%99%A8%E7%BB%99%E7%94%A8%E4%BE%8B%E5%8A%A0%E4%B8%8A%E6%89%A7%E8%A1%8C%E6%97%A5%E5%BF%97/","text":"\u6d4b\u8bd5\u5e73\u53f0\u7cfb\u5217(37) \u8fd0\u7528\u88c5\u9970\u5668\u7ed9\u7528\u4f8b\u52a0\u4e0a\u6267\u884c\u65e5\u5fd7 \u5927\u5bb6\u597d\uff0c\u8fd9\u91cc\u662f \u7c73\u6d1b \uff0c\u4e00\u4e2a\u60f3\u548c\u5927\u5bb6\u4e00\u8d77\u5206\u4eab\u6d4b\u8bd5\u5f00\u53d1\u76f8\u5173\u7684\u6280\u672f\uff0c\u9762\u8bd5\u7ecf\u9a8c\u548c\u6210\u957f\u7ecf\u5386\u7684\u535a\u4e3b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u56de\u987e \u4e0a\u4e00\u8282\u6210\u529f\u628a\u5168\u5c40\u53d8\u91cf\u8fd0\u7528\u5230\u4e86\u7528\u4f8b\u4e4b\u4e2d\uff0c\u540e\u7eed\u6211\u4eec\u7684\u76ee\u6807\u5c31\u662f\u8981 \u5b8c\u5584\u6267\u884c\u7528\u4f8b\u7684\u8fc7\u7a0b \uff0c\u6682\u65f6\u6211\u4eec\u8fd8\u662f\u5355\u63a5\u53e3+\u7b80\u5355\u65ad\u8a00\u7684\u7ecf\u9a8c\u5b9d\u5b9d\uff0c\u540e\u9762\u6211\u4eec\u6162\u6162\u6210\u957f\u3002 \u4e00\u70b9\u60f3\u6cd5 \u5176\u5b9e React \u633a\u591a\u89c2\u4f17\u8fd8\u662f\u4e0d\u592a\u719f\u6089\u7684\uff0c\u540e\u7eed\u5982\u679c\u6211\u7ed9\u540c\u4e8b\u57f9\u8bad\u7684\u8bdd\uff0c\u53ef\u80fd\u4f1a\u5206\u4eab\u4e00\u4e9b\u5b66\u4e60React\u7684\u8d44\u6599\u3002\u540e\u7eed\u8fd9\u4e2a\u6559\u7a0b\u5c31\u4e0d\u592a\u8bb2\u524d\u7aef\u90e8\u5206\u4e86\uff0c\u5e94\u8be5\u5927\u90e8\u5206\u4eba\u90fd \u6ca1\u5565\u5174\u8da3 \u3002\u4e0d\u8fc7\u6211\u4f1a\u5927\u6982\u5c55\u793a\u4e00\u4e0b\u6700\u65b0\u7684\u9875\u9762\u6548\u679c\u3002 \u524d\u7aef\u4f18\u5316\u5c55\u793a \u628a\u57fa\u7840\u90e8\u5206\uff0cheaders\uff0cbody\u62c6\u51fa\u6765\u52063\u4e2atab\u5c55\u793a\u3002 \u6709\u7528\u5230\u5168\u5c40\u53d8\u91cf\u7684\u5730\u65b9\uff0c\u4f1a\u62c9\u53d6\u51fa\u5168\u5c40\u53d8\u91cf\uff0c\u5e76\u80fd\u770b\u5230\u5bf9\u5e94\u7684\u503c\u3002\u8fd9\u4e2a\u9009\u9879\u4e5f\u53ef\u4ee5\u6536\u8d77\u6765\u3002 \u5f00\u59cb\u672c\u8282\u65c5\u7a0b \u770b\u6807\u9898\u5c31\u53ef\u4ee5\u77e5\u9053\u6211\u4eec\u672c\u8282\u8981\u505a\u5565\u5b50\u4e86\u3002\u5173\u4e8e\u7528\u4f8b\u6267\u884c\u7684\u65e5\u5fd7\uff0c\u60f3\u8d77\u6211\u5728\u4e0a\u5bb6\u5355\u4f4d\u662f\u7c7b\u4f3c\u8fd9\u6837\u7684\u505a\u6cd5: self.logger.append( \"\u6b63\u5728\u66ff\u6362\u5168\u5c40\u53d8\u91cf: {}\" .format(xxx)) \u5728\u4e00\u4e2a\u7528\u4f8b\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230 \u975e\u5e38\u591a \u8fd9\u6837\u7684\u8bed\u53e5\u3002\u90a3\u6211\u4eec\u6709\u6ca1\u6709\u66f4\u597d\u7684\u529e\u6cd5\u5462\uff1f \u7b54\u6848\u662f\u6709\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u7528 \u88c5\u9970\u5668 \u53bb\u5b8c\u6210\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u5728\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\u8bb0\u5f55\u65e5\u5fd7\uff0c\u6267\u884c\u4e4b\u540e\u7ee7\u7eed\u8bb0\u5f55\u65e5\u5fd7\uff0c\u6700\u7ec8\u6c47\u603b\u5230 \u6d4b\u8bd5\u62a5\u544a \u4e2d\u3002 \u521d\u6b65\u8bbe\u60f3 \u7f16\u5199\u4e00\u4e2acase_log\u7684\u88c5\u9970\u5668\uff0c\u7ed9\u5b89\u6392\u5230Executor\u7684\u6bcf\u4e2a\u65b9\u6cd5\u4e0a\u9762\uff0c\u5e76\u5728\u6bcf\u4e2a\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\u8f93\u51fa\u65e5\u5fd7\u5c31\u597d\u4e86\u3002 \u5b9e\u9645\u64cd\u4f5c \u9996\u5148\uff0c\u6211\u4eec\u56de\u5fc6\u4e00\u4e0b\u4e4b\u524d\u7684Executor\u7c7b\u3002 \u5f53\u65f6\u662f\u628aExecutor\u4e2d\u7684\u65b9\u6cd5\u90fd\u8bbe\u7f6e\u4e3a\u4e86 staticmethod \uff0c\u4e5f\u5c31\u662f\u8bf4\u91cc\u9762\u7684\u65b9\u6cd5/\u53d8\u91cf\u90fd\u662f\u901a\u8fc7 \u7c7b \u6765\u8bbf\u95ee\u7684\u3002 \u90a3\u8fd9\u6837\u5c31\u5bfc\u81f4\u4e86\u4e00\u4e2a\u5f88\u9ebb\u70e6\u7684\u95ee\u9898\uff0c\u6211\u4eec\u7684\u65e5\u5fd7\u6570\u636e\uff0c\u5b58\u5230\u54ea\u91cc\u5462\uff1f\u56e0\u4e3a\u662f\u7c7b\u65b9\u6cd5\uff0c\u6240\u4ee5\u8981\u77e5\u9053 \u88c5\u9970\u5668\u63a5\u53d7\u7684\u53c2\u6570\u662f\u4e0d\u5e26\u6709self\u6216\u8005cls\u7684 \u3002 \u6709\u7684\u540c\u5b66\u4f1a\u8f7b\u8511\u4e00\u7b11: \"\u4f60\u5728Executor\u7c7b\u91cc\u9762\u52a0\u4e00\u4e2alogger\u7684\u53d8\u91cf\uff0c\u5b58\u653e\u65e5\u5fd7\u4e0d\u5c31\u597d\u4e86\uff1f\" \u90a3\u6837\u662f\u4e0d\u884c\u7684\uff0c\u56e0\u4e3aExecutor\u662f\u9762\u5411\u6240\u6709\u7528\u6237\u7684\uff0c\u4e00\u65e6\u6709\u591a\u4e2a\u7528\u6237\u5728\u6267\u884c\u7528\u4f8b\uff0c\u90a3\u4f60\u7684logger\u4e0d\u5c31\u9519\u4e71\u4e86\uff1f\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u8fd9\u4e2a\u65b9\u6cd5 \u4e0d\u652f\u6301\u5e76\u53d1 \u3002 \u6211\u4eec\u5728\u5b9e\u9645\u5f00\u53d1\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u8003\u8651\u5230\uff0c\u4f60\u4e0d\u662f\u4e00\u4e2a\u4eba\u5728\u7528\u8fd9\u4e2a\u7cfb\u7edf\u3002\u90a3\u6211\u4eec\u6539\u9020\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u628a\u65b9\u6cd5\u90fd\u8bbe\u4e3a \u5b9e\u4f8b\u65b9\u6cd5 \uff0c\u5e76\u4e14\u5728\u751f\u6210Executor\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u521d\u59cb\u5316\u4e00\u4e2alist()\u7528\u6765\u5b58\u653e\u65e5\u5fd7\u6570\u636e\u3002 \u7740\u624b\u6539\u9020Executor \u65b0\u589e__init__()\u65b9\u6cd5 \u8fd9\u4e2a_logger\u662f\u4e13\u95e8\u5b58\u653e\u65e5\u5fd7\u6570\u636e\u7684\u3002 \u6539\u9020Executor\u4e0b\u7684\u65b9\u6cd5 \u5c31\u50cf\u8fd9\u6837\uff0c\u53bb\u6389@staticmethod\u7684\u88c5\u9970\u5668\uff0c\u628aExecutor.xxx\u90fd\u6362\u6210self.xxx\u3002 \u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u5e76\u53d1\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u6211\u6bcf\u4e2a\u7ebf\u7a0b\u62e5\u6709\u7684\u5b9e\u4f8b\u662f\u72ec\u7acb\u7684\uff0c\u5e76\u4e0d\u50cfclass\u4e00\u6837\u662f\u5171\u4eab\u7684\u3002 \u7f16\u5199case_log\u88c5\u9970\u5668 \u6211\u4eec\u901a\u8fc7args[0]\u5c31\u80fd\u83b7\u53d6\u5230self\u4e86( \u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u5927\u5bb6\u53ef\u4ee5\u601d\u8003\u4e00\u4e0b )\uff0c\u901a\u8fc7self\u5c31\u80fd\u83b7\u53d6\u5230logger\u53d8\u91cf\u4e86\u3002\uff08\u6211\u8fd9\u91cc\u5199\u7684cls\uff0c\u6ca1\u5565\u5173\u7cfb\uff0c\u80fd\u7406\u89e3\u5b83\u662fself\u5c31\u884c\uff09 \u63a5\u7740\u5c31\u662f\u5bf9\u53c2\u6570\u7684\u83b7\u53d6\uff0c\u65e5\u5fd7\u8bdd\u672f\u7684\u6574\u7406\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u8fd9\u91cc\u5bf9\u6bcf\u4e2a\u65b9\u6cd5\u90fd\u83b7\u53d6\u4e86\u4e00\u4e0b__doc__\uff0c\u4e5f\u5c31\u662f\u65b9\u6cd5\u7684\u6ce8\u91ca\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u5c31\u4f1a\u53d6\u65b9\u6cd5\u7684\u540d\u5b57\u3002 \u5bf9\u4e8e\u4e00\u4e9b\u7c7b\u53c2\u6570\uff0c\u6211\u4eec\u76f4\u63a5\u8f93\u51fa\u5b83\u7684\u8bdd\u4f1a\u6bd4\u8f83\u96be\u4ee5\u9605\u8bfb\uff0c\u90a3\u6211\u4eec\u9700\u8981\u91cd\u5199\u5b83\u7684__str__\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u8fbe\u5230\u8bdd\u672f\u53cb\u597d\u7684\u76ee\u7684\u3002 \u6211\u4eec\u53bb\u770b\u770bTestCase\u7c7b\u7684\u6539\u52a8: \u6211\u4eec\u6807\u8bb0\u4e86\u4ed6\u662f\u7528\u4f8b\uff0c\u5e76\u4e14\u7ed9\u51fa\u4e86\u7528\u4f8b\u540d\u5b57\u548cid\uff0c\u56e0\u4e3a\u663e\u793a\u7528\u4f8b\u5168\u90e8\u4fe1\u606f\u4e0d\u592a\u73b0\u5b9e\uff08\u4e3b\u8981\u662f\u5360\u4f4d\u7f6e\uff09\u3002 \u6539\u9020\u6267\u884c\u65b9\u6cd5 \u628a\u65e5\u5fd7\u7ed9join\u4e00\u4e0b\u5e76\u8fd4\u56de\u5373\u53ef\u3002 \u8fd9\u91cc\u9700\u8981\u5b9e\u4f8b\u5316 \u770b\u770bprint\u7684\u6548\u679c: \u867d\u7136\u6548\u679c\u4e0d\u5982\u76f4\u63a5\u7528self.logger.append\u81ea\u7531\u5ea6\u9ad8\uff0c\u4f46\u662f\u4e5f\u8db3\u591f\u4f7f\u7528\u4e86\u3002 \u8fdb\u9636 \u5176\u5b9e\u5f88\u591a\u65f6\u5019\u65e5\u5fd7\u9700\u8981\u9ad8\u4eae\uff0c\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u8f93\u51fa html \u683c\u5f0f\u7684\u65e5\u5fd7\uff0c\u65b9\u4fbf\u5c55\u793a \u5173\u952e\u4fe1\u606f \u3002 \u4eca\u5929\u7684\u540e\u7aef\u5185\u5bb9\u5c31\u5230\u8fd9\u513f\u4e86\uff0c\u535a\u4e3b\u7ee7\u7eed\u53bb\u5199\u524d\u7aef\u90e8\u5206\u4e86\u3002 \u5728\u7ebf\u6f14\u793a\u5730\u5740: http://47.112.32.195/ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"37.\u8fd0\u7528\u88c5\u9970\u5668\u7ed9\u7528\u4f8b\u52a0\u4e0a\u6267\u884c\u65e5\u5fd7"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2838%29%20%E6%8E%A5%E5%85%A5github%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/","text":"\u5927\u5bb6\u597d\uff0c\u8fd9\u91cc\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a\u60f3\u548c\u5927\u5bb6\u4e00\u8d77\u5206\u4eab \u6d4b\u8bd5\u5f00\u53d1 \u76f8\u5173\u7684\u6280\u672f\uff0c\u9762\u8bd5\u7ecf\u9a8c\u548c\u6210\u957f\u7ecf\u5386\u7684\u535a\u4e3b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u80cc\u666f\u77e5\u8bc6 \u76ee\u524d\u5e73\u53f0\u7ef4\u7cfb\u4e86\u81ea\u5df1\u7684\u4e00\u5957\u7528\u6237\u7cfb\u7edf\uff0c\u4f46\u662f \u6709\u6ca1\u6709\u89c9\u5f97\u6bcf\u6b21\u6709\u65b0\u7528\u6237\u90fd\u9700\u8981\u624b\u52a8\u6ce8\u518c\u4f1a\u6bd4\u8f83\u9ebb\u70e6\uff1f \u5728\u4f01\u4e1a\u4e2d\uff0c\u5982\u679c\u5927\u5bb6\u6240\u6709\u7cfb\u7edf\u90fd\u7528\u4e00\u4e2a\u8d26\u53f7\u53bb\u767b\u5f55\uff0c\u4f1a\u4e0d\u4f1a\u5341\u5206\u65b9\u4fbf\u5462\uff1f \u5176\u5b9e\u4f01\u4e1a\u5185\u90e8\u90fd\u4f1a\u6709\u8fd9\u6837\u7684sso\u7cfb\u7edf\uff0c\u5b9e\u73b0\u4e00\u4e2a\u8d26\u53f7\u5171\u4eab\u6240\u6709\u5e73\u53f0\u3002\u90a3\u6211\u4eec\u6709\u4ec0\u4e48\u662f\u6bd4\u8f83\u901a\u7528\u7684\uff0c\u5927\u5bb6\u90fd\u6709\u7684\u8d26\u53f7\u5462\uff1f \u5176\u5b9e\u6709\u8bb8\u591a\uff0cQQ/\u5fae\u4fe1/\u652f\u4ed8\u5b9d\u8fd9\u4e9b\u57fa\u672c\u5927\u5bb6\u90fd\u6709\u3002\u4e0d\u8fc7\u8003\u8651\u5230\u63a5\u5165\u7684\u96be\u6613\u7a0b\u5ea6\uff0c\u6211\u8fd9\u8fb9\u9009\u62e9\u4e86\u652f\u6301 github\u8d26\u53f7 \u63a5\u5165\u3002 \u5982\u679c\u4e0d\u4e86\u89e3\u7684\u8bdd\uff0c\u53ef\u4ee5\u641c\u7d22\u5bf9\u5e94\u7684\u5173\u952e\u8bcd: \u5355\u70b9\u767b\u5f55\u3001SSO\u3001OAuth \u6784\u601d \u5355\u70b9\u767b\u5f55\u5176\u5b9e\u8fd8\u5305\u62ecsession\u7b49\u90e8\u5206\uff0c\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u53ea\u662f\u60f3 \u901a\u8fc7github\u62ff\u5230\u7528\u6237\u4fe1\u606f \uff0c\u5e76\u4e0d\u9700\u8981\u5b83\u5e2e\u6211\u4eec\u7ba1\u7406\u7528\u6237\u767b\u5f55\u72b6\u6001\u3002\u6240\u4ee5\u6211\u4eec\u63a5\u5165\u7684\u8bdd\uff0c\u901a\u8fc7\u83b7\u53d6 \u7528\u6237\u4fe1\u606f \uff0c\u6574\u5408\u5230\u6211\u4eec\u7684pity_user\u8868\u5373\u53ef\u3002 \u521b\u5efaOAuth app github\u5b98\u65b9\u6587\u6863: https://docs.github.com/v3/oauth/ [1] \u8fdb\u5165settings \u9009\u62e9Developer settings \u5207\u6362\u5230OAuth app \u53ef\u4ee5\u770b\u5230\uff0c\u6211\u8fd9\u91cc\u7533\u8bf7\u4e862\u4e2a\uff0c\u4e00\u4e2a\u662flocal\uff08\u672c\u5730\u8c03\u8bd5\u7528\uff09\uff0c\u53e6\u4e00\u4e2a\u662f\u7ebf\u4e0a\u5730\u5740\u3002 \u70b9\u51fbNew OAuth App \u6ce8\u518c\u597d\u4e86\u4e4b\u540e\u5c31\u53ef\u4ee5\u67e5\u770b\u4e86\uff01 \u83b7\u53d6ClientID\u548cClientSecrets \u8fd92\u4e2a\u503c\u8bb0\u5f97\u4fdd\u5b58\u597d\uff0c \u7a0d\u540e\u4f1a\u7528\u5230 \u3002 \u8be6\u7ec6\u63a5\u5165\u6d41\u7a0b \u91cd\u5b9a\u5411\u5230login\u9875\u9762 \u5047\u8bbe\u6211\u4eec\u7684\u9996\u9875\u662fhttps://www.wqrf.com\uff0c\u6211\u4eec\u8bbf\u95ee\u9996\u9875\u7684\u65f6\u5019\uff0c\u7531\u4e8e \u672a\u767b\u5f55 \uff0c\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\u3002 \u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u6309\u94ae\u6216\u8005\u94fe\u63a5\u53eb: \u7528Github\u767b\u5f55 \uff0c\u5f53\u7528\u6237\u70b9\u51fb\u8fd9\u4e2a\u6309\u94ae\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u8df3\u8f6c\u5230: \u8fdb\u5165github\u8ba4\u8bc1\u9875\u9762 https://github.com/login/oauth/authorize?client_id= \u4f60\u7533\u8bf7\u7684clientid \u5982\u679c\u7528\u6237\u8fdegithub\u90fd\u6ca1\u767b\u5f55\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9875\u9762\u4f1a\u53d8\u6210\u4e00\u4e2agithub\u7684\u767b\u5f55\u9875\uff0c\u5426\u5219\u4f1a\u53d8\u6210\u4e00\u4e2a\u6388\u6743\u9875\u9762\uff0c\u95ee\u4f60\u662f\u4e0d\u662f\u8981\u767b\u5f55\u8fd9\u4e2a\u7f51\u7ad9\uff0c\u89c1\u4e0b\u56fe: \u56fe\u662f\u672a\u767b\u5f55github\u7684\u60c5\u51b5 \u901a\u8fc7\u9a8c\u8bc1 \u767b\u5f55\u540eGithub\u4f1a\u6839\u636e\u4f60\u7684clientId\u751f\u6210\u4e00\u4e2a code \uff0c\u91cd\u5b9a\u5411\u5230\u4f60\u7684\u4e3b\u9875\u5e76\u5e26\u5165code\u53c2\u6570: https://www.wqrf.com?code= Github\u751f\u6210\u7684code \u83b7\u53d6token \u63a5\u7740\u6211\u4eec\u5c31\u901a\u8fc7code+clientid+secret\u53bb\u62ff\u5230github\u7684token\u3002 \u8c03\u7528github\u63a5\u53e3 \u62ff\u5230\u4e86\u4e4b\u540e\u5c31\u53ef\u4ee5\u5927\u6447\u5927\u6446\u5730\u8c03\u7528github\u7684\u63a5\u53e3 \u83b7\u53d6\u5230\u7528\u6237\u4fe1\u606f \u4e86\u3002 \u603b\u7ed3 \u7b49\u4e0d\u53ca\u7684\u53ef\u4ee5\u770b\u770b\u5177\u4f53\u7684github\u4f7f\u7528\u6587\u6863\uff0c\u867d\u7136\u662f\u82f1\u6587\u7684\uff0c\u4f46\u662f\u5f88\u8be6\u7ec6\u3002\u7b49\u5f97\u53ca\u7684\uff0c\u53ef\u4ee5\u770b\u6211\u4e0b\u4e00\u7bc7 \u5b9e\u64cd \uff01 github\u6700\u8fd1\u6253\u5f00\u90fd\u5f88\u6162\uff0c\u4f1a\u5f71\u54cd\u767b\u5f55\u6548\u679c\u3002 \u53c2\u8003\u8d44\u6599 [1] https://docs.github.com/v3/oauth/: https://docs.github.com/v3/oauth/","title":"38.\u63a5\u5165github\u7b2c\u4e09\u65b9\u767b\u5f55"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2839%29%20%E6%8E%A5%E5%85%A5github%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95%28%E4%B8%8B%29/","text":"\u6d4b\u8bd5\u5e73\u53f0\u7cfb\u5217(38) \u63a5\u5165github\u7b2c\u4e09\u65b9\u767b\u5f55(\u4e0b) \u5927\u5bb6\u597d\uff0c\u8fd9\u91cc\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a\u60f3\u548c\u5927\u5bb6\u4e00\u8d77\u5206\u4eab \u6d4b\u8bd5\u5f00\u53d1 \u76f8\u5173\u7684\u6280\u672f\uff0c\u9762\u8bd5\u7ecf\u9a8c\u548c\u6210\u957f\u7ecf\u5386\u7684\u535a\u4e3b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u4e0a\u7bc7\u6211\u4eec\u60f3\u597d\u4e86\u5177\u4f53\u7684\u601d\u8def\uff0c\u8fd9\u7bc7\u5c31\u6765\u5b9e\u73b0\u4e4b\u3002 \u5b9e\u73b0 \u5176\u5b9e\u540e\u7aef\u8981\u505a\u7684\u90e8\u5206\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5b8c\u6210\u540e\u97622\u6b65\u5373\u53ef\uff0c\u5373\u751f\u6210token\u548c\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002 \u7f16\u5199register_for_github\u65b9\u6cd5 \u5f53\u4ecegithub\u83b7\u53d6\u5230\u7528\u6237\u4fe1\u606f\u4ee5\u540e\uff0c\u5199\u5165\u6211\u4eec\u81ea\u5df1\u7684\u7528\u6237\u8868\uff0c\u5982\u679c\u6709\u5219\u66f4\u65b0\u7528\u6237\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u5219\u65b0\u589e\u4e00\u6761\u8bb0\u5f55\u3002 \u5148\u67e5\u8be2\u5230email\u548cusername\u90fd\u5339\u914d\u7684\u7528\u6237\uff0c\u5982\u679c\u6709\uff0c\u6211\u4eec\u5c31\u66f4\u65b0\u7528\u6237\u7684\u6635\u79f0\u548c\u5934\u50cf\u5b57\u6bb5\uff0c\u5e76\u66f4\u65b0\u4ed6\u7684 \u6700\u540e\u767b\u5f55\u65f6\u95f4 \u3002 \u5982\u679c\u6ca1\u6709\u8be5\u7528\u6237\uff0c\u6211\u4eec\u5c31\u65b0\u751f\u6210\u4e00\u4e2a \u7528\u6237 \u3002\u8fd9\u91cc\u968f\u673a\u4e86\u51e0\u4f4d\u6570\u5b57\u52a0\u76d0\uff0c\u4fdd\u8bc1\u7528\u6237\u7684\u5bc6\u7801\u662f\u968f\u673a\u7684\uff0c\u5982\u679c\u901a\u8fc7github\u767b\u5f55\u7684\u7528\u6237\uff0c \u57fa\u672c\u4e0a\u4e0d\u592a\u5bb9\u6613\u8bd5\u51fa\u4ed6\u5728\u6d4b\u8bd5\u5e73\u53f0\u7528\u6237\u8868\u7684\u5bc6\u7801 \u3002 \u7f16\u5199github\u767b\u5f55\u63a5\u53e3 \u8bf7\u6c42\u53c2\u6570\u4e3acode\uff0c\u8fd9\u91cc\u7528\u5230\u4e86requests\u7684Session\u7c7b\uff0c\u56e0\u4e3a\u6b64\u5904\u9700\u8981\u53d1\u90012\u6b21http\u8bf7\u6c42\u3002 \u83b7\u53d6access_token url: https://github.com/login/oauth/access_token method: GET/POST\u90fd\u53ef\u4ee5 \u53c2\u6570: code\uff0cclientid\u548csecret\uff0c\u4e5f\u5c31\u662f\u524d\u6587\u8981\u6c42\u8bb0\u5f55\u76842\u4e2a\u5b57\u6bb5 \u8fd4\u56de\u6570\u636e\u662f\u8fd9\u6837\u7684: \u4e00\u4e32\u5f88\u666e\u901a\u7684\u6587\u672c\uff0c\u6211\u4eec\u9700\u8981\u4ece\u91cc\u9762\u62ff\u5230 access_token \u3002 \u83b7\u53d6\u7528\u6237\u4fe1\u606f url: https://api.github.com/user method: GET headers: {\"Authrozation\": \"token \u521a\u624d\u751f\u6210\u7684token \"} \u8fd9\u6837\u5c31\u80fd\u62ff\u5230\u7528\u6237\u4fe1\u606f\u4e86: \u53ef\u4ee5\u770b\u5230\u91cc\u9762\u6709login(\u767b\u5f55\u540d)\uff0cemail(\u90ae\u7bb1)\uff0cname(\u6635\u79f0)\uff0c\u5176\u4ed6\u6709\u7528\u7684\u4fe1\u606f\u6211\u4eec\u53ef\u4ee5\u53d6 avatar_url \uff0c\u65b9\u4fbf\u6211\u4eec\u80fd\u76f4\u63a5\u62ff\u5bf9\u65b9\u7684\u5934\u50cf\u6765\u5c55\u793a\u3002 \u524d\u7aef\u90e8\u5206 \u524d\u7aef\u90e8\u5206\u6211\u5df2\u7ecf\u5b9e\u73b0\u4e86\uff0c\u5927\u6982\u601d\u8def\u662f\u63d0\u4f9b github\u767b\u5f55\u7684\u6309\u94ae \uff0c\u5f53\u7528\u6237\u8fdb\u5165\u9875\u9762\u7684\u65f6\u5019\u5224\u65adurl\u91cc\u9762\u662f\u5426\u5305\u542b ?code= , \u5982\u679c\u6709\u5219\u8bf4\u660e\u662fgithub\u767b\u5f55\u6210\u529f\u540e\u7684\u56de\u8c03\u4e8b\u4ef6\uff0c\u518d\u5c06code\u89e3\u6790\u540e\u8c03\u7528\u4e0a\u9762\u7f16\u5199\u7684login\u63a5\u53e3\uff0c\u5176\u4ed6\u903b\u8f91\u4e0e\u666e\u901a\u7528\u6237\u767b\u5f55\u4e00\u81f4\u3002 \u5927\u5bb6\u6709\u5174\u8da3\u53ef\u4ee5\u7814\u7a76\u4e0b\u5177\u4f53\u7684\u5b9e\u73b0\uff0c\u5199\u7684\u6bd4\u8f83\u7cd9\uff0c\u53ef\u4ee5\u901a\u8fc7 \u63d0\u4ea4\u8bb0\u5f55 \u6765\u770b\u5230\u5bf9\u5e94\u7684\u6539\u52a8~ github\u63d0\u901f\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\uff0c\u4eb2\u6d4b\u6709\u6548: https://zhuanlan.zhihu.com/p/107334179 \u5728\u7ebf\u6f14\u793a\u5730\u5740: http://47.112.32.195/ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"39.\u63a5\u5165github\u7b2c\u4e09\u65b9\u767b\u5f55(\u4e0b)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%284%29%20%E4%BD%BF%E7%94%A8%E8%93%9D%E5%9B%BE%28Blueprint%29/","text":"\u4f7f\u7528Flask\u84dd\u56fe(blueprint) \u56de\u987e \u5148\u6765\u770b\u4e00\u4e0b\u4e0a\u4e00\u7bc7\u7684\u4f5c\u4e1a\u5427\uff0c\u4f7f\u7528 logbook \u7684\u65f6\u5019\uff0c\u9047\u5230\u4e86\u65f6\u533a\u4e0d\u5bf9\u7684\u60c5\u51b5\u3002\u90a3\u4e48\u6211\u4eec\u600e\u4e48\u53bb\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f \u5b9e\u9645\u4e0alogbook\u9ed8\u8ba4\u91c7\u7528\u7684\u662f\u4e16\u754c\u6807\u51c6\u65f6\u95f4( utc )\uff0c\u800c\u6211\u4eec\u7684\u5317\u4eac\u65f6\u95f4\u662f\u6bd4\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u65e98\u4e2a\u5c0f\u65f6\u7684\u3002 \u89e3\u51b3\u65b9\u6848 \u5176\u5b9e\u5728\u6211\u4eec\u5de5\u4f5c\u4e2d\u7ecf\u5e38\u4f1a\u9047\u5230\u5f88\u591a\u5947\u602a\u7684\u95ee\u9898\uff0c\u6700\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u641c\u7d22\u5bf9\u5e94\u7684\u62a5\u9519\u4fe1\u606f\u3002\u7136\u540e\u627e\u5230\u7ed3\u679c\u6700\u63a5\u8fd1\u7684\u5185\u5bb9\uff0c\u4e00\u822c\u5728 Stack Overflow segmentfault \u7b80\u4e66 CSDN \u535a\u5ba2\u56ed \u5f00\u6e90\u4e2d\u56fd \u7b49\u793e\u533a\u53ef\u4ee5\u627e\u5230\u5bf9\u5e94\u7684\u7b54\u6848\u3002 \u9047\u5230\u95ee\u9898\u5176\u5b9e\u5e76\u4e0d\u53ef\u6015\uff0c\u6211\u4eec\u6709\u81ea\u5df1\u7684\u5957\u8def\u53bb\u89e3\u51b3\u5c31\u597d\u3002 \u8fd9\u91cc\u6211\u4ecb\u7ecd\u4e00\u4e0b\uff0c\u6211\u4e2a\u4eba\u5de5\u4f5c\u4e2d\u7684\u4e00\u4e9b\u89e3\u51b3\u95ee\u9898\u7684\u65b9\u5f0f\u5427\u3002 \u5b98\u65b9\u6587\u6863 \u4e00\u5207\u5927\u5bb6\u5e38\u89c1\u7684\u95ee\u9898\uff0c\u57fa\u672c\u4e0a\u90fd\u4f1a\u88ab\u5199\u5165\u5230\u5b98\u65b9\u6587\u6863\u91cc\u3002\u5b98\u65b9\u6587\u6863\u4e00\u822c\u542b\u6709\u5982\u4f55\u4f7f\u7528\uff0c\u4ee5\u53ca\u4e00\u4e9b\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002 Logbook\u5b98\u7f51 logbook\u5b98\u7f51\u622a\u56fe \u7531\u4e8e\u5b98\u7f51\u662f\u82f1\u6587\u7248\uff0c\u6240\u4ee5\u9700\u8981\u6709\u4e00\u5b9a\u7684\u82f1\u6587\u57fa\u7840\u3002\u7531\u4e8e\u6ca1\u6709 \u641c\u7d22\u6846 \uff0c\u6240\u4ee5\u53ea\u80fd\u6682\u65f6\u5229\u7528\u6d4f\u89c8\u5668\u7684ctrl+f\u641c\u7d22\u5173\u952e\u5b57\u4e86\u3002\u8bd5\u56fe\u641c\u7d22\"time\"\u548c\"utc\"\u5173\u952e\u5b57\uff0c\u65e0\u679c\u3002 Github/Stack Overflow \u4f5c\u4e3a\u4e00\u4e2astar\u91cf1000+\u7684opensource\u9879\u76ee\uff0c\u5fc5\u5b9a\u4f1a\u6709\u4e00\u7fa4\u4fa0\u4e49\u4eba\u58eb\u5e2e\u5fd9\u7ef4\u62a4\u66f4\u65b0\u4ee5\u53ca\u63d0\u51fa\u89e3\u51b3\u95ee\u9898(\u8fd9\u4e5f\u662f\u6211\u9009\u62e9\u5b83\u7684\u539f\u56e0)\u3002\u6240\u4ee5\u80af\u5b9a\u4e0d\u53ea\u662f\u6211\u4e00\u4e2a\u4eba\u9047\u5230\u4e86\u65f6\u95f4\u7684\u95ee\u9898\u3002 \u679c\u65ad\u8fdb\u5165github\uff0c\u641c\u7d22 logbook \u8fdb\u5165\u4e4b\u540e\u70b9\u51fbissues(\u95ee\u9898)\u9875\u9762 \u53ef\u4ee5\u770b\u5230\uff0c\u76ee\u524d\u670932\u4e2a\u6253\u5f00\u7684\u95ee\u9898\uff0c\u91cc\u9762\u90fd\u662f\u5173\u4e8e\u5927\u5bb6\u4f7f\u7528\u95ee\u9898\u4e4b\u540e\u7684\u53cd\u9988\u3002\u7b2c\u4e00\u773c\u5c31\u770b\u5230\u4e86correct date\u8fd9\u4e2a\u95ee\u9898\uff0c\u6ce8\u610f\u4e0a\u9762\u662f\u6709\u641c\u7d22\u6846\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u641c\u7d22utc\u3002\u73b0\u5728\u6211\u4eec\u5148\u4e0d\u641c\u7d22, \u8fdb\u5165\u67e5\u770b\u4e00\u4e0b\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u7b54\u6848\uff0c\u8fd9\u4e9b\u4eba\u548c\u6211\u4eec\u4e00\u6837\u90fd\u662f\u88ab\u56f0\u60d1\u7684\u3002\u4f46\u6ca1\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u521a\u624d\u7684\u641c\u7d22\u6846\u3002\u5728\u641c\u7d22\u6846\u4e2d\u8f93\u5165 utc \uff0c\u6211\u4eec\u4f18\u5148\u770b\u6211\u4eec\u9700\u8981\u7684\u95ee\u9898\u3002 (\u7b80\u5355\u7684\u6539\u53d8\uff0c\u53ef\u4ee5\u5141\u8bb8\u5c55\u793a\u672c\u5730\u65f6\u95f4) \u6211\u4eec\u8fdb\u5165\u8fd9\u4e2aissue \u53ef\u4ee5\u770b\u5230\u8fd9\u662f\u4e00\u4e2a pull requests \uff0c\u7b80\u79f0pr\u3002pr\u5927\u6982\u610f\u601d\u662f\u8bf4\uff0c\u867d\u7136\u9879\u76ee\u662fA\u6216\u8005A\u56e2\u961f\u505a\u7684\uff0c\u4f46\u662f\u4f60\u6709\u4e00\u4e9b\u6539\u8fdb\u6216\u8005\u4fee\u590d\uff0c\u53ef\u4ee5\u63d0\u4ea4pr\u5e76\u901a\u8fc7A\u5ba1\u6838\u8fc7\u540e\u5c06\u4f60\u7684\u4ee3\u7801\u5408\u5e76\u5230master\u5206\u652f(\u8fd9\u4e2a\u597d\u50cf\u662fgit\u6559\u7a0b\u4e86)\u3002\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u8fd9\u4eba\u8bf4\u4ed6\u4e0d\u60f3\u663e\u793autc\u65f6\u95f4\uff0c\u4f46\u662f\u53c8\u6728\u6709\u73b0\u6709\u65b9\u6cd5\u663e\u793a\u672c\u5730\u65f6\u95f4\u3002 \u5728\u4e00\u5927\u5806\u5df4\u62c9\u5df4\u62c9\u53ca\u4e92\u76f8\u8ba8\u8bba\u4ee5\u540e\uff0c\u5c06api\u547d\u540d\u4e3a set_datetime_format \uff0c\u597d\u4e86\uff0c\u6211\u4eec\u60f3\u8981\u7684\u4e1c\u897f\u62ff\u5230\u4e86\u3002\u73b0\u5728\u53bb\u4ee3\u7801\u91cc\u770b\u770b\u5427\uff01 \u6240\u4ee5\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u8c03\u7528logbook.set_datetime_format(\"local\")\uff0c\u8fd9\u6837\u5c31\u80fd\u628a\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u672c\u5730\u65f6\u95f4\u4e86\u3002\u63a5\u7740\u6765\u6d4b\u8bd5\u4e00\u4e0b~ \u5148\u4e0alogger.py\u6587\u4ef6 import logbook from app import pity from .decorator import SingletonDecorator # \u6ce8\u610f\u8fd9\u91cc @SingletonDecorator class Log (object) : handler = None def __init__ (self, name= 'pity' , filename=pity.config[ 'LOG_NAME' ]) : # Logger\u6807\u8bc6\u9ed8\u8ba4\u4e3aapp \"\"\" :param name: \u4e1a\u52a1\u540d\u79f0 :param filename: \u6587\u4ef6\u540d\u79f0 \"\"\" self.handler = logbook.FileHandler(filename, encoding= 'utf-8' ) logbook.set_datetime_format( \"local\" ) # \u5c06\u65e5\u5fd7\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u672c\u5730\u65f6\u95f4 self.logger = logbook.Logger(name) self.handler.push_application() def info (self, *args, **kwargs) : return self.logger.info(*args, **kwargs) def error (self, *args, **kwargs) : return self.logger.error(*args, **kwargs) def warning (self, *args, **kwargs) : return self.logger.warning(*args, **kwargs) def debug (self, *args, **kwargs) : return self.logger.debug(*args, **kwargs) \u63a5\u4e0b\u6765\u6d4b\u8bd5\u4e00\u4e0b\u4fee\u6539\u540e\u7684hello world\u63a5\u53e3run.py from datetime import datetime from app import pity from app.utils.logger import Log @pity.route('/') def hello_world () : log = Log( \"hello world\" ) log.info( \"\u6709\u4eba\u8bbf\u95ee\u4e86\u4f60\u7684\u7f51\u7ad9\u4e86\" ) now = datetime.now().strftime( \"%Y-%M-%d %H:%M:%S\" ) print(now) return now if __name__ == \"__main__\" : pity.run( \"0.0.0.0\" , threaded= True , port= \"7777\" ) StackOverflow \u5b66\u4e60 golang \u4ee5\u6765\uff0c\u65f6\u5e38\u4f1a\u7528\u5230\uff0c\u6240\u4ee5\u5927\u5bb6\u53ef\u4ee5\u591a\u4e0a\u53bb\u4e00\u4e0b\u3002\u867d\u7136\u82f1\u6587\u5c45\u591a\uff0c\u4f46\u662f\u4e5f\u987a\u4fbf\u57f9\u517b\u4e0b\u81ea\u5df1\u7684\u9605\u8bfb\u80fd\u529b\u3002\u597d\u4e86\uff0c\u6211\u8981\u53bb\u7ed9\u521a\u624d\u90a32\u4e2a\u7528\u6237\u56de\u7b54\u4e00\u4e0b\u8bbe\u7f6elocal_format_string\u4e86\u3002 \u4f7f\u7528\u84dd\u56feblueprint \u5f15\u5165\u76ee\u7684 \u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6ca1\u6709\u5173\u6ce8\u8fc7\u6d4f\u89c8\u5668\u7684url\u60c5\u51b5\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u6d4b\u8bd5\uff0c\u6bd4\u5982\u6211\u4eec\u4f1a\u7ecf\u5e38\u89c1\u5230 /login \u8fd9\u4e9burl\uff0c\u4e0d\u540c\u7684url\u5f53\u7136\u6709\u81ea\u5df1\u4e0d\u540c\u7684\u542b\u4e49\u5566\u3002\u5982\u679c\u6211\u4eec\u63a5\u4e0b\u6765\u63a5\u53e3\u5f88\u591a\uff0c\u6bd4\u5982\u4e00\u4e2auser\uff0c\u9700\u8981\u6709\u589e\u5220\u6539\u67e5\u7b49\u63a5\u53e3\uff0c\u5982\u679c\u5168\u90e8\u5199\u5728run.py\u91cc\u9762\uff0c\u4f1a\u592a\u6742\u4e71\u4e86\u3002\u6240\u4ee5\u6211\u4eec\u6253\u7b97\u5f15\u5165 \u84dd\u56fe \u6765\u5e2e\u6211\u4eec\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 \u4f7f\u7528\u65b9\u6cd5 \u6211\u4e00\u822c\u90fd\u4f1a\u629b\u51fa\u5b98\u7f51\u7684\u5b9e\u4f8b\uff0c\u4f46\u662f\u6211\u8fd9\u91cc\u63a8\u8350\u4e00\u672c\u4e66\uff0cFlask\u76f8\u5173\u7684\uff0c\u6211\u4eec\u53eb\u5b83 \u72d7\u4e66 \u3002\u957f\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50~\u5982\u679c\u8981\u6df1\u5165\u5b66\u4e60flask\u7684\u8bdd\uff0c\u9002\u5408\u770b\u770b\uff0c\u4e5f\u4e0d\u539a\u91cd\u3002 \u5e9f\u8bdd\u5c11\u8bf4\uff0c\u4eca\u5929\u4f5c\u4e1a\u8bb2\u592a\u591a\u4e86\uff0c\u6b63\u9898\u6ca1\u4e86\u3002 \u7531\u4e8e\u6211\u4eec\u505a \u524d\u540e\u7aef\u5206\u79bb \uff0c\u6240\u4ee5\u540e\u7aef\u675c\u7edd\u4efb\u4f55\u4e0ehtml\u6709\u5173\u7684\u4e1c\u897f\uff0c\u6bd4\u5982\u6211\u5982\u679c\u73b0\u5728\u8981\u505a\u7528\u6237\u6a21\u5757\u7684\u8bdd\u3002\u6211\u9700\u8981\u6211\u7684url\u8def\u5f84\u7edf\u4e00\u4ee5/user\u5f00\u59cb\uff0c\u540e\u9762\u518d\u6309\u7167\u5185\u5bb9\u5212\u5206\u3002 \u4ee5\u7b80\u4e66\u4e3a\u4f8b\uff0c\u5927\u6982\u8bb2\u4e00\u4e0b\uff0c\u867d\u7136\u8fd9\u4f3c\u4e4e\u662f\u524d\u7aef\u7684\u8def\u7531\u3002\u4e0d\u8fc7\u540e\u7aef\u4e5f\u5dee\u4e0d\u591a\u9002\u5e94\uff0c\u5927\u5bb6\u53ef\u4ee5\u4e86\u89e3\u4e0brestful api\u7684\u6982\u5ff5\u3002 \u6bd4\u5982\u6211\u8fd9\u8fb9\u7684\u7528\u6237\u767b\u5f55\u63a5\u53e3\uff0c\u6211\u662f\u6253\u7b97\u8fd9\u6837\u547d\u540d: /user/register, \u524d\u9762\u7684user\u4ee3\u8868\u6a21\u5757\uff0c\u540e\u9762\u4ee3\u8868\u5185\u5bb9\u3002\u8fd9\u6837\u7279\u522b\u6e05\u6670\u660e\u4e86\u3002 \u90a3\u6211\u4eec\u5f00\u59cb\u5427\uff01 \u9996\u5148\u6211\u4eec\u9700\u8981\u521b\u5efacontroller\u6587\u4ef6\u5939\uff0c\u4e13\u95e8\u5904\u7406\u8def\u7531\u548c\u65b9\u6cd5\u7684\u6620\u5c04\u3002\u4e3e\u4e2a\u6817\u5b50\uff01 \u8fd9\u91cc\u6211\u521b\u5efa\u4e86auth(\u8ba4\u8bc1\u6a21\u5757)\uff0c\u53c8\u521b\u5efa\u4e86 user.py \u6587\u4ef6\u3002 user.py from flask import Blueprint from flask import jsonify auth = Blueprint( \"auth\" , __name__, url_prefix= \"/auth\" ) # \u8fd9\u91cc\u4ee5auth.route\u6ce8\u518c\u7684\u51fd\u6570\u90fd\u4f1a\u81ea\u5e26/auth\uff0c\u6240\u4ee5url\u662f/auth/register @auth.route(\"/register\") def register () : return jsonify(dict(status= True , msg= \"\u6ce8\u518c\u6210\u529f\" )) \u8fd9\u91cc\u6211\u76f4\u63a5return\u4e86json\u5b57\u7b26\u4e32: {\"status\": true, \"msg\": \"\u6ce8\u518c\u6210\u529f\"} \uff0c\u56e0\u4e3a\u6211\u7684\u5177\u4f53\u51fd\u6570\u8fd8\u6ca1\u5f00\u59cb\u5199\u3002 \u7136\u540e\u6211\u4eec\u9700\u8981\u5728app\u4e2d\u6ce8\u518c\u8fd9\u4e2a\u84dd\u56fe! app/__init__.py \u4ee3\u7801\u5982\u4e0b from flask import Flask from app.controllers.auth.user import auth from config import Config pity = Flask(__name__) # \u6ce8\u518c\u84dd\u56fe pity.register_blueprint(auth) pity.config.from_object(Config) \u597d\u5566\uff0c\u6211\u4eec\u91cd\u542frun.py\u670d\u52a1\u3002 \u7136\u540e\u8fdb\u5165\u6d4f\u89c8\u5668\uff0c\u8f93\u5165 localhost:7777/auth/register \u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u8fb9msg\u5e76\u4e0d\u662f \u6ce8\u518c\u6210\u529f \u7684\u4e2d\u6587\uff0c\u8fd9\u4e2a\u8ddf\u5b57\u7b26\u7f16\u7801\u6709\u5173\u7cfb\u3002 \u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff0c\u563f\u563f\uff0c\u8fd8\u662f\u6211\u521a\u624d\u8bf4\u7684\uff0c\u53ef\u4ee5\u53bb\u641c\u7d22 flask jsonify \u4e2d\u6587\u4e71\u7801\u3002 \u603b\u7ed3 \u8fd9\u6837\u6211\u4eec\u7684\u4e00\u4e2a\u84dd\u56fe\u5c31\u63cf\u7ed8\u5b8c\u4e86\uff0c\u54c8\u54c8\u54c8 \u65ad\u66f4\u7684\u60f3\u6cd5\u6108\u6f14\u6108\u70c8\uff0c\u575a\u6301\u5440~~ \u8fd9\u5c31\u5f53\u505a\u4e0b\u6b21\u7684\u4f5c\u4e1a\u5427\uff0c\u4e0d\u8fc7\u4e5f\u662f\u9009\u4fee\u3002\u6bd5\u7adf\u7ed9\u524d\u7aef\u4f7f\u7528\u7684\u8bdd\uff0c\u95ee\u9898\u4e0d\u5927\u3002 \u8fd9\u4e2a\u662f\u6700\u7ec8\u6548\u679c~ \u5168\u90e8\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"4.\u4f7f\u7528\u84dd\u56fe(Blueprint)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2840%29%20%E6%89%BE%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E6%B5%8B%E8%AF%95/","text":"\u5927\u5bb6\u597d\uff0c\u6211\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a\u6d4b\u8bd5\u5f00\u53d1\u535a\u4e3b\uff0cworld\u5f88\u5927\uff0c \u4f60\u5e94\u8be5\u53bb\u770b\u770b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u56de\u987e \u4e0a\u5468\u63d2\u64ad\u4e86\u4e00\u4e2agithub\u767b\u5f55\u7684\u5185\u5bb9\uff0c\u6ca1\u5565\u53cd\u54cd\u3002\u90a3\u6211\u4eec\u8fd9\u5468\u5c31\u7ee7\u7eed\u5b8c\u5584\u7528\u4f8b\u76f8\u5173\u7684\u5185\u5bb9\u3002 \u9898\u5916\u8bdd \u5176\u5b9e\u867d\u7136\u6211\u5728\u505a\u8fd9\u6837\u4e00\u4e2a\u6d4b\u8bd5\u5e73\u53f0\uff0c\u4f46\u5176\u5b9e\u5c31\u50cf\u996d\u54e5\u8bf4\u7684\uff0c\u5b58\u5728\u4e00\u4e9b\u95ee\u9898: \u81ea\u5df1\u7684\u5e73\u53f0\u6ca1\u6709\u843d\u5730 \u534a\u6210\u54c1 \u81ea\u5df1\u90fd\u6ca1\u6709\u4eb2\u8eab\u4f7f\u7528 \u786e\u5b9e\uff0c\u867d\u7136\u4e0a\u5bb6\u516c\u53f8\u652f\u6491\u5230\u4e86\u767e\u5206\u4e4b90\u591a\u7684\u4e1a\u52a1\u7ebf\uff0c\u4f46\u662f\u91cc\u9762\u7ed3\u5408\u4e86\u5f88\u591a\u516c\u53f8\u7684\u5185\u5bb9\uff0c\u6bd4\u5982 grpc \uff0c \u5fae\u670d\u52a1\u81ea\u52a8\u5bfb\u5740 \uff0c yapi \uff0c \u5185\u90e8\u53d1\u5e03\u7cfb\u7edf\uff0c\u6570\u636e\u5de5\u5382 \u7b49\u76f8\u5173\u7684\u5185\u5bb9\u3002 \u8fd9\u4e2a\u9879\u76ee\u867d\u7136\u548c\u5f53\u65f6\u7684\u5185\u5bb9\u5982\u51fa\u4e00\u8f99(\u6362\u4e86\u4e00\u79cd\u8bed\u8a00\u5b9e\u73b0)\uff0c\u4f46\u786e\u53c8\u4e0d\u592a\u4e00\u6837\u3002 \u4e3a\u4e86\u66f4\u597d\u5730\u652f\u6301\u5e73\u53f0\u7684\u53d1\u5c55\uff0c\u52a0\u4e0a\u65f6\u95f4\u5173\u7cfb\uff0c\u6240\u4ee5\u6211\u6253\u7b97\u6311\u9009\u4e00\u4e2a\u9ebb\u96c0\u867d\u5c0f\uff0c\u4f46\u53c8 \u4e94\u810f\u4ff1\u5168 \u7684\u9879\u76ee\u6765\u8fdb\u884c\u6d4b\u8bd5\u3002 \u4e3a\u4e86\u540e\u7eed\u8986\u76d6\u7387\u76f8\u5173\u7684\u529f\u80fd\uff0c\u6211\u5f97\u627e\u4e00\u4e2a\u5f00\u6e90\u7684Java\u9879\u76ee\uff0c\u4e8e\u662f\u6211\u53d1\u73b0\u4e86\u5b83\uff0c\u4e00\u4e2a\u535a\u5ba2\u7cfb\u7edf\u57fa\u4e8espringboot+vue+element-ui: \u4e00\u822c\u8fd9\u6837\u5f00\u6e90\u7684\u9879\u76ee\u90fd\u5dee\u4e0d\u591a\u662f\u4e2a\u534a\u6210\u54c1\uff0c\u4f46\u53ea\u8981\u4ed6\u6709\u5b8c\u5584\u7684\u767b\u5f55\uff08token/cookie\u673a\u5236\uff09\uff0c\u52a0\u4e0a\u6709\u4e00\u90e8\u5206crud\u529f\u80fd\u5c31\u884c\u3002 \u8fd9\u4e2a\u5730\u5740\u6211\u5df2\u7ecf\u90e8\u7f72\u5230\u6211\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e86\uff0c\u4ee5\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u6765\u6d4b\u8bd5\u8fd9\u4e2a\u670d\u52a1\u4e86\uff0c\u4f46\u7b2c\u4e00\u6b65\u6211\u4eec\u5148\u8981\u62ce\u51fa\u91cc\u9762\u7684\u63a5\u53e3\u6570\u636e\u3002 \u670d\u52a1\u5730\u5740: http://47.112.32.195:8081/index.html \u5f00\u59cb\u7814\u7a76 \u5927\u6982\u7ffb\u9605\u4e86\u4e00\u4e0b\u5b83\u7684\u8ba4\u8bc1\u6a21\u5757\uff0c\u91c7\u7528\u7684\u662f spring-security \uff0c\u8fd9\u662f\u6211 \u6ca1\u63a5\u89e6 \u8fc7\u7684\u5168\u65b0\u9886\u57df\u3002 \u4e0d\u8fc7\u54b1\u4eec\u4e0d\u7528\u614c\uff0c\u5148\u770b\u770b\u4ed6\u7684\u767b\u5f55\u662f\u548b\u800d\u7684\u3002 \u8bf7\u6c42\u6570\u636e \u8fd4\u56de\u6570\u636e \u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u662f\u4e00\u4e2aform\u8868\u5355\u7684POST\u8bf7\u6c42\uff0c\u8fd4\u56de\u7684\u5185\u5bb9 \u8fd8\u6ca1\u6709token\u8fd9\u6837\u7684\u4fe1\u606f \u3002\u8fd9\u53ef\u5982\u4f55\u662f\u597d\uff1f\u522b\u6015\uff0c\u6211\u4eec\u505a\u8fd9\u6837\u7684\u5de5\u5177\uff0c\u4e0d\u6015\u7279\u4f8b\u591a\uff0c\u5c31\u6015\u7279\u4f8b\u5c11\uff0c\u5bfc\u81f4 \u517c\u5bb9\u6027\u4e0d\u597d \uff01 \u54b1\u4eec\u597d\u50cf\u4e4b\u524d\u53ea\u652f\u6301\u4e86JSON\uff0c\u6211\u4eec\u8c03\u8bd5\u4e00\u4e0b\u767b\u5f55\u63a5\u53e3\uff0c\u786e\u8ba4\u4e00\u4e0b: header\u90e8\u5206 \u53ef\u4ee5\u770b\u5230\u767b\u5f55\u5931\u8d25\u4e86 \u627e\u4e0b\u539f\u56e0 \u901a\u8fc7debug\u53d1\u73b0username\u662f\u7a7a\u5b57\u7b26\u4e32 \u9879\u76ee\u5730\u5740: https://github.com/lenve/VBlog.git \u6211\u4eec\u628a\u9879\u76ee\u62c9\u5230\u672c\u5730 https://github.com/lenve/VBlog.git debug\u53d1\u73b0\uff0cusername\u662f\u7a7a\u5b57\u7b26\u4e32\u3002 \u5927\u6982\u7387\u662f\u6211\u4eec\u7684 requests \u8bf7\u6c42\u7684\u59ff\u52bf\u4e0d\u5bf9\uff0c\u90a3\u600e\u4e48\u529e\u5462\uff1f \u5148\u770b\u770b\u6211\u4eec\u73b0\u5728\u7684requests\u8bf7\u6c42\u65b9\u6cd5\u600e\u4e48\u5c01\u88c5\u7684\u3002 \u53ef\u4ee5\u770b\u5230\u662f\u8fd9\u6837\u5c01\u88c5\u7684\uff0c \u7136\u800c \u6211\u4eec\u7684body\u662f\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f46\u662f\u5982\u679c\u6211\u4eec\u8981\u8bf7\u6c42form\u8868\u5355\u7684\u65f6\u5019\uff0cbody\u9700\u8981\u662fdict\u3002 \u6539\u9020\u5982\u4e0b: \u5982\u679cContent-Type\u91cc\u9762\u5e26\u6709form\u4e86\uff0c\u90a3\u6211\u4eec\u628abody\u8981\u53d8\u6210dict\uff08\u901a\u8fc7json.loads\uff09\u3002 \u6539\u9020\u540e\u5b9e\u9a8c\u4e00\u4e0b: \u5982\u6b64\uff0c\u6211\u4eec\u4fbf\u652f\u6301\u4e86json\u8fd8\u6709form\u7684http\u8bf7\u6c42\uff0c\u81f3\u4e8efile\u7c7b\u578b\uff0c\u6211\u4eec\u9047\u5230\u518d\u7ee7\u7eed\u7814\u7a76\u3002 \u53ef\u662ftoken\u5462\uff1f \u522b\u6025\uff0c\u6211\u4eec\u5207\u6362\u5230 Cookie tab\uff0c\u53ef\u4ee5\u770b\u5230Cookie\u91cc\u9762\u5df2\u5e26\u4e0a\u4e86JSESSIONID\uff0c\u6211\u4eec\u53ef\u901a\u8fc7\u8fd9\u4e2a\uff0c\u7ee7\u7eed\u6211\u4eec\u540e\u9762\u9700\u8981\u767b\u5f55\u7684\u8bf7\u6c42\u3002\u4e0etoken\u76f8\u5dee\u4e0d\u5927\u3002 \u8bb0\u4e00\u4e0b \u4f18\u5316\u70b9 \uff0c\u5f53\u8bf7\u6c42\u7c7b\u578b\u5207\u6362\u5230form/json\u7684\u65f6\u5019\u81ea\u52a8\u6539\u53d8Content-Type\uff0c\u8fd9\u6837\u4f53\u9a8c\u4f1a\u66f4\u597d\u4e00\u4e9b\uff01 \u4e0b\u4e00\u7bc7\uff0c\u6211\u4eec\u5f00\u59cb\u7f16\u5199 \u6570\u636e\u521d\u59cb\u5316 \u76f8\u5173\u7684\u5de5\u4f5c\u3002\u6bd4\u5982\u6211\u8981\u67e5\u8be2\u4e00\u7bc7\u6587\u7ae0\uff0c\u9700\u8981\u5148\u767b\u5f55\uff0c\u90a3\u4e48\u9700\u8981\u521d\u59cb\u5316\u7684\u6570\u636e\u5c31\u662f\u4e0a\u9762\u63d0\u5230\u7684 JSESSIONID \u3002 \u5728\u7ebf\u6f14\u793a\u5730\u5740: http://47.112.32.195/ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"40.\u627e\u4e2a\u5f00\u6e90\u9879\u76ee\u6d4b\u8bd5"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2841%29%20%E7%BC%96%E5%86%99%E6%95%B0%E6%8D%AE%E6%9E%84%E9%80%A0%E5%99%A8%E5%8A%9F%E8%83%BD%EF%BC%88%E4%B8%8A%EF%BC%89/","text":"\u5927\u5bb6\u597d\uff0c\u6211\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a \u6d4b\u8bd5\u5f00\u53d1 \u535a\u4e3b\uff0cworld\u5f88\u5927\uff0c \u4f60\u5e94\u8be5\u53bb\u770b\u770b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u8fd9\u7bc7\u6587\u7ae0\u9605\u8bfb\u9700\u8981\u4e00\u5b9a\u7684\u8010\u5fc3\uff0c\u5982\u679c\u770b\u7684\u4e0d\u723d\u53ef\u4ee5 \u70b9\u4e2a\u8d5e \u63d0\u9192\u4e00\u4e0b\u535a\u4e3b\u3002 \u56de\u987e \u4e0a\u7bc7\u5df2\u7ecf\u627e\u5230\u4e86\u4e00\u4e2a \u53ef\u6d4b \u7684\u9879\u76ee\uff0c\u4f46\u662f\u9047\u5230\u4e86\u9700\u8981\u767b\u5f55\u7684\u95ee\u9898\u3002\u6b63\u5e38\u6765\u8bf4\uff0c\u6211\u4eec\u5982\u679c\u5199\u4ee3\u7801\u7684\u8bdd\uff0c\u80af\u5b9a\u5f88\u65b9\u4fbf\uff0c\u5728setUp\u8fd9\u7c7b\u65b9\u6cd5\u91cc \u5494\u5494\u5494 \u767b\u5f55\u4e00\u4e0b\uff0c\u5b58\u50a8\u5bf9\u5e94\u7684JSESSIONID\uff0c\u7136\u540e\u6d4b\u8bd5\u51fd\u6570\u5c31\u80fd\u591f\u7528JSESSIONID\u7545\u901a\u65e0\u963b\u8bbf\u95ee\u9879\u76ee\u4e86\u3002 \u627e\u4e2a\u4f8b\u5b50 \u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e2a \u7b80\u5355 \u7684\u4f8b\u5b50: \u7531\u4e8e\u8fd9\u4e2a\u9879\u76ee\u5f88\u8001\u4e86\uff0c\u5f88\u591a\u56fe\u7247\u8fc7\u671f\u4e86\u90fd \u5982\u56fe\u6240\u793a\uff0c\u6211\u60f3\u6d4b\u8bd5\u4e00\u4e2a \u83b7\u53d6\u7528\u6237\u5217\u8868\u7684\u63a5\u53e3 \uff0c\u5bf9\u5e94\u8fd9\u4e2a\u9875\u9762\u3002\u56e0\u4e3a\u6211\u4eec\u6682\u65f6\u6ca1\u6709\u6574\u7406\u51fa\u5bf9\u5e94\u7684\u63a5\u53e3\u6587\u6863\uff0c\u53ea\u80fd\u81ea\u5df1\u770b\u4ee3\u7801\u6216\u8005 \u6293\u5305 \u53bb\u4e86\u89e3\u8fd9\u4e2a\u8bf7\u6c42\u3002 \u597d\u5728\u8fd9\u4e2a\u8bf7\u6c42\u6bd4\u8f83\u7b80\u5355\uff0c\u662f\u4e2aGET\uff0c\u5e76\u4e14\u63a5\u53d7\u4e00\u4e2a nickname \u5b57\u6bb5\u3002\u6839\u636e \u7ecf\u9a8c \uff0c\u8fd9\u4e2a\u63a5\u53e3\u53ef\u4ee5\u6839\u636e\u5bf9\u5e94\u7684\u7528\u6237\u540d\u67e5\u8be2\u5bf9\u5e94\u7684\u7528\u6237\u4fe1\u606f\u3002 \u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u63a5\u53e3\u662f\u9700\u8981\u767b\u5f55\u7684 \u5e73\u53f0\u5316\u601d\u8def \u90a3\u4e48\u5e73\u53f0\u5316\u7684\u8bdd\uff0c\u5e94\u8be5\u600e\u4e48\u505a\u5462\uff1f\u6211\u4eec\u521a\u624d\u68b3\u7406\u4e86\u5177\u4f53\u7684\u8fc7\u7a0b\u3002 \u8bbe\u8ba1\u7528\u4f8b \u8c03\u7528login\u63a5\u53e3\uff0c\u83b7\u53d6\u5230\u51ed\u636e\uff08token/cookie\u7b49\uff09 \u6839\u636e\u51ed\u636e\u8bf7\u6c42 \u83b7\u53d6\u7528\u6237\u5217\u8868\u63a5\u53e3 \u6839\u636e\u5bf9\u5e94\u7684\u7528\u4f8b\u5236\u9020\u4e0d\u540c\u7684\u8bf7\u6c42\u53c2\u6570\uff08nickname\uff09 \u6839\u636e\u7528\u4f8b\u7f16\u5199\u5bf9\u5e94\u7684\u65ad\u8a00\u4fe1\u606f \u719f\u6089Python+excel\u7684\u670b\u53cb\uff0c\u53ef\u80fd\u4f1a\u5728excel\u6dfb\u52a0\u4e86\u597d\u591a\u6761\u6d4b\u8bd5\u6570\u636e\u548c\u671f\u671b\u7ed3\u679c\u4e86\uff0c\u5176\u5b9e \u5e73\u53f0\u5316 \u4e5f\u662f\u7c7b\u4f3c\u3002 \u6211\u4eec\u53ea\u9700\u8981\u5173\u5fc3\u4e00\u4e2a\u7528\u4f8b\u7684\u771f\u6b63\u6267\u884c\u8fc7\u7a0b: \u767b\u5f55\u83b7\u53d6\u51ed\u636e \u901a\u8fc7\u51ed\u636e\u8bf7\u6c42\u63a5\u53e3 \u660e\u767d\u8fd9\u70b9\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u5f00\u59cb\u6539\u9020\u6211\u4eec\u7684 Executor \u7c7b\u4e86\u3002\u6240\u4ee5\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u5148 \u6267\u884c\u767b\u5f55\u7528\u4f8b \uff0c\u518d \u6267\u884c\u6d4b\u8bd5\u7528\u4f8b \u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u767b\u5f55\u7528\u4f8b\u662f\u8be5\u6d4b\u8bd5\u7528\u4f8b\u7684 \u524d\u7f6e\u6761\u4ef6 (setUp/\u521d\u59cb\u5316\u6570\u636e\u64cd\u4f5c)\uff0c\u6211\u8fd9\u91cc\u7ed9\u4ed6\u53d6\u4e86\u4e2a\u540d\u513f: \u6570\u636e\u6784\u9020\u5668 \uff0c\u56e0\u4e3a\u6211\u4eec\u5e38\u8bf4\u7684\u63a5\u53e3\u4e4b\u95f4\u7684\u4f9d\u8d56\uff0c\u5e38\u5e38\u662f\u6570\u636e\u5f15\u8d77\uff0c\u5982\u679c\u767b\u5f55\u540e\u80fd\u62ff\u5230\u51ed\u636e\uff0c\u90a3\u4e48\u6211\u4eec\u5bf9\u767b\u5f55\u7684\u4f9d\u8d56\u5c31\u88ab\u89e3\u51b3\u4e86\u3002 \u6211\u4eec\u6267\u884c\u7528\u4f8b\u7684\u65f6\u5019\uff0c\u662f\u8fd9\u6837\u7684\u987a\u5e8f\uff0c\u5982\u679c\u7528\u4f8b\u6709 \u6570\u636e\u6784\u9020\u5668 \uff0c\u90a3\u4e48\u6211\u4eec\u5148\u6267\u884c \u6570\u636e\u6784\u9020\u5668 \u65b9\u6cd5\uff0c\u76ee\u7684\u5c31\u662f\u628a \u4f9d\u8d56\u6570\u636e \u62ff\u5230\u3002 Constructor\u8868 \u8868\u8bbe\u8ba1 id,deleted_at,created_at,create_user,update_user\u8fd9\u4e9b\u5b57\u6bb5\u90fd\u662f\u8001\u751f\u5e38\u8c08\u4e86\uff0c\u4e0d\u8d58\u8ff0\u4e86\u3002 type \u6211\u4eec\u7684\u6570\u636e\u53ef\u80fd\u6765\u81ea\u4e00\u6b21http\u8bf7\u6c42\uff0credis\u64cd\u4f5c\uff0csql\u67e5\u8be2\uff0c\u5176\u5b83\u6d4b\u8bd5\u7528\u4f8b\u7b49\u7b49\u3002\u6211\u6682\u65f6\u5b9a\u4e863\u4e2a\u6700\u5e38\u89c1\u7684: 0: testcase 1: sql 2: redis \u5176\u4ed6\u7684\u6211\u4eec\u540e\u7eed\u9047\u5230\u518d\u8865\u5145\uff0c\u80af\u5b9a\u4f1a\u6709\u7684\uff0c\u6bd4\u5982py\u811a\u672c\u7b49\u7b49 \u3002 name\uff1a\u6784\u9020\u5668\u7684\u63cf\u8ff0 enable: \u662f\u5426\u5f00\u542f \u6bd4\u5982\u67d0\u5929\u4f60\u6682\u65f6\u4e0d\u9700\u8981\u8fdb\u884c\u8fd9\u4e2a\u64cd\u4f5c\u4e86\uff0c\u4f60\u53ef\u4ee5\u4e34\u65f6\u5173\u95ed\uff0c\u540e\u7eed\u53ef\u4ee5\u6253\u5f00\u3002 public: \u662f\u5426\u516c\u5f00\uff0c\u4e0d\u516c\u5f00\u5c31\u53ea\u80fd\u4f60\u81ea\u5df1\u8212\u670d\u522b\u4eba\u4e0d\u80fd\u8212\u670d case_id: \u8fd9\u4e2a\u6784\u9020\u5668\u6240\u5c5e\u7684case_id value: \u6784\u9020\u5668\u7684\u8fd4\u56de\u503c \u8fd9\u4e2a\u5927\u5bb6\u80fd\u7406\u89e3\u5427\uff0c\u6211\u6784\u9020\u4e86\u6570\u636e\uff0c\u662f\u4e3a\u4e86 \u8ba9\u81ea\u5df1\u518d\u53d6\u51fa\u6765 \u3002\u6bd4\u5982\u6211set woody=\"\u5e05\u54e5\"\uff0c\u540e\u7eed\u6211\u662f\u8981\u7528\u8fd9\u4e2a \u5e05\u54e5\u7684 \uff0c\u90a3\u4e48\u6b64\u65f6\u7684woody\u5c31\u662fvalue\u4e86\uff0c\u6216\u8005\u53ebreturn_value\u66f4\u65b9\u4fbf\u7406\u89e3\u3002 constructor_json: \u6784\u9020json \u7531\u4e8e\u6211\u4eec\u4e0d\u540c\u7684\u6570\u636e\uff0c\u5bf9\u5e94\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u662f\u4e2asql\u7c7b\u578b\uff0c\u6211\u53ef\u80fd\u9700\u8981jdbcUrl\uff08\u6570\u636e\u5e93\u8fde\u63a5\u5730\u5740\uff09\uff0csql\u7b49\u5173\u952e\u4fe1\u606f\uff0c\u5176\u5b9e\u8fd9\u79cd\u60c5\u51b5\u6211\u4eec\u7528 mongo \u5f53\u6570\u636e\u5e93\u4f1a\u66f4\u8212\u670d\u3002\u53ea\u4e0d\u8fc7\u4e3a\u4e86\u964d\u4f4e\u7cfb\u7edf\u590d\u6742\u5ea6\uff0c\u5c3d\u91cf\u5c11\u5f15\u5165\u65b0\u7684\u7ec4\u4ef6\uff0c\u80fd\u5fcd\u5c31\u5fcd\u4e86\u3002 \u5b9a\u4e49\u9020\u6570\u5668\u8bf7\u6c42\u53c2\u6570 \u57fa\u672c\u4e0a\u6ca1\u6709\u4ec0\u4e48\u5927\u7684\u533a\u522b \u7f16\u5199\u65b0\u589e\u6570\u636e\u6784\u9020\u5668\u529f\u80fd \u4fee\u6539\u548c\u5220\u9664\u7684\u6682\u65f6\u8fd8\u6ca1\u5b8c\u6210 \u9875\u9762\u64cd\u4f5c \u4e3a\u5bf9\u5e94\u7684\u7528\u4f8b\u6dfb\u52a0\u6784\u9020\u5668 \u9009\u62e9\u6d4b\u8bd5\u7528\u4f8b\u7c7b\u578b \u63d0\u524d\u51c6\u5907\u597d\u4e86\u4e00\u4e2a\u6b63\u5e38\u767b\u5f55\u7684\u7528\u4f8b \u6700\u540e\u7684\u6548\u679c\u5c31\u662f\uff0c \u67e5\u8be2\u6240\u6709\u7528\u6237\u5217\u8868 \u7528\u4f8b\u62e5\u6709\u4e86\u4e00\u4e2a \u7528\u6237\u6b63\u5e38\u767b\u5f55 \u7684\u6570\u636e\u6784\u9020\u5668\u3002 \u8fd9\u671f\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u592a\u591a\u4e86\u6211\u81ea\u5df1\u90fd\u6d88\u5316\u4e0d\u826f\u3002 \u5728\u7ebf\u6f14\u793a\u5730\u5740: http://47.112.32.195/ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"41.\u7f16\u5199\u6570\u636e\u6784\u9020\u5668\u529f\u80fd\uff08\u4e0a\uff09"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2842%29%20%E7%BC%96%E5%86%99%E6%95%B0%E6%8D%AE%E6%9E%84%E9%80%A0%E5%99%A8%E5%8A%9F%E8%83%BD%EF%BC%88%E4%B8%8B%EF%BC%89/","text":"\u5927\u5bb6\u597d\uff0c\u6211\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a \u6d4b\u8bd5\u5f00\u53d1 \u535a\u4e3b\uff0cworld\u5f88\u5927\uff0c \u4f60\u5e94\u8be5\u53bb\u770b\u770b\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \u56de\u987e \u4e0a\u7bc7\u5df2\u7ecf\u7f16\u5199\u4e86 \u6dfb\u52a0\u6570\u636e\u6784\u9020\u5668 \u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u73b0\u5728\u6211\u4eec\u5c31\u6765\u8fd0\u52a8\u5230\u7528\u4f8b\u4e2d\u53bb\u3002 \u7f16\u5199\u6839\u636ecase_id\u67e5\u8be2\u6240\u6709\u6784\u9020\u5668\u65b9\u6cd5 \u8fd9\u91cc\u662f\u4e3a\u4e86\u627e\u51fa\u6211\u8981\u8fd0\u884c\u7684case\u7684\u6240\u6709\u6570\u636e\u6784\u9020\u65b9\u6cd5 \u7f16\u5199\u67e5\u627e\u6570\u636e\u6784\u9020\u5668\u65b9\u6cd5 ConstructorDao\u6dfb\u52a0static\u65b9\u6cd5 \u4e0d\u4e3a\u522b\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u5982\u679c\u5224\u65adcase\u6709\u6570\u636e\u6784\u9020\u6570\u636e\uff0c\u90a3\u6211\u4eec\u5c31\u8981\u83b7\u53d6\u5230\u8fd9\u4e2a\u6570\u636e\u5440\uff01 \u6539\u9020Executor\u7c7b \u65b0\u589e\u89e3\u6790\u53c2\u6570\u7684\u65b9\u6cd5 \u8fd8\u8bb0\u5f97\u4e4b\u524d\u6211\u4eec \u5168\u5c40\u53d8\u91cf \u66ff\u6362\u53d8\u91cf\u7684\u5185\u5bb9\u5417\uff1f\u5f53\u65f6\u662f\u53ea\u66ff\u6362headers\uff0cbody\u7b49\u5185\u5bb9\uff0c\u5176\u5b9e\u4e0d\u592a\u5168\u9762\u3002 \u4e00\u4e2aTestCase\u7c7b\uff0c\u91cc\u9762\u6709\u592a\u591a\u5b57\u6bb5\u4e86\u3002\u6211\u4eec\u53d6\u6570\u636e\u4ee5\u540e\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u9700\u8981check\u4e00\u904d\uff0c\u6240\u4ee5\u8fd9\u91cc\u904d\u5386\u4e00\u4e2atestcase\u7684\u6240\u6709\u5b57\u6bb5\uff0c\u53bb\u91cc\u9762\u6316\u6398\u53d8\u91cf\uff0c\u8fd9\u6837\u4f1a\u6700\u5168\u9762\u3002\uff08 \u6548\u7387\u4e5f\u4f1a\u6bd4\u8f83\u4f4e \uff0c\u4f46\u662f\u7531\u4e8e\u6211\u4eec\u7684\u6570\u636e\u6784\u9020\u5668\u53ea\u544a\u8bc9\u4e86\u8fd4\u56de\uff0c\u5e76\u6ca1\u544a\u8bc9\u5177\u4f53\u5728\u54ea\u7528\uff0c\u6240\u4ee5\u8fd9\u6837\u7684\u8fc7\u7a0b\u662f\u6709\u5fc5\u8981\u7684\uff09 \u8fd9\u91cc\u6709\u4e2a\u7279\u4f8b\uff0crequest_header\u6211\u4eec\u672c\u8eab\u5df2\u7ecf\u662f\u5904\u7406\u4e3ajson\u5b57\u7b26\u4e32\u4e86\uff0c\u6240\u4ee5\u91cc\u9762\u7684\u6570\u636e\u5929\u7136\u662f\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u8fdb\u884c\u4e00\u6b21 \u5e8f\u5217\u5316 \u3002 \u5c3d\u7ba1\u88c5\u9970\u5668\u81ea\u52a8\u751f\u6210\u4e86\u4e0d\u5c11\u65e5\u5fd7\uff0c\u4f46\u662f\u8fd8\u662f\u4e0d\u591f \u6211\u4eec\u9700\u8981\u53ef\u4ee5\u624b\u52a8\u5199\u5165\u65e5\u5fd7\u7684\u529f\u80fd\uff0c\u4e8e\u662f\u5c01\u88c5\u4e86append\u65b9\u6cd5 \u65b0\u589e\u83b7\u53d6\u6784\u9020\u6570\u636e\u548c\u6267\u884c\u6784\u9020\u6570\u636e\u65b9\u6cd5 \u53ef\u4ee5\u770b\u5230\uff0c\u76ee\u524d\u6784\u9020\u5668\u53ea\u652f\u6301\u4e86type == 0\u4e5f\u5c31\u662f\u6d4b\u8bd5\u7528\u4f8b\u7c7b\u578b\u3002\u5982\u679c\u662fcase\u7c7b\u578b\uff0c\u90a3\u4e48Executor\u4f1a\u518d\u6b21\u751f\u6210\u4e00\u4e2a\uff0c\u53bb\u6267\u884c\u7528\u4f8b\u4e2d\u7684\u7528\u4f8b\uff0c\u6700\u7ec8\u62ff\u5230result\u4fe1\u606f\uff0c\u5e76\u6839\u636e\u6211\u4eec\u8bbe\u5b9a\u7684 value \uff0c\u628acase\u6267\u884c\u7684\u6570\u636e\u5168\u90e8\u585e\u7ed9\u4f20\u9012\u8fdb\u6765\u7684params\u5b57\u5178\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u8bb0\u5f55\u4e86\u6240\u6709\u6784\u9020\u6761\u4ef6\u91cc\u9762\u7684\u6570\u636e\uff0c\u4e3a\u5c06\u6765\u53d6\u6570\u636e\u505a\u597d\u4e86\u94fa\u57ab\u3002 \u6539\u9020run\u65b9\u6cd5 \u65b0\u589e\u4e863\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662fparams_pool\uff0crequest_param\u548cpath\u3002 \u89e3\u91ca\u4e00\u4e0b: params_pool \u8fd9\u4e2a\u662f\u603b\u4f53\u7684\u5168\u5c40\u7684\u6570\u636e\u6c60\uff0c\u4ece\u7b2c\u4e00\u4e2a\u7528\u4f8b\u5f00\u59cb\u79ef\u7d2f\uff0c\u6240\u4ee5\u6211\u4eec\u7ea6\u5b9a\uff0c\u4e0d\u8981\u586b\u5199\u91cd\u590d\u7684 \u8fd4\u56de\u503c \u3002 \u6bd4\u5982\u6784\u9020\u56681\u8fd4\u56de\u53d8\u91cfvalue1\uff0c\u6784\u9020\u56682\u8fd4\u56de\u53d8\u91cfvalue2\uff0c\u90a3\u6700\u7ec8\u8fd9\u4e2aparams_pool\u7684\u5185\u5bb9\u4f1a\u662f: { \"value1\" : value1\u8fd4\u56de\u6570\u636e, \"value2\" : value2\u8fd4\u56de\u6570\u636e } request_param \u5728\u4e0a\u4e00\u7bc7\u6f0f\u6389\u4e86\u4e2a\u5185\u5bb9\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u52a8\u6001\u53c2\u6570\u7684\u5b57\u6bb5\u3002\u56e0\u4e3a\u6211\u4eec\u7528\u4f8b\u53c2\u6570\u5982\u679c\u5199\u6b7b\u4f1a\u5f88\u96be\u7528\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u8ba9\u7528\u4f8b\u52a8\u8d77\u6765\uff0c\u800c\u4e0d\u662f\u6b7b\u6570\u636e\uff0c\u4f46\u53c8\u4e0d\u662f \u5168\u5c40\u53d8\u91cf \u90a3\u4e48\u523b\u677f\u3002 \u6240\u4ee5\u6211\u4eec\u9700\u8981\u8ba9\u7528\u4f8b\u80fd\u63a5\u53d7\u5bf9\u5e94\u7684\u6570\u636e\u53bb\u6267\u884c\uff0c\u6bd4\u5982\u4e00\u4e2a\u767b\u5f55\u7528\u4f8b\uff0c\u91cc\u9762\u5199\u4e86\u7528\u6237\u540d\u662fabc\uff0c\u8fd9\u91cc\u6211\u4f20\u5165\u6211\u8fd9\u4e2a\u573a\u666f\u9700\u8981\u7684\u7528\u6237woody\u5c31\u53ef\u4ee5\u8fbe\u5230 \u901a\u8fc7\u53c2\u6570\u4fee\u6539\u7528\u4f8b\u7684\u76ee\u7684 \u3002 path \u8fd9\u4e2a\u5f88\u597d\u7406\u89e3\uff0c\u6211\u7684case\u8def\u5f84\u3002\u6bd4\u5982\u6211\u662fA\u7528\u4f8b\uff0c\u5728\u6267\u884cA\u7684\u6784\u9020\u6761\u4ef61->B\u7528\u4f8b\uff0c\u90a3\u4e48\u4e3a\u4e86\u4e0d\u8ba9\u6211\u51cc\u4e71\uff0c\u6211\u4f1a\u7ed9\u51fa\u4e00\u4e2apath: A->B\uff0c \u8fd9\u6837\u5c31\u4f1a\u6bd4\u8f83\u597d\u533a\u5206\u3002 \u518d\u8bb2\u8bb2\u7528\u4f8b\u7684\u7ec6\u8282\uff0c\u6211\u4eec\u6309\u7167step\uff08\u6ce8\u91ca\u6709\u5199\uff09\u5c06\u7528\u4f8b\u8fc7\u7a0b\u62c6\u5206\uff0c\u8fd9\u6837\u601d\u8def\u5c31\u5f88\u6e05\u6670\u4e86\u3002 \u56de\u5230\u6700\u521d\u7684\u4f8b\u5b50 \u6211\u4eec\u8fd8\u662f\u5f97\u5148\u767b\u5f55\uff0c\u518d\u901a\u8fc7JSESSIONID\u53bb\u8bf7\u6c42 \u83b7\u53d6\u7528\u6237\u5217\u8868\u63a5\u53e3 \u7684\u3002 \u6211\u4eec\u5e94\u8be5\u600e\u4e48\u505a\u5462\uff1f \u7f16\u5199\u4e00\u4e2a\u767b\u5f55\u7528\u4f8b \u7f16\u5199\u7528\u4f8b\u57fa\u672c\u4fe1\u606f header\u4fe1\u606f body\u4fe1\u606f \u6d4b\u8bd5\u4e00\u4e0b: \u6d4b\u8bd5\u6210\u529f\uff0c\u80fd\u591f\u6b63\u5e38\u767b\u5f55 \u628a\u767b\u5f55\u7528\u4f8b\u6dfb\u52a0\u4e3a\u67e5\u8be2\u6240\u6709\u7528\u6237\u5217\u8868\u7684 \u6570\u636e\u6784\u9020\u5668 \u53d6\u6570\u636e \u6211\u4eec\u767b\u5f55\u540e\uff0c\u9700\u8981\u7528\u5230cookie\u91cc\u9762\u7684JSESSIONID\u3002 \u6ce8\u610f\u8fd9\u91cc\uff0c\u6211\u4eec\u628a\u767b\u5f55\u540e\u7684\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u4e86 blog_login \uff0c\u901a\u8fc7cookies.JSESSIONID\u62ff\u5230\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u5e76\u4f20\u9012\u7ed9\u5f53\u524d\u7528\u4f8b\u3002 \u770b\u770b\u6548\u679c: \u6210\u529f\u62ff\u5230response \u7531\u4e8e\u65e5\u5fd7\u4e0d\u592a\u53cb\u597d\uff0c\u540e\u7eed\u8fd8\u5f97\u6539\u9020\u3002\u65ad\u8a00\u4e5f\u6ca1\u6709\u6dfb\u52a0\uff0c\u8fd8\u9700\u52aa\u529b\u5440\uff01 \u5982\u679c\u4fee\u6539\u6216\u8005 \u5199\u9519 \u8fd9\u4e2a\u53d8\u91cf: \u6545\u610f\u5199\u9519SESSIONID \u53ef\u4ee5\u770b\u5230\u53d8\u91cf\u66ff\u6362\u5931\u8d25\u4e86 \u767b\u5f55\u51ed\u8bc1\u6ca1\u6709\u83b7\u53d6\u5230\uff0c\u81ea\u7136\u5c31\u767b\u5f55\u5931\u8d25\u4e86\uff01 \u5728\u7ebf\u6f14\u793a\u5730\u5740: http://47.112.32.195/ \u524d\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pityWeb \u540e\u7aef\u4ee3\u7801\u4ed3\u5e93: https://github.com/wuranxu/pity","title":"42.\u7f16\u5199\u6570\u636e\u6784\u9020\u5668\u529f\u80fd\uff08\u4e0b\uff09"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%2843%29%20aiohttp%E5%88%9D%E4%BD%93%E9%AA%8C/","text":"\u5927\u5bb6\u597d\uff0c\u6211\u662f\u7c73\u6d1b\uff0c\u4e00\u4f4d\u6d4b\u8bd5\u7403\u8ff7\uff01 \u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \u3002 \uff08 \u672c\u6587\u5982\u679c\u6709\u9519\u8bef\uff0c\u8bf7\u53ca\u65f6\u5728\u516c\u4f17\u53f7\u53d1\u6d88\u606f\u6307\u6b63\uff0c\u6709\u9519\u6f0f\u6211\u5c31\u5220\u4e86\u4ee5\u514d\u8bef\u5bfc\u5927\u5bb6 \uff01\uff09 \u56de\u987e \u4e0a\u56de\u6211\u4eec\u641e\u5b9a\u4e86\u4e00\u6574\u5957\u6d41\u7a0b\uff0c\u5173\u4e8e \u6570\u636e\u6784\u9020\u5668 \u7684\uff0c\u4eca\u5929\u6211\u4eec\u6765\u5f15\u5165aiohttp\u3002 \u5728\u6b64\u4e4b\u524d\u6211\u4eec\u7b80\u5355\u8bf4\u4e0b \u9884\u5907\u77e5\u8bc6 : Python\u7684\u5f02\u6b65 \u5176\u5b9e\u5199\u8fd9\u7bc7\u6587\u7ae0\u7684\u65f6\u5019\u6211\u5185\u5fc3\u662f\u5f88 \u7ea0\u7ed3 \u7684\uff0c\u56e0\u4e3a\u6211\u5176\u5b9e\u4e5f\u4e0d\u7b97\u592a\u660e\u767d\u91cc\u5934\u7684\u95e8\u8def\u3002\u867d\u7136\u770b\u4e86\u5f88\u591a\u6587\u7ae0\uff0c\u4f46\u611f\u89c9\u5199\u8d77\u5f02\u6b65\u7684\u4ee3\u7801\u8fd8\u662f\u4f1a\u6bd4\u8f83\u8d39\u52b2\u3002 \u5927\u5bb6\u53ef\u4ee5\u53bb\u641c\u7d22\u4e00\u4e9b\u5f02\u6b65\u7684\u6587\u7ae0\uff0c\u8ba9\u6211\u8bb2\u6211\u8fd8\u8bb2\u7684\u4e0d\u592a\u900f\u5f7b\u3002 \u53c2\u8003: \u5f02\u6b65io: https://www.liaoxuefeng.com/wiki/1016959663602400/1017959540289152 \u719f\u6089async\u548cawait \u5f53\u6211\u4eec\u7ed9\u4e00\u4e2a\u65b9\u6cd5\uff0c\u52a0\u4e0a\u4e86 async \u5173\u952e\u5b57\u4e4b\u540e\uff0c\u5b83\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u5f02\u6b65\u65b9\u6cd5\uff0c\u800c\u6211\u4eec\u7684 await \u5173\u952e\u5b57\uff0c\u53ea\u80fd\u5728async\u65b9\u6cd5\u4e2d\u4f7f\u7528\uff0c\u610f\u601d\u662f\u5b83\u8ba9\u51fa\u5bf9\u5f53\u524d\u7ebf\u7a0b\u7684\u63a7\u5236\u6743\uff0c\u53ef\u4ee5\u8ba9\u7ebf\u7a0b\u53bb\u6267\u884c\u5176\u4ed6\u5185\u5bb9\u3002 aiohttp aiohttp\u662f\u4e00\u4e2a\u5f02\u6b65\u7684http\u6846\u67b6\uff0c\u4f60\u53ef\u4ee5\u628a\u5b83\u7406\u89e3\u4e3a\u5f02\u6b65\u7248\u7684 requests \u3002\u6211\u4eec\u8fd8\u6709\u8bb8\u591a\u8fd9\u6837\u7684\u5e93\u6bd4\u5982 aiofile \uff0c\u8fd9\u4e9b\u6539\u9020\u540e\u7684\u5f02\u6b65\u7c7b\u5e93\uff0c\u4ee5\u540e\u4f1a\u6709\u66f4\u591a\u7684\u5f02\u6b65\u7c7b\u5e93\u51fa\u73b0\u3002 \u4e3a\u4ec0\u4e48\u6211\u4eec\u8981\u8fd9\u4e48\u9ebb\u70e6\u5462\uff1f\u662frequest\u4e0d\u9999\u4e86\u5417\uff1f\u5176\u5b9e\u4e5f\u4e0d\u662f\u3002Python\u4e00\u76f4\u88ab\u4eba\u8bdf\u75c5\u6267\u884c\u6162\uff0c\u8fd9\u70b9\u5728\u6211\u4e0a\u5bb6\u516c\u53f8\u4f7f\u7528\u65f6 \u6df1\u6709\u611f\u89e6 \u3002 \u66fe\u7ecf\u7684\u96be\u9898 \u6709\u90a3\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u5f53\u65f6\u662f\u4ece\u522b\u4eba\u7684\u63a5\u53e3\u91cc\u9762\u6293\u53d6\u516c\u53f8\u6240\u6709\u670d\u52a1\u7684\u6570\u636e\uff0c\u5e76\u5199\u5165\u5230\u6211\u4eec\u672c\u5730\u6570\u636e\u5e93\u3002\u5927\u6982\u51e0\u5343\u4e2aapp\uff0c\u540c\u6b65\u4e00\u6b21\u90a3\u662f\u6162\u7684\u5f88\u554a\uff0c\u5199\u4f2a\u4ee3\u7801\u5c31\u662f: for i in range( 100 ): r = requests.get( \"xxx\" ) data = r.json() cursor.execute( \"insert into xxx....\" ) \u6162\u7684\u539f\u56e0\u4e3b\u8981\u662fhttp\u8fc7\u7a0b\u6bd4\u8f83\u8017\u65f6\uff0c\u6211\u4eec\u5728\u7b49\u5f85\u54cd\u5e94\u7684\u65f6\u5019\uff0c\u5176\u4ed6\u7684\u4efb\u52a1\u6ca1\u6709\u540c\u65f6\u8fdb\u884c\u3002 \u5c31\u597d\u50cf\u8fd9\u91cc\u6709100\u4ea9\u7530\uff0c\u5c311\u4e2a\u4eba\u79cd\uff0c\u7b49\u4ed6\u79cd\u5b8c\u7530\u90fd\u7334\u5e74\u9a6c\u6708\u4e86\u3002\u6709\u4eba\u4f1a\u95ee\uff0c\u4f60\u548b\u4e0d\u7528threading\uff0c\u591a\u5f00\u51e0\u4e2a\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u662f\u591a\u53eb\u51e0\u4e2a\u4eba\uff0c\u6bd4\u5982\u53eb100\u4e2a\u4eba\uff0c\u4e00\u8d77\u79cd\uff0c\u90a3\u4e0d\u5c31\u5feb\u4e86\u5417\uff1f \u6211\u4e5f\u60f3\uff0c\u53ef\u662fGIL\u5b9e\u529b\u4e0d\u5141\u8bb8\u554a\uff0c\u867d\u7136\u6211\u6ca1\u6709\u4eb2\u81ea\u8fd9\u6837\u505a\uff0c\u4f46\u662f\u7ed3\u5c40\u5e94\u8be5\u662f\u53ef\u4ee5\u9884\u6599\u7684\u3002 \u5982\u679c\u6709\u5174\u8da3\u7684\u8bdd\uff0c\u6211\u4ee5\u540e\u53ef\u80fd\u4f1a\u505a\u8fd9\u6837\u7684\u6d4b\u8bd5\u3002 \u90a3\u4e48\u4f1a\u6709\u4eba\u95ee\uff0c\u90a3\u4f60\u600e\u4e48\u641e\u5b9a\u7684\uff1f\u5176\u5b9e\u6211\u662f\u7528\u4e86go\u53bb\u8c03\u6574\u4e86\u4ee3\u7801\uff0c\u7528\u51e0\u5341\u4e2agoroutine\u53bb\u5b8c\u6210\u4e86\u8fd9\u4e2a\u4e8b\u60c5\uff0c\u901f\u5ea6\u5927\u6982\u5feb\u4e86\u4e2a\u51e0\u767e\u500d\uff0c\u4e00\u5c0f\u4f1a\u5c31 \u540c\u6b65\u5b8c\u4e86 \u3002 \u8bd5\u8bd5aiohttp \u60f3\u5230\u4e86\u4e0a\u8ff0\u7684\u96be\u9898\uff0c\u53c8\u60f3\u8d77\u81ea\u5df1\u4ee5\u540e\u8981\u6279\u91cf\u8dd1\u7528\u4f8b\u3002\u6240\u4ee5\u6211\u4e0d\u7981\u795e\u4f24\uff0c\u51b3\u5b9a\u5c1d\u8bd5\u4e00\u4e0baiohttp\u5427\u3002 \u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4e5f\u53ea\u662f\u542c\u8fc7\u5b83\u7684\u5927\u540d\uff0c\u5e76\u65e0\u5b9e\u9645\u7ecf\u9a8c\u3002 \u76f8\u5173\u6587\u6863: https://docs.aiohttp.org/en/stable/ \u770b\u770bdemo \u6539\u9020\u4e4b\u524d\u7684HttpClient.py \u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u53eb AsyncHttpClient.py \u3002 \u7f16\u5199\u597d\u6784\u9020\u51fd\u6570 \u548c\u4ee5\u524d\u51e0\u4e4e\u4e00\u6837\uff0c\u591a\u4e86\u4e00\u4e2atimeout\uff0c\u56e0\u4e3aaiohttp\u7684timeout\u4e0d\u662fint/float\u7c7b\u578b\uff0c\u800c\u662faiohttp.ClientTimeout. \u7f16\u5199get_cookie\u65b9\u6cd5 def get_cookie (self, session) : cookies = session.cookie_jar.filter_cookies(self.url) return {k: v.value for k, v in cookies.items()} \u901a\u8fc7session\u4e2d\u7684cookie_jar\u53bb\u83b7\u53d6cookie. \u7f16\u5199\u83b7\u53d6resp\u65b9\u6cd5 \u5f53response\u662fjson\u6211\u4eec\u7ed9\u4ed6\u53cd\u5e8f\u5217\u5316\u4e3aPython\u5bf9\u8c61\uff0c\u5426\u5219\u8fd4\u56de\u5b57\u7b26\u4e32 \u7f16\u5199collect\u65b9\u6cd5 \u5176\u5b9e\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u7ec4\u88c5\u4e86\u8bf7\u6c42\u7684\u4e00\u4e9b\u6570\u636e\u3002 \u548c\u4e4b\u524d\u7684\u6bd4\u8f83\u7c7b\u4f3c \u7f16\u5199invoke\u65b9\u6cd5 \uff08\u51fa\u4e8e\u8ddf\u98ce\uff0c\u6211\u5728\u5f88\u591arpc\u6846\u67b6\u90fd\u770b\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u53eb\u6cd5\uff09 \u9996\u5148\u7528async with\u83b7\u53d6\u4e86\u4e00\u4e2asession\uff0c\u6ce8\u610f\u8fd9\u91cc\u6234\u4e0a\u4e86Cookie\u3002\u5176\u4ed6\u5730\u65b9\u6ca1\u6709\u4ec0\u4e48\u533a\u522b\uff0c\u5e76\u989d\u5916\u8ba1\u7b97\u4e86\u8bf7\u6c42\u65f6\u95f4\u3002 \u5982\u4f55\u4f7f\u7528 \u5148\u770b\u770b\u6211\u4eechttp\u6d4b\u8bd5\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c06\u65b9\u6cd5\u6539\u4e3aasync\uff0crequest\u90e8\u5206\u6539\u4e3aAsyncRequest\uff0c\u5e76await invoke\u8fd4\u56de\u7684\u5185\u5bb9\u3002 \u8bd5\u8bd5request\u8bf7\u6c42 \u70b9\u4eae\uff0c\u5b8c\u7f8e \u5c0f\u6d4b\u8bd5\u4ee3\u7801 import asyncio import time import aiohttp import requests url = \"https://www.baidu.com\" async def fetchBaidu () : async with aiohttp.ClientSession() as session: resp = await session.get(url) text = await resp.text(encoding= 'utf-8' ) print(text.split( \"\\n\" )[ 0 ]) async def main () : start = time.time() await asyncio.gather(*(fetchBaidu() for _ in range( 200 ))) print( \"\u82b1\u8d39\u65f6\u95f4:\" , time.time() - start) def main2 () : start = time.time() session = requests.Session() for i in range( 200 ): r = session.get(url) print(r.text.split( \"\\n\" )[ 0 ]) print( \"\u82b1\u8d39\u65f6\u95f4:\" , time.time() - start) if __name__ == \"__main__\" : asyncio.run(main()) # main2() \u76ee\u524d\u662f200\u6b21\u6d4b\u8bd5\uff0c\u8fd9\u662faiohttp\u7684\u901f\u5ea6: aiohttp \u666e\u901a\u7684requests \u5faa\u73af\u592a\u591a\u7684\u8bdd\uff0c\u767e\u5ea6\u6709\u70b9 \u4e0d\u5f00\u5fc3\u4e86 \u3002 \u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5206\u4eab\u5230\u8fd9\u91cc\u4e86\uff0c\u5927\u5bb6\u53ef\u4ee5\u62ff\u7740\u8fd9\u4e2a\u811a\u672c\u73a9\u73a9\uff0c\u8bd5\u8bd5\u770b\uff0c\u770b\u770baiohttp\u5c4c\u5728\u54ea\u91cc\uff01","title":"43.aiohttp\u521d\u4f53\u9a8c"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%285%29%20%E5%BC%95%E5%85%A5Ant%20design%20Pro/","text":"\u5f15\u5165Ant Design Pro \u56de\u987e \u8fd8\u662f\u7ee7\u7eed\u56de\u987e\u4e0b\u4e4b\u524d\u7684\u4f5c\u4e1a, \u8fd4\u56de\u7684\u4e2d\u6587\u53d8\u6210\u4e86ascii\u5b57\u7b26\uff0c\u4e0d\u8981\u7d27\uff0c\u6211\u4eec\u5149\u8363\u5730\u767e\u5ea6\u4e00\u54c8\u3002 \u968f\u4fbf\u70b9\u8fdb\u53bb\u770b\u770b\uff0c\u90fd\u53ef\u4ee5\u627e\u5230\u6b63\u786e\u7b54\u6848: \u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539config\u4e2d\u7684 JSON_AS_ASCII \u5b57\u6bb5\u4e3aFalse\u3002 \u4f46\u662f\u6211\u4eec\u672c\u8eab\u662f\u6ca1\u6709\u8fd9\u4e2a\u914d\u7f6e\u9879\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u7ed9\u52a0\u4e0a\u5c31\u597d\u4e86\u3002 pity/config.py import os class Config (object) : ROOT = os.path.dirname(os.path.abspath(__file__)) LOG_NAME = os.path.join(ROOT, 'logs' , 'pity.log' ) # Flask jsonify\u7f16\u7801\u95ee\u9898 JSON_AS_ASCII = False \u518d\u8bd5\u4e00\u4e0b\uff0c\u53ef\u4ee5\u53d1\u73b0\u95ee\u9898\u5b8c\u7f8e\u89e3\u51b3\u4e86\uff0c\u8fd9\u91cc\u7bc7\u5e45\u539f\u56e0\u5c31\u4e0d\u4e0a\u56fe\u4e86\u3002 \u524d\u8a00 \u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u5e0c\u671b\u8bfb\u8005\u4eec\u5df2\u7ecf\u80fd\u591f\u638c\u63e1\u4e86\u4e00\u90e8\u5206 react \u7684\u77e5\u8bc6\uff0c\u8fd9\u91cc\u5047\u5b9a\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u4e86react\uff0credux\u548cdva/umi\u76f8\u5173\u7684\u77e5\u8bc6\u3002\u5e76\u6709\u505a\u8fc7\u76f8\u5173\u7ec3\u4e60\u3002 \u5982\u679c\u8fd8\u4e0d\u4e86\u89e3\u4ee5\u4e0a\u76f8\u5173\u7684\u77e5\u8bc6\uff0c\u5efa\u8bae\u53bb\u4ee5\u4e0b\u7f51\u7ad9\u5b66\u4e60\u4e00\u904d\uff0c\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2a\u5927\u6982\u5b66\u4e60\u7684\u8def\u7ebf\u5427\u3002 html/css/js \u8fd9\u91cc\u63a8\u8350\u5927\u5bb6\u53bb w3cschool \u7a0d\u4f5c\u4e86\u89e3\uff0c\u4e0d\u8fc7\u770b\u672c\u7bc7\u6587\u7ae0\u7684\u540c\u5b66\u80af\u5b9a\u90fd\u662f\u6709\u4e00\u5b9a\u57fa\u7840\u7684\u3002\u90a3\u4e48\u5c31\u5f53\u505a\u5de9\u56fa\u597d\u4e86\u3002 es6 \u8fd9\u91cc\u6211\u6ca1\u6709\u7cfb\u7edf\u770b\u8fc7\u6559\u7a0b\uff0c\u6211\u662f\u5728\u4e00\u672c\u53eb\u505a react\u5b66\u4e60\u624b\u518c \u7684\u4e66\u4e0a\u9762\u770b\u5230\u7684\u3002\u8fd9\u91cc\u8fd8\u662f\u653e\u4e00\u4e0b\u5730\u5740\u5427\uff0c\u53ef\u4ee5\u53bb\u962e\u4e00\u5cf0\u8001\u5e08\u7684\u535a\u5ba2\u770b\uff0c\u4e5f\u53ef\u4ee5\u53bb \u8fd9\u91cc \u5b66\u4e60es6\u7684\u4e00\u4e9b\u65b0\u7279\u6027\u3002\u6bd4\u5982\u7bad\u5934\u51fd\u6570\uff0cpromise\uff0clet\u7b49\u3002 react+redux react\u7684\u8bdd\uff0c\u4e00\u5f00\u59cb\u6211\u51e0\u4e4e\u662f\u6ca1\u6709\u5165\u95e8\u3002\u62ff\u7740 react-element \u91cc\u7684demo\u5c31\u5f00\u59cb\u5b9e\u64cd\u4e86\uff0c\u9047\u5230\u4e86\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\u3002\u5728\u5bfb\u627esolution\u7684\u65f6\u5019\u9047\u5230\u4e86\u4e00\u672c\u540d\u66f0 react\u5c0f\u4e66 \u7684\u6559\u7a0b\uff0c\u89c9\u5f97\u5b9e\u5728\u662f\u518d\u5408\u9002\u4e0d\u8fc7\u4e86\u3002\u540c\u65f6\u91cc\u9762\u8fd8\u6709redux\u7684\u90e8\u5206\u6559\u7a0b(\u7b2c\u4e09\u90e8\u5206)\u3002 dva dva\u662f\u4e00\u4e2a\u5c01\u88c5\u4e86redux\u548crouter\u7b49\u65b9\u6cd5\u7684\u6846\u67b6\uff0c\u638c\u63e1\u4e86\u5b83\u7684api\uff0c\u53ef\u4ee5\u5feb\u901f\u5b8c\u6210react\u9879\u76ee\u7684\u5f00\u53d1\u3002\u5177\u4f53\u6559\u7a0b\u8fd8\u8bf7\u770b \u5b98\u7f51dvajs \u3002 Ant Design Pro\u4ecb\u7ecd Ant Design (\u7b80\u79f0antd)\uff0c\u5b83\u662f\u8682\u8681\u91d1\u670d\u7684\u524d\u7aef\u8bbe\u8ba1\u56e2\u961f\u51fa\u54c1\u7684\u4e00\u6b3eUI\u7ec4\u4ef6\u5e93\uff0c\u5982\u679c\u8981\u7c7b\u6bd4\u7684\u8bdd\uff0c\u6211\u4f1a\u628a\u4ed6\u6bd4\u4f5cbootstrap\uff0c\u4f46\u662f\u5b83\u53c8\u8fdc\u8fdc\u6bd4bootstrap\u597d\u770b\u4e14\u4ea4\u4e92\u6027\u66f4\u5f3a\u3002\u800cantd pro\uff0c\u5c31\u662f\u5b83\u7684\u4e13\u4e1a\u7248\u3002\u4e3a\u4ec0\u4e48\u5462\uff0c\u56e0\u4e3aantd pro\u5df2\u7ecf\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u4e2d\u540e\u53f0\u9879\u76ee\uff0c\u6211\u4eec\u5982\u679c\u9700\u8981\u5feb\u901f\u5f00\u53d1\u7684\u8bdd\uff0c\u76f4\u63a5\u62ff\u7740\u91cc\u9762\u7684\u9875\u9762\u4fee\u6539\u4fbf\u662f\u4e86\u3002\u4f46\u662f\u6211\u4e2a\u4eba\u603b\u7ed3\u4e86\u4e00\u4e0b\uff0c\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\uff0c\u5c31\u662f antd pro\u505a\u51fa\u6765\u7684\u7cfb\u7edf\u51e0\u4e4e\u90fd\u957f\u4e00\u4e2a\u6837\uff0c\u957f\u4e45\u4e86\u4f1a\u6709\u5ba1\u7f8e\u75b2\u52b3\uff0c\u81f3\u5c11\u6211\u5bf9bootstrap\u4e5f\u662f\u8fd9\u6837\u7684 \uff0c\u5f53\u7136\u8682\u8681\u51fa\u7684\u4e1c\u897f\u54c1\u8d28\u662f\u771f\u7684\u68d2\uff01 \u8bdd\u4e0d\u591a\u8bf4\uff0c\u5148\u770b\u770b\u5b83\u7684 \u9884\u89c8\u9875\u9762 \u3002 \u4ee5\u4e0b\u662f\u968f\u4fbf\u622a\u53d6\u7684\u51e0\u4e2a\u56fe\u7247\uff0c\u611f\u53d7\u4e00\u4e0b\u5b83\u7684\u7f8e\u3002 \u6761\u4ef6\u51c6\u5907 \u786e\u4fdd\u4f60\u5b89\u88c5\u4e86 Nodejs \uff0c\u8fd9\u6837\u4f60\u5c31\u62e5\u6709\u5f3a\u5927\u7684\u5305\u7ba1\u7406\u5de5\u5177 Npm \u4f7f\u7528npm\u5b89\u88c5cnpm\uff0c\u56e0\u4e3a\u56fd\u5185\u6709\u5f88\u591a\u8d44\u6e90\u662f\u8bbf\u95ee\u53d7\u9650\u7684\uff0c\u6240\u4ee5\u9700\u8981\u6dd8\u5b9d\u5f00\u6e90\u7684cnpm\u3002 npm install -g cnpm --registry=https://registry.npm.taobao.org \u5b89\u88c5yarn cnpm install -g yarn \u5b89\u88c5 Umi cnpm install -g umi \u521b\u5efaantd pro\u9879\u76ee \u5148\u5728pity\u540c\u7ea7\u5efa\u7acbpityWeb\u9879\u76ee, \u7136\u540e\u8fdb\u5165pityWeb\u8f93\u5165\u5982\u4e0b\u547d\u4ee4, \u5f00\u59cb\u7b49\u5f85: yarn create umi \u9009\u62e9ant design pro\u5e76\u56de\u8f66 \u9009\u62e9pro v4\u5e76\u56de\u8f66 \u9009\u62e9JavaScript\u5e76\u56de\u8f66 \u9009\u62e9simple\u5e76\u56de\u8f66 \u9009\u62e9ant design 4\u5e76\u56de\u8f66 \u5b89\u88c5\u6210\u529f\u622a\u56fe \u5b89\u88c5antd pro\u4f9d\u8d56\u5305 \u8fdb\u5165 pityWeb \u76ee\u5f55\u6267\u884c\u547d\u4ee4 cnpm install \u5c1d\u8bd5\u5728\u672c\u5730\u8fd0\u884cantd pro \u5c1d\u8bd5\u5728\u672c\u5730\u8fd0\u884cantd pro \u5728 pityWeb \u76ee\u5f55\u4e0b\u8f93\u5165 npm start \u5e76\u56de\u8f66 \u63a5\u7740\u6d4f\u89c8\u5668\u5c31\u81ea\u52a8\u6253\u5f00\u4e86\u9875\u9762http://localhost:8000\uff08\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u5c31\u624b\u52a8\u6253\u5f00\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u7684antd pro\u5c31\u6210\u529f\u90e8\u7f72\u4e86\u3002 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"5.\u5f15\u5165Ant design Pro"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%286%29%20%E9%85%8D%E7%BD%AEflask-sqlalchemy/","text":"\u914d\u7f6eflask-sqlalchemy \u8bf4\u5230 flask-sqlalchemy \uff0c\u6709\u4e9b\u4eba\u53ef\u80fd\u4e0d\u592a\u6e05\u695a\u662f\u4ec0\u4e48\u4e1c\u897f\u3002\u7b80\u5355\u7684\u8bf4\uff0c\u4ed6\u5c31\u662f\u4e00\u4e2aorm\u5e93\uff0c\u5e2e\u52a9\u54b1\u4eec\u80fd\u591f\u66f4\u597d\u5730\u8ddf db \u6253\u4ea4\u9053\u7684\u3002\u7b14\u8005\u6709\u4e00\u7bc7 \u6587\u7ae0 \u6709\u7565\u5fae\u7684\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u901f\u89c8\u4e00\u904d\u4e86\u89e3\u4e00\u4e0b\uff08\u5176\u5b9e\u4e3b\u8981\u662f\u7b14\u8005\u624d\u758f\u5b66\u6d45\uff0c\u8bb2\u4e0d\u51fa\u4ec0\u4e48\u6df1\u5965\u7684\u3002 \u65e2\u7136\u662f\u767b\u5f55\uff0c\u90a3\u4e48\u80af\u5b9a\u9700\u8981\u6709\u6301\u4e45\u5316\u7684\u6570\u636e\u3002\u90a3\u4e48\u6211\u4eec\u80af\u5b9a\u9700\u8981\u5efa\u7acb\u7528\u6237\u76f8\u5173\u7684\u8868\u3002 \u524d\u7f6e\u51c6\u5907 \u5b89\u88c5MySQL \u6839\u636e\u81ea\u5df1\u7684\u7cfb\u7edf(Windows/Mac/Linux)\u5b89\u88c5\u597d\u5bf9\u5e94\u7684MySQL\u5e76\u8bbe\u7f6e\u597d\u8d26\u53f7\u5bc6\u7801\uff0c\u8fd9\u91cc\u5c31\u4e0d\u6559\u80b2\u5927\u5bb6\u600e\u4e48\u5b89\u88c5\u4e86\u3002\u7aef\u53e3\u53f7\u7528\u9ed8\u8ba4\u76843306\u5373\u53ef\uff0c\u5e76\u4e14\u786e\u4fdd\u670d\u52a1\u8981\u542f\u52a8\u6210\u529f\u54e6\uff01 \u5b89\u88c5mysql-connector-python(mysql\u5b98\u65b9\u9a71\u52a8) cmd\u7a97\u53e3\u6267\u884c pip3 install mysql-connector-python \u914d\u7f6eMySQL\u8fde\u63a5\u4fe1\u606f pity/config.py\u914d\u7f6emysql\u8fde\u63a5\u4fe1\u606f MySQL\u914d\u7f6e \u6ce8\u610f: \u4e00\u5b9a\u8981\u786e\u4fddMySQL\u7684\u5e93\u5b58\u5728\u54e6, \u6ca1\u6709\u7684\u8bdd\u53ef\u4ee5\u7528Navicat\u6216Datagrip\u65b0\u5efa\u3002 \u53ef\u4ee5\u770b\u51fa\u4ee5\u4e0a\u5305\u542b\u4e865\u4e2a\u91cd\u70b9\u5185\u5bb9\uff0cmysql\u7684\u5730\u5740\uff0c\u7aef\u53e3\u53f7\uff0c\u7528\u6237\u540d\uff0c\u5bc6\u7801\u548c\u5e93\u540d\u3002\u63a5\u4e0b\u6765\u7684SQLALCHEMY_DATABASE_URI\u4ee3\u8868\u4e86sql\u7684\u8fde\u63a5\u4fe1\u606f\uff0c flask_sqlalchemy \u4f1a\u81ea\u52a8\u6839\u636e\u8fd9\u4e2a\u53d8\u91cf\u53bb\u83b7\u53d6db\u8fde\u63a5\u7b49\u3002\u5176\u4e2d mysql+mysqlconnector \uff0c\u4ee3\u8868\u7684\u662f\u8bd5\u7528mysql\u8fde\u63a5\u7684\u65b9\u5f0f\uff0c\u5927\u5bb6\u90fd\u77e5\u9053Python\u8fde\u63a5mysql\u6709\u5f88\u591a\u5e93\u6bd4\u5982pymysql\uff0cmysqldb\u7b49\u3002\u8fd9\u91cc\u5c31\u662f\u4e00\u4e2a\u8bf4\u660e\u3002 \u81f3\u4e8e\u540e\u9762\u7684\u8b66\u544a\u5927\u5bb6\u53ef\u52a0\u53ef\u4e0d\u52a0\uff0c\u5982\u679c\u88ab\u8b66\u544a\u5f97\u592a\u70e6\u4e86\u53ef\u4ee5\u8fd9\u6837\u89e3\u51b3\u3002 SQLALCHEMY_DATABASE_URI = 'mysql+mysqlconnector://{}:{}@{}:{}/{}' .format( MYSQL_USER, MYSQL_PWD, MYSQL_HOST, MYSQL_PORT, DBNAME) \u5728 pity/app/models/__init__.py \u521d\u59cb\u5316db \u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06app\u8d4b\u7ed9SQLAlchemy\u4ece\u800c\u751f\u6210\u4e00\u4e2adb\u5bf9\u8c61\u3002 from flask_sqlalchemy import SQLAlchemy from app import pity db = SQLAlchemy(pity) \u914d\u5907\u7528\u6237\u7c7b \u5728models\u76ee\u5f55\u5efa\u7acb\u7528\u6237\u8868 \u9996\u5148\u54b1\u4eec\u8fd9\u4e2a\u5e73\u53f0\u80af\u5b9a\u4e0d\u662f\u90a3\u79cd\u4e0d\u9700\u8981\u767b\u5f55\u7684\uff0c\u56e0\u4e3a\u4f1a\u505a\u4e00\u5c0f\u90e8\u5206\u7684 \u6743\u9650\u63a7\u5236 \uff0c\u4f46\u662f\u80af\u5b9a\u4e5f\u4e0d\u4f1a\u5f88\u590d\u6742\u5316\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u7b80\u7565\u8bbe\u8ba1\u4e00\u4e0b \u7528\u6237\u8868 \u3002 \u65e2\u7136\u662fOrm\uff0c\u90a3\u4e48\u54b1\u4eec\u7684 User\u8868 \u7684\u4f53\u73b0\u5373\u662f Python \u4e2d\u7684\u4e00\u4e2a\u7c7b\u3002 \u56e0\u4e3a\u76ee\u524d\uff0c\u8fd8\u4e0d\u592a\u4e86\u89e3\u7528\u6237\u8868\u7684\u5177\u4f53\u9700\u8981\u5b57\u6bb5\u3002\u4f46\u662f\u6211\u4eec\u80fd\u5927\u6982\u8bbe\u8ba1\u4e00\u4e0b\u8fd9\u4e2a\u8868\uff0c\u9996\u5148\u9700\u8981\u7684\u5b57\u6bb5\u80af\u5b9a\u6709\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u7528\u6237id\uff0c\u90ae\u7bb1\uff0c\u56e2\u961fid\uff0c\u804c\u4f4d\u7b49\u3002\u5176\u4ed6\u7684\u4fe1\u606f\u6bd4\u5982enable(\u662f\u5426\u53ef\u7528)\uff0ccreate_time(\u521b\u5efa\u65f6\u95f4)\u7b49\u4fe1\u606f\u6682\u65f6\u5148\u4e0d\u8003\u8651\u4e86\u3002\u540e\u7eed\u53ef\u4ee5\u968f\u610f\u6dfb\u52a0\u3002 \u90a3\u4e48 User\u8868 \u6211\u7684\u5927\u6982\u8bbe\u8ba1\u5982\u4e0b: \u5927\u81f4\u8bb2\u4e00\u4e0b\u5427\uff0c\u5927\u6982\u5c31\u521b\u5efa\u4e86\u4ee5\u4e0a\u51e0\u4e2a\u5b57\u6bb5\u3002unique\u662f\u5b57\u6bb5\u662f\u5426\u552f\u4e00(\u53ef\u91cd\u590d)\uff0cprimary key\u81ea\u7136\u5c31\u662f\u4e3b\u952e\uff0cdb.String\u5bf9\u5e94varchar\uff0cdb.INT\u5bf9\u5e94int\uff0c\u4e5f\u5c31\u662f\u8bf4\u3002\u73b0\u5728\u6211\u4eec\u8981\u64cd\u4f5c\u6570\u636e\u8868\uff0c\u53ea\u9700\u8981\u5bf9\u8fd9\u4e2aUser\u7c7b\u64cd\u4f5c\u5c31\u884c\u4e86\uff0c\u56e0\u4e3asqlalchemy\u4f1a\u81ea\u52a8\u6620\u5c04\u5230\u5bf9\u5e94\u5e93--\u5bf9\u5e94\u8868\u8fdb\u884c\u64cd\u4f5c\u3002 from app.models import db from datetime import datetime class User (db.Model) : id = db.Column(db.INT, primary_key= True ) username = db.Column(db.String( 16 ), unique= True , index= True ) name = db.Column(db.String( 16 ), index= True ) password = db.Column(db.String( 32 ), unique= False ) email = db.Column(db.String( 64 ), unique= True , nullable= False ) role = db.Column(db.INT, default= 0 , comment= \"0: \u666e\u901a\u7528\u6237 1: \u7ec4\u957f 2: \u8d85\u7ea7\u7ba1\u7406\u5458\" ) created_at = db.Column(db.DATETIME, nullable= False ) updated_at = db.Column(db.DATETIME, nullable= False ) deleted_at = db.Column(db.DATETIME) last_login_at = db.Column(db.DATETIME) def __init__ (self, username, name, password, email) : self.username = username self.password = password self.email = email self.name = name self.created_at = datetime.now() self.updated_at = datetime.now() self.role = 0 def __repr__ (self) : return '<User %r>' % self.username \u5728\u5f15\u5165models\u7684\u5730\u65b9\u521d\u59cb\u5316\u6570\u636e\u8868 \u6211\u4eec\u5728 pity/dao/__init__.py dao\u5c42\u521d\u59cb\u5316\u6240\u6709\u8868\uff0c\u4ee5\u540e\u65b0\u589e\u4e00\u4e2a\u8868\u90fd\u9700\u8981\u5728\u8fd9\u513fimport\u4e00\u6b21 from app.models import db from app.models.user import User db.create_all() \u5728run.py\u5f15\u5165dao\u5305\u4f7f\u5f97\u5efa\u8868\u8bed\u53e5db.create_all()\u751f\u6548 \u91cd\u542f\u670d\u52a1\u540e\u53ef\u4ee5\u770b\u5230\u51fa\u73b0\u4e86user\u8868: \u5e7f\u544a\u65f6\u95f4 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~","title":"6.\u914d\u7f6eflask-sqlalchemy"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%287%29%20%E6%94%B9%E9%80%A0%E6%B3%A8%E5%86%8C%E6%8E%A5%E5%8F%A3/","text":"\u5f15\u5165jwt\u6539\u9020\u6ce8\u518c\u63a5\u53e3 \u56de\u987e \u8fd8\u8bb0\u5f97\u6211\u4eec\u4e4b\u524d\u7f16\u5199\u4e86\u4e00\u4e2a register \u63a5\u53e3\u5417\uff1f\u53ef\u90a3\u53ea\u662f\u4e2a\u7a7a\u58f3\uff0c\u76f4\u63a5\u8fd4\u56de\u4e86 \u6ce8\u518c\u6210\u529f \u7684\u54cd\u5e94\u4f53\u3002 \u8fd9\u4e0d\u7981\u8ba9\u6211\u60f3\u8d77\u4ee5\u524d\u5728\u67d0\u5feb\u9012\u7f51\u7ad9\u4e0a\uff0c\u70b9\u51fb \u50ac\u5355 \u6309\u94ae\uff0c\u5bf9\u65b9\u76f4\u63a5\u5f39\u51fa \u50ac\u5355\u6210\u529f \u7684alert\u63d0\u793a\u3002\u4f46\u6211\u6253\u5f00\u4e86\u4ed6\u7684html\u4ee3\u7801\uff0c\u53d1\u73b0\u53ea\u8981\u70b9\u51fb\u8fd9\u4e2a\u6309\u94ae\u5c31\u4f1a\u5f39\u51fa\u63d0\u793a\uff0c\u6ca1\u6709\u4efb\u4f55\u540e\u7aef\u7684\u4ea4\u4e92\uff0c\u8fd9\u91cc\u6211\u5c31\u4e0d\u70b9\u540d\u8fd9\u4e2a\u97f5\u8fbe\u5feb\u9012\u4e86\u54c8\u3002\u53ea\u80fd\u8bf4\u771f\u7684\u5f88\u79c0~ \u77e5\u8bc6\u51c6\u5907 cookie\u548csession \u4f20\u7edf\u7684web\u8f6f\u4ef6\uff0c\u9700\u8981\u5b58\u50a8\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\u3002cookie\u548csession\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u6a21\u5f0f\uff0c\u5f53\u7136\u4e5f\u662f\u6bd4\u8f83\u53e4\u8001\u7684\u6a21\u5f0f\u3002\u5176\u4e2dcookie\u4e3b\u8981\u4f9d\u8d56\u4e8e\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u8bf4\u662f\u6d4f\u89c8\u5668\u3002\u53ef\u4ee5\u8bf4\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\uff0c\u5b58\u50a8\u5728\u6d4f\u89c8\u5668\u7684localstorage\u4e2d\u3002\u800csession\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b83\u662f\u5c06\u7528\u6237\u5b58\u50a8\u4e8e\u670d\u52a1\u5668\u4e2d\u3002\u66f4\u597d\u7684\u89e3\u91ca\u8bf7\u81ea\u884c\u767e\u5ea6\u3002\u3002 token token\u4ece\u5e7f\u4e49\u8bf4\u7684\u8bdd\uff0c\u662f\u4ee4\u724c\u7684\u610f\u601d\u3002\u6211\u8fd9\u91cc\u662fjson web token(JWT)\u7684\u7b80\u5199\u3002\u7b80\u5355\u7684\u8bf4\uff0c\u5c31\u662f\u4e00\u79cd\u901a\u8fc7\u5b58\u50a8\u7528\u6237\u4fe1\u606f(\u4ee5base64\u7f16\u7801\u5b58\u50a8)\u7136\u540e\u9700\u8981\u7684\u65f6\u5019\u5c06\u4e4b\u89e3\u6790\u7684\u65b9\u6cd5\u3002\u8fd9\u6837\u5c31\u8fbe\u5230\u4f60\u8fd9\u4e2a\u7528\u6237\u6240\u6709\u4fe1\u606f\u90fd\u88ab\u5b58\u50a8\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\u800c\u4e14\u4e5f\u770b\u4e0d\u5230\u5177\u4f53\u5185\u5bb9\u7684\u76ee\u7684\u3002\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u53bb\u770b\u770b~~ Python\u4e2d\u7684JWT Python\u81ea\u5e26\u4e86jwt\uff0c\u73b0\u5728\u54b1\u4eec\u6765\u719f\u6089\u4e00\u4e0b\u76f8\u5173\u7684\u65b9\u6cd5\u3002 \u5148\u7ed9\u51fa\u6211\u5728 pity/middleware/Jwt.py \u4e2d\u7684\u5b9e\u73b0 import hashlib from datetime import timedelta, datetime import jwt from jwt.exceptions import ExpiredSignatureError EXPIRED_HOUR = 3 class UserToken (object) : key = 'pityToken' salt = 'pity' @staticmethod def get_token (data) : new_data = dict({ \"exp\" : datetime.utcnow() + timedelta(hours=EXPIRED_HOUR)}, **data) return jwt.encode(new_data, key=UserToken.key).decode() @staticmethod def parse_token (token) : try : return jwt.decode(token, key=UserToken.key) except ExpiredSignatureError: raise Exception( \"token\u5df2\u8fc7\u671f, \u8bf7\u91cd\u65b0\u767b\u5f55\" ) @staticmethod def add_salt (password) : m = hashlib.md5() m.update(password + UserToken.salt) return m.hexdigest() UserToken\u7c7b\u67093\u4e2a\u65b9\u6cd5\uff0c\u7b2c\u4e00\u4e2a\u65b9\u6cd5\u5462\uff0c\u5c31\u662f\u628a\u7528\u6237\u4fe1\u606f\u538b\u7f29\u6210\u4e00\u4e32\u5b57\u7b26\u4e32\uff0c\u5e76\u9644\u5e26 3\u5c0f\u65f6 \u7684\u8fc7\u671f\u65f6\u95f4\u3002 \u7b2c\u4e8c\u4e2a\u5c31\u662f\u89e3\u6790token\u4e3a\u4e4b\u524d\u7684\u7528\u6237\u4fe1\u606f\u3002 \u7b2c\u4e8c\u4e2a\u65b9\u6cd5add_salt\u662f\u4e3a\u4e86\u80fd\u591f\u7528md5\u7801\u53bb\u5b58\u50a8\u7528\u6237\u5bc6\u7801\uff0c\u4e00\u65e6\u6709\u90aa\u6076\u52bf\u529b\u62ff\u5230\u6570\u636e\u5e93\u5bc6\u7801\u7684\u8bdd\uff0c\u4e0d\u81f3\u4e8e\u4f1a\u66b4\u9732\u7528\u6237\u7684\u5bc6\u7801\uff0c add_salt \u5c31\u662f\u52a0\u76d0\u7684\u610f\u601d\uff0c\u5982\u679c\u4f60\u8981\u53cd\u7834\u89e3md5\u7801\uff0c\u563f\u563f\uff0c\u6211\u8fd9\u91cc\u7ed9\u4f60\u52a0\u4e86\u4e00\u5c42\u4f60\u60f3\u8c61\u4e0d\u5230\u7684\u4e1c\u897f\uff0c\u6240\u4ee5\u76f8\u5bf9\u6765\u8bf4\u8fd8\u662f\u6bd4\u8f83\u5b89\u5168\u7684\u5462\u3002 \u7f16\u5199\u6838\u5fc3\u65b9\u6cd5 \u4ed4\u7ec6\u60f3\u4e00\u4e0b\uff0c\u6211\u4eec\u7684\u7528\u6237\u5982\u679c\u9700\u8981\u6ce8\u518c\u7684\u8bdd\uff0c\u7b2c\u4e00\u6b65\u662f\u5148\u5224\u65ad\u8fd9\u4e2a\u8d26\u53f7\u662f\u5426\u5df2\u7ecf\u6ce8\u518c\u8fc7\u4e86\u3002\u597d\uff0c\u90a3\u6211\u4eec\u6765\u7f16\u5199\u7b2c\u4e00\u4e2a\u65b9\u6cd5: register_user \u3002 \u6211\u4eec\u65b0\u5efa dao/auth/UserDao.py from sqlalchemy import or_ from app.middleware.Jwt import UserToken from app.models import db from app.models.user import User from app.utils.logger import Log class UserDao (object) : log = Log( \"UserDao\" ) @staticmethod def register_user (username, name, password, email) : \"\"\" :param username: \u7528\u6237\u540d :param name: \u59d3\u540d :param password: \u5bc6\u7801 :param email: \u90ae\u7bb1 :return: \"\"\" try : users = User.query.filter(or_(User.username == username, User.email == email)).all() if users is not None : raise Exception( \"\u7528\u6237\u540d\u6216\u90ae\u7bb1\u5df2\u5b58\u5728\" ) # \u6ce8\u518c\u7684\u65f6\u5019\u7ed9\u5bc6\u7801\u52a0\u76d0 pwd = UserToken.add_salt(password) user = User(username, name, pwd, email) db.session.add(user) db.session.commit() except Exception as e: UserDao.log.error( f\"\u7528\u6237\u6ce8\u518c\u5931\u8d25: {str(e)} \" ) return str(e) return None \u6ce8\u610f\uff0cUser.query.filter\u8fd9\u884c\u4ee3\u7801\u7684\u610f\u601d\u662f\uff0c\u627e\u51fa\u6240\u6709username\u6216email\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237\uff0c\u5982\u679c\u6709\uff0c\u5219\u629b\u51fa\u5f02\u5e38\uff0c\u6ca1\u6709\u5219\u76f4\u63a5\u901a\u8fc7orm\u63d2\u5165\u8fd9\u884c\u6570\u636e\u3002 \u5728orm\u7684\u4e16\u754c\u91cc\uff0c\u6211\u4eec\u5b9e\u4f8b\u5316\u7684user\u5bf9\u8c61\u5c31\u662f\u6570\u636e\u8868\u4e2d\u7684\u4e00\u884c\u6570\u636e\uff0c\u8fd9\u6837\u7406\u89e3\u4f1a\u5426\u66f4\u6e05\u6670\u4e00\u70b9\u5462\uff1f \u6539\u9020\u6ce8\u518c\u63a5\u53e3 \u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u65b9\u6cd5\u5f88\u7a7a\u6d1e\uff0c\u6211\u4eec\u9700\u8981\u505a\u4ec0\u4e48\u5462\u3002 \u9996\u5148\u6211\u4eec\u662f\u4e0d\u662f\u5f97\u63a5\u6536\u4f20\u5165\u7684\u7528\u6237\u540d/\u5bc6\u7801/\u90ae\u7bb1\u7b49\u6ce8\u518c\u4fe1\u606f\uff0c\u5bf9\u53c2\u6570\u8fdb\u884c\u4e00\u4e9b\u5173\u952e\u6821\u9a8c\uff0c\u7136\u540e\u8c03\u7528\u521a\u624d\u7684\u6838\u5fc3\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u51fa\u9519\u7684\u8bdd\uff0c\u54b1\u4eec\u7684\u767b\u5f55\u65b9\u6cd5\u5c31\u5199\u597d\u4e86~ \u6821\u9a8c\u53c2\u6570 Flask\u901a\u8fc7 request.get_json() \u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5230\u4f20\u5165\u7684json\u6570\u636e\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2adict\u5bf9\u8c61\u3002 PS: \u8fd9\u4e48\u5199\u6bd4\u8f83\u4e11\u964b\uff0c\u6682\u65f6\u5148 \u5fcd\u5fcd \uff0c\u540e\u7eed\u6211\u4eec\u518d\u8fdb\u884c\u6539\u9020\u3002 \u5f15\u5165\u6838\u5fc3\u65b9\u6cd5 \u53ea\u662f\u5bfc\u5165\u4e86UserDao\u6a21\u5757\u5e76\u8c03\u7528\u4e86register\u65b9\u6cd5\uff0c\u5982\u679cerr\u4e0d\u4e3a\u7a7a\uff0c\u5c31\u8fd4\u56decode=110\uff0c \u610f\u601d\u662f\u62a5\u8b66\u4e86(\u62a5\u9519\u4e86) \u8bf4\u660e\u4e00\u4e0b\uff0ccode=101\u662f\u53c2\u6570\u9519\u8bef\uff0c110\u662f\u5f02\u5e38\u9519\u8bef, 0\u662f\u6b63\u5e38\u8fd4\u56de\u3002 \u6ce8\u610f\uff0c\u8fd9\u4e0d\u662f\u4ec0\u4e48\u5b98\u65b9\u7684\u89c4\u5b9a\uff0c\u662f\u6211\u4e00\u65f6\u5174\u8d77\u54c8\u54c8\uff0c\u4ee5\u540e\u90fd\u4f1a\u6309\u7167\u8fd9\u4e2a\u7ea6\u5b9a\u6765\u3002 \u5b8c\u6574\u4ee3\u7801: \u7b80\u5355\u5730\u6d4b\u8bd5\u4e00\u4e0b \u542f\u52a8\u670d\u52a1 \u53ef\u4ee5\u770b\u5230\uff0c\u51fa\u73b0\u4e86\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898\uff0c\u539f\u6765\u6211\u4eec\u5728app/ init .py\u91cc\u9762\u5f15\u5165\u4e86controller\uff0c\u5728controller\u91cc\u9762\u53c8\u5f15\u5165\u4e86model\uff0c\u5728model\u91cc\u9762\u53c8\u5f15\u5165\u4e86app/ init .py\u91cc\u9762\u7684pity\u5bf9\u8c61\uff0c\u6240\u4ee5\u51fa\u73b0\u4e86\u5faa\u73af\u5f15\u7528\u3002 \u89e3\u51b3\u7684\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a\u6211\u4eec\u628a\u6ce8\u518c\u84dd\u56fe\u8fd9\u79cd\u810f\u6d3b\u7d2f\u6d3b\u90fd\u653e\u5230run.py\uff0c\u4ed6\u662f\u6700\u5916\u5c42\uff0c\u6ca1\u6709\u4eba\u5f15\u5165run.py\u7684\u4e1c\u897f\u3002 \u6539\u52a8\u540e\u7684app/ init .py\uff1a from flask import Flask from config import Config pity = Flask(__name__) pity.config.from_object(Config) run.py: from datetime import datetime from app import pity from app.utils.logger import Log from app.controllers.auth.user import auth # \u6ce8\u518c\u84dd\u56fe pity.register_blueprint(auth) @pity.route('/') def hello_world () : log = Log( \"hello world\" ) log.info( \"\u6709\u4eba\u8bbf\u95ee\u4e86\u4f60\u7684\u7f51\u7ad9\u4e86\" ) now = datetime.now().strftime( \"%Y-%M-%d %H:%M:%S\" ) print(now) return now if __name__ == \"__main__\" : pity.run( \"0.0.0.0\" , threaded= True , port= \"7777\" ) \u6253\u5f00postman\u6d4b\u8bd5\u4e00\u4e0b: \u4e0d\u5bf9\u52b2\u7684\u4e8b\u60c5\u53c8\u53d1\u751f\u4e86\uff0c\u597d\u6c14\u5440\uff01\u4f46\u662f\u54b1\u4eec\u4e0d\u614c\uff0c\u4ed4\u7ec6\u770b\u4e00\u4e0b\u8fd9\u4e2a\u62a5\u9519\uff0c\u8bf4\u7684\u662f405http\u65b9\u6cd5\u4e0d\u5141\u8bb8\uff0c\u627e\u5230\u6211\u4eec\u5199\u7684\u63a5\u53e3: \u539f\u6765\u662f\u8fd9\u91cc\u51fa\u4e86\u95ee\u9898\uff0c\u6211\u4eec\u7a0d\u7a0d\u6539\u52a8\u4e00\u4e0b\uff0c\u5c06\u8bf7\u6c42\u65b9\u5f0f\u6539\u6210 post \u5373\u53ef\u3002 \u91cd\u542f\u670d\u52a1 try again \u5947\u602a\u4e86\uff0c\u660e\u660e\u6ca1\u6709\u6ce8\u518c\u8fc7\u8fd9\u4e2a\u7528\u6237\uff0c\u5374\u63d0\u793a\u4e86\u8fd9\u4e2a\uff0c\u9996\u5148\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u6570\u636e\u5e93: \u53d1\u73b0\u6570\u636e\u5e93\u4e5f\u6ca1\u95ee\u9898\uff0c\u90a3\u4e48\u6211\u4eec\u4f7f\u51fa\u5927\u62db\uff0c \u65ad\u70b9\u7597\u6cd5 : \u6b64\u5904\u70b9\u4e00\u4e0b\u4f1a\u51fa\u73b0\u4e00\u4e2a\u7ea2\u8272\u5c0f\u5706\u5f62\uff0c\u518d\u6b21\u8bf7\u6c42: \u539f\u6765\u5982\u6b64\uff0c\u6211\u4eec\u7684\u5224\u65ad\u9664\u4e86\u95ee\u9898\uff0c\u8fd4\u56de\u7684\u662f\u4e2a\u7a7a\u6570\u7ec4\uff0c\u5f53\u7136\u4e0d\u662fNone\u4e86\uff0c\u6240\u4ee5\u54b1\u4eec\u9700\u8981\u4fee\u6539\u4e0b\u6821\u9a8c\u65b9\u5f0f: \u91cd\u542f\u540e\u7ee7\u7eed\u5c1d\u8bd5: \u8fd9\u4e2a\u6211\u770b\u51fa\u6765\u4e86\uff0c\u8fd9\u4e00\u5b9a\u662fmd5\u90a3\u5757\u51fa\u4e86\u95ee\u9898\uff0c\u4ed4\u7ec6\u627e\u4e0b\u539f\u56e0\u5427\u3002 (\u592a\u7279\u4e48\u81ea\u4fe1\u4e86\uff0c\u5bfc\u81f4\u524d\u9762\u7684\u56fe\u61d2\u5f97\u6539\uff0c\u53ea\u80fd\u8fb9\u5199\u8fb9\u4fee\u6539\u4e86\uff0c\u4ee5\u540e\u5c31\u4e0d\u4f1a\u8fd9\u6837\u76f4\u64ad\u5199\u4e86\uff0c\u5199\u597d\u4e86\u76f4\u63a5\u4e0a\u4ee3\u7801\u5373\u53ef\u3002) \u770b\u62a5\u9519\u7684\u610f\u601d\u662f\uff0cunicode\u5fc5\u987bhash\u6210bytes\uff0c\u591a\u5927\u70b9\u4e8b: \u76f4\u63a5\u5229\u7528api: \u91cd\u542f\u540e\u7ee7\u7eed\u5c1d\u8bd5: \u771f\u4e0d\u5bb9\u6613\uff0c\u54b1\u4eec\u68c0\u67e5\u4e0b\u6570\u636e\u5e93: \u6709\u4e86\uff0c\u6ce8\u610f\u5bc6\u7801\u4e5f\u4e0d\u662f\u660e\u6587\u54e6 \u68c0\u67e5\u4e0b\u91cd\u590d\u6ce8\u518c\u95ee\u9898(\u518d\u6b21\u8bf7\u6c42\u4e00\u6b21) \u65f6\u95f4\u4e0d\u65e9\u4e86\uff0c\u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u4e86\uff0c\u6253\u70ca\u4e86\u6253\u70ca\u4e86\uff0c\u75af\u72c2\u5199bug\uff01\uff01\uff01 \u5e7f\u544a\u65f6\u95f4 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u6b22\u8fce\u5173\u6ce8\u516c\u4f17\u53f7 \u6d4b\u8bd5\u5f00\u53d1\u5165\u5751 \uff0c\u8fd8\u6709\u52a0\u7fa4\u4e00\u8d77\u8ba8\u8bba\u76f8\u5173\u95ee\u9898\u5440\uff01\u5982\u679c\u7fa4\u4e8c\u7ef4\u7801\u8fc7\u671f\u4e86\uff0c\u53ef\u4ee5\u52a0\u6211\u4e2a\u4eba\u5fae\u4fe1: wuranxu \u6211\u62c9\u4f60\u8fdb\u7fa4~ \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"7.\u6539\u9020\u6ce8\u518c\u63a5\u53e3"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%288%29%20%E4%B8%8E%E5%89%8D%E7%AB%AF%E8%81%94%E8%B0%83%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3%28part%201%29/","text":"\u4e0e\u524d\u7aef\u8054\u8c03\u6ce8\u518c/\u767b\u5f55\u63a5\u53e3(part 1) \u524d\u65b9\u9ad8\u80fd \u54b1\u4eec\u4eca\u5929\u8bb2\u7684\u5185\u5bb9\uff0c\u53ef\u80fd\u548c \u524d\u7aef \u5173\u8054\u6bd4\u8f83\u5927\uff0c\u5982\u679c\u6ca1\u6709\u7ecf\u9a8c\u7684\u540c\u5b66\uff0c\u6216\u8005\u8bf4\u53ea\u60f3\u4e13\u6ce8\u540e\u7aef\u7684\u540c\u5b66\uff0c\u4f60\u4eec\u76f4\u63a5copy\u524d\u7aef\u7684\u4ee3\u7801\u5373\u53ef\u3002 \u79c9\u7740\u6bc1\u4eba\u4e0d\u5026\u7684\u601d\u60f3\uff0c\u7b14\u8005\u6253\u7b97\u7ec6\u8bb2\u4e00\u90e8\u5206\u524d\u7aef\u7684\u5185\u5bb9\uff0c\u6bd5\u7adf\u8fd8\u6709\u4e00\u90e8\u5206\u8bfb\u8005\u662f \u524d\u540e\u517c\u4fee \u7684\u3002 \u5982\u679c\u4f60\u4eec\u4e5f\u60f3React\u76f8\u5173\u77e5\u8bc6\uff0c\u5728\u6211\u8fd9\u91cc\u53ef\u80fd\u4e0d\u80fd\u7cfb\u7edf\u5730\u5b66\u5230\uff0c\u4f46\u662f\u5728 \u6d4b\u8bd5\u5e73\u53f0(\u5e8f) \u4e2d\u4e5f\u4ecb\u7ecd\u4e86\u76f8\u5173\u7684\u524d\u7aef\u5b66\u4e60\u5efa\u8bae\u548c\u5730\u5740\uff0c\u5e0c\u671b\u5927\u5bb6\u6076\u8865\u4e00\u4e0b\uff0c\u6bd5\u7adf\u8fd9\u65b9\u9762\u4e5f\u4e0d\u7b97\u96be\u3002 \u7f16\u5199\u767b\u5f55\u63a5\u53e3 \u4e0e\u6ce8\u518c\u63a5\u53e3\u7c7b\u4f3c\uff0c\u751a\u81f3\u66f4\u52a0\u7b80\u5355\uff0c\u5148\u7406\u4e00\u4e0b\u601d\u8def: \u7528\u6237\u901a\u8fc7 \u9875\u9762 (\u8fd9\u91cc\u6682\u65f6\u8fd8\u6ca1\u6709)\u8f93\u5165 \u7528\u6237\u540d \u548c \u5bc6\u7801 \uff0c\u70b9\u51fb\u767b\u5f55\u6309\u94ae\u8fdb\u884c\u767b\u5f55\uff0c\u5982\u679c\u6210\u529f\u7684\u8bdd\u5219\u5c06\u7528\u6237\u4fe1\u606f\u653e\u5165\u8fd4\u56de\u5373\u53ef\u3002\u5982\u679c\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u4e0d\u6b63\u786e\uff0c\u5219\u7ed9\u51fa\u63d0\u793a\uff0c\u62d2\u7edd\u8ba9\u7528\u6237\u767b\u5f55\uff01 Talk is cheap, show me the code! from datetime import datetime from sqlalchemy import or_ from app.middleware.Jwt import UserToken from app.models import db from app.models.user import User from app.utils.logger import Log class UserDao (object) : log = Log( \"UserDao\" ) @staticmethod def register_user (username, name, password, email) : \"\"\" :param username: \u7528\u6237\u540d :param name: \u59d3\u540d :param password: \u5bc6\u7801 :param email: \u90ae\u7bb1 :return: \"\"\" try : users = User.query.filter(or_(User.username == username, User.email == email)).all() if users: raise Exception( \"\u7528\u6237\u540d\u6216\u90ae\u7bb1\u5df2\u5b58\u5728\" ) # \u6ce8\u518c\u7684\u65f6\u5019\u7ed9\u5bc6\u7801\u52a0\u76d0 pwd = UserToken.add_salt(password) user = User(username, name, pwd, email) db.session.add(user) db.session.commit() except Exception as e: UserDao.log.error( f\"\u7528\u6237\u6ce8\u518c\u5931\u8d25: {str(e)} \" ) return str(e) return None @staticmethod def login (username, password) : try : pwd = UserToken.add_salt(password) # \u67e5\u8be2\u7528\u6237\u540d/\u5bc6\u7801\u5339\u914d\u4e14\u6ca1\u6709\u88ab\u5220\u9664\u7684\u7528\u6237 user = User.query.filter_by(username=username, password=pwd, deleted_at= None ).first() if user is None : return None , \"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\" # \u66f4\u65b0\u7528\u6237\u7684\u6700\u540e\u767b\u5f55\u65f6\u95f4 user.last_login_at = datetime.now() db.session.commit() return user, None except Exception as e: UserDao.log.error( f\"\u7528\u6237 {username} \u767b\u5f55\u5931\u8d25: {str(e)} \" ) return None , str(e) \u7b80\u5355\u89e3\u91ca\u4e00\u4e0b\uff0c\u6211\u4eec\u8fd9\u8fb9\u65b0\u5efa\u4e86\u4e00\u4e2alogin\u7684\u65b9\u6cd5\uff0c\u63a5\u53d7\u53c2\u6570\u662f username \u548c password \uff0c\u63a5\u7740\u6211\u4eec\u901a\u8fc7orm\u7b5b\u9009\u51fa\u7b2c\u4e00\u6761username\u4e0epassword\u5339\u914d\u4e14\u6ca1\u6709\u88ab\u5220\u9664\u7684\u7528\u6237\u3002 \u6ce8\u610f: \u5982\u679c\u8fd9\u91cc\u6ca1\u6709\u8fd9\u4e2a\u7528\u6237\u7684\u8bdd\uff0cuser\u53d8\u91cf\u4f1a\u662fNone\uff0c\u6240\u4ee5\u6211\u91c7\u7528\u4e86\u5224\u65adNone\u7684\u65b9\u5f0f \u6700\u540e\u6211\u4eec\u628a\u8be5\u7528\u6237\u7684 \u6700\u540e\u767b\u5f55\u65f6\u95f4 \u6539\u6210\u4e86\u5f53\u524d\u65f6\u95f4\u3002\u7136\u540e\u63d0\u4ea4\u5230\u4e86orm\u7684session\uff0c\u8fd9\u53e5\u8bdd\u7b49\u540c\u4e8e\u6267\u884csql\u3002 \u601d\u8003 \u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u63a5\u53e3\u91cc\u9762\uff0c\u6ce8\u518c\u5b8c\u7528\u6237\u4ee5\u540e\u54c8\uff0c\u662f \u6ca1\u6709\u8fd4\u56deUser\u5b9e\u4f8b\u4fe1\u606f \u7684\uff0c\u4f46\u662f\u8fd9\u4e2a\u63a5\u53e3\u4e0d\u540c\uff0c\u7528\u6237\u767b\u5f55\u4ee5\u540e\uff0c\u9700\u8981\u62ff\u5230\u7528\u6237\u7684\u4fe1\u606f\u4ee5\u53catoken\u7ed9\u524d\u7aef\u5904\u7406\u3002 \u4f46\u662f\u6211\u4eec\u7684\u7528\u6237\u5b9e\u4f8b\u5e76\u4e0d\u662f\u4e00\u4e2a JSON \u5bf9\u8c61\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u4e3a\u5b83\u505a\u4e00\u4e9b\u5904\u7406\u3002 \u63a5\u7740\u6211\u4eec\u7f16\u5199pity/handler/factory.py\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u8f6c\u6362orm\u5bf9\u8c61\u4e3a dict \u3002 from datetime import datetime class ResponseFactory (object) : @staticmethod def model_to_dict (obj, *ignore: str) : data = dict() for c in obj.__table__.columns: if c.name in ignore: # \u5982\u679c\u5b57\u6bb5\u5ffd\u7565, \u5219\u4e0d\u8fdb\u884c\u8f6c\u6362 continue val = getattr(obj, c.name) if isinstance(val, datetime): data[c.name] = val.strftime( \"%Y-%m-%d %H:%M:%S\" ) else : data[c.name] = val return data @staticmethod def model_to_list (data: list, *ignore: str) : return [ResponseFactory.model_to_dict(x, *ignore) for x in data] \u89e3\u91ca\u4e00\u4e0b2\u4e2a\u65b9\u6cd5\uff0c\u7b2c\u4e00\u4e2a\u662f\u5c06User\u6b64\u7c7b\u5b9e\u4f8b\u8f6c\u6362\u4e3adict\u3002\u7531\u4e8eorm\u5b9e\u4f8b\u90fd\u7ee7\u627f\u4e86 db.Model \u7c7b\uff0c\u6240\u4ee5\u4ed6\u4eec\u90fd\u6709__table__\u5c5e\u6027\uff0c\u4e5f\u5c31\u6709\u4e86\u76f8\u5173\u5b57\u6bb5\u7684\u4fe1\u606f\u3002 ignore\u53c2\u6570\u662f\u4e00\u4e2a\u53ef\u53d8\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u5f53\u6211\u4eec\u9047\u5230\u9700\u8981\u5ffd\u7565\u6389\u7684\u5b57\u6bb5\u65f6\uff0c\u53ef\u4ee5\u6d3e\u4e0a\u7528\u573a\u3002 \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u7b14\u8005\u9488\u5bf9datetime\u7c7b\u5bf9\u8c61\u505a\u4e86\u7279\u6b8a\u5904\u7406\uff0c\u8fd9\u662f\u56e0\u4e3aJSON\u4e2d\u6ca1\u6709\u5bf9\u5e94\u7684datetime\u683c\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u4ed6\u4e5f\u8fdb\u884c\u8f6c\u6362\u3002 \u5269\u4e0b\u7684\u5b57\u6bb5\uff0c\u76f4\u63a5\u901a\u8fc7set key value\u7684\u65b9\u5f0f\u8d4b\u503c\u7ed9 data \u5b57\u5178\u5373\u53ef\u3002 model_to_list \u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u5c5e\u4e8e\u4e00\u4e2a\u5217\u8868\u751f\u6210\u5f0f\uff0c\u5bf9\u6bcf\u6761orm\u5b9e\u4f8b\u90fd\u8fdb\u884c\u4e86\u8f6c\u6362\uff0c\u6700\u7ec8\u8fd4\u56de\u4e00\u4e2a list(orm object) \u7f16\u5199route\u65b9\u6cd5 \u6700\u540e\u6211\u4eec\u5c31\u9700\u8981\u7f16\u5199\u8def\u7531\u65b9\u6cd5\u4e86\uff0c\u5728pity/controller/auth/user.py\u65b0\u589e\u5982\u4e0b\u65b9\u6cd5: @auth.route(\"/login\", methods=['POST']) def login () : data = request.get_json() username, password = data.get( \"username\" ), data.get( \"password\" ) if not username or not password: return jsonify(dict(code= 101 , msg= \"\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\" )) user, err = UserDao.login(username, password) if err is not None : return jsonify(dict(code= 110 , msg=err)) user = ResponseFactory.model_to_dict(user, \"password\" ) token = UserToken.get_token(user) if err is not None : return jsonify(dict(code= 110 , msg=err)) return jsonify(dict(code= 0 , msg= \"\u767b\u5f55\u6210\u529f\" , data=dict(token=token, user=user))) \u8fd9\u8fb9\u8fd8\u662f\u5148\u5224\u65ad\u4e86username\u548cpassword\u662f\u5426\u4e3a\u7a7a\u7684\u60c5\u51b5\uff0c\u5176\u6b21\u8c03\u7528\u4e86 UserDao \u7684 login \u65b9\u6cd5\uff0c\u8fd4\u56deuser\u548cerr\u4fe1\u606f\u3002 \u8fd9\u91cc\u8fd8\u6709\u4e00\u4e2a\u7ec6\u8282\u5c31\u662f\uff0c\u6211\u628a\u7528\u6237\u7684password\u7ed9\u9690\u85cf\u4e86 user = ResponseFactory.model_to_dict(user, \"password\")` \u63a5\u7740\u901a\u8fc7UserToken.get_token\u6210\u529f\u5c06\u5bf9\u8c61\u8f6c\u6362\u6210token\uff0c\u62ff\u5230token\u540e\u8fd4\u56de\u4e86\u8fd9\u6837\u7684\u5bf9\u8c61: { \"code\" : 0 , \"data\" : { \"user\" : {}, \"token\" : \"\" } } \u9a8c\u8bc1 \u4f9d\u65e7\u662f\u719f\u6089\u7684postman\u51fa\u573a\u65f6\u95f4\uff0c\u7b80\u5355\u5730\u6d4b\u8bd5\u4e00\u4e0b: \u5bc6\u7801\u9519\u8bef\u7684\u60c5\u5f62 \u5bc6\u7801\u6b63\u786e\u7684\u8fd4\u56de \u53ef\u4ee5\u770b\u5230\uff0c\u6700\u540e\u767b\u5f55\u65f6\u95f4\u4e5f\u6b63\u5e38\u663e\u793a\u4e86\uff0ctoken\u4e5f\u751f\u6210\u4e86\uff0cpassword\u4e5f\u6ca1\u6709\u66b4\u9732\u3002\u60f3\u8d77\u6296\u97f3\u4e0a\u7684\u4e00\u4e9b\u6587\u6848: \u5a5a\u671f\u5df2\u5b9a\uff0c\u7236\u6bcd\u6ee1\u610f\uff0c\u5bf9\u6211\u4f53\u8d34..... \u6709\u4e00\u79cd\u672a\u6765\u53ef\u671f\u7684\u611f\u89c9\u3002 \u6c42\u9976 \u4eca\u5929\u597d\u50cf \u5e72\u8d27 \u6bd4\u8f83\u591a\uff0c\u770b\u6765\u6ca1\u6709\u8db3\u591f\u7684\u65f6\u95f4\u7559\u7ed9\u524d\u7aef\u8054\u8c03\u4e86\uff0c\u4f1a\u5728\u4e0b\u4e00\u8282\u8865\u5145\u8d77\u6765\u5427\uff0c\u81f3\u4e8e\u540d\u5b57\u5c31\u4e5f\u4e0d\u6539\u4e86\u5427\u3002 \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"8.\u4e0e\u524d\u7aef\u8054\u8c03\u6ce8\u518c/\u767b\u5f55\u63a5\u53e3(part 1)"},{"location":"blog/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%B3%BB%E5%88%97%289%29%20%E4%B8%8E%E5%89%8D%E7%AB%AF%E8%81%94%E8%B0%83%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3%28part%202%29/","text":"\u4e0e\u524d\u7aef\u8054\u8c03\u6ce8\u518c/\u767b\u5f55\u63a5\u53e3(part 2) \u56de\u987e \u4e0a\u7bc7\u6211\u4eec\u8bf4\u5565\u6765\u7740\uff0c\u5662\u5bf9\u8bf4\u8981\u8ddf \u524d\u7aef\u8054\u8c03 \u6765\u7740\u3002\u8fd9\u671f\u5462\uff0c\u54b1\u4eec\u5c31\u5f00\u59cb\u7740\u624b\u5199\u8fd9\u5757\u5185\u5bb9\u3002 \u8fd9\u91cc\u5982\u679c\u524d\u7aef\u4e0d\u592a\u64c5\u957f\u7684\u5462\uff0c\u4ee3\u7801\u4f60\u5c31\u522b\u4ed4\u7ec6\u770b\u4e86\uff0c\u56e0\u4e3a\u4f60\u80af\u5b9a\u4e5f\u4e0d\u592a\u7406\u89e3(\u867d\u7136\u6211\u8fd8\u662f\u4f1a\u8bb2\u8bb2)\u3002 \u4f60\u53ea\u9700\u8981\u642c\u4e2a\u5c0f\u677f\u51f3\uff0c\u770b\u770b\u5177\u4f53\u89e3\u51b3\u4e86\u54ea\u4e9b\u95ee\u9898\u5c31\u884c\uff0c\u4e0d\u9700\u8981\u60f3\u7740\u600e\u4e48\u53bb\u5199\u524d\u7aef\u4ee3\u7801\uff0c\u76f4\u63a5copy\u4e00\u4e0b\u5c31\u5b8c\u4e8b\u4e86\uff01\uff08\u597d\u5bb6\u4f19\uff0c\u6211\u76f4\u547c\u597d\u5bb6\u4f19\uff01\uff09 \u524d\u7aefIDE\u914d\u7f6e \u8fd9\u91cc\u6211\u63a8\u8350 Webstorm \uff0c\u81f3\u4e8evscode\u672c\u4eba\u786e\u5b9e\u4e0d\u592a\u611f\u5192\uff0c\u867d\u7136\u4f1a\u8f7b\u91cf\u7ea7\u4e00\u70b9\u3002(\u6211\u5c31\u662f\u559c\u6b22jetbrains\u5168\u5bb6\u6876) \u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u53ef\u4ee5\u7528Pycharm\u4e0b\u8f7dWebstorm\u63d2\u4ef6\u8fdb\u884c\u5f00\u53d1\u3002 \u5efa\u7acb\u914d\u7f6e\u6587\u4ef6 \u9996\u5148\u6211\u4eec\u7b2c\u4e00\u6b65\u5148\u5efa\u7acb\u914d\u7f6e\u6587\u4ef6: pityWeb\\src\\consts\\config.js export const CONFIG = { URL : 'http://localhost:7777' , ROLE : { 0 : 'user' , 1 : 'admin' , 2 : 'superAdmin' } } \u5b58\u50a8\u6211\u4eec\u7684\u540e\u7aef\u5730\u5740\u548c\u7528\u6237\u89d2\u8272\u4fe1\u606f\u3002 \u67e5\u770bAntd pro\u7684\u767b\u5f55model(pityWeb\\src\\models\\login.js) \u53ef\u4ee5\u770b\u5230\u9ed8\u8ba4\u91c7\u7528\u7684fakeAccountLogin\u65b9\u6cd5(\u8fd9\u91cc\u88ab\u6211\u6ce8\u91ca\u6389\u4e86)\uff0c\u6211\u4eec\u627e\u5230\u4ed6: \u6539\u9020\u767b\u5f55\u63a5\u53e3(pityWeb\\src\\services\\login.js) \u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u7531\u4e8eantd pro\u7ed9\u6211\u4eec\u5c01\u88c5\u597d\u4e86 \u57fa\u672c\u7684Request\u65b9\u6cd5 \uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6309\u90e8\u5c31\u73ed\uff0c\u4f9d\u846b\u82a6\u753b\u74e2\u5199\u51fa\u8bf7\u6c42 auth/login \u7684\u7a0b\u5e8f\uff0c\u5b8c\u6574\u4ee3\u7801: import { CONFIG } from '@/consts/config' ; export async function login ( params ) { return request( ` ${CONFIG.URL} /auth/login` , { method : 'POST' , data : params }) } \u4fee\u6539\u7528\u6237\u7684\u767b\u5f55\u72b6\u6001 \u4ed4\u7ec6\u770bmodel\u4e2d\u7684login\u65b9\u6cd5\uff0c\u5b83\u505a\u4e862\u6b65: \u767b\u5f55\uff08mock\uff09 \u5c06\u767b\u5f55\u6210\u529f/\u5931\u8d25\u7684\u4fe1\u606f\u4f20\u5165changeLoginStatus\u65b9\u6cd5 \u6211\u4eec\u770b\u770b changeLoginStatus \u65b9\u6cd5\u505a\u4e86\u4ec0\u4e48: \u5148\u8bbe\u7f6e\u7528\u6237\u7684\u6743\u9650\uff0c\u8fd9\u91cc\u6211\u628aROLE\u5df2\u7ecf\u5e26\u5165\u8fdb\u6765 \u8bbe\u7f6e\u5f53\u524d\u72b6\u6001: ok\u4ee3\u8868\u767b\u5f55\u6210\u529f error\u4ee3\u8868\u672a\u6210\u529f\uff0c\u7531\u4e8e\u54b1\u4eec\u7528\u7684\u4e0d\u662fstatus\u72b6\u6001\u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\u6210\u529f\uff0c\u6240\u4ee5\u9700\u8981\u4fee\u6539\u4e3a\u4e09\u5143\u8868\u8fbe\u5f0f: payload.code === 0 ? 'ok': 'error' \u4e0a\u8ff0\u5177\u4f53\u8fd4\u56de\u4fe1\u606f\u53ef\u4ee5\u4ece\u4e0b\u56fe\u4e2d\u770b\u5230 \u8fd9\u91cc\u4ee3\u7801\u6211\u4eec\u8fdb\u884c\u76f8\u5e94\u8c03\u6574: changeLoginStatus(state, { payload }) { // setAuthority(payload.currentAuthority); setAuthority(CONFIG.ROLE[payload.user.role]); return { ...state, status : payload.code === 0 ? 'ok' : 'error' , type : payload.type }; }, \u6ce8\u610f\u8fd9\u91cc\u4e5f\u4ecemock\u66ff\u6362\u6210\u4e86\u771f\u5b9e\u63a5\u53e3 \u5c1d\u8bd5\u4e00\u4e0b \u63d0\u793a\u7f51\u7edc\u9519\u8bef \u522b\u614c\uff0c\u6211\u4eecF12\uff08\u6216\u8005\u53f3\u952e\u6253\u5f00\u5f00\u53d1\u8005\u5de5\u5177\uff09\u53ef\u4ee5\u770b\u5230: \u6ca1\u9519\uff0c\u6211\u4eec\u9047\u5230\u4e86 \u8de8\u57df\u95ee\u9898 \u3002 \u8de8\u57df\u95ee\u9898\u5177\u4f53\u53ef\u4ee5\u53bb\u767e\u5ea6\u4e00\u4e0b\uff0c\u8fd9\u91cc\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\uff0c\u662f\u8bf4\u6d4f\u89c8\u5668\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u5bf9\u4e8e\u524d\u540e\u7aef\u57df\u540d\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u9ed8\u8ba4\u8fdb\u884c\u62e6\u622a\uff0c\u963b\u6b62\u4f60\u4eec\u8fdb\u884c\u4ea4\u4e92\u3002\u8fd9\u591a\u89c1\u4e8e \u524d\u540e\u7aef\u5206\u79bb\u7684\u9879\u76ee \u4e2d\u51fa\u73b0\u3002 \u53ef\u4ee5\u4ece\u524d\u7aef\u4e5f\u53ef\u4ee5\u4ece\u540e\u7aef\u7684\u89d2\u5ea6\u6765\u5904\u7406\uff0c\u6211\u4eec\u4e3a\u4e86\u65b9\u4fbf\uff0c\u76f4\u63a5\u6539\u9020\u6211\u4eec\u7684 Flask \u3002 \u4f7fFlask\u652f\u6301\u8de8\u57df \u6211\u4eec\u9700\u8981\u5148\u5b89\u88c5\u4e00\u4e2a\u5305: pip3 install flask-cors \u7136\u540e\u8fdb\u884c\u5982\u4e0b\u6539\u9020: pity/app/__init__.py \u6ce8\u610f\u8fd9\u4e2a\u662f\u540e\u7aef\u7684\u9879\u76ee\u54c8\uff0c\u4e0d\u8981\u641e\u9519\u4e86\uff0c\u524d\u540e\u7aef\u5206\u79bb\u5c31\u662f\u524d\u7aef\u4e5f\u641e\u540e\u7aef\u4e5f\u641e\uff0c\u9700\u8981\u5207\u6362\u3002 from flask import Flask from flask_cors import CORS from config import Config pity = Flask(__name__) CORS(pity, supports_credentials= True ) pity.config.from_object(Config) \u8d34\u5fc3\u7684\u6211\u8fd8\u662f\u8d34\u51fa\u4e86\u6e90\u4ee3\u7801\u3002 \u518d\u6b21\u5c1d\u8bd5 \u91cd\u542f\u4e0b\u540e\u7aef\u670d\u52a1\u54e6\u8bb0\u5f97 \u8f93\u5165\u9519\u8bef\u7684\u7528\u6237\u540d\u5bc6\u7801\uff0c\u53ef\u4ee5\u770b\u5230\u767b\u5f55\u6309\u94ae\u8f6c\u4e86\u4e00\u5708\u53c8\u56de\u5230\u4e86\u539f\u70b9\u3002\u4f46\u662f\u767b\u5f55\u63a5\u53e3\u53c8\u662f\u6b63\u5e38\u54cd\u5e94\u7684: \u4ed4\u7ec6\u67e5\u770b\u767b\u5f55\u5757\u7684\u4ee3\u7801\uff0c\u539f\u6765\u662f \u6ca1\u6709\u8f93\u51fa\u9519\u8bef\u4fe1\u606f \u3002\u6211\u4eec\u7ee7\u7eed\u8fdb\u884c\u6539\u9020: \u52a0\u4e2aelse\u5373\u53ef message.error\u53ef\u4ee5\u5f39\u51fa\u9519\u8bef\u4fe1\u606f: \u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef \u76ee\u7684\u8fbe\u5230\u4e86\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u8bd5\u8bd5\u6b63\u786e\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801: \u53ef\u4ee5\u770b\u5230\u63d0\u793a\u6210\u529f\u540e\u53c8\u62a5\u9519\u4e86 \u6211\u4eec\u53bb\u627e\u5230api/currentUser\u63a5\u53e3\u7684\u8c03\u7528\u5730\u65b9: \u53ef\u4ee5\u770b\u5230\u662f\u8fd9\u4e2a\u65b9\u6cd5\u5728\u4f5c\u795f\uff0c\u56e0\u4e3aantd pro\u4f1amock\u4e00\u4e2a\u7528\u6237\uff0c\u5b83\u6709\u59d3\u540d\u7b49\u4fe1\u606f\uff0c\u4f46\u8fd9\u4e9b\u6211\u4eec\u9700\u8981\u771f\u5b9e\u7684\uff0c\u6240\u4ee5\u9700\u8981\u7ed9\u4ed6\u8fdb\u884c\u4e00\u6b21\u6539\u9020: \u6539\u9020\u83b7\u53d6\u5f53\u524d\u7528\u6237\u4fe1\u606f \u8fd8\u8bb0\u5f97\u6211\u4eec\u7684\u767b\u5f55\u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u5417\uff1f\u6211\u4eec\u6bcf\u6b21\u767b\u5f55\u540e\uff0c\u628a\u5b83\u5199\u5165\u6d4f\u89c8\u5668\u7f13\u5b58\u4e2d\uff0c\u8fd9\u6837\u5f53\u7528\u6237\u767b\u5f55\u4ee5\u540e\uff0c\u6211\u4eec\u4ece\u6d4f\u89c8\u5668\u7f13\u5b58\u53d6\u51fa\u7528\u6237\u4fe1\u606f\u5373\u53ef\u3002 \u5148\u5c06\u7528\u6237\u4fe1\u606f\u548ctoken\u8bbe\u7f6e\u5230\u7f13\u5b58 localStorage\u53ef\u4ee5\u64cd\u4f5c\u6d4f\u89c8\u5668\u7f13\u5b58\uff0c\u4f46\u662f\u53ea\u63a5\u53d7string\u548cstring\u7684\u952e\u503c\u5bf9\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u628auser\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3astring\u3002 \u4ece\u7f13\u5b58\u4e2d\u53d6\u51fa\u6570\u636e \u8bb0\u5f97\u6570\u636e\u9700\u8981\u53cd\u5e8f\u5217\u5316 \u4fee\u6539\u767b\u5f55\u5224\u65ad\u6761\u4ef6\uff0c\u8fd9\u4e2a\u5751\u627e\u4e86\u6211\u5f88\u4e45\uff0c\u56e0\u4e3a\u54b1\u4eec\u7684\u5b57\u6bb5\u662fid\u4e0d\u662fuserId\uff0c\u6240\u4ee5\u6211\u521a\u624d\u5361\u5728\u4e00\u76f4\u767b\u5f55\u4e86\u81ea\u52a8\u88ab\u9000\u51fa: \u4fdd\u5b58\u540e\u518d\u6b21\u5c1d\u8bd5 \u4e00\u6b21\u70b9\u4eae \u597d\u4e86\uff0c\u4eca\u5929\u7684\u5185\u5bb9\u5c31\u5230\u8fd9\u4e86\u3002\u524d\u7aef\u4ee3\u7801\u5df2\u4e0a\u4f20~ \u540e\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pity \u524d\u7aef\u4ee3\u7801\u5730\u5740: https://github.com/wuranxu/pityWeb \u89c9\u5f97\u6709\u7528\u7684\u8bdd\u53ef\u4ee5\u5e2e\u5fd9\u70b9\u4e2aStar\u54e6QAQ","title":"9.\u4e0e\u524d\u7aef\u8054\u8c03\u6ce8\u518c/\u767b\u5f55\u63a5\u53e3(part 2)"},{"location":"introduction/%E4%BB%8B%E7%BB%8D/","text":"\u4f5c\u8005\u4ecb\u7ecd \u5927\u5bb6\u597d\uff0c\u6211\u662f\u7c73\u6d1b\uff0c\u4e00\u4e2a\u4e50\u4e8e\u5206\u4eab\uff0c\u559c\u6b22\u94bb\u7814\u6280\u672f\u7684\u6d4b\u8bd5\u5f00\u53d1\u5de5\u7a0b\u5e08\uff0c\u76ee\u524d\u5c31\u804c\u4e8e\u4e0a\u6d77\u67d0\u4e09\u7ebf\u4e92\u8054\u7f51\u516c\u53f8\u3002\u559c\u6b22\u5b9e\u51b58\uff0c\u4ed9\u5251\uff0clol\u7b49\u7b49\uff0c\u6807\u51c6\u768490\u540e\u3002 \u4e2a\u4eba\u6280\u672f\u516c\u4f17\u53f7: \u6d4b\u8bd5\u5f00\u53d1\u5751\u8d27 \uff0c\u6b22\u8fce\u5927\u5bb6\u5173\u6ce8\u6211\uff0c\u638c\u63e1\u6700\u65b0\u6d4b\u8bd5\u5f00\u53d1\u77e5\u8bc6\u3002 \u5173\u4e8ePity\u5e73\u53f0 pity\u662f\u4e00\u6b3e\u4e13\u6ce8\u4e8eapi\u81ea\u52a8\u5316\u7684\u5de5\u5177\uff0c\u91c7\u7528 Python + FastApi + React \u5f00\u53d1\uff0c\u76ee\u524d\u8fd8\u4e0d\u80fd\u4f5c\u4e3a\u751f\u4ea7\u7ea7\u522b\u7684\u5de5\u5177\uff0c\u4f5c\u8005\u6b63\u5728\u52aa\u529b\u4e4b\u4e2d\u3002 \u5e73\u53f0\u521d\u5fc3 \u867d\u8bf4\u5404\u5927\u516c\u53f8\u90fd\u6709\u81ea\u5df1\u7684\u63a5\u53e3\u6d4b\u8bd5\u5e73\u53f0\uff0c\u5e76\u4e14\u505a\u7684\u80af\u5b9a\u6bd4\u6211\u7684\u5f3a\u3002\u4f46\u662f\u8fd8\u662f\u6709 \u5f88\u591a\u516c\u53f8 \uff0c\u5e76\u6ca1\u6709\u8fd9\u6837\u7684\u6761\u4ef6\u53bb\u6295\u5165\u4eba\u529b\u4e13\u804c\u5f00\u53d1\u63a5\u53e3\u6d4b\u8bd5\u5e73\u53f0\u3002 \u535a\u4e3b\u6211\u572818\u5e74\u7684\u65f6\u5019\u63a5\u89e6\u5230\u4e86Yapi\u8fd9\u6b3e\u63a5\u53e3\u6587\u6863\u7ba1\u7406\u5de5\u5177\uff0c\u90a3\u662f\u53bb\u54ea\u513f\u56e2\u961f\u5f00\u53d1\u7684\uff0c\u4f46\u73b0\u5728\u5df2\u7ecf\u8fde\u5b98\u7f51\u90fd\u627e\u4e0d\u5230\u4e86\uff0c\u4ec5\u4ec5\u53ea\u7559\u4e0b\u4e00\u4e2agithub.io\u7684\u5730\u5740\uff0c\u8ba9\u4eba\u53f9\u606f\u3002 \u626f\u8fdc\u4e86\uff0c\u6211\u770b\u5230\u4ed6\u4eec\u5927\u524d\u7aef\u56e2\u961f\u5f00\u6e90\u4e86\u5982\u6b64\u4e00\u6b3e\u7cbe\u7f8e\u7684\u5de5\u5177\uff0c\u5185\u5fc3\u4e5f\u662f\u6fc0\u52a8\u4e07\u5206\u3002 \u4eba\u6d3b\u4e00\u8f88\u5b50\uff0c\u5e76\u4e0d\u957f\u4e45\uff0c\u603b\u5f97\u505a\u4e9b\u6709\u610f\u4e49\u7684\u4e8b\u60c5\u3002\u867d\u7136\u5f00\u6e90\u8fd9\u4ef6\u4e8b\u60c5\u57fa\u672c\u4e0a\u6ca1\u6709\u4ec0\u4e48\u6536\u76ca\u53ef\u8a00\uff0c\u4f46\u603b\u5f97\u6709\u4eba\u505a\uff0c\u4e16\u754c\u624d\u4f1a \u66f4\u7f8e\u597d \u662f\u4e0d\uff1f \u6240\u4ee5\u6211\u6253\u7b97\u5236\u4f5c\u8fd9\u6837\u4e00\u6b3e\u5de5\u5177\uff0c\u9762\u5411\u7684\u5c31\u662f\u4e2d\u5c0f\u578b\u516c\u53f8\uff0c\u4ed6\u4eec\u6ca1\u6709\u90a3\u4e48\u591a\u65f6\u95f4/\u4eba\u529b\u6210\u672c\uff0c\u751a\u81f3\u662f\u6d4b\u8bd5\u8d44\u6e90\u8f83\u4e3a\u532e\u4e4f\uff0c\u90a3\u4e48\u5982\u679c\u4f60\u6765\u5230\u4e86\u8fd9\u513f\uff0c\u6211\u60f3\u8fd9\u6b3e\u5de5\u5177\u53ef\u4ee5\u7ed9\u4f60\u4eec\u5e26\u6765\u5e2e\u52a9\uff01\u5982\u679c\u662f\u6709\u4e00\u5b9a\u7684\u7ecf\u9a8c\u7684Python\u6d4b\u8bd5\u5f00\u53d1\uff0c\u8fd9\u6b3e\u5de5\u5177\u4e5f\u53ef\u4ee5\u7ed9\u4f60\u5e26\u6765\u4e00\u5b9a\u7684\u501f\u9274\u4f5c\u7528\u3002 \u843d\u5730\u6548\u679c \u53ef\u80fd\u6709\u4eba\u4f1a\u6000\u7591\u9879\u76ee\u662f\u5426\u80fd\u771f\u6b63\u8fd0\u7528\u5230\u751f\u4ea7\u7cfb\u7edf\u91cc\uff0c\u8fd9\u6b3e\u5de5\u5177\u5176\u5b9e\u662f\u6211\u5728\u67d0\u5927\u578b\u5171\u4eab\u5355\u8f66\u516c\u53f8\u5b9e\u8df52\u5e74\u591a\u7684\u4e00\u6b3e\u5de5\u5177\u3002\u4e4b\u524d\u662fgolang\u5f00\u53d1\uff0c\u5982\u4eca\u6211\u79bb\u5f00\u90a3\u5bb6\u516c\u53f8\uff0c\u6253\u7b97\u4fdd\u7559\u539f\u672c\u529f\u80fd\u7684\u57fa\u7840\u4e4b\u4e0a\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u5e76\u65b0\u589e\u66f4\u591a\u4e30\u5bcc\u7684\u7279\u6027\u3002\u6240\u4ee5\u5927\u5bb6\u53ef\u4ee5\u653e\u5fc3\uff0c\u5b83\u7edd\u5bf9\u662f\u4e00\u6b3e\u80fd\u65b9\u4fbf\u89e3\u51b3\u4f60api\u81ea\u52a8\u5316\u6d4b\u8bd5\u7684\u5229\u5668\u3002 \u5df2\u6709\u529f\u80fd \u5b8c\u5584\u7684\u7528\u6237\u767b\u5f55/\u6ce8\u518c\u673a\u5236\uff0c\u63d0\u4f9b\u7b2c\u4e09\u65b9(github)\u767b\u5f55 \u5b8c\u5584\u7684\u9879\u76ee\u7ba1\u7406\u673a\u5236 \u7ed3\u5408FastApi\uff0c\u5229\u7528asyncio\u8ba9Python\u4ee3\u7801\u4e5f\u53ef\u4ee5\u8d77\u98de \u5b8c\u6574\u7684\u63a5\u53e3\u6d4b\u8bd5\u6d41\u7a0b \u5f3a\u5927\u7684\u6570\u636e\u6784\u9020\u5668, \u89e3\u51b3\u63a5\u53e3\u6570\u636e\u4f9d\u8d56\u95ee\u9898 \u5728\u7ebf\u8c03\u8bd5http\u8bf7\u6c42\uff0c\u582a\u6bd4\u7f51\u9875\u7248\u672cpostman \u5b8c\u5584\u7684\u5168\u5c40\u53d8\u91cf\u673a\u5236\uff0c\u62d2\u7eddcase\u4e2d\u7684\u6b7b\u6570\u636e \u98de\u4e00\u822c\u7684\u901f\u5ea6 \u5f85\u5f00\u53d1\u7684\u529f\u80fd app\u7ba1\u7406\u529f\u80fd\uff0c\u652f\u6301app\u7684\u5bfc\u5165\u548c\u5bfc\u51fa \u4ee3\u7801\u8986\u76d6\u7387\u589e\u91cf/\u5168\u91cf\u7edf\u8ba1\u529f\u80fd \u5b9a\u65f6\u6784\u5efa\u6d4b\u8bd5\u7528\u4f8b \u5728\u7ebf\u6570\u636e\u5e93ide\uff0c\u6570\u636e\u5e93\u7ba1\u7406\u529f\u80fd \u5728\u7ebfredis\u8bf7\u6c42 \u6d4b\u8bd5\u8ba1\u5212/\u96c6\u5408 \u7cbe\u7f8e\u7684\u6d4b\u8bd5\u62a5\u544a\u5c55\u793a\u9875\u9762 \u5fae\u670d\u52a1\u5316 \u6570\u636e\u5de5\u5382\uff0c\u5f3a\u5927\u7684\u9020\u6570\u529f\u80fd \u7528\u4f8b\u652f\u6301har\uff0cjmx\u7b49\u683c\u5f0f\u5bfc\u5165 CI/CD\uff0c\u7c7bpipeline\u529f\u80fd \u63a8\u9001\u529f\u80fd\uff0c\u652f\u6301\u9489\u9489/\u4f01\u4fe1\u63a8\u9001 \u652f\u6301dubbo/grpc \u6253\u901ayapi \u7b49\u7b49\u7b49\u7b49","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"introduction/%E4%BB%8B%E7%BB%8D/#_1","text":"\u5b8c\u5584\u7684\u7528\u6237\u767b\u5f55/\u6ce8\u518c\u673a\u5236\uff0c\u63d0\u4f9b\u7b2c\u4e09\u65b9(github)\u767b\u5f55 \u5b8c\u5584\u7684\u9879\u76ee\u7ba1\u7406\u673a\u5236 \u7ed3\u5408FastApi\uff0c\u5229\u7528asyncio\u8ba9Python\u4ee3\u7801\u4e5f\u53ef\u4ee5\u8d77\u98de \u5b8c\u6574\u7684\u63a5\u53e3\u6d4b\u8bd5\u6d41\u7a0b \u5f3a\u5927\u7684\u6570\u636e\u6784\u9020\u5668, \u89e3\u51b3\u63a5\u53e3\u6570\u636e\u4f9d\u8d56\u95ee\u9898 \u5728\u7ebf\u8c03\u8bd5http\u8bf7\u6c42\uff0c\u582a\u6bd4\u7f51\u9875\u7248\u672cpostman \u5b8c\u5584\u7684\u5168\u5c40\u53d8\u91cf\u673a\u5236\uff0c\u62d2\u7eddcase\u4e2d\u7684\u6b7b\u6570\u636e \u98de\u4e00\u822c\u7684\u901f\u5ea6 \u5f85\u5f00\u53d1\u7684\u529f\u80fd app\u7ba1\u7406\u529f\u80fd\uff0c\u652f\u6301app\u7684\u5bfc\u5165\u548c\u5bfc\u51fa \u4ee3\u7801\u8986\u76d6\u7387\u589e\u91cf/\u5168\u91cf\u7edf\u8ba1\u529f\u80fd \u5b9a\u65f6\u6784\u5efa\u6d4b\u8bd5\u7528\u4f8b \u5728\u7ebf\u6570\u636e\u5e93ide\uff0c\u6570\u636e\u5e93\u7ba1\u7406\u529f\u80fd \u5728\u7ebfredis\u8bf7\u6c42 \u6d4b\u8bd5\u8ba1\u5212/\u96c6\u5408 \u7cbe\u7f8e\u7684\u6d4b\u8bd5\u62a5\u544a\u5c55\u793a\u9875\u9762 \u5fae\u670d\u52a1\u5316 \u6570\u636e\u5de5\u5382\uff0c\u5f3a\u5927\u7684\u9020\u6570\u529f\u80fd \u7528\u4f8b\u652f\u6301har\uff0cjmx\u7b49\u683c\u5f0f\u5bfc\u5165 CI/CD\uff0c\u7c7bpipeline\u529f\u80fd \u63a8\u9001\u529f\u80fd\uff0c\u652f\u6301\u9489\u9489/\u4f01\u4fe1\u63a8\u9001 \u652f\u6301dubbo/grpc \u6253\u901ayapi \u7b49\u7b49\u7b49\u7b49","title":"\u5df2\u6709\u529f\u80fd"}]}